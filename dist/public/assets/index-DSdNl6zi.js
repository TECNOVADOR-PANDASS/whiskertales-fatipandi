var XP=t=>{throw TypeError(t)};var XS=(t,e,n)=>e.has(t)||XP("Cannot "+n);var Re=(t,e,n)=>(XS(t,e,"read from private field"),n?n.call(t):e.get(t)),wn=(t,e,n)=>e.has(t)?XP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Yt=(t,e,n,r)=>(XS(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Yr=(t,e,n)=>(XS(t,e,"access private method"),n);var Iv=(t,e,n,r)=>({set _(i){Yt(t,e,i,n)},get _(){return Re(t,e,r)}});function $k(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function YE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yk={exports:{}},y_={},qk={exports:{}},un={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg=Symbol.for("react.element"),VH=Symbol.for("react.portal"),jH=Symbol.for("react.fragment"),HH=Symbol.for("react.strict_mode"),WH=Symbol.for("react.profiler"),GH=Symbol.for("react.provider"),XH=Symbol.for("react.context"),$H=Symbol.for("react.forward_ref"),YH=Symbol.for("react.suspense"),qH=Symbol.for("react.memo"),ZH=Symbol.for("react.lazy"),$P=Symbol.iterator;function KH(t){return t===null||typeof t!="object"?null:(t=$P&&t[$P]||t["@@iterator"],typeof t=="function"?t:null)}var Zk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kk=Object.assign,Qk={};function ih(t,e,n){this.props=t,this.context=e,this.refs=Qk,this.updater=n||Zk}ih.prototype.isReactComponent={};ih.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ih.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jk(){}Jk.prototype=ih.prototype;function qE(t,e,n){this.props=t,this.context=e,this.refs=Qk,this.updater=n||Zk}var ZE=qE.prototype=new Jk;ZE.constructor=qE;Kk(ZE,ih.prototype);ZE.isPureReactComponent=!0;var YP=Array.isArray,e3=Object.prototype.hasOwnProperty,KE={current:null},t3={key:!0,ref:!0,__self:!0,__source:!0};function n3(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)e3.call(e,r)&&!t3.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:dg,type:t,key:s,ref:o,props:i,_owner:KE.current}}function QH(t,e){return{$$typeof:dg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function QE(t){return typeof t=="object"&&t!==null&&t.$$typeof===dg}function JH(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qP=/\/+/g;function $S(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JH(""+t.key):e.toString(36)}function n0(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dg:case VH:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+$S(o,0):r,YP(i)?(n="",t!=null&&(n=t.replace(qP,"$&/")+"/"),n0(i,e,n,"",function(c){return c})):i!=null&&(QE(i)&&(i=QH(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qP,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",YP(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+$S(s,a);o+=n0(s,e,n,l,i)}else if(l=KH(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+$S(s,a++),o+=n0(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lv(t,e,n){if(t==null)return t;var r=[],i=0;return n0(t,r,"","",function(s){return e.call(n,s,i++)}),r}function eW(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ti={current:null},r0={transition:null},tW={ReactCurrentDispatcher:Ti,ReactCurrentBatchConfig:r0,ReactCurrentOwner:KE};function r3(){throw Error("act(...) is not supported in production builds of React.")}un.Children={map:Lv,forEach:function(t,e,n){Lv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lv(t,function(){e++}),e},toArray:function(t){return Lv(t,function(e){return e})||[]},only:function(t){if(!QE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};un.Component=ih;un.Fragment=jH;un.Profiler=WH;un.PureComponent=qE;un.StrictMode=HH;un.Suspense=YH;un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tW;un.act=r3;un.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=KE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)e3.call(e,l)&&!t3.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:dg,type:t.type,key:i,ref:s,props:r,_owner:o}};un.createContext=function(t){return t={$$typeof:XH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GH,_context:t},t.Consumer=t};un.createElement=n3;un.createFactory=function(t){var e=n3.bind(null,t);return e.type=t,e};un.createRef=function(){return{current:null}};un.forwardRef=function(t){return{$$typeof:$H,render:t}};un.isValidElement=QE;un.lazy=function(t){return{$$typeof:ZH,_payload:{_status:-1,_result:t},_init:eW}};un.memo=function(t,e){return{$$typeof:qH,type:t,compare:e===void 0?null:e}};un.startTransition=function(t){var e=r0.transition;r0.transition={};try{t()}finally{r0.transition=e}};un.unstable_act=r3;un.useCallback=function(t,e){return Ti.current.useCallback(t,e)};un.useContext=function(t){return Ti.current.useContext(t)};un.useDebugValue=function(){};un.useDeferredValue=function(t){return Ti.current.useDeferredValue(t)};un.useEffect=function(t,e){return Ti.current.useEffect(t,e)};un.useId=function(){return Ti.current.useId()};un.useImperativeHandle=function(t,e,n){return Ti.current.useImperativeHandle(t,e,n)};un.useInsertionEffect=function(t,e){return Ti.current.useInsertionEffect(t,e)};un.useLayoutEffect=function(t,e){return Ti.current.useLayoutEffect(t,e)};un.useMemo=function(t,e){return Ti.current.useMemo(t,e)};un.useReducer=function(t,e,n){return Ti.current.useReducer(t,e,n)};un.useRef=function(t){return Ti.current.useRef(t)};un.useState=function(t){return Ti.current.useState(t)};un.useSyncExternalStore=function(t,e,n){return Ti.current.useSyncExternalStore(t,e,n)};un.useTransition=function(){return Ti.current.useTransition()};un.version="18.3.1";qk.exports=un;var T=qk.exports;const sn=YE(T),i3=$k({__proto__:null,default:sn},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nW=T,rW=Symbol.for("react.element"),iW=Symbol.for("react.fragment"),sW=Object.prototype.hasOwnProperty,oW=nW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aW={key:!0,ref:!0,__self:!0,__source:!0};function s3(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sW.call(e,r)&&!aW.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rW,type:t,key:s,ref:o,props:i,_owner:oW.current}}y_.Fragment=iW;y_.jsx=s3;y_.jsxs=s3;Yk.exports=y_;var b=Yk.exports,o3={exports:{}},cs={},a3={exports:{}},l3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,W){var Y=O.length;O.push(W);e:for(;0<Y;){var re=Y-1>>>1,we=O[re];if(0<i(we,W))O[re]=W,O[Y]=we,Y=re;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],Y=O.pop();if(Y!==W){O[0]=Y;e:for(var re=0,we=O.length,Ue=we>>>1;re<Ue;){var de=2*(re+1)-1,Se=O[de],Ie=de+1,he=O[Ie];if(0>i(Se,Y))Ie<we&&0>i(he,Se)?(O[re]=he,O[Ie]=Y,re=Ie):(O[re]=Se,O[de]=Y,re=de);else if(Ie<we&&0>i(he,Y))O[re]=he,O[Ie]=Y,re=Ie;else break e}}return W}function i(O,W){var Y=O.sortIndex-W.sortIndex;return Y!==0?Y:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=O)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(O){if(y=!1,S(O),!v)if(n(l)!==null)v=!0,K(R);else{var W=n(c);W!==null&&ne(E,W.startTime-O)}}function R(O,W){v=!1,y&&(y=!1,g(D),D=-1),m=!0;var Y=p;try{for(S(W),h=n(l);h!==null&&(!(h.expirationTime>W)||O&&!F());){var re=h.callback;if(typeof re=="function"){h.callback=null,p=h.priorityLevel;var we=re(h.expirationTime<=W);W=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&r(l),S(W)}else r(l);h=n(l)}if(h!==null)var Ue=!0;else{var de=n(c);de!==null&&ne(E,de.startTime-W),Ue=!1}return Ue}finally{h=null,p=Y,m=!1}}var I=!1,C=null,D=-1,L=5,P=-1;function F(){return!(t.unstable_now()-P<L)}function z(){if(C!==null){var O=t.unstable_now();P=O;var W=!0;try{W=C(!0,O)}finally{W?H():(I=!1,C=null)}}else I=!1}var H;if(typeof _=="function")H=function(){_(z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,se=q.port2;q.port1.onmessage=z,H=function(){se.postMessage(null)}}else H=function(){x(z,0)};function K(O){C=O,I||(I=!0,H())}function ne(O,W){D=x(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,K(R))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var Y=p;p=W;try{return O()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=p;p=O;try{return W()}finally{p=Y}},t.unstable_scheduleCallback=function(O,W,Y){var re=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,O){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Y+we,O={id:u++,callback:W,priorityLevel:O,startTime:Y,expirationTime:we,sortIndex:-1},Y>re?(O.sortIndex=Y,e(c,O),n(l)===null&&O===n(c)&&(y?(g(D),D=-1):y=!0,ne(E,Y-re))):(O.sortIndex=we,e(l,O),v||m||(v=!0,K(R))),O},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(O){var W=p;return function(){var Y=p;p=W;try{return O.apply(this,arguments)}finally{p=Y}}}})(l3);a3.exports=l3;var lW=a3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cW=T,os=lW;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c3=new Set,rm={};function Hu(t,e){Ff(t,e),Ff(t+"Capture",e)}function Ff(t,e){for(rm[t]=e,t=0;t<e.length;t++)c3.add(e[t])}var Oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q1=Object.prototype.hasOwnProperty,uW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZP={},KP={};function dW(t){return q1.call(KP,t)?!0:q1.call(ZP,t)?!1:uW.test(t)?KP[t]=!0:(ZP[t]=!0,!1)}function fW(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hW(t,e,n,r){if(e===null||typeof e>"u"||fW(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ai(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hr[t]=new Ai(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hr[e]=new Ai(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hr[t]=new Ai(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hr[t]=new Ai(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hr[t]=new Ai(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hr[t]=new Ai(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hr[t]=new Ai(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hr[t]=new Ai(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hr[t]=new Ai(t,5,!1,t.toLowerCase(),null,!1,!1)});var JE=/[\-:]([a-z])/g;function eT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(JE,eT);Hr[e]=new Ai(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(JE,eT);Hr[e]=new Ai(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(JE,eT);Hr[e]=new Ai(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hr[t]=new Ai(t,1,!1,t.toLowerCase(),null,!1,!1)});Hr.xlinkHref=new Ai("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hr[t]=new Ai(t,1,!1,t.toLowerCase(),null,!0,!0)});function tT(t,e,n,r){var i=Hr.hasOwnProperty(e)?Hr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hW(e,n,i,r)&&(n=null),r||i===null?dW(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Za=cW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dv=Symbol.for("react.element"),Wd=Symbol.for("react.portal"),Gd=Symbol.for("react.fragment"),nT=Symbol.for("react.strict_mode"),Z1=Symbol.for("react.profiler"),u3=Symbol.for("react.provider"),d3=Symbol.for("react.context"),rT=Symbol.for("react.forward_ref"),K1=Symbol.for("react.suspense"),Q1=Symbol.for("react.suspense_list"),iT=Symbol.for("react.memo"),Ml=Symbol.for("react.lazy"),f3=Symbol.for("react.offscreen"),QP=Symbol.iterator;function Bh(t){return t===null||typeof t!="object"?null:(t=QP&&t[QP]||t["@@iterator"],typeof t=="function"?t:null)}var qn=Object.assign,YS;function mp(t){if(YS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);YS=e&&e[1]||""}return`
`+YS+t}var qS=!1;function ZS(t,e){if(!t||qS)return"";qS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mp(t):""}function pW(t){switch(t.tag){case 5:return mp(t.type);case 16:return mp("Lazy");case 13:return mp("Suspense");case 19:return mp("SuspenseList");case 0:case 2:case 15:return t=ZS(t.type,!1),t;case 11:return t=ZS(t.type.render,!1),t;case 1:return t=ZS(t.type,!0),t;default:return""}}function J1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gd:return"Fragment";case Wd:return"Portal";case Z1:return"Profiler";case nT:return"StrictMode";case K1:return"Suspense";case Q1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d3:return(t.displayName||"Context")+".Consumer";case u3:return(t._context.displayName||"Context")+".Provider";case rT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iT:return e=t.displayName||null,e!==null?e:J1(t.type)||"Memo";case Ml:e=t._payload,t=t._init;try{return J1(t(e))}catch{}}return null}function mW(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J1(e);case 8:return e===nT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ql(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h3(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gW(t){var e=h3(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kv(t){t._valueTracker||(t._valueTracker=gW(t))}function p3(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=h3(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function T0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eM(t,e){var n=e.checked;return qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function JP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ql(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m3(t,e){e=e.checked,e!=null&&tT(t,"checked",e,!1)}function tM(t,e){m3(t,e);var n=ql(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nM(t,e.type,n):e.hasOwnProperty("defaultValue")&&nM(t,e.type,ql(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nM(t,e,n){(e!=="number"||T0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gp=Array.isArray;function mf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ql(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rM(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return qn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(gp(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ql(n)}}function g3(t,e){var n=ql(e.value),r=ql(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function v3(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iM(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v3(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ov,y3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ov=Ov||document.createElement("div"),Ov.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ov.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function im(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Rp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vW=["Webkit","ms","Moz","O"];Object.keys(Rp).forEach(function(t){vW.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rp[e]=Rp[t]})});function x3(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Rp.hasOwnProperty(t)&&Rp[t]?(""+e).trim():e+"px"}function _3(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=x3(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yW=qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sM(t,e){if(e){if(yW[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function oM(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aM=null;function sT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lM=null,gf=null,vf=null;function rN(t){if(t=pg(t)){if(typeof lM!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=b_(e),lM(t.stateNode,t.type,e))}}function w3(t){gf?vf?vf.push(t):vf=[t]:gf=t}function S3(){if(gf){var t=gf,e=vf;if(vf=gf=null,rN(t),e)for(t=0;t<e.length;t++)rN(e[t])}}function b3(t,e){return t(e)}function M3(){}var KS=!1;function E3(t,e,n){if(KS)return t(e,n);KS=!0;try{return b3(t,e,n)}finally{KS=!1,(gf!==null||vf!==null)&&(M3(),S3())}}function sm(t,e){var n=t.stateNode;if(n===null)return null;var r=b_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var cM=!1;if(Oa)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){cM=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{cM=!1}function xW(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Pp=!1,A0=null,C0=!1,uM=null,_W={onError:function(t){Pp=!0,A0=t}};function wW(t,e,n,r,i,s,o,a,l){Pp=!1,A0=null,xW.apply(_W,arguments)}function SW(t,e,n,r,i,s,o,a,l){if(wW.apply(this,arguments),Pp){if(Pp){var c=A0;Pp=!1,A0=null}else throw Error(Fe(198));C0||(C0=!0,uM=c)}}function Wu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function T3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iN(t){if(Wu(t)!==t)throw Error(Fe(188))}function bW(t){var e=t.alternate;if(!e){if(e=Wu(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return iN(i),t;if(s===r)return iN(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function A3(t){return t=bW(t),t!==null?C3(t):null}function C3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C3(t);if(e!==null)return e;t=t.sibling}return null}var R3=os.unstable_scheduleCallback,sN=os.unstable_cancelCallback,MW=os.unstable_shouldYield,EW=os.unstable_requestPaint,ur=os.unstable_now,TW=os.unstable_getCurrentPriorityLevel,oT=os.unstable_ImmediatePriority,P3=os.unstable_UserBlockingPriority,R0=os.unstable_NormalPriority,AW=os.unstable_LowPriority,N3=os.unstable_IdlePriority,x_=null,zo=null;function CW(t){if(zo&&typeof zo.onCommitFiberRoot=="function")try{zo.onCommitFiberRoot(x_,t,void 0,(t.current.flags&128)===128)}catch{}}var oo=Math.clz32?Math.clz32:NW,RW=Math.log,PW=Math.LN2;function NW(t){return t>>>=0,t===0?32:31-(RW(t)/PW|0)|0}var Fv=64,Uv=4194304;function vp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function P0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=vp(a):(s&=o,s!==0&&(r=vp(s)))}else o=n&~i,o!==0?r=vp(o):s!==0&&(r=vp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-oo(e),i=1<<n,r|=t[n],e&=~i;return r}function IW(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LW(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oo(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=IW(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function dM(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function I3(){var t=Fv;return Fv<<=1,!(Fv&4194240)&&(Fv=64),t}function QS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-oo(e),t[e]=n}function DW(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-oo(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function aT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oo(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Tn=0;function L3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D3,lT,k3,O3,F3,fM=!1,Bv=[],Bl=null,zl=null,Vl=null,om=new Map,am=new Map,Al=[],kW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oN(t,e){switch(t){case"focusin":case"focusout":Bl=null;break;case"dragenter":case"dragleave":zl=null;break;case"mouseover":case"mouseout":Vl=null;break;case"pointerover":case"pointerout":om.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":am.delete(e.pointerId)}}function Vh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=pg(e),e!==null&&lT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function OW(t,e,n,r,i){switch(e){case"focusin":return Bl=Vh(Bl,t,e,n,r,i),!0;case"dragenter":return zl=Vh(zl,t,e,n,r,i),!0;case"mouseover":return Vl=Vh(Vl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return om.set(s,Vh(om.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,am.set(s,Vh(am.get(s)||null,t,e,n,r,i)),!0}return!1}function U3(t){var e=eu(t.target);if(e!==null){var n=Wu(e);if(n!==null){if(e=n.tag,e===13){if(e=T3(n),e!==null){t.blockedOn=e,F3(t.priority,function(){k3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function i0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hM(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);aM=r,n.target.dispatchEvent(r),aM=null}else return e=pg(n),e!==null&&lT(e),t.blockedOn=n,!1;e.shift()}return!0}function aN(t,e,n){i0(t)&&n.delete(e)}function FW(){fM=!1,Bl!==null&&i0(Bl)&&(Bl=null),zl!==null&&i0(zl)&&(zl=null),Vl!==null&&i0(Vl)&&(Vl=null),om.forEach(aN),am.forEach(aN)}function jh(t,e){t.blockedOn===e&&(t.blockedOn=null,fM||(fM=!0,os.unstable_scheduleCallback(os.unstable_NormalPriority,FW)))}function lm(t){function e(i){return jh(i,t)}if(0<Bv.length){jh(Bv[0],t);for(var n=1;n<Bv.length;n++){var r=Bv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Bl!==null&&jh(Bl,t),zl!==null&&jh(zl,t),Vl!==null&&jh(Vl,t),om.forEach(e),am.forEach(e),n=0;n<Al.length;n++)r=Al[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Al.length&&(n=Al[0],n.blockedOn===null);)U3(n),n.blockedOn===null&&Al.shift()}var yf=Za.ReactCurrentBatchConfig,N0=!0;function UW(t,e,n,r){var i=Tn,s=yf.transition;yf.transition=null;try{Tn=1,cT(t,e,n,r)}finally{Tn=i,yf.transition=s}}function BW(t,e,n,r){var i=Tn,s=yf.transition;yf.transition=null;try{Tn=4,cT(t,e,n,r)}finally{Tn=i,yf.transition=s}}function cT(t,e,n,r){if(N0){var i=hM(t,e,n,r);if(i===null)lb(t,e,r,I0,n),oN(t,r);else if(OW(i,t,e,n,r))r.stopPropagation();else if(oN(t,r),e&4&&-1<kW.indexOf(t)){for(;i!==null;){var s=pg(i);if(s!==null&&D3(s),s=hM(t,e,n,r),s===null&&lb(t,e,r,I0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lb(t,e,r,null,n)}}var I0=null;function hM(t,e,n,r){if(I0=null,t=sT(r),t=eu(t),t!==null)if(e=Wu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=T3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return I0=t,null}function B3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TW()){case oT:return 1;case P3:return 4;case R0:case AW:return 16;case N3:return 536870912;default:return 16}default:return 16}}var Ol=null,uT=null,s0=null;function z3(){if(s0)return s0;var t,e=uT,n=e.length,r,i="value"in Ol?Ol.value:Ol.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return s0=i.slice(t,1<r?1-r:void 0)}function o0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zv(){return!0}function lN(){return!1}function us(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zv:lN,this.isPropagationStopped=lN,this}return qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zv)},persist:function(){},isPersistent:zv}),e}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dT=us(sh),hg=qn({},sh,{view:0,detail:0}),zW=us(hg),JS,eb,Hh,__=qn({},hg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hh&&(Hh&&t.type==="mousemove"?(JS=t.screenX-Hh.screenX,eb=t.screenY-Hh.screenY):eb=JS=0,Hh=t),JS)},movementY:function(t){return"movementY"in t?t.movementY:eb}}),cN=us(__),VW=qn({},__,{dataTransfer:0}),jW=us(VW),HW=qn({},hg,{relatedTarget:0}),tb=us(HW),WW=qn({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),GW=us(WW),XW=qn({},sh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$W=us(XW),YW=qn({},sh,{data:0}),uN=us(YW),qW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QW(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KW[t])?!!e[t]:!1}function fT(){return QW}var JW=qn({},hg,{key:function(t){if(t.key){var e=qW[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=o0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZW[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fT,charCode:function(t){return t.type==="keypress"?o0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?o0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eG=us(JW),tG=qn({},__,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dN=us(tG),nG=qn({},hg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fT}),rG=us(nG),iG=qn({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),sG=us(iG),oG=qn({},__,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aG=us(oG),lG=[9,13,27,32],hT=Oa&&"CompositionEvent"in window,Np=null;Oa&&"documentMode"in document&&(Np=document.documentMode);var cG=Oa&&"TextEvent"in window&&!Np,V3=Oa&&(!hT||Np&&8<Np&&11>=Np),fN=" ",hN=!1;function j3(t,e){switch(t){case"keyup":return lG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xd=!1;function uG(t,e){switch(t){case"compositionend":return H3(e);case"keypress":return e.which!==32?null:(hN=!0,fN);case"textInput":return t=e.data,t===fN&&hN?null:t;default:return null}}function dG(t,e){if(Xd)return t==="compositionend"||!hT&&j3(t,e)?(t=z3(),s0=uT=Ol=null,Xd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V3&&e.locale!=="ko"?null:e.data;default:return null}}var fG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fG[t.type]:e==="textarea"}function W3(t,e,n,r){w3(r),e=L0(e,"onChange"),0<e.length&&(n=new dT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ip=null,cm=null;function hG(t){tO(t,0)}function w_(t){var e=qd(t);if(p3(e))return t}function pG(t,e){if(t==="change")return e}var G3=!1;if(Oa){var nb;if(Oa){var rb="oninput"in document;if(!rb){var mN=document.createElement("div");mN.setAttribute("oninput","return;"),rb=typeof mN.oninput=="function"}nb=rb}else nb=!1;G3=nb&&(!document.documentMode||9<document.documentMode)}function gN(){Ip&&(Ip.detachEvent("onpropertychange",X3),cm=Ip=null)}function X3(t){if(t.propertyName==="value"&&w_(cm)){var e=[];W3(e,cm,t,sT(t)),E3(hG,e)}}function mG(t,e,n){t==="focusin"?(gN(),Ip=e,cm=n,Ip.attachEvent("onpropertychange",X3)):t==="focusout"&&gN()}function gG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return w_(cm)}function vG(t,e){if(t==="click")return w_(e)}function yG(t,e){if(t==="input"||t==="change")return w_(e)}function xG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var co=typeof Object.is=="function"?Object.is:xG;function um(t,e){if(co(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!q1.call(e,i)||!co(t[i],e[i]))return!1}return!0}function vN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yN(t,e){var n=vN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vN(n)}}function $3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y3(){for(var t=window,e=T0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=T0(t.document)}return e}function pT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _G(t){var e=Y3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$3(n.ownerDocument.documentElement,n)){if(r!==null&&pT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=yN(n,s);var o=yN(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wG=Oa&&"documentMode"in document&&11>=document.documentMode,$d=null,pM=null,Lp=null,mM=!1;function xN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mM||$d==null||$d!==T0(r)||(r=$d,"selectionStart"in r&&pT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lp&&um(Lp,r)||(Lp=r,r=L0(pM,"onSelect"),0<r.length&&(e=new dT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$d)))}function Vv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yd={animationend:Vv("Animation","AnimationEnd"),animationiteration:Vv("Animation","AnimationIteration"),animationstart:Vv("Animation","AnimationStart"),transitionend:Vv("Transition","TransitionEnd")},ib={},q3={};Oa&&(q3=document.createElement("div").style,"AnimationEvent"in window||(delete Yd.animationend.animation,delete Yd.animationiteration.animation,delete Yd.animationstart.animation),"TransitionEvent"in window||delete Yd.transitionend.transition);function S_(t){if(ib[t])return ib[t];if(!Yd[t])return t;var e=Yd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in q3)return ib[t]=e[n];return t}var Z3=S_("animationend"),K3=S_("animationiteration"),Q3=S_("animationstart"),J3=S_("transitionend"),eO=new Map,_N="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cc(t,e){eO.set(t,e),Hu(e,[t])}for(var sb=0;sb<_N.length;sb++){var ob=_N[sb],SG=ob.toLowerCase(),bG=ob[0].toUpperCase()+ob.slice(1);cc(SG,"on"+bG)}cc(Z3,"onAnimationEnd");cc(K3,"onAnimationIteration");cc(Q3,"onAnimationStart");cc("dblclick","onDoubleClick");cc("focusin","onFocus");cc("focusout","onBlur");cc(J3,"onTransitionEnd");Ff("onMouseEnter",["mouseout","mouseover"]);Ff("onMouseLeave",["mouseout","mouseover"]);Ff("onPointerEnter",["pointerout","pointerover"]);Ff("onPointerLeave",["pointerout","pointerover"]);Hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MG=new Set("cancel close invalid load scroll toggle".split(" ").concat(yp));function wN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SW(r,e,void 0,t),t.currentTarget=null}function tO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;wN(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;wN(i,a,c),s=l}}}if(C0)throw t=uM,C0=!1,uM=null,t}function kn(t,e){var n=e[_M];n===void 0&&(n=e[_M]=new Set);var r=t+"__bubble";n.has(r)||(nO(e,t,2,!1),n.add(r))}function ab(t,e,n){var r=0;e&&(r|=4),nO(n,t,r,e)}var jv="_reactListening"+Math.random().toString(36).slice(2);function dm(t){if(!t[jv]){t[jv]=!0,c3.forEach(function(n){n!=="selectionchange"&&(MG.has(n)||ab(n,!1,t),ab(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jv]||(e[jv]=!0,ab("selectionchange",!1,e))}}function nO(t,e,n,r){switch(B3(e)){case 1:var i=UW;break;case 4:i=BW;break;default:i=cT}n=i.bind(null,e,n,t),i=void 0,!cM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lb(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=eu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}E3(function(){var c=s,u=sT(n),h=[];e:{var p=eO.get(t);if(p!==void 0){var m=dT,v=t;switch(t){case"keypress":if(o0(n)===0)break e;case"keydown":case"keyup":m=eG;break;case"focusin":v="focus",m=tb;break;case"focusout":v="blur",m=tb;break;case"beforeblur":case"afterblur":m=tb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=rG;break;case Z3:case K3:case Q3:m=GW;break;case J3:m=sG;break;case"scroll":m=zW;break;case"wheel":m=aG;break;case"copy":case"cut":case"paste":m=$W;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=dN}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var _=c,S;_!==null;){S=_;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=sm(_,g),E!=null&&y.push(fm(_,E,S)))),x)break;_=_.return}0<y.length&&(p=new m(p,v,null,n,u),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==aM&&(v=n.relatedTarget||n.fromElement)&&(eu(v)||v[Fa]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?eu(v):null,v!==null&&(x=Wu(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=cN,E="onMouseLeave",g="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=dN,E="onPointerLeave",g="onPointerEnter",_="pointer"),x=m==null?p:qd(m),S=v==null?p:qd(v),p=new y(E,_+"leave",m,n,u),p.target=x,p.relatedTarget=S,E=null,eu(u)===c&&(y=new y(g,_+"enter",v,n,u),y.target=S,y.relatedTarget=x,E=y),x=E,m&&v)t:{for(y=m,g=v,_=0,S=y;S;S=md(S))_++;for(S=0,E=g;E;E=md(E))S++;for(;0<_-S;)y=md(y),_--;for(;0<S-_;)g=md(g),S--;for(;_--;){if(y===g||g!==null&&y===g.alternate)break t;y=md(y),g=md(g)}y=null}else y=null;m!==null&&SN(h,p,m,y,!1),v!==null&&x!==null&&SN(h,x,v,y,!0)}}e:{if(p=c?qd(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var R=pG;else if(pN(p))if(G3)R=yG;else{R=gG;var I=mG}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=vG);if(R&&(R=R(t,c))){W3(h,R,n,u);break e}I&&I(t,p,c),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&nM(p,"number",p.value)}switch(I=c?qd(c):window,t){case"focusin":(pN(I)||I.contentEditable==="true")&&($d=I,pM=c,Lp=null);break;case"focusout":Lp=pM=$d=null;break;case"mousedown":mM=!0;break;case"contextmenu":case"mouseup":case"dragend":mM=!1,xN(h,n,u);break;case"selectionchange":if(wG)break;case"keydown":case"keyup":xN(h,n,u)}var C;if(hT)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Xd?j3(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(V3&&n.locale!=="ko"&&(Xd||D!=="onCompositionStart"?D==="onCompositionEnd"&&Xd&&(C=z3()):(Ol=u,uT="value"in Ol?Ol.value:Ol.textContent,Xd=!0)),I=L0(c,D),0<I.length&&(D=new uN(D,t,null,n,u),h.push({event:D,listeners:I}),C?D.data=C:(C=H3(n),C!==null&&(D.data=C)))),(C=cG?uG(t,n):dG(t,n))&&(c=L0(c,"onBeforeInput"),0<c.length&&(u=new uN("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=C))}tO(h,e)})}function fm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function L0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sm(t,n),s!=null&&r.unshift(fm(t,s,i)),s=sm(t,e),s!=null&&r.push(fm(t,s,i))),t=t.return}return r}function md(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SN(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=sm(n,s),l!=null&&o.unshift(fm(n,l,a))):i||(l=sm(n,s),l!=null&&o.push(fm(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var EG=/\r\n?/g,TG=/\u0000|\uFFFD/g;function bN(t){return(typeof t=="string"?t:""+t).replace(EG,`
`).replace(TG,"")}function Hv(t,e,n){if(e=bN(e),bN(t)!==e&&n)throw Error(Fe(425))}function D0(){}var gM=null,vM=null;function yM(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xM=typeof setTimeout=="function"?setTimeout:void 0,AG=typeof clearTimeout=="function"?clearTimeout:void 0,MN=typeof Promise=="function"?Promise:void 0,CG=typeof queueMicrotask=="function"?queueMicrotask:typeof MN<"u"?function(t){return MN.resolve(null).then(t).catch(RG)}:xM;function RG(t){setTimeout(function(){throw t})}function cb(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),lm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);lm(e)}function jl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function EN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oh=Math.random().toString(36).slice(2),Do="__reactFiber$"+oh,hm="__reactProps$"+oh,Fa="__reactContainer$"+oh,_M="__reactEvents$"+oh,PG="__reactListeners$"+oh,NG="__reactHandles$"+oh;function eu(t){var e=t[Do];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fa]||n[Do]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=EN(t);t!==null;){if(n=t[Do])return n;t=EN(t)}return e}t=n,n=t.parentNode}return null}function pg(t){return t=t[Do]||t[Fa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function b_(t){return t[hm]||null}var wM=[],Zd=-1;function uc(t){return{current:t}}function Fn(t){0>Zd||(t.current=wM[Zd],wM[Zd]=null,Zd--)}function Ln(t,e){Zd++,wM[Zd]=t.current,t.current=e}var Zl={},ai=uc(Zl),Bi=uc(!1),Eu=Zl;function Uf(t,e){var n=t.type.contextTypes;if(!n)return Zl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zi(t){return t=t.childContextTypes,t!=null}function k0(){Fn(Bi),Fn(ai)}function TN(t,e,n){if(ai.current!==Zl)throw Error(Fe(168));Ln(ai,e),Ln(Bi,n)}function rO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,mW(t)||"Unknown",i));return qn({},n,r)}function O0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zl,Eu=ai.current,Ln(ai,t),Ln(Bi,Bi.current),!0}function AN(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=rO(t,e,Eu),r.__reactInternalMemoizedMergedChildContext=t,Fn(Bi),Fn(ai),Ln(ai,t)):Fn(Bi),Ln(Bi,n)}var wa=null,M_=!1,ub=!1;function iO(t){wa===null?wa=[t]:wa.push(t)}function IG(t){M_=!0,iO(t)}function dc(){if(!ub&&wa!==null){ub=!0;var t=0,e=Tn;try{var n=wa;for(Tn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wa=null,M_=!1}catch(i){throw wa!==null&&(wa=wa.slice(t+1)),R3(oT,dc),i}finally{Tn=e,ub=!1}}return null}var Kd=[],Qd=0,F0=null,U0=0,bs=[],Ms=0,Tu=null,Aa=1,Ca="";function Hc(t,e){Kd[Qd++]=U0,Kd[Qd++]=F0,F0=t,U0=e}function sO(t,e,n){bs[Ms++]=Aa,bs[Ms++]=Ca,bs[Ms++]=Tu,Tu=t;var r=Aa;t=Ca;var i=32-oo(r)-1;r&=~(1<<i),n+=1;var s=32-oo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Aa=1<<32-oo(e)+i|n<<i|r,Ca=s+t}else Aa=1<<s|n<<i|r,Ca=t}function mT(t){t.return!==null&&(Hc(t,1),sO(t,1,0))}function gT(t){for(;t===F0;)F0=Kd[--Qd],Kd[Qd]=null,U0=Kd[--Qd],Kd[Qd]=null;for(;t===Tu;)Tu=bs[--Ms],bs[Ms]=null,Ca=bs[--Ms],bs[Ms]=null,Aa=bs[--Ms],bs[Ms]=null}var ts=null,es=null,jn=!1,eo=null;function oO(t,e){var n=Ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function CN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,es=jl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,es=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tu!==null?{id:Aa,overflow:Ca}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ts=t,es=null,!0):!1;default:return!1}}function SM(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bM(t){if(jn){var e=es;if(e){var n=e;if(!CN(t,e)){if(SM(t))throw Error(Fe(418));e=jl(n.nextSibling);var r=ts;e&&CN(t,e)?oO(r,n):(t.flags=t.flags&-4097|2,jn=!1,ts=t)}}else{if(SM(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,jn=!1,ts=t}}}function RN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function Wv(t){if(t!==ts)return!1;if(!jn)return RN(t),jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yM(t.type,t.memoizedProps)),e&&(e=es)){if(SM(t))throw aO(),Error(Fe(418));for(;e;)oO(t,e),e=jl(e.nextSibling)}if(RN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){es=jl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}es=null}}else es=ts?jl(t.stateNode.nextSibling):null;return!0}function aO(){for(var t=es;t;)t=jl(t.nextSibling)}function Bf(){es=ts=null,jn=!1}function vT(t){eo===null?eo=[t]:eo.push(t)}var LG=Za.ReactCurrentBatchConfig;function Wh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function Gv(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function PN(t){var e=t._init;return e(t._payload)}function lO(t){function e(g,_){if(t){var S=g.deletions;S===null?(g.deletions=[_],g.flags|=16):S.push(_)}}function n(g,_){if(!t)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function r(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function i(g,_){return g=Xl(g,_),g.index=0,g.sibling=null,g}function s(g,_,S){return g.index=S,t?(S=g.alternate,S!==null?(S=S.index,S<_?(g.flags|=2,_):S):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,_,S,E){return _===null||_.tag!==6?(_=vb(S,g.mode,E),_.return=g,_):(_=i(_,S),_.return=g,_)}function l(g,_,S,E){var R=S.type;return R===Gd?u(g,_,S.props.children,E,S.key):_!==null&&(_.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ml&&PN(R)===_.type)?(E=i(_,S.props),E.ref=Wh(g,_,S),E.return=g,E):(E=h0(S.type,S.key,S.props,null,g.mode,E),E.ref=Wh(g,_,S),E.return=g,E)}function c(g,_,S,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=yb(S,g.mode,E),_.return=g,_):(_=i(_,S.children||[]),_.return=g,_)}function u(g,_,S,E,R){return _===null||_.tag!==7?(_=vu(S,g.mode,E,R),_.return=g,_):(_=i(_,S),_.return=g,_)}function h(g,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=vb(""+_,g.mode,S),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Dv:return S=h0(_.type,_.key,_.props,null,g.mode,S),S.ref=Wh(g,null,_),S.return=g,S;case Wd:return _=yb(_,g.mode,S),_.return=g,_;case Ml:var E=_._init;return h(g,E(_._payload),S)}if(gp(_)||Bh(_))return _=vu(_,g.mode,S,null),_.return=g,_;Gv(g,_)}return null}function p(g,_,S,E){var R=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:a(g,_,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dv:return S.key===R?l(g,_,S,E):null;case Wd:return S.key===R?c(g,_,S,E):null;case Ml:return R=S._init,p(g,_,R(S._payload),E)}if(gp(S)||Bh(S))return R!==null?null:u(g,_,S,E,null);Gv(g,S)}return null}function m(g,_,S,E,R){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(_,g,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Dv:return g=g.get(E.key===null?S:E.key)||null,l(_,g,E,R);case Wd:return g=g.get(E.key===null?S:E.key)||null,c(_,g,E,R);case Ml:var I=E._init;return m(g,_,S,I(E._payload),R)}if(gp(E)||Bh(E))return g=g.get(S)||null,u(_,g,E,R,null);Gv(_,E)}return null}function v(g,_,S,E){for(var R=null,I=null,C=_,D=_=0,L=null;C!==null&&D<S.length;D++){C.index>D?(L=C,C=null):L=C.sibling;var P=p(g,C,S[D],E);if(P===null){C===null&&(C=L);break}t&&C&&P.alternate===null&&e(g,C),_=s(P,_,D),I===null?R=P:I.sibling=P,I=P,C=L}if(D===S.length)return n(g,C),jn&&Hc(g,D),R;if(C===null){for(;D<S.length;D++)C=h(g,S[D],E),C!==null&&(_=s(C,_,D),I===null?R=C:I.sibling=C,I=C);return jn&&Hc(g,D),R}for(C=r(g,C);D<S.length;D++)L=m(C,g,D,S[D],E),L!==null&&(t&&L.alternate!==null&&C.delete(L.key===null?D:L.key),_=s(L,_,D),I===null?R=L:I.sibling=L,I=L);return t&&C.forEach(function(F){return e(g,F)}),jn&&Hc(g,D),R}function y(g,_,S,E){var R=Bh(S);if(typeof R!="function")throw Error(Fe(150));if(S=R.call(S),S==null)throw Error(Fe(151));for(var I=R=null,C=_,D=_=0,L=null,P=S.next();C!==null&&!P.done;D++,P=S.next()){C.index>D?(L=C,C=null):L=C.sibling;var F=p(g,C,P.value,E);if(F===null){C===null&&(C=L);break}t&&C&&F.alternate===null&&e(g,C),_=s(F,_,D),I===null?R=F:I.sibling=F,I=F,C=L}if(P.done)return n(g,C),jn&&Hc(g,D),R;if(C===null){for(;!P.done;D++,P=S.next())P=h(g,P.value,E),P!==null&&(_=s(P,_,D),I===null?R=P:I.sibling=P,I=P);return jn&&Hc(g,D),R}for(C=r(g,C);!P.done;D++,P=S.next())P=m(C,g,D,P.value,E),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?D:P.key),_=s(P,_,D),I===null?R=P:I.sibling=P,I=P);return t&&C.forEach(function(z){return e(g,z)}),jn&&Hc(g,D),R}function x(g,_,S,E){if(typeof S=="object"&&S!==null&&S.type===Gd&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Dv:e:{for(var R=S.key,I=_;I!==null;){if(I.key===R){if(R=S.type,R===Gd){if(I.tag===7){n(g,I.sibling),_=i(I,S.props.children),_.return=g,g=_;break e}}else if(I.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ml&&PN(R)===I.type){n(g,I.sibling),_=i(I,S.props),_.ref=Wh(g,I,S),_.return=g,g=_;break e}n(g,I);break}else e(g,I);I=I.sibling}S.type===Gd?(_=vu(S.props.children,g.mode,E,S.key),_.return=g,g=_):(E=h0(S.type,S.key,S.props,null,g.mode,E),E.ref=Wh(g,_,S),E.return=g,g=E)}return o(g);case Wd:e:{for(I=S.key;_!==null;){if(_.key===I)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(g,_.sibling),_=i(_,S.children||[]),_.return=g,g=_;break e}else{n(g,_);break}else e(g,_);_=_.sibling}_=yb(S,g.mode,E),_.return=g,g=_}return o(g);case Ml:return I=S._init,x(g,_,I(S._payload),E)}if(gp(S))return v(g,_,S,E);if(Bh(S))return y(g,_,S,E);Gv(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(g,_.sibling),_=i(_,S),_.return=g,g=_):(n(g,_),_=vb(S,g.mode,E),_.return=g,g=_),o(g)):n(g,_)}return x}var zf=lO(!0),cO=lO(!1),B0=uc(null),z0=null,Jd=null,yT=null;function xT(){yT=Jd=z0=null}function _T(t){var e=B0.current;Fn(B0),t._currentValue=e}function MM(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xf(t,e){z0=t,yT=Jd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ui=!0),t.firstContext=null)}function Ls(t){var e=t._currentValue;if(yT!==t)if(t={context:t,memoizedValue:e,next:null},Jd===null){if(z0===null)throw Error(Fe(308));Jd=t,z0.dependencies={lanes:0,firstContext:t}}else Jd=Jd.next=t;return e}var tu=null;function wT(t){tu===null?tu=[t]:tu.push(t)}function uO(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wT(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ua(t,r)}function Ua(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var El=!1;function ST(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,gn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ua(t,n)}return i=r.interleaved,i===null?(e.next=e,wT(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ua(t,n)}function a0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,aT(t,n)}}function NN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function V0(t,e,n,r){var i=t.updateQueue;El=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,y=a;switch(p=e,m=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=qn({},h,p);break e;case 2:El=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Cu|=o,t.lanes=o,t.memoizedState=h}}function IN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var mg={},Vo=uc(mg),pm=uc(mg),mm=uc(mg);function nu(t){if(t===mg)throw Error(Fe(174));return t}function bT(t,e){switch(Ln(mm,e),Ln(pm,t),Ln(Vo,mg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iM(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=iM(e,t)}Fn(Vo),Ln(Vo,e)}function Vf(){Fn(Vo),Fn(pm),Fn(mm)}function fO(t){nu(mm.current);var e=nu(Vo.current),n=iM(e,t.type);e!==n&&(Ln(pm,t),Ln(Vo,n))}function MT(t){pm.current===t&&(Fn(Vo),Fn(pm))}var Gn=uc(0);function j0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var db=[];function ET(){for(var t=0;t<db.length;t++)db[t]._workInProgressVersionPrimary=null;db.length=0}var l0=Za.ReactCurrentDispatcher,fb=Za.ReactCurrentBatchConfig,Au=0,Yn=null,Sr=null,Lr=null,H0=!1,Dp=!1,gm=0,DG=0;function qr(){throw Error(Fe(321))}function TT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!co(t[n],e[n]))return!1;return!0}function AT(t,e,n,r,i,s){if(Au=s,Yn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,l0.current=t===null||t.memoizedState===null?UG:BG,t=n(r,i),Dp){s=0;do{if(Dp=!1,gm=0,25<=s)throw Error(Fe(301));s+=1,Lr=Sr=null,e.updateQueue=null,l0.current=zG,t=n(r,i)}while(Dp)}if(l0.current=W0,e=Sr!==null&&Sr.next!==null,Au=0,Lr=Sr=Yn=null,H0=!1,e)throw Error(Fe(300));return t}function CT(){var t=gm!==0;return gm=0,t}function Ro(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?Yn.memoizedState=Lr=t:Lr=Lr.next=t,Lr}function Ds(){if(Sr===null){var t=Yn.alternate;t=t!==null?t.memoizedState:null}else t=Sr.next;var e=Lr===null?Yn.memoizedState:Lr.next;if(e!==null)Lr=e,Sr=t;else{if(t===null)throw Error(Fe(310));Sr=t,t={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},Lr===null?Yn.memoizedState=Lr=t:Lr=Lr.next=t}return Lr}function vm(t,e){return typeof e=="function"?e(t):e}function hb(t){var e=Ds(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=Sr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Au&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Yn.lanes|=u,Cu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,co(r,e.memoizedState)||(Ui=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Yn.lanes|=s,Cu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pb(t){var e=Ds(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);co(s,e.memoizedState)||(Ui=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hO(){}function pO(t,e){var n=Yn,r=Ds(),i=e(),s=!co(r.memoizedState,i);if(s&&(r.memoizedState=i,Ui=!0),r=r.queue,RT(vO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Lr!==null&&Lr.memoizedState.tag&1){if(n.flags|=2048,ym(9,gO.bind(null,n,r,i,e),void 0,null),kr===null)throw Error(Fe(349));Au&30||mO(n,e,i)}return i}function mO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gO(t,e,n,r){e.value=n,e.getSnapshot=r,yO(e)&&xO(t)}function vO(t,e,n){return n(function(){yO(e)&&xO(t)})}function yO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!co(t,n)}catch{return!0}}function xO(t){var e=Ua(t,1);e!==null&&ao(e,t,1,-1)}function LN(t){var e=Ro();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:t},e.queue=t,t=t.dispatch=FG.bind(null,Yn,t),[e.memoizedState,t]}function ym(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yn.updateQueue,e===null?(e={lastEffect:null,stores:null},Yn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _O(){return Ds().memoizedState}function c0(t,e,n,r){var i=Ro();Yn.flags|=t,i.memoizedState=ym(1|e,n,void 0,r===void 0?null:r)}function E_(t,e,n,r){var i=Ds();r=r===void 0?null:r;var s=void 0;if(Sr!==null){var o=Sr.memoizedState;if(s=o.destroy,r!==null&&TT(r,o.deps)){i.memoizedState=ym(e,n,s,r);return}}Yn.flags|=t,i.memoizedState=ym(1|e,n,s,r)}function DN(t,e){return c0(8390656,8,t,e)}function RT(t,e){return E_(2048,8,t,e)}function wO(t,e){return E_(4,2,t,e)}function SO(t,e){return E_(4,4,t,e)}function bO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MO(t,e,n){return n=n!=null?n.concat([t]):null,E_(4,4,bO.bind(null,e,t),n)}function PT(){}function EO(t,e){var n=Ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&TT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function TO(t,e){var n=Ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&TT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function AO(t,e,n){return Au&21?(co(n,e)||(n=I3(),Yn.lanes|=n,Cu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ui=!0),t.memoizedState=n)}function kG(t,e){var n=Tn;Tn=n!==0&&4>n?n:4,t(!0);var r=fb.transition;fb.transition={};try{t(!1),e()}finally{Tn=n,fb.transition=r}}function CO(){return Ds().memoizedState}function OG(t,e,n){var r=Gl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},RO(t))PO(e,n);else if(n=uO(t,e,n,r),n!==null){var i=Si();ao(n,t,r,i),NO(n,e,r)}}function FG(t,e,n){var r=Gl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(RO(t))PO(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,co(a,o)){var l=e.interleaved;l===null?(i.next=i,wT(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uO(t,e,i,r),n!==null&&(i=Si(),ao(n,t,r,i),NO(n,e,r))}}function RO(t){var e=t.alternate;return t===Yn||e!==null&&e===Yn}function PO(t,e){Dp=H0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function NO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,aT(t,n)}}var W0={readContext:Ls,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useInsertionEffect:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useSyncExternalStore:qr,useId:qr,unstable_isNewReconciler:!1},UG={readContext:Ls,useCallback:function(t,e){return Ro().memoizedState=[t,e===void 0?null:e],t},useContext:Ls,useEffect:DN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,c0(4194308,4,bO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return c0(4194308,4,t,e)},useInsertionEffect:function(t,e){return c0(4,2,t,e)},useMemo:function(t,e){var n=Ro();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ro();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OG.bind(null,Yn,t),[r.memoizedState,t]},useRef:function(t){var e=Ro();return t={current:t},e.memoizedState=t},useState:LN,useDebugValue:PT,useDeferredValue:function(t){return Ro().memoizedState=t},useTransition:function(){var t=LN(!1),e=t[0];return t=kG.bind(null,t[1]),Ro().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yn,i=Ro();if(jn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),kr===null)throw Error(Fe(349));Au&30||mO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,DN(vO.bind(null,r,s,t),[t]),r.flags|=2048,ym(9,gO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ro(),e=kr.identifierPrefix;if(jn){var n=Ca,r=Aa;n=(r&~(1<<32-oo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=gm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BG={readContext:Ls,useCallback:EO,useContext:Ls,useEffect:RT,useImperativeHandle:MO,useInsertionEffect:wO,useLayoutEffect:SO,useMemo:TO,useReducer:hb,useRef:_O,useState:function(){return hb(vm)},useDebugValue:PT,useDeferredValue:function(t){var e=Ds();return AO(e,Sr.memoizedState,t)},useTransition:function(){var t=hb(vm)[0],e=Ds().memoizedState;return[t,e]},useMutableSource:hO,useSyncExternalStore:pO,useId:CO,unstable_isNewReconciler:!1},zG={readContext:Ls,useCallback:EO,useContext:Ls,useEffect:RT,useImperativeHandle:MO,useInsertionEffect:wO,useLayoutEffect:SO,useMemo:TO,useReducer:pb,useRef:_O,useState:function(){return pb(vm)},useDebugValue:PT,useDeferredValue:function(t){var e=Ds();return Sr===null?e.memoizedState=t:AO(e,Sr.memoizedState,t)},useTransition:function(){var t=pb(vm)[0],e=Ds().memoizedState;return[t,e]},useMutableSource:hO,useSyncExternalStore:pO,useId:CO,unstable_isNewReconciler:!1};function $s(t,e){if(t&&t.defaultProps){e=qn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function EM(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var T_={isMounted:function(t){return(t=t._reactInternals)?Wu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Si(),i=Gl(t),s=Pa(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hl(t,s,i),e!==null&&(ao(e,t,i,r),a0(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Si(),i=Gl(t),s=Pa(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hl(t,s,i),e!==null&&(ao(e,t,i,r),a0(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Si(),r=Gl(t),i=Pa(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hl(t,i,r),e!==null&&(ao(e,t,r,n),a0(e,t,r))}};function kN(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!um(n,r)||!um(i,s):!0}function IO(t,e,n){var r=!1,i=Zl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ls(s):(i=zi(e)?Eu:ai.current,r=e.contextTypes,s=(r=r!=null)?Uf(t,i):Zl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=T_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ON(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&T_.enqueueReplaceState(e,e.state,null)}function TM(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ST(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ls(s):(s=zi(e)?Eu:ai.current,i.context=Uf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(EM(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&T_.enqueueReplaceState(i,i.state,null),V0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function jf(t,e){try{var n="",r=e;do n+=pW(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function AM(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VG=typeof WeakMap=="function"?WeakMap:Map;function LO(t,e,n){n=Pa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){X0||(X0=!0,FM=r),AM(t,e)},n}function DO(t,e,n){n=Pa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){AM(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){AM(t,e),typeof r!="function"&&(Wl===null?Wl=new Set([this]):Wl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function FN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VG;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=t6.bind(null,t,e,n),e.then(t,t))}function UN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function BN(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pa(-1,1),e.tag=2,Hl(n,e,1))),n.lanes|=1),t)}var jG=Za.ReactCurrentOwner,Ui=!1;function vi(t,e,n,r){e.child=t===null?cO(e,null,n,r):zf(e,t.child,n,r)}function zN(t,e,n,r,i){n=n.render;var s=e.ref;return xf(e,i),r=AT(t,e,n,r,s,i),n=CT(),t!==null&&!Ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ba(t,e,i)):(jn&&n&&mT(e),e.flags|=1,vi(t,e,r,i),e.child)}function VN(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!UT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kO(t,e,s,r,i)):(t=h0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:um,n(o,r)&&t.ref===e.ref)return Ba(t,e,i)}return e.flags|=1,t=Xl(s,r),t.ref=e.ref,t.return=e,e.child=t}function kO(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(um(s,r)&&t.ref===e.ref)if(Ui=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ui=!0);else return e.lanes=t.lanes,Ba(t,e,i)}return CM(t,e,n,r,i)}function OO(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ln(tf,qi),qi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ln(tf,qi),qi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ln(tf,qi),qi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ln(tf,qi),qi|=r;return vi(t,e,i,n),e.child}function FO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function CM(t,e,n,r,i){var s=zi(n)?Eu:ai.current;return s=Uf(e,s),xf(e,i),n=AT(t,e,n,r,s,i),r=CT(),t!==null&&!Ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ba(t,e,i)):(jn&&r&&mT(e),e.flags|=1,vi(t,e,n,i),e.child)}function jN(t,e,n,r,i){if(zi(n)){var s=!0;O0(e)}else s=!1;if(xf(e,i),e.stateNode===null)u0(t,e),IO(e,n,r),TM(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ls(c):(c=zi(n)?Eu:ai.current,c=Uf(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ON(e,o,r,c),El=!1;var p=e.memoizedState;o.state=p,V0(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Bi.current||El?(typeof u=="function"&&(EM(e,n,u,r),l=e.memoizedState),(a=El||kN(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dO(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$s(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ls(l):(l=zi(n)?Eu:ai.current,l=Uf(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&ON(e,o,r,l),El=!1,p=e.memoizedState,o.state=p,V0(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||Bi.current||El?(typeof m=="function"&&(EM(e,n,m,r),v=e.memoizedState),(c=El||kN(e,n,c,r,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return RM(t,e,n,r,s,i)}function RM(t,e,n,r,i,s){FO(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&AN(e,n,!1),Ba(t,e,s);r=e.stateNode,jG.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zf(e,t.child,null,s),e.child=zf(e,null,a,s)):vi(t,e,a,s),e.memoizedState=r.state,i&&AN(e,n,!0),e.child}function UO(t){var e=t.stateNode;e.pendingContext?TN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&TN(t,e.context,!1),bT(t,e.containerInfo)}function HN(t,e,n,r,i){return Bf(),vT(i),e.flags|=256,vi(t,e,n,r),e.child}var PM={dehydrated:null,treeContext:null,retryLane:0};function NM(t){return{baseLanes:t,cachePool:null,transitions:null}}function BO(t,e,n){var r=e.pendingProps,i=Gn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ln(Gn,i&1),t===null)return bM(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=R_(o,r,0,null),t=vu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=NM(n),e.memoizedState=PM,t):NT(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return HG(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Xl(a,s):(s=vu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?NM(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=PM,r}return s=t.child,t=s.sibling,r=Xl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function NT(t,e){return e=R_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xv(t,e,n,r){return r!==null&&vT(r),zf(e,t.child,null,n),t=NT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HG(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mb(Error(Fe(422))),Xv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=R_({mode:"visible",children:r.children},i,0,null),s=vu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zf(e,t.child,null,o),e.child.memoizedState=NM(o),e.memoizedState=PM,s);if(!(e.mode&1))return Xv(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=mb(s,r,void 0),Xv(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ui||a){if(r=kr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ua(t,i),ao(r,t,i,-1))}return FT(),r=mb(Error(Fe(421))),Xv(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=n6.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,es=jl(i.nextSibling),ts=e,jn=!0,eo=null,t!==null&&(bs[Ms++]=Aa,bs[Ms++]=Ca,bs[Ms++]=Tu,Aa=t.id,Ca=t.overflow,Tu=e),e=NT(e,r.children),e.flags|=4096,e)}function WN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),MM(t.return,e,n)}function gb(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function zO(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(vi(t,e,r.children,n),r=Gn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&WN(t,n,e);else if(t.tag===19)WN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ln(Gn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&j0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gb(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&j0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gb(e,!0,n,null,s);break;case"together":gb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function u0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ba(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=Xl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WG(t,e,n){switch(e.tag){case 3:UO(e),Bf();break;case 5:fO(e);break;case 1:zi(e.type)&&O0(e);break;case 4:bT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ln(B0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ln(Gn,Gn.current&1),e.flags|=128,null):n&e.child.childLanes?BO(t,e,n):(Ln(Gn,Gn.current&1),t=Ba(t,e,n),t!==null?t.sibling:null);Ln(Gn,Gn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ln(Gn,Gn.current),r)break;return null;case 22:case 23:return e.lanes=0,OO(t,e,n)}return Ba(t,e,n)}var VO,IM,jO,HO;VO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};IM=function(){};jO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,nu(Vo.current);var s=null;switch(n){case"input":i=eM(t,i),r=eM(t,r),s=[];break;case"select":i=qn({},i,{value:void 0}),r=qn({},r,{value:void 0}),s=[];break;case"textarea":i=rM(t,i),r=rM(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=D0)}sM(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};HO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gh(t,e){if(!jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GG(t,e,n){var r=e.pendingProps;switch(gT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(e),null;case 1:return zi(e.type)&&k0(),Zr(e),null;case 3:return r=e.stateNode,Vf(),Fn(Bi),Fn(ai),ET(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,eo!==null&&(zM(eo),eo=null))),IM(t,e),Zr(e),null;case 5:MT(e);var i=nu(mm.current);if(n=e.type,t!==null&&e.stateNode!=null)jO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Zr(e),null}if(t=nu(Vo.current),Wv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Do]=e,r[hm]=s,t=(e.mode&1)!==0,n){case"dialog":kn("cancel",r),kn("close",r);break;case"iframe":case"object":case"embed":kn("load",r);break;case"video":case"audio":for(i=0;i<yp.length;i++)kn(yp[i],r);break;case"source":kn("error",r);break;case"img":case"image":case"link":kn("error",r),kn("load",r);break;case"details":kn("toggle",r);break;case"input":JP(r,s),kn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},kn("invalid",r);break;case"textarea":tN(r,s),kn("invalid",r)}sM(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hv(r.textContent,a,t),i=["children",""+a]):rm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&kn("scroll",r)}switch(n){case"input":kv(r),eN(r,s,!0);break;case"textarea":kv(r),nN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=D0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=v3(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Do]=e,t[hm]=r,VO(t,e,!1,!1),e.stateNode=t;e:{switch(o=oM(n,r),n){case"dialog":kn("cancel",t),kn("close",t),i=r;break;case"iframe":case"object":case"embed":kn("load",t),i=r;break;case"video":case"audio":for(i=0;i<yp.length;i++)kn(yp[i],t);i=r;break;case"source":kn("error",t),i=r;break;case"img":case"image":case"link":kn("error",t),kn("load",t),i=r;break;case"details":kn("toggle",t),i=r;break;case"input":JP(t,r),i=eM(t,r),kn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qn({},r,{value:void 0}),kn("invalid",t);break;case"textarea":tN(t,r),i=rM(t,r),kn("invalid",t);break;default:i=r}sM(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_3(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&y3(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&im(t,l):typeof l=="number"&&im(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&kn("scroll",t):l!=null&&tT(t,s,l,o))}switch(n){case"input":kv(t),eN(t,r,!1);break;case"textarea":kv(t),nN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ql(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?mf(t,!!r.multiple,s,!1):r.defaultValue!=null&&mf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=D0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zr(e),null;case 6:if(t&&e.stateNode!=null)HO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=nu(mm.current),nu(Vo.current),Wv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Do]=e,(s=r.nodeValue!==n)&&(t=ts,t!==null))switch(t.tag){case 3:Hv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Do]=e,e.stateNode=r}return Zr(e),null;case 13:if(Fn(Gn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jn&&es!==null&&e.mode&1&&!(e.flags&128))aO(),Bf(),e.flags|=98560,s=!1;else if(s=Wv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Do]=e}else Bf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zr(e),s=!1}else eo!==null&&(zM(eo),eo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Gn.current&1?br===0&&(br=3):FT())),e.updateQueue!==null&&(e.flags|=4),Zr(e),null);case 4:return Vf(),IM(t,e),t===null&&dm(e.stateNode.containerInfo),Zr(e),null;case 10:return _T(e.type._context),Zr(e),null;case 17:return zi(e.type)&&k0(),Zr(e),null;case 19:if(Fn(Gn),s=e.memoizedState,s===null)return Zr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Gh(s,!1);else{if(br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=j0(t),o!==null){for(e.flags|=128,Gh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ln(Gn,Gn.current&1|2),e.child}t=t.sibling}s.tail!==null&&ur()>Hf&&(e.flags|=128,r=!0,Gh(s,!1),e.lanes=4194304)}else{if(!r)if(t=j0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!jn)return Zr(e),null}else 2*ur()-s.renderingStartTime>Hf&&n!==1073741824&&(e.flags|=128,r=!0,Gh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ur(),e.sibling=null,n=Gn.current,Ln(Gn,r?n&1|2:n&1),e):(Zr(e),null);case 22:case 23:return OT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qi&1073741824&&(Zr(e),e.subtreeFlags&6&&(e.flags|=8192)):Zr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function XG(t,e){switch(gT(e),e.tag){case 1:return zi(e.type)&&k0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vf(),Fn(Bi),Fn(ai),ET(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return MT(e),null;case 13:if(Fn(Gn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Bf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fn(Gn),null;case 4:return Vf(),null;case 10:return _T(e.type._context),null;case 22:case 23:return OT(),null;case 24:return null;default:return null}}var $v=!1,ni=!1,$G=typeof WeakSet=="function"?WeakSet:Set,gt=null;function ef(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nr(t,e,r)}else n.current=null}function LM(t,e,n){try{n()}catch(r){nr(t,e,r)}}var GN=!1;function YG(t,e){if(gM=N0,t=Y3(),pT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(vM={focusedElem:t,selectionRange:n},N0=!1,gt=e;gt!==null;)if(e=gt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,gt=t;else for(;gt!==null;){e=gt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:$s(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(E){nr(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,gt=t;break}gt=e.return}return v=GN,GN=!1,v}function kp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&LM(e,n,s)}i=i.next}while(i!==r)}}function A_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function DM(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WO(t){var e=t.alternate;e!==null&&(t.alternate=null,WO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Do],delete e[hm],delete e[_M],delete e[PG],delete e[NG])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GO(t){return t.tag===5||t.tag===3||t.tag===4}function XN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kM(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=D0));else if(r!==4&&(t=t.child,t!==null))for(kM(t,e,n),t=t.sibling;t!==null;)kM(t,e,n),t=t.sibling}function OM(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(OM(t,e,n),t=t.sibling;t!==null;)OM(t,e,n),t=t.sibling}var Br=null,Qs=!1;function ul(t,e,n){for(n=n.child;n!==null;)XO(t,e,n),n=n.sibling}function XO(t,e,n){if(zo&&typeof zo.onCommitFiberUnmount=="function")try{zo.onCommitFiberUnmount(x_,n)}catch{}switch(n.tag){case 5:ni||ef(n,e);case 6:var r=Br,i=Qs;Br=null,ul(t,e,n),Br=r,Qs=i,Br!==null&&(Qs?(t=Br,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Br.removeChild(n.stateNode));break;case 18:Br!==null&&(Qs?(t=Br,n=n.stateNode,t.nodeType===8?cb(t.parentNode,n):t.nodeType===1&&cb(t,n),lm(t)):cb(Br,n.stateNode));break;case 4:r=Br,i=Qs,Br=n.stateNode.containerInfo,Qs=!0,ul(t,e,n),Br=r,Qs=i;break;case 0:case 11:case 14:case 15:if(!ni&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&LM(n,e,o),i=i.next}while(i!==r)}ul(t,e,n);break;case 1:if(!ni&&(ef(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nr(n,e,a)}ul(t,e,n);break;case 21:ul(t,e,n);break;case 22:n.mode&1?(ni=(r=ni)||n.memoizedState!==null,ul(t,e,n),ni=r):ul(t,e,n);break;default:ul(t,e,n)}}function $N(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $G),e.forEach(function(r){var i=r6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Br=a.stateNode,Qs=!1;break e;case 3:Br=a.stateNode.containerInfo,Qs=!0;break e;case 4:Br=a.stateNode.containerInfo,Qs=!0;break e}a=a.return}if(Br===null)throw Error(Fe(160));XO(s,o,i),Br=null,Qs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){nr(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$O(e,t),e=e.sibling}function $O(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vs(e,t),Co(t),r&4){try{kp(3,t,t.return),A_(3,t)}catch(y){nr(t,t.return,y)}try{kp(5,t,t.return)}catch(y){nr(t,t.return,y)}}break;case 1:Vs(e,t),Co(t),r&512&&n!==null&&ef(n,n.return);break;case 5:if(Vs(e,t),Co(t),r&512&&n!==null&&ef(n,n.return),t.flags&32){var i=t.stateNode;try{im(i,"")}catch(y){nr(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&m3(i,s),oM(a,o);var c=oM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?_3(i,h):u==="dangerouslySetInnerHTML"?y3(i,h):u==="children"?im(i,h):tT(i,u,h,c)}switch(a){case"input":tM(i,s);break;case"textarea":g3(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?mf(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?mf(i,!!s.multiple,s.defaultValue,!0):mf(i,!!s.multiple,s.multiple?[]:"",!1))}i[hm]=s}catch(y){nr(t,t.return,y)}}break;case 6:if(Vs(e,t),Co(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){nr(t,t.return,y)}}break;case 3:if(Vs(e,t),Co(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lm(e.containerInfo)}catch(y){nr(t,t.return,y)}break;case 4:Vs(e,t),Co(t);break;case 13:Vs(e,t),Co(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(DT=ur())),r&4&&$N(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ni=(c=ni)||u,Vs(e,t),ni=c):Vs(e,t),Co(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(gt=t,u=t.child;u!==null;){for(h=gt=u;gt!==null;){switch(p=gt,m=p.child,p.tag){case 0:case 11:case 14:case 15:kp(4,p,p.return);break;case 1:ef(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){nr(r,n,y)}}break;case 5:ef(p,p.return);break;case 22:if(p.memoizedState!==null){qN(h);continue}}m!==null?(m.return=p,gt=m):qN(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=x3("display",o))}catch(y){nr(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){nr(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vs(e,t),Co(t),r&4&&$N(t);break;case 21:break;default:Vs(e,t),Co(t)}}function Co(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GO(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(im(i,""),r.flags&=-33);var s=XN(t);OM(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=XN(t);kM(t,a,o);break;default:throw Error(Fe(161))}}catch(l){nr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qG(t,e,n){gt=t,YO(t)}function YO(t,e,n){for(var r=(t.mode&1)!==0;gt!==null;){var i=gt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$v;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ni;a=$v;var c=ni;if($v=o,(ni=l)&&!c)for(gt=i;gt!==null;)o=gt,l=o.child,o.tag===22&&o.memoizedState!==null?ZN(i):l!==null?(l.return=o,gt=l):ZN(i);for(;s!==null;)gt=s,YO(s),s=s.sibling;gt=i,$v=a,ni=c}YN(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,gt=s):YN(t)}}function YN(t){for(;gt!==null;){var e=gt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ni||A_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ni)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$s(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&IN(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}IN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&lm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}ni||e.flags&512&&DM(e)}catch(p){nr(e,e.return,p)}}if(e===t){gt=null;break}if(n=e.sibling,n!==null){n.return=e.return,gt=n;break}gt=e.return}}function qN(t){for(;gt!==null;){var e=gt;if(e===t){gt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,gt=n;break}gt=e.return}}function ZN(t){for(;gt!==null;){var e=gt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{A_(4,e)}catch(l){nr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){nr(e,i,l)}}var s=e.return;try{DM(e)}catch(l){nr(e,s,l)}break;case 5:var o=e.return;try{DM(e)}catch(l){nr(e,o,l)}}}catch(l){nr(e,e.return,l)}if(e===t){gt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,gt=a;break}gt=e.return}}var ZG=Math.ceil,G0=Za.ReactCurrentDispatcher,IT=Za.ReactCurrentOwner,Is=Za.ReactCurrentBatchConfig,gn=0,kr=null,yr=null,Vr=0,qi=0,tf=uc(0),br=0,xm=null,Cu=0,C_=0,LT=0,Op=null,Oi=null,DT=0,Hf=1/0,_a=null,X0=!1,FM=null,Wl=null,Yv=!1,Fl=null,$0=0,Fp=0,UM=null,d0=-1,f0=0;function Si(){return gn&6?ur():d0!==-1?d0:d0=ur()}function Gl(t){return t.mode&1?gn&2&&Vr!==0?Vr&-Vr:LG.transition!==null?(f0===0&&(f0=I3()),f0):(t=Tn,t!==0||(t=window.event,t=t===void 0?16:B3(t.type)),t):1}function ao(t,e,n,r){if(50<Fp)throw Fp=0,UM=null,Error(Fe(185));fg(t,n,r),(!(gn&2)||t!==kr)&&(t===kr&&(!(gn&2)&&(C_|=n),br===4&&Cl(t,Vr)),Vi(t,r),n===1&&gn===0&&!(e.mode&1)&&(Hf=ur()+500,M_&&dc()))}function Vi(t,e){var n=t.callbackNode;LW(t,e);var r=P0(t,t===kr?Vr:0);if(r===0)n!==null&&sN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&sN(n),e===1)t.tag===0?IG(KN.bind(null,t)):iO(KN.bind(null,t)),CG(function(){!(gn&6)&&dc()}),n=null;else{switch(L3(r)){case 1:n=oT;break;case 4:n=P3;break;case 16:n=R0;break;case 536870912:n=N3;break;default:n=R0}n=nF(n,qO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qO(t,e){if(d0=-1,f0=0,gn&6)throw Error(Fe(327));var n=t.callbackNode;if(_f()&&t.callbackNode!==n)return null;var r=P0(t,t===kr?Vr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Y0(t,r);else{e=r;var i=gn;gn|=2;var s=KO();(kr!==t||Vr!==e)&&(_a=null,Hf=ur()+500,gu(t,e));do try{JG();break}catch(a){ZO(t,a)}while(!0);xT(),G0.current=s,gn=i,yr!==null?e=0:(kr=null,Vr=0,e=br)}if(e!==0){if(e===2&&(i=dM(t),i!==0&&(r=i,e=BM(t,i))),e===1)throw n=xm,gu(t,0),Cl(t,r),Vi(t,ur()),n;if(e===6)Cl(t,r);else{if(i=t.current.alternate,!(r&30)&&!KG(i)&&(e=Y0(t,r),e===2&&(s=dM(t),s!==0&&(r=s,e=BM(t,s))),e===1))throw n=xm,gu(t,0),Cl(t,r),Vi(t,ur()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Wc(t,Oi,_a);break;case 3:if(Cl(t,r),(r&130023424)===r&&(e=DT+500-ur(),10<e)){if(P0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Si(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xM(Wc.bind(null,t,Oi,_a),e);break}Wc(t,Oi,_a);break;case 4:if(Cl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-oo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ur()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZG(r/1960))-r,10<r){t.timeoutHandle=xM(Wc.bind(null,t,Oi,_a),r);break}Wc(t,Oi,_a);break;case 5:Wc(t,Oi,_a);break;default:throw Error(Fe(329))}}}return Vi(t,ur()),t.callbackNode===n?qO.bind(null,t):null}function BM(t,e){var n=Op;return t.current.memoizedState.isDehydrated&&(gu(t,e).flags|=256),t=Y0(t,e),t!==2&&(e=Oi,Oi=n,e!==null&&zM(e)),t}function zM(t){Oi===null?Oi=t:Oi.push.apply(Oi,t)}function KG(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!co(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cl(t,e){for(e&=~LT,e&=~C_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oo(e),r=1<<n;t[n]=-1,e&=~r}}function KN(t){if(gn&6)throw Error(Fe(327));_f();var e=P0(t,0);if(!(e&1))return Vi(t,ur()),null;var n=Y0(t,e);if(t.tag!==0&&n===2){var r=dM(t);r!==0&&(e=r,n=BM(t,r))}if(n===1)throw n=xm,gu(t,0),Cl(t,e),Vi(t,ur()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wc(t,Oi,_a),Vi(t,ur()),null}function kT(t,e){var n=gn;gn|=1;try{return t(e)}finally{gn=n,gn===0&&(Hf=ur()+500,M_&&dc())}}function Ru(t){Fl!==null&&Fl.tag===0&&!(gn&6)&&_f();var e=gn;gn|=1;var n=Is.transition,r=Tn;try{if(Is.transition=null,Tn=1,t)return t()}finally{Tn=r,Is.transition=n,gn=e,!(gn&6)&&dc()}}function OT(){qi=tf.current,Fn(tf)}function gu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AG(n)),yr!==null)for(n=yr.return;n!==null;){var r=n;switch(gT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&k0();break;case 3:Vf(),Fn(Bi),Fn(ai),ET();break;case 5:MT(r);break;case 4:Vf();break;case 13:Fn(Gn);break;case 19:Fn(Gn);break;case 10:_T(r.type._context);break;case 22:case 23:OT()}n=n.return}if(kr=t,yr=t=Xl(t.current,null),Vr=qi=e,br=0,xm=null,LT=C_=Cu=0,Oi=Op=null,tu!==null){for(e=0;e<tu.length;e++)if(n=tu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}tu=null}return t}function ZO(t,e){do{var n=yr;try{if(xT(),l0.current=W0,H0){for(var r=Yn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}H0=!1}if(Au=0,Lr=Sr=Yn=null,Dp=!1,gm=0,IT.current=null,n===null||n.return===null){br=1,xm=e,yr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Vr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=UN(o);if(m!==null){m.flags&=-257,BN(m,o,a,s,e),m.mode&1&&FN(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){FN(s,c,e),FT();break e}l=Error(Fe(426))}}else if(jn&&a.mode&1){var x=UN(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),BN(x,o,a,s,e),vT(jf(l,a));break e}}s=l=jf(l,a),br!==4&&(br=2),Op===null?Op=[s]:Op.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=LO(s,l,e);NN(s,g);break e;case 1:a=l;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Wl===null||!Wl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=DO(s,a,e);NN(s,E);break e}}s=s.return}while(s!==null)}JO(n)}catch(R){e=R,yr===n&&n!==null&&(yr=n=n.return);continue}break}while(!0)}function KO(){var t=G0.current;return G0.current=W0,t===null?W0:t}function FT(){(br===0||br===3||br===2)&&(br=4),kr===null||!(Cu&268435455)&&!(C_&268435455)||Cl(kr,Vr)}function Y0(t,e){var n=gn;gn|=2;var r=KO();(kr!==t||Vr!==e)&&(_a=null,gu(t,e));do try{QG();break}catch(i){ZO(t,i)}while(!0);if(xT(),gn=n,G0.current=r,yr!==null)throw Error(Fe(261));return kr=null,Vr=0,br}function QG(){for(;yr!==null;)QO(yr)}function JG(){for(;yr!==null&&!MW();)QO(yr)}function QO(t){var e=tF(t.alternate,t,qi);t.memoizedProps=t.pendingProps,e===null?JO(t):yr=e,IT.current=null}function JO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XG(n,e),n!==null){n.flags&=32767,yr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{br=6,yr=null;return}}else if(n=GG(n,e,qi),n!==null){yr=n;return}if(e=e.sibling,e!==null){yr=e;return}yr=e=t}while(e!==null);br===0&&(br=5)}function Wc(t,e,n){var r=Tn,i=Is.transition;try{Is.transition=null,Tn=1,e6(t,e,n,r)}finally{Is.transition=i,Tn=r}return null}function e6(t,e,n,r){do _f();while(Fl!==null);if(gn&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(DW(t,s),t===kr&&(yr=kr=null,Vr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yv||(Yv=!0,nF(R0,function(){return _f(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Is.transition,Is.transition=null;var o=Tn;Tn=1;var a=gn;gn|=4,IT.current=null,YG(t,n),$O(n,t),_G(vM),N0=!!gM,vM=gM=null,t.current=n,qG(n),EW(),gn=a,Tn=o,Is.transition=s}else t.current=n;if(Yv&&(Yv=!1,Fl=t,$0=i),s=t.pendingLanes,s===0&&(Wl=null),CW(n.stateNode),Vi(t,ur()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(X0)throw X0=!1,t=FM,FM=null,t;return $0&1&&t.tag!==0&&_f(),s=t.pendingLanes,s&1?t===UM?Fp++:(Fp=0,UM=t):Fp=0,dc(),null}function _f(){if(Fl!==null){var t=L3($0),e=Is.transition,n=Tn;try{if(Is.transition=null,Tn=16>t?16:t,Fl===null)var r=!1;else{if(t=Fl,Fl=null,$0=0,gn&6)throw Error(Fe(331));var i=gn;for(gn|=4,gt=t.current;gt!==null;){var s=gt,o=s.child;if(gt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(gt=c;gt!==null;){var u=gt;switch(u.tag){case 0:case 11:case 15:kp(8,u,s)}var h=u.child;if(h!==null)h.return=u,gt=h;else for(;gt!==null;){u=gt;var p=u.sibling,m=u.return;if(WO(u),u===c){gt=null;break}if(p!==null){p.return=m,gt=p;break}gt=m}}}var v=s.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}gt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,gt=o;else e:for(;gt!==null;){if(s=gt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kp(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,gt=g;break e}gt=s.return}}var _=t.current;for(gt=_;gt!==null;){o=gt;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,gt=S;else e:for(o=_;gt!==null;){if(a=gt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:A_(9,a)}}catch(R){nr(a,a.return,R)}if(a===o){gt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,gt=E;break e}gt=a.return}}if(gn=i,dc(),zo&&typeof zo.onPostCommitFiberRoot=="function")try{zo.onPostCommitFiberRoot(x_,t)}catch{}r=!0}return r}finally{Tn=n,Is.transition=e}}return!1}function QN(t,e,n){e=jf(n,e),e=LO(t,e,1),t=Hl(t,e,1),e=Si(),t!==null&&(fg(t,1,e),Vi(t,e))}function nr(t,e,n){if(t.tag===3)QN(t,t,n);else for(;e!==null;){if(e.tag===3){QN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wl===null||!Wl.has(r))){t=jf(n,t),t=DO(e,t,1),e=Hl(e,t,1),t=Si(),e!==null&&(fg(e,1,t),Vi(e,t));break}}e=e.return}}function t6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Si(),t.pingedLanes|=t.suspendedLanes&n,kr===t&&(Vr&n)===n&&(br===4||br===3&&(Vr&130023424)===Vr&&500>ur()-DT?gu(t,0):LT|=n),Vi(t,e)}function eF(t,e){e===0&&(t.mode&1?(e=Uv,Uv<<=1,!(Uv&130023424)&&(Uv=4194304)):e=1);var n=Si();t=Ua(t,e),t!==null&&(fg(t,e,n),Vi(t,n))}function n6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eF(t,n)}function r6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),eF(t,n)}var tF;tF=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bi.current)Ui=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ui=!1,WG(t,e,n);Ui=!!(t.flags&131072)}else Ui=!1,jn&&e.flags&1048576&&sO(e,U0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;u0(t,e),t=e.pendingProps;var i=Uf(e,ai.current);xf(e,n),i=AT(null,e,r,t,i,n);var s=CT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zi(r)?(s=!0,O0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ST(e),i.updater=T_,e.stateNode=i,i._reactInternals=e,TM(e,r,t,n),e=RM(null,e,r,!0,s,n)):(e.tag=0,jn&&s&&mT(e),vi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(u0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=s6(r),t=$s(r,t),i){case 0:e=CM(null,e,r,t,n);break e;case 1:e=jN(null,e,r,t,n);break e;case 11:e=zN(null,e,r,t,n);break e;case 14:e=VN(null,e,r,$s(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),CM(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),jN(t,e,r,i,n);case 3:e:{if(UO(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dO(t,e),V0(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=jf(Error(Fe(423)),e),e=HN(t,e,r,n,i);break e}else if(r!==i){i=jf(Error(Fe(424)),e),e=HN(t,e,r,n,i);break e}else for(es=jl(e.stateNode.containerInfo.firstChild),ts=e,jn=!0,eo=null,n=cO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bf(),r===i){e=Ba(t,e,n);break e}vi(t,e,r,n)}e=e.child}return e;case 5:return fO(e),t===null&&bM(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,yM(r,i)?o=null:s!==null&&yM(r,s)&&(e.flags|=32),FO(t,e),vi(t,e,o,n),e.child;case 6:return t===null&&bM(e),null;case 13:return BO(t,e,n);case 4:return bT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zf(e,null,r,n):vi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),zN(t,e,r,i,n);case 7:return vi(t,e,e.pendingProps,n),e.child;case 8:return vi(t,e,e.pendingProps.children,n),e.child;case 12:return vi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ln(B0,r._currentValue),r._currentValue=o,s!==null)if(co(s.value,o)){if(s.children===i.children&&!Bi.current){e=Ba(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Pa(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),MM(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),MM(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xf(e,n),i=Ls(i),r=r(i),e.flags|=1,vi(t,e,r,n),e.child;case 14:return r=e.type,i=$s(r,e.pendingProps),i=$s(r.type,i),VN(t,e,r,i,n);case 15:return kO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$s(r,i),u0(t,e),e.tag=1,zi(r)?(t=!0,O0(e)):t=!1,xf(e,n),IO(e,r,i),TM(e,r,i,n),RM(null,e,r,!0,t,n);case 19:return zO(t,e,n);case 22:return OO(t,e,n)}throw Error(Fe(156,e.tag))};function nF(t,e){return R3(t,e)}function i6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t,e,n,r){return new i6(t,e,n,r)}function UT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function s6(t){if(typeof t=="function")return UT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rT)return 11;if(t===iT)return 14}return 2}function Xl(t,e){var n=t.alternate;return n===null?(n=Ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function h0(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")UT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gd:return vu(n.children,i,s,e);case nT:o=8,i|=8;break;case Z1:return t=Ps(12,n,e,i|2),t.elementType=Z1,t.lanes=s,t;case K1:return t=Ps(13,n,e,i),t.elementType=K1,t.lanes=s,t;case Q1:return t=Ps(19,n,e,i),t.elementType=Q1,t.lanes=s,t;case f3:return R_(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u3:o=10;break e;case d3:o=9;break e;case rT:o=11;break e;case iT:o=14;break e;case Ml:o=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=Ps(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vu(t,e,n,r){return t=Ps(7,t,r,e),t.lanes=n,t}function R_(t,e,n,r){return t=Ps(22,t,r,e),t.elementType=f3,t.lanes=n,t.stateNode={isHidden:!1},t}function vb(t,e,n){return t=Ps(6,t,null,e),t.lanes=n,t}function yb(t,e,n){return e=Ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function o6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=QS(0),this.expirationTimes=QS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=QS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function BT(t,e,n,r,i,s,o,a,l){return t=new o6(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ps(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ST(s),t}function a6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rF(t){if(!t)return Zl;t=t._reactInternals;e:{if(Wu(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(zi(n))return rO(t,n,e)}return e}function iF(t,e,n,r,i,s,o,a,l){return t=BT(n,r,!0,t,i,s,o,a,l),t.context=rF(null),n=t.current,r=Si(),i=Gl(n),s=Pa(r,i),s.callback=e??null,Hl(n,s,i),t.current.lanes=i,fg(t,i,r),Vi(t,r),t}function P_(t,e,n,r){var i=e.current,s=Si(),o=Gl(i);return n=rF(n),e.context===null?e.context=n:e.pendingContext=n,e=Pa(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hl(i,e,o),t!==null&&(ao(t,i,o,s),a0(t,i,o)),o}function q0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function JN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zT(t,e){JN(t,e),(t=t.alternate)&&JN(t,e)}function l6(){return null}var sF=typeof reportError=="function"?reportError:function(t){console.error(t)};function VT(t){this._internalRoot=t}N_.prototype.render=VT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));P_(t,e,null,null)};N_.prototype.unmount=VT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ru(function(){P_(null,t,null,null)}),e[Fa]=null}};function N_(t){this._internalRoot=t}N_.prototype.unstable_scheduleHydration=function(t){if(t){var e=O3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Al.length&&e!==0&&e<Al[n].priority;n++);Al.splice(n,0,t),n===0&&U3(t)}};function jT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function I_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function eI(){}function c6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=q0(o);s.call(c)}}var o=iF(e,r,t,0,null,!1,!1,"",eI);return t._reactRootContainer=o,t[Fa]=o.current,dm(t.nodeType===8?t.parentNode:t),Ru(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=q0(l);a.call(c)}}var l=BT(t,0,!1,null,null,!1,!1,"",eI);return t._reactRootContainer=l,t[Fa]=l.current,dm(t.nodeType===8?t.parentNode:t),Ru(function(){P_(e,l,n,r)}),l}function L_(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=q0(o);a.call(l)}}P_(e,o,t,i)}else o=c6(n,e,t,i,r);return q0(o)}D3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vp(e.pendingLanes);n!==0&&(aT(e,n|1),Vi(e,ur()),!(gn&6)&&(Hf=ur()+500,dc()))}break;case 13:Ru(function(){var r=Ua(t,1);if(r!==null){var i=Si();ao(r,t,1,i)}}),zT(t,1)}};lT=function(t){if(t.tag===13){var e=Ua(t,134217728);if(e!==null){var n=Si();ao(e,t,134217728,n)}zT(t,134217728)}};k3=function(t){if(t.tag===13){var e=Gl(t),n=Ua(t,e);if(n!==null){var r=Si();ao(n,t,e,r)}zT(t,e)}};O3=function(){return Tn};F3=function(t,e){var n=Tn;try{return Tn=t,e()}finally{Tn=n}};lM=function(t,e,n){switch(e){case"input":if(tM(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=b_(r);if(!i)throw Error(Fe(90));p3(r),tM(r,i)}}}break;case"textarea":g3(t,n);break;case"select":e=n.value,e!=null&&mf(t,!!n.multiple,e,!1)}};b3=kT;M3=Ru;var u6={usingClientEntryPoint:!1,Events:[pg,qd,b_,w3,S3,kT]},Xh={findFiberByHostInstance:eu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d6={bundleType:Xh.bundleType,version:Xh.version,rendererPackageName:Xh.rendererPackageName,rendererConfig:Xh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Za.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=A3(t),t===null?null:t.stateNode},findFiberByHostInstance:Xh.findFiberByHostInstance||l6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qv.isDisabled&&qv.supportsFiber)try{x_=qv.inject(d6),zo=qv}catch{}}cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u6;cs.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jT(e))throw Error(Fe(200));return a6(t,e,null,n)};cs.createRoot=function(t,e){if(!jT(t))throw Error(Fe(299));var n=!1,r="",i=sF;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=BT(t,1,!1,null,null,n,!1,r,i),t[Fa]=e.current,dm(t.nodeType===8?t.parentNode:t),new VT(e)};cs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=A3(e),t=t===null?null:t.stateNode,t};cs.flushSync=function(t){return Ru(t)};cs.hydrate=function(t,e,n){if(!I_(e))throw Error(Fe(200));return L_(null,t,e,!0,n)};cs.hydrateRoot=function(t,e,n){if(!jT(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sF;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iF(e,null,t,1,n??null,i,!1,s,o),t[Fa]=e.current,dm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new N_(e)};cs.render=function(t,e,n){if(!I_(e))throw Error(Fe(200));return L_(null,t,e,!1,n)};cs.unmountComponentAtNode=function(t){if(!I_(t))throw Error(Fe(40));return t._reactRootContainer?(Ru(function(){L_(null,null,t,!1,function(){t._reactRootContainer=null,t[Fa]=null})}),!0):!1};cs.unstable_batchedUpdates=kT;cs.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!I_(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return L_(t,e,n,!1,r)};cs.version="18.3.1-next-f1338f8080-20240426";function oF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oF)}catch(t){console.error(t)}}oF(),o3.exports=cs;var Gu=o3.exports;const aF=YE(Gu),f6=$k({__proto__:null,default:aF},[Gu]);var lF,tI=Gu;lF=tI.createRoot,tI.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vn(){return Vn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vn.apply(this,arguments)}var vr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vr||(vr={}));const nI="popstate";function h6(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return _m("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Pu(i)}return m6(e,n,null,t)}function dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function p6(){return Math.random().toString(36).substr(2,8)}function rI(t,e){return{usr:t.state,key:t.key,idx:e}}function _m(t,e,n,r){return n===void 0&&(n=null),Vn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fc(e):e,{state:n,key:e&&e.key||r||p6()})}function Pu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function fc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function m6(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=vr.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Vn({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=vr.Pop;let x=u(),g=x==null?null:x-c;c=x,l&&l({action:a,location:y.location,delta:g})}function p(x,g){a=vr.Push;let _=_m(y.location,x,g);c=u()+1;let S=rI(_,c),E=y.createHref(_);try{o.pushState(S,"",E)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(E)}s&&l&&l({action:a,location:y.location,delta:1})}function m(x,g){a=vr.Replace;let _=_m(y.location,x,g);c=u();let S=rI(_,c),E=y.createHref(_);o.replaceState(S,"",E),s&&l&&l({action:a,location:y.location,delta:0})}function v(x){let g=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof x=="string"?x:Pu(x);return _=_.replace(/ $/,"%20"),dn(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let y={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(nI,h),l=x,()=>{i.removeEventListener(nI,h),l=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let g=v(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return y}var En;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(En||(En={}));const g6=new Set(["lazy","caseSensitive","path","id","index","children"]);function v6(t){return t.index===!0}function Z0(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(dn(i.index!==!0||!i.children,"Cannot specify children on an index route"),dn(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),v6(i)){let l=Vn({},i,e(i),{id:a});return r[a]=l,l}else{let l=Vn({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Z0(i.children,e,o,r)),l}})}function Kc(t,e,n){return n===void 0&&(n="/"),p0(t,e,n,!1)}function p0(t,e,n,r){let i=typeof e=="string"?fc(e):e,s=ah(i.pathname||"/",n);if(s==null)return null;let o=cF(t);x6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=P6(s);a=C6(o[l],c,r)}return a}function y6(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function cF(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(dn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Na([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(dn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cF(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:T6(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of uF(s.path))i(s,o,l)}),e}function uF(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uF(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function x6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:A6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _6=/^:[\w-]+$/,w6=3,S6=2,b6=1,M6=10,E6=-2,iI=t=>t==="*";function T6(t,e){let n=t.split("/"),r=n.length;return n.some(iI)&&(r+=E6),e&&(r+=S6),n.filter(i=>!iI(i)).reduce((i,s)=>i+(_6.test(s)?w6:s===""?b6:M6),r)}function A6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function C6(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=sI({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!h&&c&&n&&!r[r.length-1].route.index&&(h=sI({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Na([s,h.pathname]),pathnameBase:L6(Na([s,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(s=Na([s,h.pathnameBase]))}return o}function sI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=R6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?c[p]=void 0:c[p]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function R6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Wf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function P6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ah(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?fc(t):t;return{pathname:n?n.startsWith("/")?n:I6(n,e):e,search:D6(r),hash:k6(i)}}function I6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xb(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function HT(t,e){let n=dF(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function WT(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=fc(t):(i=Vn({},t),dn(!i.pathname||!i.pathname.includes("?"),xb("?","pathname","search",i)),dn(!i.pathname||!i.pathname.includes("#"),xb("#","pathname","hash",i)),dn(!i.search||!i.search.includes("#"),xb("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=N6(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Na=t=>t.join("/").replace(/\/\/+/g,"/"),L6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,k6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class K0{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function wm(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fF=["post","put","patch","delete"],O6=new Set(fF),F6=["get",...fF],U6=new Set(F6),B6=new Set([301,302,303,307,308]),z6=new Set([307,308]),_b={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},V6={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$h={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},GT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,j6=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),hF="remix-router-transitions";function H6(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;dn(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let Q=t.detectErrorBoundary;i=ce=>({hasErrorBoundary:Q(ce)})}else i=j6;let s={},o=Z0(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.dataStrategy||$6,u=t.patchRoutesOnNavigation,h=Vn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),p=null,m=new Set,v=null,y=null,x=null,g=t.hydrationData!=null,_=Kc(o,t.history.location,l),S=!1,E=null;if(_==null&&!u){let Q=Di(404,{pathname:t.history.location.pathname}),{matches:ce,route:ge}=gI(o);_=ce,E={[ge.id]:Q}}_&&!t.hydrationData&&Sn(_,o,t.history.location.pathname).active&&(_=null);let R;if(_)if(_.some(Q=>Q.route.lazy))R=!1;else if(!_.some(Q=>Q.route.loader))R=!0;else if(h.v7_partialHydration){let Q=t.hydrationData?t.hydrationData.loaderData:null,ce=t.hydrationData?t.hydrationData.errors:null;if(ce){let ge=_.findIndex(Le=>ce[Le.route.id]!==void 0);R=_.slice(0,ge+1).every(Le=>!jM(Le.route,Q,ce))}else R=_.every(ge=>!jM(ge.route,Q,ce))}else R=t.hydrationData!=null;else if(R=!1,_=[],h.v7_partialHydration){let Q=Sn(null,o,t.history.location.pathname);Q.active&&Q.matches&&(S=!0,_=Q.matches)}let I,C={historyAction:t.history.action,location:t.history.location,matches:_,initialized:R,navigation:_b,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||E,fetchers:new Map,blockers:new Map},D=vr.Pop,L=!1,P,F=!1,z=new Map,H=null,q=!1,se=!1,K=[],ne=new Set,O=new Map,W=0,Y=-1,re=new Map,we=new Set,Ue=new Map,de=new Map,Se=new Set,Ie=new Map,he=new Map,ze;function rt(){if(p=t.history.listen(Q=>{let{action:ce,location:ge,delta:Le}=Q;if(ze){ze(),ze=void 0;return}Wf(he.size===0||Le!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let $e=ke({currentLocation:C.location,nextLocation:ge,historyAction:ce});if($e&&Le!=null){let wt=new Promise(Lt=>{ze=Lt});t.history.go(Le*-1),Z($e,{state:"blocked",location:ge,proceed(){Z($e,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),wt.then(()=>t.history.go(Le))},reset(){let Lt=new Map(C.blockers);Lt.set($e,$h),fe({blockers:Lt})}});return}return Pe(ce,ge)}),n){a8(e,z);let Q=()=>l8(e,z);e.addEventListener("pagehide",Q),H=()=>e.removeEventListener("pagehide",Q)}return C.initialized||Pe(vr.Pop,C.location,{initialHydration:!0}),I}function je(){p&&p(),H&&H(),m.clear(),P&&P.abort(),C.fetchers.forEach((Q,ce)=>Ce(ce)),C.blockers.forEach((Q,ce)=>Xe(ce))}function We(Q){return m.add(Q),()=>m.delete(Q)}function fe(Q,ce){ce===void 0&&(ce={}),C=Vn({},C,Q);let ge=[],Le=[];h.v7_fetcherPersist&&C.fetchers.forEach(($e,wt)=>{$e.state==="idle"&&(Se.has(wt)?Le.push(wt):ge.push(wt))}),Se.forEach($e=>{!C.fetchers.has($e)&&!O.has($e)&&Le.push($e)}),[...m].forEach($e=>$e(C,{deletedFetchers:Le,viewTransitionOpts:ce.viewTransitionOpts,flushSync:ce.flushSync===!0})),h.v7_fetcherPersist?(ge.forEach($e=>C.fetchers.delete($e)),Le.forEach($e=>Ce($e))):Le.forEach($e=>Se.delete($e))}function Me(Q,ce,ge){var Le,$e;let{flushSync:wt}=ge===void 0?{}:ge,Lt=C.actionData!=null&&C.navigation.formMethod!=null&&Js(C.navigation.formMethod)&&C.navigation.state==="loading"&&((Le=Q.state)==null?void 0:Le._isRedirect)!==!0,ht;ce.actionData?Object.keys(ce.actionData).length>0?ht=ce.actionData:ht=null:Lt?ht=C.actionData:ht=null;let pt=ce.loaderData?pI(C.loaderData,ce.loaderData,ce.matches||[],ce.errors):C.loaderData,lt=C.blockers;lt.size>0&&(lt=new Map(lt),lt.forEach((ln,Kn)=>lt.set(Kn,$h)));let St=L===!0||C.navigation.formMethod!=null&&Js(C.navigation.formMethod)&&(($e=Q.state)==null?void 0:$e._isRedirect)!==!0;a&&(o=a,a=void 0),q||D===vr.Pop||(D===vr.Push?t.history.push(Q,Q.state):D===vr.Replace&&t.history.replace(Q,Q.state));let Ht;if(D===vr.Pop){let ln=z.get(C.location.pathname);ln&&ln.has(Q.pathname)?Ht={currentLocation:C.location,nextLocation:Q}:z.has(Q.pathname)&&(Ht={currentLocation:Q,nextLocation:C.location})}else if(F){let ln=z.get(C.location.pathname);ln?ln.add(Q.pathname):(ln=new Set([Q.pathname]),z.set(C.location.pathname,ln)),Ht={currentLocation:C.location,nextLocation:Q}}fe(Vn({},ce,{actionData:ht,loaderData:pt,historyAction:D,location:Q,initialized:!0,navigation:_b,revalidation:"idle",restoreScrollPosition:cn(Q,ce.matches||C.matches),preventScrollReset:St,blockers:lt}),{viewTransitionOpts:Ht,flushSync:wt===!0}),D=vr.Pop,L=!1,F=!1,q=!1,se=!1,K=[]}async function X(Q,ce){if(typeof Q=="number"){t.history.go(Q);return}let ge=VM(C.location,C.matches,l,h.v7_prependBasename,Q,h.v7_relativeSplatPath,ce==null?void 0:ce.fromRouteId,ce==null?void 0:ce.relative),{path:Le,submission:$e,error:wt}=oI(h.v7_normalizeFormMethod,!1,ge,ce),Lt=C.location,ht=_m(C.location,Le,ce&&ce.state);ht=Vn({},ht,t.history.encodeLocation(ht));let pt=ce&&ce.replace!=null?ce.replace:void 0,lt=vr.Push;pt===!0?lt=vr.Replace:pt===!1||$e!=null&&Js($e.formMethod)&&$e.formAction===C.location.pathname+C.location.search&&(lt=vr.Replace);let St=ce&&"preventScrollReset"in ce?ce.preventScrollReset===!0:void 0,Ht=(ce&&ce.flushSync)===!0,ln=ke({currentLocation:Lt,nextLocation:ht,historyAction:lt});if(ln){Z(ln,{state:"blocked",location:ht,proceed(){Z(ln,{state:"proceeding",proceed:void 0,reset:void 0,location:ht}),X(Q,ce)},reset(){let Kn=new Map(C.blockers);Kn.set(ln,$h),fe({blockers:Kn})}});return}return await Pe(lt,ht,{submission:$e,pendingError:wt,preventScrollReset:St,replace:ce&&ce.replace,enableViewTransition:ce&&ce.viewTransition,flushSync:Ht})}function ot(){if(pe(),fe({revalidation:"loading"}),C.navigation.state!=="submitting"){if(C.navigation.state==="idle"){Pe(C.historyAction,C.location,{startUninterruptedRevalidation:!0});return}Pe(D||C.historyAction,C.navigation.location,{overrideNavigation:C.navigation,enableViewTransition:F===!0})}}async function Pe(Q,ce,ge){P&&P.abort(),P=null,D=Q,q=(ge&&ge.startUninterruptedRevalidation)===!0,Nt(C.location,C.matches),L=(ge&&ge.preventScrollReset)===!0,F=(ge&&ge.enableViewTransition)===!0;let Le=a||o,$e=ge&&ge.overrideNavigation,wt=ge!=null&&ge.initialHydration&&C.matches&&C.matches.length>0&&!S?C.matches:Kc(Le,ce,l),Lt=(ge&&ge.flushSync)===!0;if(wt&&C.initialized&&!se&&J6(C.location,ce)&&!(ge&&ge.submission&&Js(ge.submission.formMethod))){Me(ce,{matches:wt},{flushSync:Lt});return}let ht=Sn(wt,Le,ce.pathname);if(ht.active&&ht.matches&&(wt=ht.matches),!wt){let{error:U,notFoundMatches:ee,route:ue}=xe(ce.pathname);Me(ce,{matches:ee,loaderData:{},errors:{[ue.id]:U}},{flushSync:Lt});return}P=new AbortController;let pt=gd(t.history,ce,P.signal,ge&&ge.submission),lt;if(ge&&ge.pendingError)lt=[Qc(wt).route.id,{type:En.error,error:ge.pendingError}];else if(ge&&ge.submission&&Js(ge.submission.formMethod)){let U=await Ge(pt,ce,ge.submission,wt,ht.active,{replace:ge.replace,flushSync:Lt});if(U.shortCircuited)return;if(U.pendingActionResult){let[ee,ue]=U.pendingActionResult;if(Ki(ue)&&wm(ue.error)&&ue.error.status===404){P=null,Me(ce,{matches:U.matches,loaderData:{},errors:{[ee]:ue.error}});return}}wt=U.matches||wt,lt=U.pendingActionResult,$e=wb(ce,ge.submission),Lt=!1,ht.active=!1,pt=gd(t.history,pt.url,pt.signal)}let{shortCircuited:St,matches:Ht,loaderData:ln,errors:Kn}=await Be(pt,ce,wt,ht.active,$e,ge&&ge.submission,ge&&ge.fetcherSubmission,ge&&ge.replace,ge&&ge.initialHydration===!0,Lt,lt);St||(P=null,Me(ce,Vn({matches:Ht||wt},mI(lt),{loaderData:ln,errors:Kn})))}async function Ge(Q,ce,ge,Le,$e,wt){wt===void 0&&(wt={}),pe();let Lt=s8(ce,ge);if(fe({navigation:Lt},{flushSync:wt.flushSync===!0}),$e){let lt=await Wt(Le,ce.pathname,Q.signal);if(lt.type==="aborted")return{shortCircuited:!0};if(lt.type==="error"){let St=Qc(lt.partialMatches).route.id;return{matches:lt.partialMatches,pendingActionResult:[St,{type:En.error,error:lt.error}]}}else if(lt.matches)Le=lt.matches;else{let{notFoundMatches:St,error:Ht,route:ln}=xe(ce.pathname);return{matches:St,pendingActionResult:[ln.id,{type:En.error,error:Ht}]}}}let ht,pt=xp(Le,ce);if(!pt.route.action&&!pt.route.lazy)ht={type:En.error,error:Di(405,{method:Q.method,pathname:ce.pathname,routeId:pt.route.id})};else if(ht=(await ae("action",C,Q,[pt],Le,null))[pt.route.id],Q.signal.aborted)return{shortCircuited:!0};if(ru(ht)){let lt;return wt&&wt.replace!=null?lt=wt.replace:lt=dI(ht.response.headers.get("Location"),new URL(Q.url),l)===C.location.pathname+C.location.search,await $(Q,ht,!0,{submission:ge,replace:lt}),{shortCircuited:!0}}if(Ul(ht))throw Di(400,{type:"defer-action"});if(Ki(ht)){let lt=Qc(Le,pt.route.id);return(wt&&wt.replace)!==!0&&(D=vr.Push),{matches:Le,pendingActionResult:[lt.route.id,ht]}}return{matches:Le,pendingActionResult:[pt.route.id,ht]}}async function Be(Q,ce,ge,Le,$e,wt,Lt,ht,pt,lt,St){let Ht=$e||wb(ce,wt),ln=wt||Lt||yI(Ht),Kn=!q&&(!h.v7_partialHydration||!pt);if(Le){if(Kn){let Tt=_t(St);fe(Vn({navigation:Ht},Tt!==void 0?{actionData:Tt}:{}),{flushSync:lt})}let it=await Wt(ge,ce.pathname,Q.signal);if(it.type==="aborted")return{shortCircuited:!0};if(it.type==="error"){let Tt=Qc(it.partialMatches).route.id;return{matches:it.partialMatches,loaderData:{},errors:{[Tt]:it.error}}}else if(it.matches)ge=it.matches;else{let{error:Tt,notFoundMatches:At,route:Vt}=xe(ce.pathname);return{matches:At,loaderData:{},errors:{[Vt.id]:Tt}}}}let U=a||o,[ee,ue]=lI(t.history,C,ge,ln,ce,h.v7_partialHydration&&pt===!0,h.v7_skipActionErrorRevalidation,se,K,ne,Se,Ue,we,U,l,St);if(Te(it=>!(ge&&ge.some(Tt=>Tt.route.id===it))||ee&&ee.some(Tt=>Tt.route.id===it)),Y=++W,ee.length===0&&ue.length===0){let it=et();return Me(ce,Vn({matches:ge,loaderData:{},errors:St&&Ki(St[1])?{[St[0]]:St[1].error}:null},mI(St),it?{fetchers:new Map(C.fetchers)}:{}),{flushSync:lt}),{shortCircuited:!0}}if(Kn){let it={};if(!Le){it.navigation=Ht;let Tt=_t(St);Tt!==void 0&&(it.actionData=Tt)}ue.length>0&&(it.fetchers=Ze(ue)),fe(it,{flushSync:lt})}ue.forEach(it=>{vt(it.key),it.controller&&O.set(it.key,it.controller)});let ye=()=>ue.forEach(it=>vt(it.key));P&&P.signal.addEventListener("abort",ye);let{loaderResults:oe,fetcherResults:De}=await te(C,ge,ee,ue,Q);if(Q.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",ye),ue.forEach(it=>O.delete(it.key));let He=Zv(oe);if(He)return await $(Q,He.result,!0,{replace:ht}),{shortCircuited:!0};if(He=Zv(De),He)return we.add(He.key),await $(Q,He.result,!0,{replace:ht}),{shortCircuited:!0};let{loaderData:dt,errors:ft}=hI(C,ge,oe,St,ue,De,Ie);Ie.forEach((it,Tt)=>{it.subscribe(At=>{(At||it.done)&&Ie.delete(Tt)})}),h.v7_partialHydration&&pt&&C.errors&&(ft=Vn({},C.errors,ft));let It=et(),Ut=J(Y),mt=It||Ut||ue.length>0;return Vn({matches:ge,loaderData:dt,errors:ft},mt?{fetchers:new Map(C.fetchers)}:{})}function _t(Q){if(Q&&!Ki(Q[1]))return{[Q[0]]:Q[1].data};if(C.actionData)return Object.keys(C.actionData).length===0?null:C.actionData}function Ze(Q){return Q.forEach(ce=>{let ge=C.fetchers.get(ce.key),Le=Yh(void 0,ge?ge.data:void 0);C.fetchers.set(ce.key,Le)}),new Map(C.fetchers)}function V(Q,ce,ge,Le){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");vt(Q);let $e=(Le&&Le.flushSync)===!0,wt=a||o,Lt=VM(C.location,C.matches,l,h.v7_prependBasename,ge,h.v7_relativeSplatPath,ce,Le==null?void 0:Le.relative),ht=Kc(wt,Lt,l),pt=Sn(ht,wt,Lt);if(pt.active&&pt.matches&&(ht=pt.matches),!ht){Ne(Q,ce,Di(404,{pathname:Lt}),{flushSync:$e});return}let{path:lt,submission:St,error:Ht}=oI(h.v7_normalizeFormMethod,!0,Lt,Le);if(Ht){Ne(Q,ce,Ht,{flushSync:$e});return}let ln=xp(ht,lt),Kn=(Le&&Le.preventScrollReset)===!0;if(St&&Js(St.formMethod)){N(Q,ce,lt,ln,ht,pt.active,$e,Kn,St);return}Ue.set(Q,{routeId:ce,path:lt}),B(Q,ce,lt,ln,ht,pt.active,$e,Kn,St)}async function N(Q,ce,ge,Le,$e,wt,Lt,ht,pt){pe(),Ue.delete(Q);function lt(Mt){if(!Mt.route.action&&!Mt.route.lazy){let Ye=Di(405,{method:pt.formMethod,pathname:ge,routeId:ce});return Ne(Q,ce,Ye,{flushSync:Lt}),!0}return!1}if(!wt&&lt(Le))return;let St=C.fetchers.get(Q);me(Q,o8(pt,St),{flushSync:Lt});let Ht=new AbortController,ln=gd(t.history,ge,Ht.signal,pt);if(wt){let Mt=await Wt($e,new URL(ln.url).pathname,ln.signal,Q);if(Mt.type==="aborted")return;if(Mt.type==="error"){Ne(Q,ce,Mt.error,{flushSync:Lt});return}else if(Mt.matches){if($e=Mt.matches,Le=xp($e,ge),lt(Le))return}else{Ne(Q,ce,Di(404,{pathname:ge}),{flushSync:Lt});return}}O.set(Q,Ht);let Kn=W,ee=(await ae("action",C,ln,[Le],$e,Q))[Le.route.id];if(ln.signal.aborted){O.get(Q)===Ht&&O.delete(Q);return}if(h.v7_fetcherPersist&&Se.has(Q)){if(ru(ee)||Ki(ee)){me(Q,_l(void 0));return}}else{if(ru(ee))if(O.delete(Q),Y>Kn){me(Q,_l(void 0));return}else return we.add(Q),me(Q,Yh(pt)),$(ln,ee,!1,{fetcherSubmission:pt,preventScrollReset:ht});if(Ki(ee)){Ne(Q,ce,ee.error);return}}if(Ul(ee))throw Di(400,{type:"defer-action"});let ue=C.navigation.location||C.location,ye=gd(t.history,ue,Ht.signal),oe=a||o,De=C.navigation.state!=="idle"?Kc(oe,C.navigation.location,l):C.matches;dn(De,"Didn't find any matches after fetcher action");let He=++W;re.set(Q,He);let dt=Yh(pt,ee.data);C.fetchers.set(Q,dt);let[ft,It]=lI(t.history,C,De,pt,ue,!1,h.v7_skipActionErrorRevalidation,se,K,ne,Se,Ue,we,oe,l,[Le.route.id,ee]);It.filter(Mt=>Mt.key!==Q).forEach(Mt=>{let Ye=Mt.key,Nn=C.fetchers.get(Ye),nn=Yh(void 0,Nn?Nn.data:void 0);C.fetchers.set(Ye,nn),vt(Ye),Mt.controller&&O.set(Ye,Mt.controller)}),fe({fetchers:new Map(C.fetchers)});let Ut=()=>It.forEach(Mt=>vt(Mt.key));Ht.signal.addEventListener("abort",Ut);let{loaderResults:mt,fetcherResults:it}=await te(C,De,ft,It,ye);if(Ht.signal.aborted)return;Ht.signal.removeEventListener("abort",Ut),re.delete(Q),O.delete(Q),It.forEach(Mt=>O.delete(Mt.key));let Tt=Zv(mt);if(Tt)return $(ye,Tt.result,!1,{preventScrollReset:ht});if(Tt=Zv(it),Tt)return we.add(Tt.key),$(ye,Tt.result,!1,{preventScrollReset:ht});let{loaderData:At,errors:Vt}=hI(C,De,mt,void 0,It,it,Ie);if(C.fetchers.has(Q)){let Mt=_l(ee.data);C.fetchers.set(Q,Mt)}J(He),C.navigation.state==="loading"&&He>Y?(dn(D,"Expected pending action"),P&&P.abort(),Me(C.navigation.location,{matches:De,loaderData:At,errors:Vt,fetchers:new Map(C.fetchers)})):(fe({errors:Vt,loaderData:pI(C.loaderData,At,De,Vt),fetchers:new Map(C.fetchers)}),se=!1)}async function B(Q,ce,ge,Le,$e,wt,Lt,ht,pt){let lt=C.fetchers.get(Q);me(Q,Yh(pt,lt?lt.data:void 0),{flushSync:Lt});let St=new AbortController,Ht=gd(t.history,ge,St.signal);if(wt){let ee=await Wt($e,new URL(Ht.url).pathname,Ht.signal,Q);if(ee.type==="aborted")return;if(ee.type==="error"){Ne(Q,ce,ee.error,{flushSync:Lt});return}else if(ee.matches)$e=ee.matches,Le=xp($e,ge);else{Ne(Q,ce,Di(404,{pathname:ge}),{flushSync:Lt});return}}O.set(Q,St);let ln=W,U=(await ae("loader",C,Ht,[Le],$e,Q))[Le.route.id];if(Ul(U)&&(U=await XT(U,Ht.signal,!0)||U),O.get(Q)===St&&O.delete(Q),!Ht.signal.aborted){if(Se.has(Q)){me(Q,_l(void 0));return}if(ru(U))if(Y>ln){me(Q,_l(void 0));return}else{we.add(Q),await $(Ht,U,!1,{preventScrollReset:ht});return}if(Ki(U)){Ne(Q,ce,U.error);return}dn(!Ul(U),"Unhandled fetcher deferred data"),me(Q,_l(U.data))}}async function $(Q,ce,ge,Le){let{submission:$e,fetcherSubmission:wt,preventScrollReset:Lt,replace:ht}=Le===void 0?{}:Le;ce.response.headers.has("X-Remix-Revalidate")&&(se=!0);let pt=ce.response.headers.get("Location");dn(pt,"Expected a Location header on the redirect Response"),pt=dI(pt,new URL(Q.url),l);let lt=_m(C.location,pt,{_isRedirect:!0});if(n){let ee=!1;if(ce.response.headers.has("X-Remix-Reload-Document"))ee=!0;else if(GT.test(pt)){const ue=t.history.createURL(pt);ee=ue.origin!==e.location.origin||ah(ue.pathname,l)==null}if(ee){ht?e.location.replace(pt):e.location.assign(pt);return}}P=null;let St=ht===!0||ce.response.headers.has("X-Remix-Replace")?vr.Replace:vr.Push,{formMethod:Ht,formAction:ln,formEncType:Kn}=C.navigation;!$e&&!wt&&Ht&&ln&&Kn&&($e=yI(C.navigation));let U=$e||wt;if(z6.has(ce.response.status)&&U&&Js(U.formMethod))await Pe(St,lt,{submission:Vn({},U,{formAction:pt}),preventScrollReset:Lt||L,enableViewTransition:ge?F:void 0});else{let ee=wb(lt,$e);await Pe(St,lt,{overrideNavigation:ee,fetcherSubmission:wt,preventScrollReset:Lt||L,enableViewTransition:ge?F:void 0})}}async function ae(Q,ce,ge,Le,$e,wt){let Lt,ht={};try{Lt=await Y6(c,Q,ce,ge,Le,$e,wt,s,i)}catch(pt){return Le.forEach(lt=>{ht[lt.route.id]={type:En.error,error:pt}}),ht}for(let[pt,lt]of Object.entries(Lt))if(e8(lt)){let St=lt.result;ht[pt]={type:En.redirect,response:K6(St,ge,pt,$e,l,h.v7_relativeSplatPath)}}else ht[pt]=await Z6(lt);return ht}async function te(Q,ce,ge,Le,$e){let wt=Q.matches,Lt=ae("loader",Q,$e,ge,ce,null),ht=Promise.all(Le.map(async St=>{if(St.matches&&St.match&&St.controller){let ln=(await ae("loader",Q,gd(t.history,St.path,St.controller.signal),[St.match],St.matches,St.key))[St.match.route.id];return{[St.key]:ln}}else return Promise.resolve({[St.key]:{type:En.error,error:Di(404,{pathname:St.path})}})})),pt=await Lt,lt=(await ht).reduce((St,Ht)=>Object.assign(St,Ht),{});return await Promise.all([r8(ce,pt,$e.signal,wt,Q.loaderData),i8(ce,lt,Le)]),{loaderResults:pt,fetcherResults:lt}}function pe(){se=!0,K.push(...Te()),Ue.forEach((Q,ce)=>{O.has(ce)&&ne.add(ce),vt(ce)})}function me(Q,ce,ge){ge===void 0&&(ge={}),C.fetchers.set(Q,ce),fe({fetchers:new Map(C.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Ne(Q,ce,ge,Le){Le===void 0&&(Le={});let $e=Qc(C.matches,ce);Ce(Q),fe({errors:{[$e.route.id]:ge},fetchers:new Map(C.fetchers)},{flushSync:(Le&&Le.flushSync)===!0})}function xt(Q){return de.set(Q,(de.get(Q)||0)+1),Se.has(Q)&&Se.delete(Q),C.fetchers.get(Q)||V6}function Ce(Q){let ce=C.fetchers.get(Q);O.has(Q)&&!(ce&&ce.state==="loading"&&re.has(Q))&&vt(Q),Ue.delete(Q),re.delete(Q),we.delete(Q),h.v7_fetcherPersist&&Se.delete(Q),ne.delete(Q),C.fetchers.delete(Q)}function at(Q){let ce=(de.get(Q)||0)-1;ce<=0?(de.delete(Q),Se.add(Q),h.v7_fetcherPersist||Ce(Q)):de.set(Q,ce),fe({fetchers:new Map(C.fetchers)})}function vt(Q){let ce=O.get(Q);ce&&(ce.abort(),O.delete(Q))}function Rt(Q){for(let ce of Q){let ge=xt(ce),Le=_l(ge.data);C.fetchers.set(ce,Le)}}function et(){let Q=[],ce=!1;for(let ge of we){let Le=C.fetchers.get(ge);dn(Le,"Expected fetcher: "+ge),Le.state==="loading"&&(we.delete(ge),Q.push(ge),ce=!0)}return Rt(Q),ce}function J(Q){let ce=[];for(let[ge,Le]of re)if(Le<Q){let $e=C.fetchers.get(ge);dn($e,"Expected fetcher: "+ge),$e.state==="loading"&&(vt(ge),re.delete(ge),ce.push(ge))}return Rt(ce),ce.length>0}function Ee(Q,ce){let ge=C.blockers.get(Q)||$h;return he.get(Q)!==ce&&he.set(Q,ce),ge}function Xe(Q){C.blockers.delete(Q),he.delete(Q)}function Z(Q,ce){let ge=C.blockers.get(Q)||$h;dn(ge.state==="unblocked"&&ce.state==="blocked"||ge.state==="blocked"&&ce.state==="blocked"||ge.state==="blocked"&&ce.state==="proceeding"||ge.state==="blocked"&&ce.state==="unblocked"||ge.state==="proceeding"&&ce.state==="unblocked","Invalid blocker state transition: "+ge.state+" -> "+ce.state);let Le=new Map(C.blockers);Le.set(Q,ce),fe({blockers:Le})}function ke(Q){let{currentLocation:ce,nextLocation:ge,historyAction:Le}=Q;if(he.size===0)return;he.size>1&&Wf(!1,"A router only supports one blocker at a time");let $e=Array.from(he.entries()),[wt,Lt]=$e[$e.length-1],ht=C.blockers.get(wt);if(!(ht&&ht.state==="proceeding")&&Lt({currentLocation:ce,nextLocation:ge,historyAction:Le}))return wt}function xe(Q){let ce=Di(404,{pathname:Q}),ge=a||o,{matches:Le,route:$e}=gI(ge);return Te(),{notFoundMatches:Le,route:$e,error:ce}}function Te(Q){let ce=[];return Ie.forEach((ge,Le)=>{(!Q||Q(Le))&&(ge.cancel(),ce.push(Le),Ie.delete(Le))}),ce}function tt(Q,ce,ge){if(v=Q,x=ce,y=ge||null,!g&&C.navigation===_b){g=!0;let Le=cn(C.location,C.matches);Le!=null&&fe({restoreScrollPosition:Le})}return()=>{v=null,x=null,y=null}}function qe(Q,ce){return y&&y(Q,ce.map(Le=>y6(Le,C.loaderData)))||Q.key}function Nt(Q,ce){if(v&&x){let ge=qe(Q,ce);v[ge]=x()}}function cn(Q,ce){if(v){let ge=qe(Q,ce),Le=v[ge];if(typeof Le=="number")return Le}return null}function Sn(Q,ce,ge){if(u)if(Q){if(Object.keys(Q[0].params).length>0)return{active:!0,matches:p0(ce,ge,l,!0)}}else return{active:!0,matches:p0(ce,ge,l,!0)||[]};return{active:!1,matches:null}}async function Wt(Q,ce,ge,Le){if(!u)return{type:"success",matches:Q};let $e=Q;for(;;){let wt=a==null,Lt=a||o,ht=s;try{await u({signal:ge,path:ce,matches:$e,fetcherKey:Le,patch:(St,Ht)=>{ge.aborted||uI(St,Ht,Lt,ht,i)}})}catch(St){return{type:"error",error:St,partialMatches:$e}}finally{wt&&!ge.aborted&&(o=[...o])}if(ge.aborted)return{type:"aborted"};let pt=Kc(Lt,ce,l);if(pt)return{type:"success",matches:pt};let lt=p0(Lt,ce,l,!0);if(!lt||$e.length===lt.length&&$e.every((St,Ht)=>St.route.id===lt[Ht].route.id))return{type:"success",matches:null};$e=lt}}function Zn(Q){s={},a=Z0(Q,i,void 0,s)}function Tr(Q,ce){let ge=a==null;uI(Q,ce,a||o,s,i),ge&&(o=[...o],fe({}))}return I={get basename(){return l},get future(){return h},get state(){return C},get routes(){return o},get window(){return e},initialize:rt,subscribe:We,enableScrollRestoration:tt,navigate:X,fetch:V,revalidate:ot,createHref:Q=>t.history.createHref(Q),encodeLocation:Q=>t.history.encodeLocation(Q),getFetcher:xt,deleteFetcher:at,dispose:je,getBlocker:Ee,deleteBlocker:Xe,patchRoutes:Tr,_internalFetchControllers:O,_internalActiveDeferreds:Ie,_internalSetRoutes:Zn},I}function W6(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function VM(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let h of e)if(l.push(h),h.route.id===o){c=h;break}}else l=e,c=e[e.length-1];let u=WT(i||".",HT(l,s),ah(t.pathname,n)||t.pathname,a==="path");if(i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&c){let h=$T(u.search);if(c.route.index&&!h)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&h){let p=new URLSearchParams(u.search),m=p.getAll("index");p.delete("index"),m.filter(y=>y).forEach(y=>p.append("index",y));let v=p.toString();u.search=v?"?"+v:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Na([n,u.pathname])),Pu(u)}function oI(t,e,n,r){if(!r||!W6(r))return{path:n};if(r.formMethod&&!n8(r.formMethod))return{path:n,error:Di(405,{method:r.formMethod})};let i=()=>({path:n,error:Di(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=gF(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Js(o))return i();let p=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((m,v)=>{let[y,x]=v;return""+m+y+"="+x+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:p}}}else if(r.formEncType==="application/json"){if(!Js(o))return i();try{let p=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:p,text:void 0}}}catch{return i()}}}dn(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=HM(r.formData),c=r.formData;else if(r.body instanceof FormData)l=HM(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=fI(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=fI(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Js(u.formMethod))return{path:n,submission:u};let h=fc(n);return e&&h.search&&$T(h.search)&&l.append("index",""),h.search="?"+l,{path:Pu(h),submission:u}}function aI(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function lI(t,e,n,r,i,s,o,a,l,c,u,h,p,m,v,y){let x=y?Ki(y[1])?y[1].error:y[1].data:void 0,g=t.createURL(e.location),_=t.createURL(i),S=n;s&&e.errors?S=aI(n,Object.keys(e.errors)[0],!0):y&&Ki(y[1])&&(S=aI(n,y[0]));let E=y?y[1].statusCode:void 0,R=o&&E&&E>=400,I=S.filter((D,L)=>{let{route:P}=D;if(P.lazy)return!0;if(P.loader==null)return!1;if(s)return jM(P,e.loaderData,e.errors);if(G6(e.loaderData,e.matches[L],D)||l.some(H=>H===D.route.id))return!0;let F=e.matches[L],z=D;return cI(D,Vn({currentUrl:g,currentParams:F.params,nextUrl:_,nextParams:z.params},r,{actionResult:x,actionStatus:E,defaultShouldRevalidate:R?!1:a||g.pathname+g.search===_.pathname+_.search||g.search!==_.search||pF(F,z)}))}),C=[];return h.forEach((D,L)=>{if(s||!n.some(q=>q.route.id===D.routeId)||u.has(L))return;let P=Kc(m,D.path,v);if(!P){C.push({key:L,routeId:D.routeId,path:D.path,matches:null,match:null,controller:null});return}let F=e.fetchers.get(L),z=xp(P,D.path),H=!1;p.has(L)?H=!1:c.has(L)?(c.delete(L),H=!0):F&&F.state!=="idle"&&F.data===void 0?H=a:H=cI(z,Vn({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:x,actionStatus:E,defaultShouldRevalidate:R?!1:a})),H&&C.push({key:L,routeId:D.routeId,path:D.path,matches:P,match:z,controller:new AbortController})}),[I,C]}function jM(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function G6(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function pF(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function cI(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function uI(t,e,n,r,i){var s;let o;if(t){let c=r[t];dn(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let a=e.filter(c=>!o.some(u=>mF(c,u))),l=Z0(a,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...l)}function mF(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>mF(n,s))}):!1}async function X6(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];dn(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Wf(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!g6.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Vn({},e(i),{lazy:void 0}))}async function $6(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function Y6(t,e,n,r,i,s,o,a,l,c){let u=s.map(m=>m.route.lazy?X6(m.route,l,a):void 0),h=s.map((m,v)=>{let y=u[v],x=i.some(_=>_.route.id===m.route.id);return Vn({},m,{shouldLoad:x,resolve:async _=>(_&&r.method==="GET"&&(m.route.lazy||m.route.loader)&&(x=!0),x?q6(e,r,m,y,_,c):Promise.resolve({type:En.data,result:void 0}))})}),p=await t({matches:h,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(u)}catch{}return p}async function q6(t,e,n,r,i,s){let o,a,l=c=>{let u,h=new Promise((v,y)=>u=y);a=()=>u(),e.signal.addEventListener("abort",a);let p=v=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...v!==void 0?[v]:[]),m=(async()=>{try{return{type:"data",result:await(i?i(y=>p(y)):p())}}catch(v){return{type:"error",result:v}}})();return Promise.race([m,h])};try{let c=n.route[t];if(r)if(c){let u,[h]=await Promise.all([l(c).catch(p=>{u=p}),r]);if(u!==void 0)throw u;o=h}else if(await r,c=n.route[t],c)o=await l(c);else if(t==="action"){let u=new URL(e.url),h=u.pathname+u.search;throw Di(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:En.data,result:void 0};else if(c)o=await l(c);else{let u=new URL(e.url),h=u.pathname+u.search;throw Di(404,{pathname:h})}dn(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:En.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function Z6(t){let{result:e,type:n}=t;if(vF(e)){let h;try{let p=e.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?e.body==null?h=null:h=await e.json():h=await e.text()}catch(p){return{type:En.error,error:p}}return n===En.error?{type:En.error,error:new K0(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:En.data,data:h,statusCode:e.status,headers:e.headers}}if(n===En.error){if(vI(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:En.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:En.error,error:new K0(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:wm(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:En.error,error:e,statusCode:wm(e)?e.status:void 0}}if(t8(e)){var a,l;return{type:En.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(vI(e)){var c,u;return{type:En.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:En.data,data:e}}function K6(t,e,n,r,i,s){let o=t.headers.get("Location");if(dn(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!GT.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=VM(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function dI(t,e,n){if(GT.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=ah(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function gd(t,e,n,r){let i=t.createURL(gF(e)).toString(),s={signal:n};if(r&&Js(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=HM(r.formData):s.body=r.formData}return new Request(i,s)}function HM(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function fI(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function Q6(t,e,n,r,i){let s={},o=null,a,l=!1,c={},u=n&&Ki(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let p=h.route.id,m=e[p];if(dn(!ru(m),"Cannot handle redirect results in processLoaderData"),Ki(m)){let v=m.error;u!==void 0&&(v=u,u=void 0),o=o||{};{let y=Qc(t,p);o[y.route.id]==null&&(o[y.route.id]=v)}s[p]=void 0,l||(l=!0,a=wm(m.error)?m.error.status:500),m.headers&&(c[p]=m.headers)}else Ul(m)?(r.set(p,m.deferredData),s[p]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!l&&(a=m.statusCode),m.headers&&(c[p]=m.headers)):(s[p]=m.data,m.statusCode&&m.statusCode!==200&&!l&&(a=m.statusCode),m.headers&&(c[p]=m.headers))}),u!==void 0&&n&&(o={[n[0]]:u},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function hI(t,e,n,r,i,s,o){let{loaderData:a,errors:l}=Q6(e,n,r,o);return i.forEach(c=>{let{key:u,match:h,controller:p}=c,m=s[u];if(dn(m,"Did not find corresponding fetcher result"),!(p&&p.signal.aborted))if(Ki(m)){let v=Qc(t.matches,h==null?void 0:h.route.id);l&&l[v.route.id]||(l=Vn({},l,{[v.route.id]:m.error})),t.fetchers.delete(u)}else if(ru(m))dn(!1,"Unhandled fetcher revalidation redirect");else if(Ul(m))dn(!1,"Unhandled fetcher deferred data");else{let v=_l(m.data);t.fetchers.set(u,v)}}),{loaderData:a,errors:l}}function pI(t,e,n,r){let i=Vn({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function mI(t){return t?Ki(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Qc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function gI(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Di(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new K0(t||500,a,new Error(l),!0)}function Zv(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(ru(i))return{key:r,result:i}}}function gF(t){let e=typeof t=="string"?fc(t):t;return Pu(Vn({},e,{hash:""}))}function J6(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function e8(t){return vF(t.result)&&B6.has(t.result.status)}function Ul(t){return t.type===En.deferred}function Ki(t){return t.type===En.error}function ru(t){return(t&&t.type)===En.redirect}function vI(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function t8(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function vF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function n8(t){return U6.has(t.toLowerCase())}function Js(t){return O6.has(t.toLowerCase())}async function r8(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=t.find(p=>(p==null?void 0:p.route.id)===a);if(!c)continue;let u=r.find(p=>p.route.id===c.route.id),h=u!=null&&!pF(u,c)&&(i&&i[c.route.id])!==void 0;Ul(l)&&h&&await XT(l,n,!1).then(p=>{p&&(e[a]=p)})}}async function i8(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],a=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&Ul(a)&&(dn(o,"Expected an AbortController for revalidating fetcher deferred result"),await XT(a,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function XT(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:En.data,data:t.deferredData.unwrappedData}}catch(i){return{type:En.error,error:i}}return{type:En.data,data:t.deferredData.data}}}function $T(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function xp(t,e){let n=typeof e=="string"?fc(e).search:e.search;if(t[t.length-1].route.index&&$T(n||""))return t[t.length-1];let r=dF(t);return r[r.length-1]}function yI(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function wb(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function s8(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Yh(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function o8(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function _l(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function a8(t,e){try{let n=t.sessionStorage.getItem(hF);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function l8(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(hF,JSON.stringify(n))}catch(r){Wf(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q0.apply(this,arguments)}const D_=T.createContext(null),yF=T.createContext(null),Xu=T.createContext(null),YT=T.createContext(null),$u=T.createContext({outlet:null,matches:[],isDataRoute:!1}),xF=T.createContext(null);function c8(t,e){let{relative:n}=e===void 0?{}:e;gg()||dn(!1);let{basename:r,navigator:i}=T.useContext(Xu),{hash:s,pathname:o,search:a}=SF(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Na([r,o])),i.createHref({pathname:l,search:a,hash:s})}function gg(){return T.useContext(YT)!=null}function lh(){return gg()||dn(!1),T.useContext(YT).location}function _F(t){T.useContext(Xu).static||T.useLayoutEffect(t)}function wF(){let{isDataRoute:t}=T.useContext($u);return t?w8():u8()}function u8(){gg()||dn(!1);let t=T.useContext(D_),{basename:e,future:n,navigator:r}=T.useContext(Xu),{matches:i}=T.useContext($u),{pathname:s}=lh(),o=JSON.stringify(HT(i,n.v7_relativeSplatPath)),a=T.useRef(!1);return _F(()=>{a.current=!0}),T.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=WT(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Na([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}function SF(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=T.useContext(Xu),{matches:i}=T.useContext($u),{pathname:s}=lh(),o=JSON.stringify(HT(i,r.v7_relativeSplatPath));return T.useMemo(()=>WT(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function d8(t,e,n,r){gg()||dn(!1);let{navigator:i,static:s}=T.useContext(Xu),{matches:o}=T.useContext($u),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=lh(),h;h=u;let p=h.pathname||"/",m=p;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=!s&&n&&n.matches&&n.matches.length>0?n.matches:Kc(t,{pathname:m});return g8(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Na([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Na([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,r)}function f8(){let t=_8(),e=wm(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,null)}const h8=T.createElement(f8,null);class p8 extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?T.createElement($u.Provider,{value:this.props.routeContext},T.createElement(xF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m8(t){let{routeContext:e,match:n,children:r}=t,i=T.useContext(D_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement($u.Provider,{value:e},r)}function g8(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||dn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:m}=n,v=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let m,v=!1,y=null,x=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||h8,l&&(c<0&&p===0?(S8("route-fallback"),v=!0,x=null):c===p&&(v=!0,x=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),_=()=>{let S;return m?S=y:v?S=x:h.route.Component?S=T.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=u,T.createElement(m8,{match:h,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?T.createElement(p8,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:_(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):_()},null)}var bF=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bF||{}),J0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(J0||{});function v8(t){let e=T.useContext(D_);return e||dn(!1),e}function y8(t){let e=T.useContext(yF);return e||dn(!1),e}function x8(t){let e=T.useContext($u);return e||dn(!1),e}function MF(t){let e=x8(),n=e.matches[e.matches.length-1];return n.route.id||dn(!1),n.route.id}function _8(){var t;let e=T.useContext(xF),n=y8(J0.UseRouteError),r=MF(J0.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function w8(){let{router:t}=v8(bF.UseNavigateStable),e=MF(J0.UseNavigateStable),n=T.useRef(!1);return _F(()=>{n.current=!0}),T.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Q0({fromRouteId:e},s)))},[t,e])}const xI={};function S8(t,e,n){xI[t]||(xI[t]=!0)}function b8(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function M8(t){let{basename:e="/",children:n=null,location:r,navigationType:i=vr.Pop,navigator:s,static:o=!1,future:a}=t;gg()&&dn(!1);let l=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:s,static:o,future:Q0({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=fc(r));let{pathname:u="/",search:h="",hash:p="",state:m=null,key:v="default"}=r,y=T.useMemo(()=>{let x=ah(u,l);return x==null?null:{location:{pathname:x,search:h,hash:p,state:m,key:v},navigationType:i}},[l,u,h,p,m,v,i]);return y==null?null:T.createElement(Xu.Provider,{value:c},T.createElement(YT.Provider,{children:n,value:y}))}new Promise(()=>{});function E8(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:T.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:T.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:T.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sm(){return Sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sm.apply(this,arguments)}function T8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function A8(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function C8(t,e){return t.button===0&&(!e||e==="_self")&&!A8(t)}function WM(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function R8(t,e){let n=WM(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const P8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],N8="6";try{window.__reactRouterVersion=N8}catch{}function I8(t,e){return H6({basename:void 0,future:Sm({},void 0,{v7_prependBasename:!0}),history:h6({window:void 0}),hydrationData:L8(),routes:t,mapRouteProperties:E8,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function L8(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Sm({},e,{errors:D8(e.errors)})),e}function D8(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new K0(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const k8=T.createContext({isTransitioning:!1}),O8=T.createContext(new Map),F8="startTransition",_I=i3[F8],U8="flushSync",wI=f6[U8];function B8(t){_I?_I(t):t()}function qh(t){wI?wI(t):t()}class z8{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function V8(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=T.useState(n.state),[o,a]=T.useState(),[l,c]=T.useState({isTransitioning:!1}),[u,h]=T.useState(),[p,m]=T.useState(),[v,y]=T.useState(),x=T.useRef(new Map),{v7_startTransition:g}=r||{},_=T.useCallback(D=>{g?B8(D):D()},[g]),S=T.useCallback((D,L)=>{let{deletedFetchers:P,flushSync:F,viewTransitionOpts:z}=L;D.fetchers.forEach((q,se)=>{q.data!==void 0&&x.current.set(se,q.data)}),P.forEach(q=>x.current.delete(q));let H=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!z||H){F?qh(()=>s(D)):_(()=>s(D));return}if(F){qh(()=>{p&&(u&&u.resolve(),p.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:z.currentLocation,nextLocation:z.nextLocation})});let q=n.window.document.startViewTransition(()=>{qh(()=>s(D))});q.finished.finally(()=>{qh(()=>{h(void 0),m(void 0),a(void 0),c({isTransitioning:!1})})}),qh(()=>m(q));return}p?(u&&u.resolve(),p.skipTransition(),y({state:D,currentLocation:z.currentLocation,nextLocation:z.nextLocation})):(a(D),c({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}))},[n.window,p,u,x,_]);T.useLayoutEffect(()=>n.subscribe(S),[n,S]),T.useEffect(()=>{l.isTransitioning&&!l.flushSync&&h(new z8)},[l]),T.useEffect(()=>{if(u&&o&&n.window){let D=o,L=u.promise,P=n.window.document.startViewTransition(async()=>{_(()=>s(D)),await L});P.finished.finally(()=>{h(void 0),m(void 0),a(void 0),c({isTransitioning:!1})}),m(P)}},[_,o,u,n.window]),T.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,p,i.location,o]),T.useEffect(()=>{!l.isTransitioning&&v&&(a(v.state),c({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),y(void 0))},[l.isTransitioning,v]),T.useEffect(()=>{},[]);let E=T.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:D=>n.navigate(D),push:(D,L,P)=>n.navigate(D,{state:L,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(D,L,P)=>n.navigate(D,{replace:!0,state:L,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),R=n.basename||"/",I=T.useMemo(()=>({router:n,navigator:E,static:!1,basename:R}),[n,E,R]),C=T.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return T.useEffect(()=>b8(r,n.future),[r,n.future]),T.createElement(T.Fragment,null,T.createElement(D_.Provider,{value:I},T.createElement(yF.Provider,{value:i},T.createElement(O8.Provider,{value:x.current},T.createElement(k8.Provider,{value:l},T.createElement(M8,{basename:R,location:i.location,navigationType:i.historyAction,navigator:E,future:C},i.initialized||n.future.v7_partialHydration?T.createElement(j8,{routes:n.routes,future:n.future,state:i}):e))))),null)}const j8=T.memo(H8);function H8(t){let{routes:e,future:n,state:r}=t;return d8(e,void 0,r,n)}const W8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",G8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Up=T.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,p=T8(e,P8),{basename:m}=T.useContext(Xu),v,y=!1;if(typeof c=="string"&&G8.test(c)&&(v=c,W8))try{let S=new URL(window.location.href),E=c.startsWith("//")?new URL(S.protocol+c):new URL(c),R=ah(E.pathname,m);E.origin===S.origin&&R!=null?c=R+E.search+E.hash:y=!0}catch{}let x=c8(c,{relative:i}),g=X8(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:h});function _(S){r&&r(S),S.defaultPrevented||g(S)}return T.createElement("a",Sm({},p,{href:v||x,onClick:y||s?r:_,ref:n,target:l}))});var SI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(SI||(SI={}));var bI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bI||(bI={}));function X8(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=wF(),c=lh(),u=SF(t,{relative:o});return T.useCallback(h=>{if(C8(h,n)){h.preventDefault();let p=r!==void 0?r:Pu(c)===Pu(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function $8(t){let e=T.useRef(WM(t)),n=T.useRef(!1),r=lh(),i=T.useMemo(()=>R8(r.search,n.current?null:e.current),[r.search]),s=wF(),o=T.useCallback((a,l)=>{const c=WM(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var k_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},O_=typeof window>"u"||"Deno"in globalThis;function Ys(){}function Y8(t,e){return typeof t=="function"?t(e):t}function q8(t){return typeof t=="number"&&t>=0&&t!==1/0}function Z8(t,e){return Math.max(t+(e||0)-Date.now(),0)}function MI(t,e){return typeof t=="function"?t(e):t}function K8(t,e){return typeof t=="function"?t(e):t}function EI(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==qT(o,e.options))return!1}else if(!Mm(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function TI(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(bm(e.options.mutationKey)!==bm(s))return!1}else if(!Mm(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function qT(t,e){return((e==null?void 0:e.queryKeyHashFn)||bm)(t)}function bm(t){return JSON.stringify(t,(e,n)=>GM(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Mm(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Mm(t[n],e[n])):!1}function EF(t,e){if(t===e)return t;const n=AI(t)&&AI(e);if(n||GM(t)&&GM(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{};let l=0;for(let c=0;c<o;c++){const u=n?c:s[c];(!n&&r.includes(u)||n)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=EF(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return i===o&&l===i?t:a}return e}function AI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function GM(t){if(!CI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!CI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function CI(t){return Object.prototype.toString.call(t)==="[object Object]"}function Q8(t){return new Promise(e=>{setTimeout(e,t)})}function J8(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?EF(t,e):e}function e9(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function t9(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var ZT=Symbol();function TF(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===ZT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var du,Nl,Cf,Bk,n9=(Bk=class extends k_{constructor(){super();wn(this,du);wn(this,Nl);wn(this,Cf);Yt(this,Cf,e=>{if(!O_&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Re(this,Nl)||this.setEventListener(Re(this,Cf))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Nl))==null||e.call(this),Yt(this,Nl,void 0))}setEventListener(e){var n;Yt(this,Cf,e),(n=Re(this,Nl))==null||n.call(this),Yt(this,Nl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Re(this,du)!==e&&(Yt(this,du,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Re(this,du)=="boolean"?Re(this,du):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},du=new WeakMap,Nl=new WeakMap,Cf=new WeakMap,Bk),AF=new n9,Rf,Il,Pf,zk,r9=(zk=class extends k_{constructor(){super();wn(this,Rf,!0);wn(this,Il);wn(this,Pf);Yt(this,Pf,e=>{if(!O_&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Re(this,Il)||this.setEventListener(Re(this,Pf))}onUnsubscribe(){var e;this.hasListeners()||((e=Re(this,Il))==null||e.call(this),Yt(this,Il,void 0))}setEventListener(e){var n;Yt(this,Pf,e),(n=Re(this,Il))==null||n.call(this),Yt(this,Il,e(this.setOnline.bind(this)))}setOnline(e){Re(this,Rf)!==e&&(Yt(this,Rf,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Re(this,Rf)}},Rf=new WeakMap,Il=new WeakMap,Pf=new WeakMap,zk),ex=new r9;function i9(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function s9(t){return Math.min(1e3*2**t,3e4)}function CF(t){return(t??"online")==="online"?ex.isOnline():!0}var RF=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Sb(t){return t instanceof RF}function PF(t){let e=!1,n=0,r=!1,i;const s=i9(),o=y=>{var x;r||(p(new RF(y)),(x=t.abort)==null||x.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>AF.isFocused()&&(t.networkMode==="always"||ex.isOnline())&&t.canRun(),u=()=>CF(t.networkMode)&&t.canRun(),h=y=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,y),i==null||i(),s.resolve(y))},p=y=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,y),i==null||i(),s.reject(y))},m=()=>new Promise(y=>{var x;i=g=>{(r||c())&&y(g)},(x=t.onPause)==null||x.call(t)}).then(()=>{var y;i=void 0,r||(y=t.onContinue)==null||y.call(t)}),v=()=>{if(r)return;let y;const x=n===0?t.initialPromise:void 0;try{y=x??t.fn()}catch(g){y=Promise.reject(g)}Promise.resolve(y).then(h).catch(g=>{var I;if(r)return;const _=t.retry??(O_?0:3),S=t.retryDelay??s9,E=typeof S=="function"?S(n,g):S,R=_===!0||typeof _=="number"&&n<_||typeof _=="function"&&_(n,g);if(e||!R){p(g);return}n++,(I=t.onFail)==null||I.call(t,n,g),Q8(E).then(()=>c()?void 0:m()).then(()=>{e?p(g):v()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?v():m().then(v),s)}}var o9=t=>setTimeout(t,0);function a9(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=o9;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var xi=a9(),fu,Vk,NF=(Vk=class{constructor(){wn(this,fu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),q8(this.gcTime)&&Yt(this,fu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(O_?1/0:5*60*1e3))}clearGcTimeout(){Re(this,fu)&&(clearTimeout(Re(this,fu)),Yt(this,fu,void 0))}},fu=new WeakMap,Vk),Nf,If,Ss,hu,ei,cg,pu,Zs,ya,jk,l9=(jk=class extends NF{constructor(e){super();wn(this,Zs);wn(this,Nf);wn(this,If);wn(this,Ss);wn(this,hu);wn(this,ei);wn(this,cg);wn(this,pu);Yt(this,pu,!1),Yt(this,cg,e.defaultOptions),this.setOptions(e.options),this.observers=[],Yt(this,hu,e.client),Yt(this,Ss,Re(this,hu).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Yt(this,Nf,u9(this.options)),this.state=e.state??Re(this,Nf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Re(this,ei))==null?void 0:e.promise}setOptions(e){this.options={...Re(this,cg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Re(this,Ss).remove(this)}setData(e,n){const r=J8(this.state.data,e,this.options);return Yr(this,Zs,ya).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Yr(this,Zs,ya).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=Re(this,ei))==null?void 0:r.promise;return(i=Re(this,ei))==null||i.cancel(e),n?n.then(Ys).catch(Ys):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Re(this,Nf))}isActive(){return this.observers.some(e=>K8(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ZT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Z8(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,ei))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Re(this,ei))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Re(this,Ss).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Re(this,ei)&&(Re(this,pu)?Re(this,ei).cancel({revert:!0}):Re(this,ei).cancelRetry()),this.scheduleGc()),Re(this,Ss).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Yr(this,Zs,ya).call(this,{type:"invalidate"})}fetch(e,n){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Re(this,ei))return Re(this,ei).continueRetry(),Re(this,ei).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Yt(this,pu,!0),r.signal)})},s=()=>{const h=TF(this.options,n),p={client:Re(this,hu),queryKey:this.queryKey,meta:this.meta};return i(p),Yt(this,pu,!1),this.options.persister?this.options.persister(h,p,this):h(p)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Re(this,hu),state:this.state,fetchFn:s};i(o),(l=this.options.behavior)==null||l.onFetch(o,this),Yt(this,If,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&Yr(this,Zs,ya).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=h=>{var p,m,v,y;Sb(h)&&h.silent||Yr(this,Zs,ya).call(this,{type:"error",error:h}),Sb(h)||((m=(p=Re(this,Ss).config).onError)==null||m.call(p,h,this),(y=(v=Re(this,Ss).config).onSettled)==null||y.call(v,this.state.data,h,this)),this.scheduleGc()};return Yt(this,ei,PF({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var p,m,v,y;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){a(x);return}(m=(p=Re(this,Ss).config).onSuccess)==null||m.call(p,h,this),(y=(v=Re(this,Ss).config).onSettled)==null||y.call(v,h,this.state.error,this),this.scheduleGc()},onError:a,onFail:(h,p)=>{Yr(this,Zs,ya).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{Yr(this,Zs,ya).call(this,{type:"pause"})},onContinue:()=>{Yr(this,Zs,ya).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Re(this,ei).start()}},Nf=new WeakMap,If=new WeakMap,Ss=new WeakMap,hu=new WeakMap,ei=new WeakMap,cg=new WeakMap,pu=new WeakMap,Zs=new WeakSet,ya=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...c9(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Sb(i)&&i.revert&&Re(this,If)?{...Re(this,If),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),xi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Re(this,Ss).notify({query:this,type:"updated",action:e})})},jk);function c9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:CF(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function u9(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var No,Hk,d9=(Hk=class extends k_{constructor(e={}){super();wn(this,No);this.config=e,Yt(this,No,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??qT(i,n);let o=this.get(s);return o||(o=new l9({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Re(this,No).has(e.queryHash)||(Re(this,No).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Re(this,No).get(e.queryHash);n&&(e.destroy(),n===e&&Re(this,No).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){xi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Re(this,No).get(e)}getAll(){return[...Re(this,No).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>EI(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>EI(e,r)):n}notify(e){xi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){xi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){xi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},No=new WeakMap,Hk),Io,mi,mu,Lo,wl,Wk,f9=(Wk=class extends NF{constructor(e){super();wn(this,Lo);wn(this,Io);wn(this,mi);wn(this,mu);this.mutationId=e.mutationId,Yt(this,mi,e.mutationCache),Yt(this,Io,[]),this.state=e.state||h9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Re(this,Io).includes(e)||(Re(this,Io).push(e),this.clearGcTimeout(),Re(this,mi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Yt(this,Io,Re(this,Io).filter(n=>n!==e)),this.scheduleGc(),Re(this,mi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Re(this,Io).length||(this.state.status==="pending"?this.scheduleGc():Re(this,mi).remove(this))}continue(){var e;return((e=Re(this,mu))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,u,h,p,m,v,y,x,g,_,S,E,R,I,C,D;const n=()=>{Yr(this,Lo,wl).call(this,{type:"continue"})};Yt(this,mu,PF({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(L,P)=>{Yr(this,Lo,wl).call(this,{type:"failed",failureCount:L,error:P})},onPause:()=>{Yr(this,Lo,wl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Re(this,mi).canRun(this)}));const r=this.state.status==="pending",i=!Re(this,mu).canStart();try{if(r)n();else{Yr(this,Lo,wl).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=Re(this,mi).config).onMutate)==null?void 0:o.call(s,e,this));const P=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));P!==this.state.context&&Yr(this,Lo,wl).call(this,{type:"pending",context:P,variables:e,isPaused:i})}const L=await Re(this,mu).start();return await((u=(c=Re(this,mi).config).onSuccess)==null?void 0:u.call(c,L,e,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,L,e,this.state.context)),await((v=(m=Re(this,mi).config).onSettled)==null?void 0:v.call(m,L,null,this.state.variables,this.state.context,this)),await((x=(y=this.options).onSettled)==null?void 0:x.call(y,L,null,e,this.state.context)),Yr(this,Lo,wl).call(this,{type:"success",data:L}),L}catch(L){try{throw await((_=(g=Re(this,mi).config).onError)==null?void 0:_.call(g,L,e,this.state.context,this)),await((E=(S=this.options).onError)==null?void 0:E.call(S,L,e,this.state.context)),await((I=(R=Re(this,mi).config).onSettled)==null?void 0:I.call(R,void 0,L,this.state.variables,this.state.context,this)),await((D=(C=this.options).onSettled)==null?void 0:D.call(C,void 0,L,e,this.state.context)),L}finally{Yr(this,Lo,wl).call(this,{type:"error",error:L})}}finally{Re(this,mi).runNext(this)}}},Io=new WeakMap,mi=new WeakMap,mu=new WeakMap,Lo=new WeakSet,wl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),xi.batch(()=>{Re(this,Io).forEach(r=>{r.onMutationUpdate(e)}),Re(this,mi).notify({mutation:this,type:"updated",action:e})})},Wk);function h9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ma,Ks,ug,Gk,p9=(Gk=class extends k_{constructor(e={}){super();wn(this,Ma);wn(this,Ks);wn(this,ug);this.config=e,Yt(this,Ma,new Set),Yt(this,Ks,new Map),Yt(this,ug,0)}build(e,n,r){const i=new f9({mutationCache:this,mutationId:++Iv(this,ug)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){Re(this,Ma).add(e);const n=Kv(e);if(typeof n=="string"){const r=Re(this,Ks).get(n);r?r.push(e):Re(this,Ks).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Re(this,Ma).delete(e)){const n=Kv(e);if(typeof n=="string"){const r=Re(this,Ks).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Re(this,Ks).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Kv(e);if(typeof n=="string"){const r=Re(this,Ks).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Kv(e);if(typeof n=="string"){const i=(r=Re(this,Ks).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){xi.batch(()=>{Re(this,Ma).forEach(e=>{this.notify({type:"removed",mutation:e})}),Re(this,Ma).clear(),Re(this,Ks).clear()})}getAll(){return Array.from(Re(this,Ma))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>TI(n,r))}findAll(e={}){return this.getAll().filter(n=>TI(e,n))}notify(e){xi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return xi.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ys))))}},Ma=new WeakMap,Ks=new WeakMap,ug=new WeakMap,Gk);function Kv(t){var e;return(e=t.options.scope)==null?void 0:e.id}function RI(t){return{onFetch:(e,n)=>{var u,h,p,m,v;const r=e.options,i=(p=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const x=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},g=TF(e.options,e.fetchOptions),_=async(S,E,R)=>{if(y)return Promise.reject();if(E==null&&S.pages.length)return Promise.resolve(S);const I={client:e.client,queryKey:e.queryKey,pageParam:E,direction:R?"backward":"forward",meta:e.options.meta};x(I);const C=await g(I),{maxPages:D}=e.options,L=R?t9:e9;return{pages:L(S.pages,C,D),pageParams:L(S.pageParams,E,D)}};if(i&&s.length){const S=i==="backward",E=S?m9:PI,R={pages:s,pageParams:o},I=E(r,R);a=await _(R,I,S)}else{const S=t??s.length;do{const E=l===0?o[0]??r.initialPageParam:PI(r,a);if(l>0&&E==null)break;a=await _(a,E),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var y,x;return(x=(y=e.options).persister)==null?void 0:x.call(y,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function PI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function m9(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var er,Ll,Dl,Lf,Df,kl,kf,Of,Xk,g9=(Xk=class{constructor(t={}){wn(this,er);wn(this,Ll);wn(this,Dl);wn(this,Lf);wn(this,Df);wn(this,kl);wn(this,kf);wn(this,Of);Yt(this,er,t.queryCache||new d9),Yt(this,Ll,t.mutationCache||new p9),Yt(this,Dl,t.defaultOptions||{}),Yt(this,Lf,new Map),Yt(this,Df,new Map),Yt(this,kl,0)}mount(){Iv(this,kl)._++,Re(this,kl)===1&&(Yt(this,kf,AF.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,er).onFocus())})),Yt(this,Of,ex.subscribe(async t=>{t&&(await this.resumePausedMutations(),Re(this,er).onOnline())})))}unmount(){var t,e;Iv(this,kl)._--,Re(this,kl)===0&&((t=Re(this,kf))==null||t.call(this),Yt(this,kf,void 0),(e=Re(this,Of))==null||e.call(this),Yt(this,Of,void 0))}isFetching(t){return Re(this,er).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Re(this,Ll).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,er).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Re(this,er).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(MI(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Re(this,er).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=Re(this,er).get(r.queryHash),s=i==null?void 0:i.state.data,o=Y8(e,s);if(o!==void 0)return Re(this,er).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return xi.batch(()=>Re(this,er).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Re(this,er).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Re(this,er);xi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Re(this,er);return xi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=xi.batch(()=>Re(this,er).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Ys).catch(Ys)}invalidateQueries(t,e={}){return xi.batch(()=>(Re(this,er).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=xi.batch(()=>Re(this,er).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ys)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Ys)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Re(this,er).build(this,e);return n.isStaleByTime(MI(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ys).catch(Ys)}fetchInfiniteQuery(t){return t.behavior=RI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ys).catch(Ys)}ensureInfiniteQueryData(t){return t.behavior=RI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ex.isOnline()?Re(this,Ll).resumePausedMutations():Promise.resolve()}getQueryCache(){return Re(this,er)}getMutationCache(){return Re(this,Ll)}getDefaultOptions(){return Re(this,Dl)}setDefaultOptions(t){Yt(this,Dl,t)}setQueryDefaults(t,e){Re(this,Lf).set(bm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Re(this,Lf).values()],n={};return e.forEach(r=>{Mm(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Re(this,Df).set(bm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Re(this,Df).values()],n={};return e.forEach(r=>{Mm(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Re(this,Dl).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ZT&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Re(this,Dl).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Re(this,er).clear(),Re(this,Ll).clear()}},er=new WeakMap,Ll=new WeakMap,Dl=new WeakMap,Lf=new WeakMap,Df=new WeakMap,kl=new WeakMap,kf=new WeakMap,Of=new WeakMap,Xk),v9=T.createContext(void 0),y9=({client:t,children:e})=>(T.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),b.jsx(v9.Provider,{value:t,children:e}));async function IF(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function tx(t){const e=await fetch(t.url,{method:t.method,headers:t.body?{"Content-Type":"application/json"}:{},body:t.body,credentials:"include"});return await IF(e),await e.json()}const x9=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await IF(n),await n.json())},_9=new g9({defaultOptions:{queries:{queryFn:x9({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});var vg=t=>t.type==="checkbox",iu=t=>t instanceof Date,yi=t=>t==null;const LF=t=>typeof t=="object";var hr=t=>!yi(t)&&!Array.isArray(t)&&LF(t)&&!iu(t),DF=t=>hr(t)&&t.target?vg(t.target)?t.target.checked:t.target.value:t,w9=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,kF=(t,e)=>t.has(w9(e)),S9=t=>{const e=t.constructor&&t.constructor.prototype;return hr(e)&&e.hasOwnProperty("isPrototypeOf")},KT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ur(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(KT&&(t instanceof Blob||r))&&(n||hr(t)))if(e=n?[]:{},!n&&!S9(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Ur(t[i]));else return t;return e}var F_=t=>Array.isArray(t)?t.filter(Boolean):[],cr=t=>t===void 0,Qe=(t,e,n)=>{if(!e||!hr(t))return n;const r=F_(e.split(/[,[\].]+?/)).reduce((i,s)=>yi(i)?i:i[s],t);return cr(r)||r===t?cr(t[e])?n:t[e]:r},Qi=t=>typeof t=="boolean",QT=t=>/^\w*$/.test(t),OF=t=>F_(t.replace(/["|']|\]/g,"").split(/\.|\[/)),bn=(t,e,n)=>{let r=-1;const i=QT(e)?[e]:OF(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=hr(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const nx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ro={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ua={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},FF=sn.createContext(null),U_=()=>sn.useContext(FF),b9=t=>{const{children:e,...n}=t;return sn.createElement(FF.Provider,{value:n},e)};var UF=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==ro.all&&(e._proxyFormState[o]=!r||ro.all),n&&(n[o]=!0),t[o]}});return i};const JT=typeof window<"u"?T.useLayoutEffect:T.useEffect;function M9(t){const e=U_(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=sn.useState(n._formState),l=sn.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return JT(()=>n._subscribe({name:i,formState:l.current,exact:s,callback:c=>{!r&&a({...n._formState,...c})}}),[i,r,s]),sn.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),sn.useMemo(()=>UF(o,n,l.current,!1),[o,n])}var Fo=t=>typeof t=="string",BF=(t,e,n,r,i)=>Fo(t)?(r&&e.watch.add(t),Qe(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),Qe(n,s))):(r&&(e.watchAll=!0),n);function E9(t){const e=U_(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t||{},a=sn.useRef(i),[l,c]=sn.useState(n._getWatch(r,a.current));return JT(()=>n._subscribe({name:r,formState:{values:!0},exact:o,callback:u=>!s&&c(BF(r,n._names,u.values||n._formValues,!1,a.current))}),[r,n,s,o]),sn.useEffect(()=>n._removeUnmounted()),l}function T9(t){const e=U_(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=kF(i._names.array,n),a=E9({control:i,name:n,defaultValue:Qe(i._formValues,n,Qe(i._defaultValues,n,t.defaultValue)),exact:!0}),l=M9({control:i,name:n,exact:!0}),c=sn.useRef(t),u=sn.useRef(i.register(n,{...t.rules,value:a,...Qi(t.disabled)?{disabled:t.disabled}:{}})),h=sn.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Qe(l.errors,n)},isDirty:{enumerable:!0,get:()=>!!Qe(l.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Qe(l.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Qe(l.validatingFields,n)},error:{enumerable:!0,get:()=>Qe(l.errors,n)}}),[l,n]),p=sn.useCallback(x=>u.current.onChange({target:{value:DF(x),name:n},type:nx.CHANGE}),[n]),m=sn.useCallback(()=>u.current.onBlur({target:{value:Qe(i._formValues,n),name:n},type:nx.BLUR}),[n,i._formValues]),v=sn.useCallback(x=>{const g=Qe(i._fields,n);g&&x&&(g._f.ref={focus:()=>x.focus(),select:()=>x.select(),setCustomValidity:_=>x.setCustomValidity(_),reportValidity:()=>x.reportValidity()})},[i._fields,n]),y=sn.useMemo(()=>({name:n,value:a,...Qi(r)||l.disabled?{disabled:l.disabled||r}:{},onChange:p,onBlur:m,ref:v}),[n,r,l.disabled,p,m,v,a]);return sn.useEffect(()=>{const x=i._options.shouldUnregister||s;i.register(n,{...c.current.rules,...Qi(c.current.disabled)?{disabled:c.current.disabled}:{}});const g=(_,S)=>{const E=Qe(i._fields,_);E&&E._f&&(E._f.mount=S)};if(g(n,!0),x){const _=Ur(Qe(i._options.defaultValues,n));bn(i._defaultValues,n,_),cr(Qe(i._formValues,n))&&bn(i._formValues,n,_)}return!o&&i.register(n),()=>{(o?x&&!i._state.action:x)?i.unregister(n):g(n,!1)}},[n,i,o,s]),sn.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),sn.useMemo(()=>({field:y,formState:l,fieldState:h}),[y,l,h])}const A9=t=>t.render(T9(t));var zF=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Bp=t=>Array.isArray(t)?t:[t],NI=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}},XM=t=>yi(t)||!LF(t);function Rl(t,e){if(XM(t)||XM(e))return t===e;if(iu(t)&&iu(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const s=t[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=e[i];if(iu(s)&&iu(o)||hr(s)&&hr(o)||Array.isArray(s)&&Array.isArray(o)?!Rl(s,o):s!==o)return!1}}return!0}var gi=t=>hr(t)&&!Object.keys(t).length,eA=t=>t.type==="file",io=t=>typeof t=="function",rx=t=>{if(!KT)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},VF=t=>t.type==="select-multiple",tA=t=>t.type==="radio",C9=t=>tA(t)||vg(t),bb=t=>rx(t)&&t.isConnected;function R9(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=cr(t)?r++:t[e[r++]];return t}function P9(t){for(const e in t)if(t.hasOwnProperty(e)&&!cr(t[e]))return!1;return!0}function wr(t,e){const n=Array.isArray(e)?e:QT(e)?[e]:OF(e),r=n.length===1?t:R9(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(hr(r)&&gi(r)||Array.isArray(r)&&P9(r))&&wr(t,n.slice(0,-1)),t}var jF=t=>{for(const e in t)if(io(t[e]))return!0;return!1};function ix(t,e={}){const n=Array.isArray(t);if(hr(t)||n)for(const r in t)Array.isArray(t[r])||hr(t[r])&&!jF(t[r])?(e[r]=Array.isArray(t[r])?[]:{},ix(t[r],e[r])):yi(t[r])||(e[r]=!0);return e}function HF(t,e,n){const r=Array.isArray(t);if(hr(t)||r)for(const i in t)Array.isArray(t[i])||hr(t[i])&&!jF(t[i])?cr(e)||XM(n[i])?n[i]=Array.isArray(t[i])?ix(t[i],[]):{...ix(t[i])}:HF(t[i],yi(e)?{}:e[i],n[i]):n[i]=!Rl(t[i],e[i]);return n}var Zh=(t,e)=>HF(t,e,ix(e));const II={value:!1,isValid:!1},LI={value:!0,isValid:!0};var WF=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!cr(t[0].attributes.value)?cr(t[0].value)||t[0].value===""?LI:{value:t[0].value,isValid:!0}:LI:II}return II},GF=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>cr(t)?t:e?t===""?NaN:t&&+t:n&&Fo(t)?new Date(t):r?r(t):t;const DI={isValid:!1,value:null};var XF=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,DI):DI;function kI(t){const e=t.ref;return eA(e)?e.files:tA(e)?XF(t.refs).value:VF(e)?[...e.selectedOptions].map(({value:n})=>n):vg(e)?WF(t.refs).value:GF(cr(e.value)?t.ref.value:e.value,t)}var N9=(t,e,n,r)=>{const i={};for(const s of t){const o=Qe(e,s);o&&bn(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},sx=t=>t instanceof RegExp,Kh=t=>cr(t)?t:sx(t)?t.source:hr(t)?sx(t.value)?t.value.source:t.value:t,OI=t=>({isOnSubmit:!t||t===ro.onSubmit,isOnBlur:t===ro.onBlur,isOnChange:t===ro.onChange,isOnAll:t===ro.all,isOnTouch:t===ro.onTouched});const FI="AsyncFunction";var I9=t=>!!t&&!!t.validate&&!!(io(t.validate)&&t.validate.constructor.name===FI||hr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===FI)),L9=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),UI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const zp=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=Qe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(zp(a,e))break}else if(hr(a)&&zp(a,e))break}}};function BI(t,e,n){const r=Qe(t,n);if(r||QT(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=Qe(e,s),a=Qe(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};i.pop()}return{name:n}}var D9=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return gi(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||ro.all))},k9=(t,e,n)=>!t||!e||t===e||Bp(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),O9=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,F9=(t,e)=>!F_(Qe(t,e)).length&&wr(t,e),U9=(t,e,n)=>{const r=Bp(Qe(t,n));return bn(r,"root",e[n]),bn(t,n,r),t},m0=t=>Fo(t);function zI(t,e,n="validate"){if(m0(t)||Array.isArray(t)&&t.every(m0)||Qi(t)&&!t)return{type:n,message:m0(t)?t:"",ref:e}}var vd=t=>hr(t)&&!sx(t)?t:{value:t,message:""},VI=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:h,max:p,pattern:m,validate:v,name:y,valueAsNumber:x,mount:g}=t._f,_=Qe(n,y);if(!g||e.has(y))return{};const S=a?a[0]:o,E=z=>{i&&S.reportValidity&&(S.setCustomValidity(Qi(z)?"":z||""),S.reportValidity())},R={},I=tA(o),C=vg(o),D=I||C,L=(x||eA(o))&&cr(o.value)&&cr(_)||rx(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,P=zF.bind(null,y,r,R),F=(z,H,q,se=ua.maxLength,K=ua.minLength)=>{const ne=z?H:q;R[y]={type:z?se:K,message:ne,ref:o,...P(z?se:K,ne)}};if(s?!Array.isArray(_)||!_.length:l&&(!D&&(L||yi(_))||Qi(_)&&!_||C&&!WF(a).isValid||I&&!XF(a).isValid)){const{value:z,message:H}=m0(l)?{value:!!l,message:l}:vd(l);if(z&&(R[y]={type:ua.required,message:H,ref:S,...P(ua.required,H)},!r))return E(H),R}if(!L&&(!yi(h)||!yi(p))){let z,H;const q=vd(p),se=vd(h);if(!yi(_)&&!isNaN(_)){const K=o.valueAsNumber||_&&+_;yi(q.value)||(z=K>q.value),yi(se.value)||(H=K<se.value)}else{const K=o.valueAsDate||new Date(_),ne=Y=>new Date(new Date().toDateString()+" "+Y),O=o.type=="time",W=o.type=="week";Fo(q.value)&&_&&(z=O?ne(_)>ne(q.value):W?_>q.value:K>new Date(q.value)),Fo(se.value)&&_&&(H=O?ne(_)<ne(se.value):W?_<se.value:K<new Date(se.value))}if((z||H)&&(F(!!z,q.message,se.message,ua.max,ua.min),!r))return E(R[y].message),R}if((c||u)&&!L&&(Fo(_)||s&&Array.isArray(_))){const z=vd(c),H=vd(u),q=!yi(z.value)&&_.length>+z.value,se=!yi(H.value)&&_.length<+H.value;if((q||se)&&(F(q,z.message,H.message),!r))return E(R[y].message),R}if(m&&!L&&Fo(_)){const{value:z,message:H}=vd(m);if(sx(z)&&!_.match(z)&&(R[y]={type:ua.pattern,message:H,ref:o,...P(ua.pattern,H)},!r))return E(H),R}if(v){if(io(v)){const z=await v(_,n),H=zI(z,S);if(H&&(R[y]={...H,...P(ua.validate,H.message)},!r))return E(H.message),R}else if(hr(v)){let z={};for(const H in v){if(!gi(z)&&!r)break;const q=zI(await v[H](_,n),S,H);q&&(z={...q,...P(H,q.message)},E(q.message),r&&(R[y]=z))}if(!gi(z)&&(R[y]={ref:S,...z},!r))return R}}return E(!0),R};const B9={mode:ro.onSubmit,reValidateMode:ro.onChange,shouldFocusError:!0};function z9(t={}){let e={...B9,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:io(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i=hr(e.defaultValues)||hr(e.values)?Ur(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ur(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const p={array:NI(),state:NI()},m=OI(e.mode),v=OI(e.reValidateMode),y=e.criteriaMode===ro.all,x=N=>B=>{clearTimeout(c),c=setTimeout(N,B)},g=async N=>{if(!e.disabled&&(u.isValid||h.isValid||N)){const B=e.resolver?gi((await L()).errors):await F(r,!0);B!==n.isValid&&p.state.next({isValid:B})}},_=(N,B)=>{!e.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((N||Array.from(a.mount)).forEach($=>{$&&(B?bn(n.validatingFields,$,B):wr(n.validatingFields,$))}),p.state.next({validatingFields:n.validatingFields,isValidating:!gi(n.validatingFields)}))},S=(N,B=[],$,ae,te=!0,pe=!0)=>{if(ae&&$&&!e.disabled){if(o.action=!0,pe&&Array.isArray(Qe(r,N))){const me=$(Qe(r,N),ae.argA,ae.argB);te&&bn(r,N,me)}if(pe&&Array.isArray(Qe(n.errors,N))){const me=$(Qe(n.errors,N),ae.argA,ae.argB);te&&bn(n.errors,N,me),F9(n.errors,N)}if((u.touchedFields||h.touchedFields)&&pe&&Array.isArray(Qe(n.touchedFields,N))){const me=$(Qe(n.touchedFields,N),ae.argA,ae.argB);te&&bn(n.touchedFields,N,me)}(u.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Zh(i,s)),p.state.next({name:N,isDirty:H(N,B),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else bn(s,N,B)},E=(N,B)=>{bn(n.errors,N,B),p.state.next({errors:n.errors})},R=N=>{n.errors=N,p.state.next({errors:n.errors,isValid:!1})},I=(N,B,$,ae)=>{const te=Qe(r,N);if(te){const pe=Qe(s,N,cr($)?Qe(i,N):$);cr(pe)||ae&&ae.defaultChecked||B?bn(s,N,B?pe:kI(te._f)):K(N,pe),o.mount&&g()}},C=(N,B,$,ae,te)=>{let pe=!1,me=!1;const Ne={name:N};if(!e.disabled){if(!$||ae){(u.isDirty||h.isDirty)&&(me=n.isDirty,n.isDirty=Ne.isDirty=H(),pe=me!==Ne.isDirty);const xt=Rl(Qe(i,N),B);me=!!Qe(n.dirtyFields,N),xt?wr(n.dirtyFields,N):bn(n.dirtyFields,N,!0),Ne.dirtyFields=n.dirtyFields,pe=pe||(u.dirtyFields||h.dirtyFields)&&me!==!xt}if($){const xt=Qe(n.touchedFields,N);xt||(bn(n.touchedFields,N,$),Ne.touchedFields=n.touchedFields,pe=pe||(u.touchedFields||h.touchedFields)&&xt!==$)}pe&&te&&p.state.next(Ne)}return pe?Ne:{}},D=(N,B,$,ae)=>{const te=Qe(n.errors,N),pe=(u.isValid||h.isValid)&&Qi(B)&&n.isValid!==B;if(e.delayError&&$?(l=x(()=>E(N,$)),l(e.delayError)):(clearTimeout(c),l=null,$?bn(n.errors,N,$):wr(n.errors,N)),($?!Rl(te,$):te)||!gi(ae)||pe){const me={...ae,...pe&&Qi(B)?{isValid:B}:{},errors:n.errors,name:N};n={...n,...me},p.state.next(me)}},L=async N=>{_(N,!0);const B=await e.resolver(s,e.context,N9(N||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(N),B},P=async N=>{const{errors:B}=await L(N);if(N)for(const $ of N){const ae=Qe(B,$);ae?bn(n.errors,$,ae):wr(n.errors,$)}else n.errors=B;return B},F=async(N,B,$={valid:!0})=>{for(const ae in N){const te=N[ae];if(te){const{_f:pe,...me}=te;if(pe){const Ne=a.array.has(pe.name),xt=te._f&&I9(te._f);xt&&u.validatingFields&&_([ae],!0);const Ce=await VI(te,a.disabled,s,y,e.shouldUseNativeValidation&&!B,Ne);if(xt&&u.validatingFields&&_([ae]),Ce[pe.name]&&($.valid=!1,B))break;!B&&(Qe(Ce,pe.name)?Ne?U9(n.errors,Ce,pe.name):bn(n.errors,pe.name,Ce[pe.name]):wr(n.errors,pe.name))}!gi(me)&&await F(me,B,$)}}return $.valid},z=()=>{for(const N of a.unMount){const B=Qe(r,N);B&&(B._f.refs?B._f.refs.every($=>!bb($)):!bb(B._f.ref))&&rt(N)}a.unMount=new Set},H=(N,B)=>!e.disabled&&(N&&B&&bn(s,N,B),!Rl(we(),i)),q=(N,B,$)=>BF(N,a,{...o.mount?s:cr(B)?i:Fo(N)?{[N]:B}:B},$,B),se=N=>F_(Qe(o.mount?s:i,N,e.shouldUnregister?Qe(i,N,[]):[])),K=(N,B,$={})=>{const ae=Qe(r,N);let te=B;if(ae){const pe=ae._f;pe&&(!pe.disabled&&bn(s,N,GF(B,pe)),te=rx(pe.ref)&&yi(B)?"":B,VF(pe.ref)?[...pe.ref.options].forEach(me=>me.selected=te.includes(me.value)):pe.refs?vg(pe.ref)?pe.refs.length>1?pe.refs.forEach(me=>(!me.defaultChecked||!me.disabled)&&(me.checked=Array.isArray(te)?!!te.find(Ne=>Ne===me.value):te===me.value)):pe.refs[0]&&(pe.refs[0].checked=!!te):pe.refs.forEach(me=>me.checked=me.value===te):eA(pe.ref)?pe.ref.value="":(pe.ref.value=te,pe.ref.type||p.state.next({name:N,values:Ur(s)})))}($.shouldDirty||$.shouldTouch)&&C(N,te,$.shouldTouch,$.shouldDirty,!0),$.shouldValidate&&re(N)},ne=(N,B,$)=>{for(const ae in B){const te=B[ae],pe=`${N}.${ae}`,me=Qe(r,pe);(a.array.has(N)||hr(te)||me&&!me._f)&&!iu(te)?ne(pe,te,$):K(pe,te,$)}},O=(N,B,$={})=>{const ae=Qe(r,N),te=a.array.has(N),pe=Ur(B);bn(s,N,pe),te?(p.array.next({name:N,values:Ur(s)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&$.shouldDirty&&p.state.next({name:N,dirtyFields:Zh(i,s),isDirty:H(N,pe)})):ae&&!ae._f&&!yi(pe)?ne(N,pe,$):K(N,pe,$),UI(N,a)&&p.state.next({...n}),p.state.next({name:o.mount?N:void 0,values:Ur(s)})},W=async N=>{o.mount=!0;const B=N.target;let $=B.name,ae=!0;const te=Qe(r,$),pe=me=>{ae=Number.isNaN(me)||iu(me)&&isNaN(me.getTime())||Rl(me,Qe(s,$,me))};if(te){let me,Ne;const xt=B.type?kI(te._f):DF(N),Ce=N.type===nx.BLUR||N.type===nx.FOCUS_OUT,at=!L9(te._f)&&!e.resolver&&!Qe(n.errors,$)&&!te._f.deps||O9(Ce,Qe(n.touchedFields,$),n.isSubmitted,v,m),vt=UI($,a,Ce);bn(s,$,xt),Ce?(te._f.onBlur&&te._f.onBlur(N),l&&l(0)):te._f.onChange&&te._f.onChange(N);const Rt=C($,xt,Ce),et=!gi(Rt)||vt;if(!Ce&&p.state.next({name:$,type:N.type,values:Ur(s)}),at)return(u.isValid||h.isValid)&&(e.mode==="onBlur"?Ce&&g():Ce||g()),et&&p.state.next({name:$,...vt?{}:Rt});if(!Ce&&vt&&p.state.next({...n}),e.resolver){const{errors:J}=await L([$]);if(pe(xt),ae){const Ee=BI(n.errors,r,$),Xe=BI(J,r,Ee.name||$);me=Xe.error,$=Xe.name,Ne=gi(J)}}else _([$],!0),me=(await VI(te,a.disabled,s,y,e.shouldUseNativeValidation))[$],_([$]),pe(xt),ae&&(me?Ne=!1:(u.isValid||h.isValid)&&(Ne=await F(r,!0)));ae&&(te._f.deps&&re(te._f.deps),D($,Ne,me,Rt))}},Y=(N,B)=>{if(Qe(n.errors,B)&&N.focus)return N.focus(),1},re=async(N,B={})=>{let $,ae;const te=Bp(N);if(e.resolver){const pe=await P(cr(N)?N:te);$=gi(pe),ae=N?!te.some(me=>Qe(pe,me)):$}else N?(ae=(await Promise.all(te.map(async pe=>{const me=Qe(r,pe);return await F(me&&me._f?{[pe]:me}:me)}))).every(Boolean),!(!ae&&!n.isValid)&&g()):ae=$=await F(r);return p.state.next({...!Fo(N)||(u.isValid||h.isValid)&&$!==n.isValid?{}:{name:N},...e.resolver||!N?{isValid:$}:{},errors:n.errors}),B.shouldFocus&&!ae&&zp(r,Y,N?te:a.mount),ae},we=N=>{const B={...o.mount?s:i};return cr(N)?B:Fo(N)?Qe(B,N):N.map($=>Qe(B,$))},Ue=(N,B)=>({invalid:!!Qe((B||n).errors,N),isDirty:!!Qe((B||n).dirtyFields,N),error:Qe((B||n).errors,N),isValidating:!!Qe(n.validatingFields,N),isTouched:!!Qe((B||n).touchedFields,N)}),de=N=>{N&&Bp(N).forEach(B=>wr(n.errors,B)),p.state.next({errors:N?n.errors:{}})},Se=(N,B,$)=>{const ae=(Qe(r,N,{_f:{}})._f||{}).ref,te=Qe(n.errors,N)||{},{ref:pe,message:me,type:Ne,...xt}=te;bn(n.errors,N,{...xt,...B,ref:ae}),p.state.next({name:N,errors:n.errors,isValid:!1}),$&&$.shouldFocus&&ae&&ae.focus&&ae.focus()},Ie=(N,B)=>io(N)?p.state.subscribe({next:$=>N(q(void 0,B),$)}):q(N,B,!0),he=N=>p.state.subscribe({next:B=>{k9(N.name,B.name,N.exact)&&D9(B,N.formState||u,_t,N.reRenderRoot)&&N.callback({values:{...s},...n,...B})}}).unsubscribe,ze=N=>(o.mount=!0,h={...h,...N.formState},he({...N,formState:h})),rt=(N,B={})=>{for(const $ of N?Bp(N):a.mount)a.mount.delete($),a.array.delete($),B.keepValue||(wr(r,$),wr(s,$)),!B.keepError&&wr(n.errors,$),!B.keepDirty&&wr(n.dirtyFields,$),!B.keepTouched&&wr(n.touchedFields,$),!B.keepIsValidating&&wr(n.validatingFields,$),!e.shouldUnregister&&!B.keepDefaultValue&&wr(i,$);p.state.next({values:Ur(s)}),p.state.next({...n,...B.keepDirty?{isDirty:H()}:{}}),!B.keepIsValid&&g()},je=({disabled:N,name:B})=>{(Qi(N)&&o.mount||N||a.disabled.has(B))&&(N?a.disabled.add(B):a.disabled.delete(B))},We=(N,B={})=>{let $=Qe(r,N);const ae=Qi(B.disabled)||Qi(e.disabled);return bn(r,N,{...$||{},_f:{...$&&$._f?$._f:{ref:{name:N}},name:N,mount:!0,...B}}),a.mount.add(N),$?je({disabled:Qi(B.disabled)?B.disabled:e.disabled,name:N}):I(N,!0,B.value),{...ae?{disabled:B.disabled||e.disabled}:{},...e.progressive?{required:!!B.required,min:Kh(B.min),max:Kh(B.max),minLength:Kh(B.minLength),maxLength:Kh(B.maxLength),pattern:Kh(B.pattern)}:{},name:N,onChange:W,onBlur:W,ref:te=>{if(te){We(N,B),$=Qe(r,N);const pe=cr(te.value)&&te.querySelectorAll&&te.querySelectorAll("input,select,textarea")[0]||te,me=C9(pe),Ne=$._f.refs||[];if(me?Ne.find(xt=>xt===pe):pe===$._f.ref)return;bn(r,N,{_f:{...$._f,...me?{refs:[...Ne.filter(bb),pe,...Array.isArray(Qe(i,N))?[{}]:[]],ref:{type:pe.type,name:N}}:{ref:pe}}}),I(N,!1,void 0,pe)}else $=Qe(r,N,{}),$._f&&($._f.mount=!1),(e.shouldUnregister||B.shouldUnregister)&&!(kF(a.array,N)&&o.action)&&a.unMount.add(N)}}},fe=()=>e.shouldFocusError&&zp(r,Y,a.mount),Me=N=>{Qi(N)&&(p.state.next({disabled:N}),zp(r,(B,$)=>{const ae=Qe(r,$);ae&&(B.disabled=ae._f.disabled||N,Array.isArray(ae._f.refs)&&ae._f.refs.forEach(te=>{te.disabled=ae._f.disabled||N}))},0,!1))},X=(N,B)=>async $=>{let ae;$&&($.preventDefault&&$.preventDefault(),$.persist&&$.persist());let te=Ur(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:pe,values:me}=await L();n.errors=pe,te=me}else await F(r);if(a.disabled.size)for(const pe of a.disabled)bn(te,pe,void 0);if(wr(n.errors,"root"),gi(n.errors)){p.state.next({errors:{}});try{await N(te,$)}catch(pe){ae=pe}}else B&&await B({...n.errors},$),fe(),setTimeout(fe);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gi(n.errors)&&!ae,submitCount:n.submitCount+1,errors:n.errors}),ae)throw ae},ot=(N,B={})=>{Qe(r,N)&&(cr(B.defaultValue)?O(N,Ur(Qe(i,N))):(O(N,B.defaultValue),bn(i,N,Ur(B.defaultValue))),B.keepTouched||wr(n.touchedFields,N),B.keepDirty||(wr(n.dirtyFields,N),n.isDirty=B.defaultValue?H(N,Ur(Qe(i,N))):H()),B.keepError||(wr(n.errors,N),u.isValid&&g()),p.state.next({...n}))},Pe=(N,B={})=>{const $=N?Ur(N):i,ae=Ur($),te=gi(N),pe=te?i:ae;if(B.keepDefaultValues||(i=$),!B.keepValues){if(B.keepDirtyValues){const me=new Set([...a.mount,...Object.keys(Zh(i,s))]);for(const Ne of Array.from(me))Qe(n.dirtyFields,Ne)?bn(pe,Ne,Qe(s,Ne)):O(Ne,Qe(pe,Ne))}else{if(KT&&cr(N))for(const me of a.mount){const Ne=Qe(r,me);if(Ne&&Ne._f){const xt=Array.isArray(Ne._f.refs)?Ne._f.refs[0]:Ne._f.ref;if(rx(xt)){const Ce=xt.closest("form");if(Ce){Ce.reset();break}}}}for(const me of a.mount)O(me,Qe(pe,me))}s=Ur(pe),p.array.next({values:{...pe}}),p.state.next({values:{...pe}})}a={mount:B.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!B.keepIsValid||!!B.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:B.keepSubmitCount?n.submitCount:0,isDirty:te?!1:B.keepDirty?n.isDirty:!!(B.keepDefaultValues&&!Rl(N,i)),isSubmitted:B.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:te?{}:B.keepDirtyValues?B.keepDefaultValues&&s?Zh(i,s):n.dirtyFields:B.keepDefaultValues&&N?Zh(i,N):B.keepDirty?n.dirtyFields:{},touchedFields:B.keepTouched?n.touchedFields:{},errors:B.keepErrors?n.errors:{},isSubmitSuccessful:B.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Ge=(N,B)=>Pe(io(N)?N(s):N,B),Be=(N,B={})=>{const $=Qe(r,N),ae=$&&$._f;if(ae){const te=ae.refs?ae.refs[0]:ae.ref;te.focus&&(te.focus(),B.shouldSelect&&io(te.select)&&te.select())}},_t=N=>{n={...n,...N}},V={control:{register:We,unregister:rt,getFieldState:Ue,handleSubmit:X,setError:Se,_subscribe:he,_runSchema:L,_getWatch:q,_getDirty:H,_setValid:g,_setFieldArray:S,_setDisabledField:je,_setErrors:R,_getFieldArray:se,_reset:Pe,_resetDefaultValues:()=>io(e.defaultValues)&&e.defaultValues().then(N=>{Ge(N,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Me,_subjects:p,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(N){o=N},get _defaultValues(){return i},get _names(){return a},set _names(N){a=N},get _formState(){return n},get _options(){return e},set _options(N){e={...e,...N}}},subscribe:ze,trigger:re,register:We,handleSubmit:X,watch:Ie,setValue:O,getValues:we,reset:Ge,resetField:ot,clearErrors:de,unregister:rt,setError:Se,setFocus:Be,getFieldState:Ue};return{...V,formControl:V}}function nA(t={}){const e=sn.useRef(void 0),n=sn.useRef(void 0),[r,i]=sn.useState({isDirty:!1,isValidating:!1,isLoading:io(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:io(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:z9(t),formState:r},t.formControl&&t.defaultValues&&!io(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const s=e.current.control;return s._options=t,JT(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),sn.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),sn.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode),t.errors&&!gi(t.errors)&&s._setErrors(t.errors)},[s,t.errors,t.mode,t.reValidateMode]),sn.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),sn.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),sn.useEffect(()=>{t.values&&!Rl(t.values,n.current)?(s._reset(t.values,s._options.resetOptions),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),sn.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=UF(r,s),e.current}const jI=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Qe(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},$F=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?jI(r.ref,n,t):r&&r.refs&&r.refs.forEach(i=>jI(i,n,t))}},V9=(t,e)=>{e.shouldUseNativeValidation&&$F(t,e);const n={};for(const r in t){const i=Qe(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(j9(e.names||Object.keys(t),r)){const o=Object.assign({},Qe(n,r));bn(o,"root",s),bn(n,r,o)}else bn(n,r,s)}return n},j9=(t,e)=>{const n=HI(e);return t.some(r=>HI(r).match(`^${n}\\.\\d+`))};function HI(t){return t.replace(/\]|\[/g,"")}function H9(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return t.push(h)})}),e){var l=n[o].types,c=l&&l[r.code];n[o]=zF(o,e,n,i,c?[].concat(c,r.message):r.message)}t.shift()}return n}function rA(t,e,n){return n===void 0&&(n={}),function(r,i,s){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(c){return s.shouldUseNativeValidation&&$F({},s),{errors:{},values:n.raw?Object.assign({},r):c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:V9(H9(o.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw o}))}catch(o){return Promise.reject(o)}}}var hn;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(hn||(hn={}));var $M;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})($M||($M={}));const ct=hn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sa=t=>{switch(typeof t){case"undefined":return ct.undefined;case"string":return ct.string;case"number":return isNaN(t)?ct.nan:ct.number;case"boolean":return ct.boolean;case"function":return ct.function;case"bigint":return ct.bigint;case"symbol":return ct.symbol;case"object":return Array.isArray(t)?ct.array:t===null?ct.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ct.promise:typeof Map<"u"&&t instanceof Map?ct.map:typeof Set<"u"&&t instanceof Set?ct.set:typeof Date<"u"&&t instanceof Date?ct.date:ct.object;default:return ct.unknown}},Oe=hn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),W9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ns extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}static assert(e){if(!(e instanceof ns))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,hn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ns.create=t=>new ns(t);const Gf=(t,e)=>{let n;switch(t.code){case Oe.invalid_type:t.received===ct.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,hn.jsonStringifyReplacer)}`;break;case Oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${hn.joinValues(t.keys,", ")}`;break;case Oe.invalid_union:n="Invalid input";break;case Oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${hn.joinValues(t.options)}`;break;case Oe.invalid_enum_value:n=`Invalid enum value. Expected ${hn.joinValues(t.options)}, received '${t.received}'`;break;case Oe.invalid_arguments:n="Invalid function arguments";break;case Oe.invalid_return_type:n="Invalid function return type";break;case Oe.invalid_date:n="Invalid date";break;case Oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:hn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Oe.custom:n="Invalid input";break;case Oe.invalid_intersection_types:n="Intersection results could not be merged";break;case Oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,hn.assertNever(t)}return{message:n}};let YF=Gf;function G9(t){YF=t}function ox(){return YF}const ax=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}},X9=[];function Je(t,e){const n=ox(),r=ax({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Gf?void 0:Gf].filter(i=>!!i)});t.common.issues.push(r)}class li{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Bt;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return li.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Bt;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Bt=Object.freeze({status:"aborted"}),nf=t=>({status:"dirty",value:t}),Ei=t=>({status:"valid",value:t}),YM=t=>t.status==="aborted",qM=t=>t.status==="dirty",Nu=t=>t.status==="valid",Em=t=>typeof Promise<"u"&&t instanceof Promise;function lx(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function qF(t,e,n,r,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Et;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Et||(Et={}));var _p,wp;class qo{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const WI=(t,e)=>{if(Nu(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ns(t.common.issues);return this._error=n,this._error}}};function Zt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>{var l,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??a.defaultError}:typeof a.data>"u"?{message:(l=u??r)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:a.defaultError}},description:i}}class on{get description(){return this._def.description}_getType(e){return Sa(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Sa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new li,ctx:{common:e.parent.common,data:e.data,parsedType:Sa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Em(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return WI(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return Nu(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>Nu(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Sa(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Em(i)?i:Promise.resolve(i));return WI(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:Oe.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new uo({schema:this,typeName:Ft.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return jo.create(this,this._def)}nullable(){return ec.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return lo.create(this)}promise(){return $f.create(this,this._def)}or(e){return Rm.create([this,e],this._def)}and(e){return Pm.create(this,e,this._def)}transform(e){return new uo({...Zt(this._def),schema:this,typeName:Ft.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new km({...Zt(this._def),innerType:this,defaultValue:n,typeName:Ft.ZodDefault})}brand(){return new iA({typeName:Ft.ZodBranded,type:this,...Zt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Om({...Zt(this._def),innerType:this,catchValue:n,typeName:Ft.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return yg.create(this,e)}readonly(){return Fm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $9=/^c[^\s-]{8,}$/i,Y9=/^[0-9a-z]+$/,q9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Z9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,K9=/^[a-z0-9_-]{21}$/i,Q9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,J9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,e7=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,t7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Mb;const n7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,r7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,i7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,s7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,o7=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,a7=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ZF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",l7=new RegExp(`^${ZF}$`);function KF(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function c7(t){return new RegExp(`^${KF(t)}$`)}function QF(t){let e=`${ZF}T${KF(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function u7(t,e){return!!((e==="v4"||!e)&&n7.test(t)||(e==="v6"||!e)&&i7.test(t))}function d7(t,e){if(!Q9.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function f7(t,e){return!!((e==="v4"||!e)&&r7.test(t)||(e==="v6"||!e)&&s7.test(t))}class so extends on{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ct.string){const s=this._getOrReturnCtx(e);return Je(s,{code:Oe.invalid_type,expected:ct.string,received:s.parsedType}),Bt}const r=new li;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?Je(i,{code:Oe.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Je(i,{code:Oe.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")e7.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"email",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Mb||(Mb=new RegExp(t7,"u")),Mb.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"emoji",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")Z9.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"uuid",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")K9.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"nanoid",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")$9.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"cuid",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")Y9.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"cuid2",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")q9.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"ulid",code:Oe.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Je(i,{validation:"url",code:Oe.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"regex",code:Oe.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?QF(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?l7.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?c7(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?J9.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"duration",code:Oe.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?u7(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"ip",code:Oe.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?d7(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"jwt",code:Oe.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?f7(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"cidr",code:Oe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?o7.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"base64",code:Oe.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?a7.test(e.data)||(i=this._getOrReturnCtx(e,i),Je(i,{validation:"base64url",code:Oe.invalid_string,message:s.message}),r.dirty()):hn.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:Oe.invalid_string,...Et.errToObj(r)})}_addCheck(e){return new so({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Et.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Et.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Et.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Et.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Et.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Et.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Et.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Et.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Et.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Et.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Et.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Et.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Et.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Et.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Et.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Et.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Et.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Et.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Et.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Et.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Et.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Et.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Et.errToObj(n)})}nonempty(e){return this.min(1,Et.errToObj(e))}trim(){return new so({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new so({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new so({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}so.create=t=>{var e;return new so({checks:[],typeName:Ft.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Zt(t)})};function h7(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Kl extends on{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ct.number){const s=this._getOrReturnCtx(e);return Je(s,{code:Oe.invalid_type,expected:ct.number,received:s.parsedType}),Bt}let r;const i=new li;for(const s of this._def.checks)s.kind==="int"?hn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?h7(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.not_finite,message:s.message}),i.dirty()):hn.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Et.toString(n))}setLimit(e,n,r,i){return new Kl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Et.toString(i)}]})}_addCheck(e){return new Kl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Et.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Et.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Et.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Et.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Et.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&hn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Kl.create=t=>new Kl({checks:[],typeName:Ft.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Zt(t)});class Ql extends on{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ct.bigint)return this._getInvalidInput(e);let r;const i=new li;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Je(r,{code:Oe.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):hn.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Je(n,{code:Oe.invalid_type,expected:ct.bigint,received:n.parsedType}),Bt}gte(e,n){return this.setLimit("min",e,!0,Et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Et.toString(n))}setLimit(e,n,r,i){return new Ql({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Et.toString(i)}]})}_addCheck(e){return new Ql({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Et.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ql.create=t=>{var e;return new Ql({checks:[],typeName:Ft.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Zt(t)})};class Tm extends on{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ct.boolean){const r=this._getOrReturnCtx(e);return Je(r,{code:Oe.invalid_type,expected:ct.boolean,received:r.parsedType}),Bt}return Ei(e.data)}}Tm.create=t=>new Tm({typeName:Ft.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Zt(t)});class Iu extends on{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ct.date){const s=this._getOrReturnCtx(e);return Je(s,{code:Oe.invalid_type,expected:ct.date,received:s.parsedType}),Bt}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Je(s,{code:Oe.invalid_date}),Bt}const r=new li;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Je(i,{code:Oe.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):hn.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Iu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Et.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Et.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Iu.create=t=>new Iu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ft.ZodDate,...Zt(t)});class cx extends on{_parse(e){if(this._getType(e)!==ct.symbol){const r=this._getOrReturnCtx(e);return Je(r,{code:Oe.invalid_type,expected:ct.symbol,received:r.parsedType}),Bt}return Ei(e.data)}}cx.create=t=>new cx({typeName:Ft.ZodSymbol,...Zt(t)});class Am extends on{_parse(e){if(this._getType(e)!==ct.undefined){const r=this._getOrReturnCtx(e);return Je(r,{code:Oe.invalid_type,expected:ct.undefined,received:r.parsedType}),Bt}return Ei(e.data)}}Am.create=t=>new Am({typeName:Ft.ZodUndefined,...Zt(t)});class Cm extends on{_parse(e){if(this._getType(e)!==ct.null){const r=this._getOrReturnCtx(e);return Je(r,{code:Oe.invalid_type,expected:ct.null,received:r.parsedType}),Bt}return Ei(e.data)}}Cm.create=t=>new Cm({typeName:Ft.ZodNull,...Zt(t)});class Xf extends on{constructor(){super(...arguments),this._any=!0}_parse(e){return Ei(e.data)}}Xf.create=t=>new Xf({typeName:Ft.ZodAny,...Zt(t)});class yu extends on{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ei(e.data)}}yu.create=t=>new yu({typeName:Ft.ZodUnknown,...Zt(t)});class za extends on{_parse(e){const n=this._getOrReturnCtx(e);return Je(n,{code:Oe.invalid_type,expected:ct.never,received:n.parsedType}),Bt}}za.create=t=>new za({typeName:Ft.ZodNever,...Zt(t)});class ux extends on{_parse(e){if(this._getType(e)!==ct.undefined){const r=this._getOrReturnCtx(e);return Je(r,{code:Oe.invalid_type,expected:ct.void,received:r.parsedType}),Bt}return Ei(e.data)}}ux.create=t=>new ux({typeName:Ft.ZodVoid,...Zt(t)});class lo extends on{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ct.array)return Je(n,{code:Oe.invalid_type,expected:ct.array,received:n.parsedType}),Bt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(Je(n,{code:o?Oe.too_big:Oe.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Je(n,{code:Oe.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Je(n,{code:Oe.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new qo(n,o,n.path,a)))).then(o=>li.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new qo(n,o,n.path,a)));return li.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new lo({...this._def,minLength:{value:e,message:Et.toString(n)}})}max(e,n){return new lo({...this._def,maxLength:{value:e,message:Et.toString(n)}})}length(e,n){return new lo({...this._def,exactLength:{value:e,message:Et.toString(n)}})}nonempty(e){return this.min(1,e)}}lo.create=(t,e)=>new lo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ft.ZodArray,...Zt(e)});function Vd(t){if(t instanceof Wn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=jo.create(Vd(r))}return new Wn({...t._def,shape:()=>e})}else return t instanceof lo?new lo({...t._def,type:Vd(t.element)}):t instanceof jo?jo.create(Vd(t.unwrap())):t instanceof ec?ec.create(Vd(t.unwrap())):t instanceof Zo?Zo.create(t.items.map(e=>Vd(e))):t}class Wn extends on{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=hn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ct.object){const c=this._getOrReturnCtx(e);return Je(c,{code:Oe.invalid_type,expected:ct.object,received:c.parsedType}),Bt}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof za&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],h=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new qo(i,h,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof za){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(Je(i,{code:Oe.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const h=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new qo(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const h=await u.key,p=await u.value;c.push({key:h,value:p,alwaysSet:u.alwaysSet})}return c}).then(c=>li.mergeObjectSync(r,c)):li.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return Et.errToObj,new Wn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Et.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new Wn({...this._def,unknownKeys:"strip"})}passthrough(){return new Wn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Wn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Wn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ft.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Wn({...this._def,catchall:e})}pick(e){const n={};return hn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Wn({...this._def,shape:()=>n})}omit(e){const n={};return hn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Wn({...this._def,shape:()=>n})}deepPartial(){return Vd(this)}partial(e){const n={};return hn.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Wn({...this._def,shape:()=>n})}required(e){const n={};return hn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof jo;)s=s._def.innerType;n[r]=s}}),new Wn({...this._def,shape:()=>n})}keyof(){return JF(hn.objectKeys(this.shape))}}Wn.create=(t,e)=>new Wn({shape:()=>t,unknownKeys:"strip",catchall:za.create(),typeName:Ft.ZodObject,...Zt(e)});Wn.strictCreate=(t,e)=>new Wn({shape:()=>t,unknownKeys:"strict",catchall:za.create(),typeName:Ft.ZodObject,...Zt(e)});Wn.lazycreate=(t,e)=>new Wn({shape:t,unknownKeys:"strip",catchall:za.create(),typeName:Ft.ZodObject,...Zt(e)});class Rm extends on{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new ns(a.ctx.common.issues));return Je(n,{code:Oe.invalid_union,unionErrors:o}),Bt}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new ns(l));return Je(n,{code:Oe.invalid_union,unionErrors:a}),Bt}}get options(){return this._def.options}}Rm.create=(t,e)=>new Rm({options:t,typeName:Ft.ZodUnion,...Zt(e)});const xa=t=>t instanceof Im?xa(t.schema):t instanceof uo?xa(t.innerType()):t instanceof Lm?[t.value]:t instanceof Jl?t.options:t instanceof Dm?hn.objectValues(t.enum):t instanceof km?xa(t._def.innerType):t instanceof Am?[void 0]:t instanceof Cm?[null]:t instanceof jo?[void 0,...xa(t.unwrap())]:t instanceof ec?[null,...xa(t.unwrap())]:t instanceof iA||t instanceof Fm?xa(t.unwrap()):t instanceof Om?xa(t._def.innerType):[];class B_ extends on{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ct.object)return Je(n,{code:Oe.invalid_type,expected:ct.object,received:n.parsedType}),Bt;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Je(n,{code:Oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Bt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=xa(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new B_({typeName:Ft.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...Zt(r)})}}function ZM(t,e){const n=Sa(t),r=Sa(e);if(t===e)return{valid:!0,data:t};if(n===ct.object&&r===ct.object){const i=hn.objectKeys(e),s=hn.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=ZM(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ct.array&&r===ct.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=ZM(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ct.date&&r===ct.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Pm extends on{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(YM(s)||YM(o))return Bt;const a=ZM(s.value,o.value);return a.valid?((qM(s)||qM(o))&&n.dirty(),{status:n.value,value:a.data}):(Je(r,{code:Oe.invalid_intersection_types}),Bt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Pm.create=(t,e,n)=>new Pm({left:t,right:e,typeName:Ft.ZodIntersection,...Zt(n)});class Zo extends on{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.array)return Je(r,{code:Oe.invalid_type,expected:ct.array,received:r.parsedType}),Bt;if(r.data.length<this._def.items.length)return Je(r,{code:Oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Bt;!this._def.rest&&r.data.length>this._def.items.length&&(Je(r,{code:Oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new qo(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>li.mergeArray(n,o)):li.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Zo({...this._def,rest:e})}}Zo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zo({items:t,typeName:Ft.ZodTuple,rest:null,...Zt(e)})};class Nm extends on{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.object)return Je(r,{code:Oe.invalid_type,expected:ct.object,received:r.parsedType}),Bt;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new qo(r,a,r.path,a)),value:o._parse(new qo(r,r.data[a],r.path,a)),alwaysSet:a in r.data});return r.common.async?li.mergeObjectAsync(n,i):li.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof on?new Nm({keyType:e,valueType:n,typeName:Ft.ZodRecord,...Zt(r)}):new Nm({keyType:so.create(),valueType:e,typeName:Ft.ZodRecord,...Zt(n)})}}class dx extends on{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.map)return Je(r,{code:Oe.invalid_type,expected:ct.map,received:r.parsedType}),Bt;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new qo(r,a,r.path,[c,"key"])),value:s._parse(new qo(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Bt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Bt;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}dx.create=(t,e,n)=>new dx({valueType:e,keyType:t,typeName:Ft.ZodMap,...Zt(n)});class Lu extends on{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ct.set)return Je(r,{code:Oe.invalid_type,expected:ct.set,received:r.parsedType}),Bt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(Je(r,{code:Oe.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(Je(r,{code:Oe.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Bt;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new qo(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Lu({...this._def,minSize:{value:e,message:Et.toString(n)}})}max(e,n){return new Lu({...this._def,maxSize:{value:e,message:Et.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Lu.create=(t,e)=>new Lu({valueType:t,minSize:null,maxSize:null,typeName:Ft.ZodSet,...Zt(e)});class wf extends on{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ct.function)return Je(n,{code:Oe.invalid_type,expected:ct.function,received:n.parsedType}),Bt;function r(a,l){return ax({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ox(),Gf].filter(c=>!!c),issueData:{code:Oe.invalid_arguments,argumentsError:l}})}function i(a,l){return ax({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ox(),Gf].filter(c=>!!c),issueData:{code:Oe.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof $f){const a=this;return Ei(async function(...l){const c=new ns([]),u=await a._def.args.parseAsync(l,s).catch(m=>{throw c.addIssue(r(l,m)),c}),h=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(h,s).catch(m=>{throw c.addIssue(i(h,m)),c})})}else{const a=this;return Ei(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new ns([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(u,s);if(!h.success)throw new ns([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new wf({...this._def,args:Zo.create(e).rest(yu.create())})}returns(e){return new wf({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new wf({args:e||Zo.create([]).rest(yu.create()),returns:n||yu.create(),typeName:Ft.ZodFunction,...Zt(r)})}}class Im extends on{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Im.create=(t,e)=>new Im({getter:t,typeName:Ft.ZodLazy,...Zt(e)});class Lm extends on{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Je(n,{received:n.data,code:Oe.invalid_literal,expected:this._def.value}),Bt}return{status:"valid",value:e.data}}get value(){return this._def.value}}Lm.create=(t,e)=>new Lm({value:t,typeName:Ft.ZodLiteral,...Zt(e)});function JF(t,e){return new Jl({values:t,typeName:Ft.ZodEnum,...Zt(e)})}class Jl extends on{constructor(){super(...arguments),_p.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Je(n,{expected:hn.joinValues(r),received:n.parsedType,code:Oe.invalid_type}),Bt}if(lx(this,_p)||qF(this,_p,new Set(this._def.values)),!lx(this,_p).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Je(n,{received:n.data,code:Oe.invalid_enum_value,options:r}),Bt}return Ei(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Jl.create(e,{...this._def,...n})}exclude(e,n=this._def){return Jl.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}_p=new WeakMap;Jl.create=JF;class Dm extends on{constructor(){super(...arguments),wp.set(this,void 0)}_parse(e){const n=hn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ct.string&&r.parsedType!==ct.number){const i=hn.objectValues(n);return Je(r,{expected:hn.joinValues(i),received:r.parsedType,code:Oe.invalid_type}),Bt}if(lx(this,wp)||qF(this,wp,new Set(hn.getValidEnumValues(this._def.values))),!lx(this,wp).has(e.data)){const i=hn.objectValues(n);return Je(r,{received:r.data,code:Oe.invalid_enum_value,options:i}),Bt}return Ei(e.data)}get enum(){return this._def.values}}wp=new WeakMap;Dm.create=(t,e)=>new Dm({values:t,typeName:Ft.ZodNativeEnum,...Zt(e)});class $f extends on{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ct.promise&&n.common.async===!1)return Je(n,{code:Oe.invalid_type,expected:ct.promise,received:n.parsedType}),Bt;const r=n.parsedType===ct.promise?n.data:Promise.resolve(n.data);return Ei(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}$f.create=(t,e)=>new $f({type:t,typeName:Ft.ZodPromise,...Zt(e)});class uo extends on{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ft.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{Je(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return Bt;const l=await this._def.schema._parseAsync({data:a,path:r.path,parent:r});return l.status==="aborted"?Bt:l.status==="dirty"||n.value==="dirty"?nf(l.value):l});{if(n.value==="aborted")return Bt;const a=this._def.schema._parseSync({data:o,path:r.path,parent:r});return a.status==="aborted"?Bt:a.status==="dirty"||n.value==="dirty"?nf(a.value):a}}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Bt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Bt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Nu(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Nu(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);hn.assertNever(i)}}uo.create=(t,e,n)=>new uo({schema:t,typeName:Ft.ZodEffects,effect:e,...Zt(n)});uo.createWithPreprocess=(t,e,n)=>new uo({schema:e,effect:{type:"preprocess",transform:t},typeName:Ft.ZodEffects,...Zt(n)});class jo extends on{_parse(e){return this._getType(e)===ct.undefined?Ei(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}jo.create=(t,e)=>new jo({innerType:t,typeName:Ft.ZodOptional,...Zt(e)});class ec extends on{_parse(e){return this._getType(e)===ct.null?Ei(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ec.create=(t,e)=>new ec({innerType:t,typeName:Ft.ZodNullable,...Zt(e)});class km extends on{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ct.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}km.create=(t,e)=>new km({innerType:t,typeName:Ft.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Zt(e)});class Om extends on{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Em(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ns(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ns(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Om.create=(t,e)=>new Om({innerType:t,typeName:Ft.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Zt(e)});class fx extends on{_parse(e){if(this._getType(e)!==ct.nan){const r=this._getOrReturnCtx(e);return Je(r,{code:Oe.invalid_type,expected:ct.nan,received:r.parsedType}),Bt}return{status:"valid",value:e.data}}}fx.create=t=>new fx({typeName:Ft.ZodNaN,...Zt(t)});const p7=Symbol("zod_brand");class iA extends on{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class yg extends on{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Bt:s.status==="dirty"?(n.dirty(),nf(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Bt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new yg({in:e,out:n,typeName:Ft.ZodPipeline})}}class Fm extends on{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Nu(i)&&(i.value=Object.freeze(i.value)),i);return Em(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Fm.create=(t,e)=>new Fm({innerType:t,typeName:Ft.ZodReadonly,...Zt(e)});function GI(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function eU(t,e={},n){return t?Xf.create().superRefine((r,i)=>{var s,o;const a=t(r);if(a instanceof Promise)return a.then(l=>{var c,u;if(!l){const h=GI(e,r),p=(u=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...h,fatal:p})}});if(!a){const l=GI(e,r),c=(o=(s=l.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...l,fatal:c})}}):Xf.create()}const m7={object:Wn.lazycreate};var Ft;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ft||(Ft={}));const g7=(t,e={message:`Input not instance of ${t.name}`})=>eU(n=>n instanceof t,e),Tl=so.create,tU=Kl.create,v7=fx.create,y7=Ql.create,nU=Tm.create,x7=Iu.create,_7=cx.create,w7=Am.create,S7=Cm.create,b7=Xf.create,M7=yu.create,E7=za.create,T7=ux.create,A7=lo.create,rU=Wn.create,C7=Wn.strictCreate,R7=Rm.create,P7=B_.create,N7=Pm.create,I7=Zo.create,L7=Nm.create,D7=dx.create,k7=Lu.create,O7=wf.create,F7=Im.create,U7=Lm.create,B7=Jl.create,z7=Dm.create,V7=$f.create,XI=uo.create,j7=jo.create,H7=ec.create,W7=uo.createWithPreprocess,G7=yg.create,X7=()=>Tl().optional(),$7=()=>tU().optional(),Y7=()=>nU().optional(),q7={string:t=>so.create({...t,coerce:!0}),number:t=>Kl.create({...t,coerce:!0}),boolean:t=>Tm.create({...t,coerce:!0}),bigint:t=>Ql.create({...t,coerce:!0}),date:t=>Iu.create({...t,coerce:!0})},Z7=Bt;var su=Object.freeze({__proto__:null,defaultErrorMap:Gf,setErrorMap:G9,getErrorMap:ox,makeIssue:ax,EMPTY_PATH:X9,addIssueToContext:Je,ParseStatus:li,INVALID:Bt,DIRTY:nf,OK:Ei,isAborted:YM,isDirty:qM,isValid:Nu,isAsync:Em,get util(){return hn},get objectUtil(){return $M},ZodParsedType:ct,getParsedType:Sa,ZodType:on,datetimeRegex:QF,ZodString:so,ZodNumber:Kl,ZodBigInt:Ql,ZodBoolean:Tm,ZodDate:Iu,ZodSymbol:cx,ZodUndefined:Am,ZodNull:Cm,ZodAny:Xf,ZodUnknown:yu,ZodNever:za,ZodVoid:ux,ZodArray:lo,ZodObject:Wn,ZodUnion:Rm,ZodDiscriminatedUnion:B_,ZodIntersection:Pm,ZodTuple:Zo,ZodRecord:Nm,ZodMap:dx,ZodSet:Lu,ZodFunction:wf,ZodLazy:Im,ZodLiteral:Lm,ZodEnum:Jl,ZodNativeEnum:Dm,ZodPromise:$f,ZodEffects:uo,ZodTransformer:uo,ZodOptional:jo,ZodNullable:ec,ZodDefault:km,ZodCatch:Om,ZodNaN:fx,BRAND:p7,ZodBranded:iA,ZodPipeline:yg,ZodReadonly:Fm,custom:eU,Schema:on,ZodSchema:on,late:m7,get ZodFirstPartyTypeKind(){return Ft},coerce:q7,any:b7,array:A7,bigint:y7,boolean:nU,date:x7,discriminatedUnion:P7,effect:XI,enum:B7,function:O7,instanceof:g7,intersection:N7,lazy:F7,literal:U7,map:D7,nan:v7,nativeEnum:z7,never:E7,null:S7,nullable:H7,number:tU,object:rU,oboolean:Y7,onumber:$7,optional:j7,ostring:X7,pipeline:G7,preprocess:W7,promise:V7,record:L7,set:k7,strictObject:C7,string:Tl,symbol:_7,transformer:XI,tuple:I7,undefined:w7,union:R7,unknown:M7,void:T7,NEVER:Z7,ZodIssueCode:Oe,quotelessJson:W9,ZodError:ns});function K7(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function iU(...t){return e=>t.forEach(n=>K7(n,e))}function Pn(...t){return T.useCallback(iU(...t),t)}var tc=T.forwardRef((t,e)=>{const{children:n,...r}=t,i=T.Children.toArray(n),s=i.find(J7);if(s){const o=s.props.children,a=i.map(l=>l===s?T.Children.count(o)>1?T.Children.only(null):T.isValidElement(o)?o.props.children:null:l);return b.jsx(KM,{...r,ref:e,children:T.isValidElement(o)?T.cloneElement(o,void 0,a):null})}return b.jsx(KM,{...r,ref:e,children:n})});tc.displayName="Slot";var KM=T.forwardRef((t,e)=>{const{children:n,...r}=t;if(T.isValidElement(n)){const i=tX(n);return T.cloneElement(n,{...eX(r,n.props),ref:e?iU(e,i):i})}return T.Children.count(n)>1?T.Children.only(null):null});KM.displayName="SlotClone";var Q7=({children:t})=>b.jsx(b.Fragment,{children:t});function J7(t){return T.isValidElement(t)&&t.type===Q7}function eX(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function tX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function sU(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=sU(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function nX(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=sU(t))&&(r&&(r+=" "),r+=e);return r}const $I=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,YI=nX,z_=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return YI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const p=$I(u)||$I(h);return i[c][p]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,p]=u;return p===void 0||(c[h]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:p,...m}=u;return Object.entries(m).every(v=>{let[y,x]=v;return Array.isArray(x)?x.includes({...s,...a}[y]):{...s,...a}[y]===x})?[...c,h,p]:c},[]);return YI(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function oU(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=oU(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function rX(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=oU(t))&&(r&&(r+=" "),r+=e);return r}const sA="-",iX=t=>{const e=oX(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(sA);return a[0]===""&&a.length!==1&&a.shift(),aU(a,e)||sX(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},aU=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?aU(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(sA);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},qI=/^\[(.+)\]$/,sX=t=>{if(qI.test(t)){const e=qI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},oX=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return lX(Object.entries(t.classGroups),n).forEach(([s,o])=>{QM(o,r,s,e)}),r},QM=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:ZI(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(aX(i)){QM(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{QM(o,ZI(e,s),n,r)})})},ZI=(t,e)=>{let n=t;return e.split(sA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},aX=t=>t.isThemeGetter,lX=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,cX=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},lU="!",uX=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,h;for(let x=0;x<a.length;x++){let g=a[x];if(c===0){if(g===i&&(r||a.slice(x,x+s)===e)){l.push(a.slice(u,x)),u=x+s;continue}if(g==="/"){h=x;continue}}g==="["?c++:g==="]"&&c--}const p=l.length===0?a:a.substring(u),m=p.startsWith(lU),v=m?p.substring(1):p,y=h&&h>u?h-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:o}):o},dX=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},fX=t=>({cache:cX(t.cacheSize),parseClassName:uX(t),...iX(t)}),hX=/\s+/,pX=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(hX);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let v=!!m,y=r(v?p.substring(0,m):p);if(!y){if(!v){a=c+(a.length>0?" "+a:a);continue}if(y=r(p),!y){a=c+(a.length>0?" "+a:a);continue}v=!1}const x=dX(u).join(":"),g=h?x+lU:x,_=g+y;if(s.includes(_))continue;s.push(_);const S=i(y,v);for(let E=0;E<S.length;++E){const R=S[E];s.push(g+R)}a=c+(a.length>0?" "+a:a)}return a};function mX(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=cU(e))&&(r&&(r+=" "),r+=n);return r}const cU=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=cU(t[r]))&&(n&&(n+=" "),n+=e);return n};function gX(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,h)=>h(u),t());return n=fX(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=pX(l,n);return i(l,u),u}return function(){return s(mX.apply(null,arguments))}}const Dn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},uU=/^\[(?:([a-z-]+):)?(.+)\]$/i,vX=/^\d+\/\d+$/,yX=new Set(["px","full","screen"]),xX=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_X=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wX=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,SX=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bX=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,da=t=>Sf(t)||yX.has(t)||vX.test(t),dl=t=>ch(t,"length",NX),Sf=t=>!!t&&!Number.isNaN(Number(t)),Eb=t=>ch(t,"number",Sf),Qh=t=>!!t&&Number.isInteger(Number(t)),MX=t=>t.endsWith("%")&&Sf(t.slice(0,-1)),Qt=t=>uU.test(t),fl=t=>xX.test(t),EX=new Set(["length","size","percentage"]),TX=t=>ch(t,EX,dU),AX=t=>ch(t,"position",dU),CX=new Set(["image","url"]),RX=t=>ch(t,CX,LX),PX=t=>ch(t,"",IX),Jh=()=>!0,ch=(t,e,n)=>{const r=uU.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},NX=t=>_X.test(t)&&!wX.test(t),dU=()=>!1,IX=t=>SX.test(t),LX=t=>bX.test(t),DX=()=>{const t=Dn("colors"),e=Dn("spacing"),n=Dn("blur"),r=Dn("brightness"),i=Dn("borderColor"),s=Dn("borderRadius"),o=Dn("borderSpacing"),a=Dn("borderWidth"),l=Dn("contrast"),c=Dn("grayscale"),u=Dn("hueRotate"),h=Dn("invert"),p=Dn("gap"),m=Dn("gradientColorStops"),v=Dn("gradientColorStopPositions"),y=Dn("inset"),x=Dn("margin"),g=Dn("opacity"),_=Dn("padding"),S=Dn("saturate"),E=Dn("scale"),R=Dn("sepia"),I=Dn("skew"),C=Dn("space"),D=Dn("translate"),L=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",Qt,e],z=()=>[Qt,e],H=()=>["",da,dl],q=()=>["auto",Sf,Qt],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],ne=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",Qt],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[Sf,Qt];return{cacheSize:500,separator:":",theme:{colors:[Jh],spacing:[da,dl],blur:["none","",fl,Qt],brightness:re(),borderColor:[t],borderRadius:["none","","full",fl,Qt],borderSpacing:z(),borderWidth:H(),contrast:re(),grayscale:W(),hueRotate:re(),invert:W(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[MX,dl],inset:F(),margin:F(),opacity:re(),padding:z(),saturate:re(),scale:re(),sepia:W(),skew:re(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[fl]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),Qt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qh,Qt]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Qh,Qt]}],"grid-cols":[{"grid-cols":[Jh]}],"col-start-end":[{col:["auto",{span:["full",Qh,Qt]},Qt]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Jh]}],"row-start-end":[{row:["auto",{span:[Qh,Qt]},Qt]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,e]}],"min-w":[{"min-w":[Qt,e,"min","max","fit"]}],"max-w":[{"max-w":[Qt,e,"none","full","min","max","fit","prose",{screen:[fl]},fl]}],h:[{h:[Qt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",fl,dl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Eb]}],"font-family":[{font:[Jh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",Sf,Eb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",da,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",da,dl]}],"underline-offset":[{"underline-offset":["auto",da,Qt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),AX]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",TX]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},RX]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:K()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[da,Qt]}],"outline-w":[{outline:[da,dl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[da,dl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",fl,PX]}],"shadow-color":[{shadow:[Jh]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...ne(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ne()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",fl,Qt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Qh,Qt]}],"translate-x":[{"translate-x":[D]}],"translate-y":[{"translate-y":[D]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[da,dl,Eb]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kX=gX(DX);function jt(...t){return kX(rX(t))}const OX=z_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Cn=T.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?tc:"button";return b.jsx(o,{className:jt(OX({variant:e,size:n,className:t})),ref:s,...i})});Cn.displayName="Button";var FX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Kt=FX.reduce((t,e)=>{const n=T.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?tc:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(a,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function UX(t,e){t&&Gu.flushSync(()=>t.dispatchEvent(e))}var BX="Label",fU=T.forwardRef((t,e)=>b.jsx(Kt.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));fU.displayName=BX;var hU=fU;const zX=z_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pU=T.forwardRef(({className:t,...e},n)=>b.jsx(hU,{ref:n,className:jt(zX(),t),...e}));pU.displayName=hU.displayName;const oA=b9,mU=T.createContext({}),to=({...t})=>b.jsx(mU.Provider,{value:{name:t.name},children:b.jsx(A9,{...t})}),V_=()=>{const t=T.useContext(mU),e=T.useContext(gU),{getFieldState:n,formState:r}=U_(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},gU=T.createContext({}),Es=T.forwardRef(({className:t,...e},n)=>{const r=T.useId();return b.jsx(gU.Provider,{value:{id:r},children:b.jsx("div",{ref:n,className:jt("space-y-2",t),...e})})});Es.displayName="FormItem";const Ts=T.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=V_();return b.jsx(pU,{ref:n,className:jt(r&&"text-destructive",t),htmlFor:i,...e})});Ts.displayName="FormLabel";const As=T.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=V_();return b.jsx(tc,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});As.displayName="FormControl";const VX=T.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=V_();return b.jsx("p",{ref:n,id:r,className:jt("text-[0.8rem] text-muted-foreground",t),...e})});VX.displayName="FormDescription";const Cs=T.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=V_(),o=i?String((i==null?void 0:i.message)??""):e;return o?b.jsx("p",{ref:r,id:s,className:jt("text-[0.8rem] font-medium text-destructive",t),...n,children:o}):null});Cs.displayName="FormMessage";const Du=T.forwardRef(({className:t,type:e,...n},r)=>b.jsx("input",{type:e,className:jt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Du.displayName="Input";function JM(t,[e,n]){return Math.min(n,Math.max(e,t))}function en(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function jX(t,e=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:p,children:m,...v}=h,y=(p==null?void 0:p[t][l])||a,x=T.useMemo(()=>v,Object.values(v));return b.jsx(y.Provider,{value:x,children:m})}function u(h,p){const m=(p==null?void 0:p[t][l])||a,v=T.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,HX(i,...e)]}function HX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function vU(t){const e=t+"CollectionProvider",[n,r]=jX(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:v,children:y}=m,x=sn.useRef(null),g=sn.useRef(new Map).current;return b.jsx(i,{scope:v,itemMap:g,collectionRef:x,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=sn.forwardRef((m,v)=>{const{scope:y,children:x}=m,g=s(a,y),_=Pn(v,g.collectionRef);return b.jsx(tc,{ref:_,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",h=sn.forwardRef((m,v)=>{const{scope:y,children:x,...g}=m,_=sn.useRef(null),S=Pn(v,_),E=s(c,y);return sn.useEffect(()=>(E.itemMap.set(_,{ref:_,...g}),()=>void E.itemMap.delete(_))),b.jsx(tc,{[u]:"",ref:S,children:x})});h.displayName=c;function p(m){const v=s(t+"CollectionConsumer",m);return sn.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const g=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((E,R)=>g.indexOf(E.ref.current)-g.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},p,r]}function WX(t,e){const n=T.createContext(e),r=s=>{const{children:o,...a}=s,l=T.useMemo(()=>a,Object.values(a));return b.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=T.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function xg(t,e=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];const c=h=>{var g;const{scope:p,children:m,...v}=h,y=((g=p==null?void 0:p[t])==null?void 0:g[l])||a,x=T.useMemo(()=>v,Object.values(v));return b.jsx(y.Provider,{value:x,children:m})};c.displayName=s+"Provider";function u(h,p){var y;const m=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,v=T.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,GX(i,...e)]}function GX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var XX=T.createContext(void 0);function j_(t){const e=T.useContext(XX);return t||e||"ltr"}function Dr(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function $X(t,e=globalThis==null?void 0:globalThis.document){const n=Dr(t);T.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var YX="DismissableLayer",eE="dismissableLayer.update",qX="dismissableLayer.pointerDownOutside",ZX="dismissableLayer.focusOutside",KI,yU=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),aA=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=T.useContext(yU),[u,h]=T.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=T.useState({}),v=Pn(e,C=>h(C)),y=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),g=y.indexOf(x),_=u?y.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,E=_>=g,R=JX(C=>{const D=C.target,L=[...c.branches].some(P=>P.contains(D));!E||L||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),I=e$(C=>{const D=C.target;[...c.branches].some(P=>P.contains(D))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return $X(C=>{_===c.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),T.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(KI=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),QI(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=KI)}},[u,p,n,c]),T.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),QI())},[u,c]),T.useEffect(()=>{const C=()=>m({});return document.addEventListener(eE,C),()=>document.removeEventListener(eE,C)},[]),b.jsx(Kt.div,{...l,ref:v,style:{pointerEvents:S?E?"auto":"none":void 0,...t.style},onFocusCapture:en(t.onFocusCapture,I.onFocusCapture),onBlurCapture:en(t.onBlurCapture,I.onBlurCapture),onPointerDownCapture:en(t.onPointerDownCapture,R.onPointerDownCapture)})});aA.displayName=YX;var KX="DismissableLayerBranch",QX=T.forwardRef((t,e)=>{const n=T.useContext(yU),r=T.useRef(null),i=Pn(e,r);return T.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),b.jsx(Kt.div,{...t,ref:i})});QX.displayName=KX;function JX(t,e=globalThis==null?void 0:globalThis.document){const n=Dr(t),r=T.useRef(!1),i=T.useRef(()=>{});return T.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){xU(qX,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function e$(t,e=globalThis==null?void 0:globalThis.document){const n=Dr(t),r=T.useRef(!1);return T.useEffect(()=>{const i=s=>{s.target&&!r.current&&xU(ZX,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function QI(){const t=new CustomEvent(eE);document.dispatchEvent(t)}function xU(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?UX(i,s):i.dispatchEvent(s)}var Tb=0;function _U(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??JI()),document.body.insertAdjacentElement("beforeend",t[1]??JI()),Tb++,()=>{Tb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Tb--}},[])}function JI(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ab="focusScope.autoFocusOnMount",Cb="focusScope.autoFocusOnUnmount",e2={bubbles:!1,cancelable:!0},t$="FocusScope",lA=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=T.useState(null),c=Dr(i),u=Dr(s),h=T.useRef(null),p=Pn(e,y=>l(y)),m=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let y=function(S){if(m.paused||!a)return;const E=S.target;a.contains(E)?h.current=E:Sl(h.current,{select:!0})},x=function(S){if(m.paused||!a)return;const E=S.relatedTarget;E!==null&&(a.contains(E)||Sl(h.current,{select:!0}))},g=function(S){if(document.activeElement===document.body)for(const R of S)R.removedNodes.length>0&&Sl(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const _=new MutationObserver(g);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),_.disconnect()}}},[r,a,m.paused]),T.useEffect(()=>{if(a){n2.add(m);const y=document.activeElement;if(!a.contains(y)){const g=new CustomEvent(Ab,e2);a.addEventListener(Ab,c),a.dispatchEvent(g),g.defaultPrevented||(n$(a$(wU(a)),{select:!0}),document.activeElement===y&&Sl(a))}return()=>{a.removeEventListener(Ab,c),setTimeout(()=>{const g=new CustomEvent(Cb,e2);a.addEventListener(Cb,u),a.dispatchEvent(g),g.defaultPrevented||Sl(y??document.body,{select:!0}),a.removeEventListener(Cb,u),n2.remove(m)},0)}}},[a,c,u,m]);const v=T.useCallback(y=>{if(!n&&!r||m.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,g=document.activeElement;if(x&&g){const _=y.currentTarget,[S,E]=r$(_);S&&E?!y.shiftKey&&g===E?(y.preventDefault(),n&&Sl(S,{select:!0})):y.shiftKey&&g===S&&(y.preventDefault(),n&&Sl(E,{select:!0})):g===_&&y.preventDefault()}},[n,r,m.paused]);return b.jsx(Kt.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});lA.displayName=t$;function n$(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Sl(r,{select:e}),document.activeElement!==n)return}function r$(t){const e=wU(t),n=t2(e,t),r=t2(e.reverse(),t);return[n,r]}function wU(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function t2(t,e){for(const n of t)if(!i$(n,{upTo:e}))return n}function i$(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function s$(t){return t instanceof HTMLInputElement&&"select"in t}function Sl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&s$(t)&&e&&t.select()}}var n2=o$();function o$(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=r2(t,e),t.unshift(e)},remove(e){var n;t=r2(t,e),(n=t[0])==null||n.resume()}}}function r2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function a$(t){return t.filter(e=>e.tagName!=="A")}var Or=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},l$=i3.useId||(()=>{}),c$=0;function $l(t){const[e,n]=T.useState(l$());return Or(()=>{n(r=>r??String(c$++))},[t]),e?`radix-${e}`:""}const u$=["top","right","bottom","left"],nc=Math.min,Ji=Math.max,hx=Math.round,Qv=Math.floor,Ho=t=>({x:t,y:t}),d$={left:"right",right:"left",bottom:"top",top:"bottom"},f$={start:"end",end:"start"};function tE(t,e,n){return Ji(t,nc(e,n))}function Va(t,e){return typeof t=="function"?t(e):t}function ja(t){return t.split("-")[0]}function uh(t){return t.split("-")[1]}function cA(t){return t==="x"?"y":"x"}function uA(t){return t==="y"?"height":"width"}function rc(t){return["top","bottom"].includes(ja(t))?"y":"x"}function dA(t){return cA(rc(t))}function h$(t,e,n){n===void 0&&(n=!1);const r=uh(t),i=dA(t),s=uA(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=px(o)),[o,px(o)]}function p$(t){const e=px(t);return[nE(t),e,nE(e)]}function nE(t){return t.replace(/start|end/g,e=>f$[e])}function m$(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function g$(t,e,n,r){const i=uh(t);let s=m$(ja(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(nE)))),s}function px(t){return t.replace(/left|right|bottom|top/g,e=>d$[e])}function v$(t){return{top:0,right:0,bottom:0,left:0,...t}}function SU(t){return typeof t!="number"?v$(t):{top:t,right:t,bottom:t,left:t}}function mx(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function i2(t,e,n){let{reference:r,floating:i}=t;const s=rc(e),o=dA(e),a=uA(o),l=ja(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(uh(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const y$=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=i2(c,r,l),p=r,m={},v=0;for(let y=0;y<a.length;y++){const{name:x,fn:g}=a[y],{x:_,y:S,data:E,reset:R}=await g({x:u,y:h,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});u=_??u,h=S??h,m={...m,[x]:{...m[x],...E}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):R.rects),{x:u,y:h}=i2(c,p,l)),y=-1)}return{x:u,y:h,placement:p,strategy:i,middlewareData:m}};async function Um(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Va(e,t),v=SU(m),x=a[p?h==="floating"?"reference":"floating":h],g=mx(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},R=mx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:S,strategy:l}):_);return{top:(g.top-R.top+v.top)/E.y,bottom:(R.bottom-g.bottom+v.bottom)/E.y,left:(g.left-R.left+v.left)/E.x,right:(R.right-g.right+v.right)/E.x}}const x$=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Va(t,e)||{};if(c==null)return{};const h=SU(u),p={x:n,y:r},m=dA(i),v=uA(m),y=await o.getDimensions(c),x=m==="y",g=x?"top":"left",_=x?"bottom":"right",S=x?"clientHeight":"clientWidth",E=s.reference[v]+s.reference[m]-p[m]-s.floating[v],R=p[m]-s.reference[m],I=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=I?I[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(I)))&&(C=a.floating[S]||s.floating[v]);const D=E/2-R/2,L=C/2-y[v]/2-1,P=nc(h[g],L),F=nc(h[_],L),z=P,H=C-y[v]-F,q=C/2-y[v]/2+D,se=tE(z,q,H),K=!l.arrow&&uh(i)!=null&&q!==se&&s.reference[v]/2-(q<z?P:F)-y[v]/2<0,ne=K?q<z?q-z:q-H:0;return{[m]:p[m]+ne,data:{[m]:se,centerOffset:q-se-ne,...K&&{alignmentOffset:ne}},reset:K}}}),_$=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:y=!0,...x}=Va(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=ja(i),_=rc(a),S=ja(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=p||(S||!y?[px(a)]:p$(a)),I=v!=="none";!p&&I&&R.push(...g$(a,y,v,E));const C=[a,...R],D=await Um(e,x),L=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&L.push(D[g]),h){const q=h$(i,o,E);L.push(D[q[0]],D[q[1]])}if(P=[...P,{placement:i,overflows:L}],!L.every(q=>q<=0)){var F,z;const q=(((F=s.flip)==null?void 0:F.index)||0)+1,se=C[q];if(se)return{data:{index:q,overflows:P},reset:{placement:se}};let K=(z=P.filter(ne=>ne.overflows[0]<=0).sort((ne,O)=>ne.overflows[1]-O.overflows[1])[0])==null?void 0:z.placement;if(!K)switch(m){case"bestFit":{var H;const ne=(H=P.filter(O=>{if(I){const W=rc(O.placement);return W===_||W==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(W=>W>0).reduce((W,Y)=>W+Y,0)]).sort((O,W)=>O[1]-W[1])[0])==null?void 0:H[0];ne&&(K=ne);break}case"initialPlacement":K=a;break}if(i!==K)return{reset:{placement:K}}}return{}}}};function s2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function o2(t){return u$.some(e=>t[e]>=0)}const w$=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Va(t,e);switch(r){case"referenceHidden":{const s=await Um(e,{...i,elementContext:"reference"}),o=s2(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:o2(o)}}}case"escaped":{const s=await Um(e,{...i,altBoundary:!0}),o=s2(s,n.floating);return{data:{escapedOffsets:o,escaped:o2(o)}}}default:return{}}}}};async function S$(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ja(n),a=uh(n),l=rc(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,h=Va(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(m=a==="end"?v*-1:v),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const b$=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await S$(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},M$=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:x=>{let{x:g,y:_}=x;return{x:g,y:_}}},...l}=Va(t,e),c={x:n,y:r},u=await Um(e,l),h=rc(ja(i)),p=cA(h);let m=c[p],v=c[h];if(s){const x=p==="y"?"top":"left",g=p==="y"?"bottom":"right",_=m+u[x],S=m-u[g];m=tE(_,m,S)}if(o){const x=h==="y"?"top":"left",g=h==="y"?"bottom":"right",_=v+u[x],S=v-u[g];v=tE(_,v,S)}const y=a.fn({...e,[p]:m,[h]:v});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:s,[h]:o}}}}}},E$=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Va(t,e),u={x:n,y:r},h=rc(i),p=cA(h);let m=u[p],v=u[h];const y=Va(a,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const S=p==="y"?"height":"width",E=s.reference[p]-s.floating[S]+x.mainAxis,R=s.reference[p]+s.reference[S]-x.mainAxis;m<E?m=E:m>R&&(m=R)}if(c){var g,_;const S=p==="y"?"width":"height",E=["top","left"].includes(ja(i)),R=s.reference[h]-s.floating[S]+(E&&((g=o.offset)==null?void 0:g[h])||0)+(E?0:x.crossAxis),I=s.reference[h]+s.reference[S]+(E?0:((_=o.offset)==null?void 0:_[h])||0)-(E?x.crossAxis:0);v<R?v=R:v>I&&(v=I)}return{[p]:m,[h]:v}}}},T$=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Va(t,e),u=await Um(e,c),h=ja(i),p=uh(i),m=rc(i)==="y",{width:v,height:y}=s.floating;let x,g;h==="top"||h==="bottom"?(x=h,g=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=h,x=p==="end"?"top":"bottom");const _=y-u.top-u.bottom,S=v-u.left-u.right,E=nc(y-u[x],_),R=nc(v-u[g],S),I=!e.middlewareData.shift;let C=E,D=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(D=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=_),I&&!p){const P=Ji(u.left,0),F=Ji(u.right,0),z=Ji(u.top,0),H=Ji(u.bottom,0);m?D=v-2*(P!==0||F!==0?P+F:Ji(u.left,u.right)):C=y-2*(z!==0||H!==0?z+H:Ji(u.top,u.bottom))}await l({...e,availableWidth:D,availableHeight:C});const L=await o.getDimensions(a.floating);return v!==L.width||y!==L.height?{reset:{rects:!0}}:{}}}};function H_(){return typeof window<"u"}function dh(t){return bU(t)?(t.nodeName||"").toLowerCase():"#document"}function rs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Jo(t){var e;return(e=(bU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function bU(t){return H_()?t instanceof Node||t instanceof rs(t).Node:!1}function fo(t){return H_()?t instanceof Element||t instanceof rs(t).Element:!1}function Ko(t){return H_()?t instanceof HTMLElement||t instanceof rs(t).HTMLElement:!1}function a2(t){return!H_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof rs(t).ShadowRoot}function _g(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ho(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function A$(t){return["table","td","th"].includes(dh(t))}function W_(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function fA(t){const e=hA(),n=fo(t)?ho(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function C$(t){let e=ic(t);for(;Ko(e)&&!Yf(e);){if(fA(e))return e;if(W_(e))return null;e=ic(e)}return null}function hA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yf(t){return["html","body","#document"].includes(dh(t))}function ho(t){return rs(t).getComputedStyle(t)}function G_(t){return fo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ic(t){if(dh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||a2(t)&&t.host||Jo(t);return a2(e)?e.host:e}function MU(t){const e=ic(t);return Yf(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ko(e)&&_g(e)?e:MU(e)}function Bm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=MU(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=rs(i);if(s){const a=rE(o);return e.concat(o,o.visualViewport||[],_g(i)?i:[],a&&n?Bm(a):[])}return e.concat(i,Bm(i,[],n))}function rE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function EU(t){const e=ho(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ko(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=hx(n)!==s||hx(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function pA(t){return fo(t)?t:t.contextElement}function bf(t){const e=pA(t);if(!Ko(e))return Ho(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=EU(e);let o=(s?hx(n.width):n.width)/r,a=(s?hx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const R$=Ho(0);function TU(t){const e=rs(t);return!hA()||!e.visualViewport?R$:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function P$(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==rs(t)?!1:e}function ku(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=pA(t);let o=Ho(1);e&&(r?fo(r)&&(o=bf(r)):o=bf(t));const a=P$(s,n,r)?TU(s):Ho(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const p=rs(s),m=r&&fo(r)?rs(r):r;let v=p,y=rE(v);for(;y&&r&&m!==v;){const x=bf(y),g=y.getBoundingClientRect(),_=ho(y),S=g.left+(y.clientLeft+parseFloat(_.paddingLeft))*x.x,E=g.top+(y.clientTop+parseFloat(_.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,h*=x.y,l+=S,c+=E,v=rs(y),y=rE(v)}}return mx({width:u,height:h,x:l,y:c})}function mA(t,e){const n=G_(t).scrollLeft;return e?e.left+n:ku(Jo(t)).left+n}function AU(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:mA(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function N$(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Jo(r),a=e?W_(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ho(1);const u=Ho(0),h=Ko(r);if((h||!h&&!s)&&((dh(r)!=="body"||_g(o))&&(l=G_(r)),Ko(r))){const m=ku(r);c=bf(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=o&&!h&&!s?AU(o,l,!0):Ho(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function I$(t){return Array.from(t.getClientRects())}function L$(t){const e=Jo(t),n=G_(t),r=t.ownerDocument.body,i=Ji(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Ji(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+mA(t);const a=-n.scrollTop;return ho(r).direction==="rtl"&&(o+=Ji(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function D$(t,e){const n=rs(t),r=Jo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=hA();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function k$(t,e){const n=ku(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ko(t)?bf(t):Ho(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function l2(t,e,n){let r;if(e==="viewport")r=D$(t,n);else if(e==="document")r=L$(Jo(t));else if(fo(e))r=k$(e,n);else{const i=TU(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return mx(r)}function CU(t,e){const n=ic(t);return n===e||!fo(n)||Yf(n)?!1:ho(n).position==="fixed"||CU(n,e)}function O$(t,e){const n=e.get(t);if(n)return n;let r=Bm(t,[],!1).filter(a=>fo(a)&&dh(a)!=="body"),i=null;const s=ho(t).position==="fixed";let o=s?ic(t):t;for(;fo(o)&&!Yf(o);){const a=ho(o),l=fA(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||_g(o)&&!l&&CU(t,o))?r=r.filter(u=>u!==o):i=a,o=ic(o)}return e.set(t,r),r}function F$(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?W_(e)?[]:O$(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const h=l2(e,u,i);return c.top=Ji(h.top,c.top),c.right=nc(h.right,c.right),c.bottom=nc(h.bottom,c.bottom),c.left=Ji(h.left,c.left),c},l2(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function U$(t){const{width:e,height:n}=EU(t);return{width:e,height:n}}function B$(t,e,n){const r=Ko(e),i=Jo(e),s=n==="fixed",o=ku(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ho(0);if(r||!r&&!s)if((dh(e)!=="body"||_g(i))&&(a=G_(e)),r){const p=ku(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&(l.x=mA(i));const c=i&&!r&&!s?AU(i,a):Ho(0),u=o.left+a.scrollLeft-l.x-c.x,h=o.top+a.scrollTop-l.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function Rb(t){return ho(t).position==="static"}function c2(t,e){if(!Ko(t)||ho(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Jo(t)===n&&(n=n.ownerDocument.body),n}function RU(t,e){const n=rs(t);if(W_(t))return n;if(!Ko(t)){let i=ic(t);for(;i&&!Yf(i);){if(fo(i)&&!Rb(i))return i;i=ic(i)}return n}let r=c2(t,e);for(;r&&A$(r)&&Rb(r);)r=c2(r,e);return r&&Yf(r)&&Rb(r)&&!fA(r)?n:r||C$(t)||n}const z$=async function(t){const e=this.getOffsetParent||RU,n=this.getDimensions,r=await n(t.floating);return{reference:B$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function V$(t){return ho(t).direction==="rtl"}const j$={convertOffsetParentRelativeRectToViewportRelativeRect:N$,getDocumentElement:Jo,getClippingRect:F$,getOffsetParent:RU,getElementRects:z$,getClientRects:I$,getDimensions:U$,getScale:bf,isElement:fo,isRTL:V$};function H$(t,e){let n=null,r;const i=Jo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:h,height:p}=t.getBoundingClientRect();if(a||e(),!h||!p)return;const m=Qv(u),v=Qv(i.clientWidth-(c+h)),y=Qv(i.clientHeight-(u+p)),x=Qv(c),_={rootMargin:-m+"px "+-v+"px "+-y+"px "+-x+"px",threshold:Ji(0,nc(1,l))||1};let S=!0;function E(R){const I=R[0].intersectionRatio;if(I!==l){if(!S)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(E,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,_)}n.observe(t)}return o(!0),s}function W$(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=pA(t),u=i||s?[...c?Bm(c):[],...Bm(e)]:[];u.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),s&&g.addEventListener("resize",n)});const h=c&&a?H$(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(g=>{let[_]=g;_&&_.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=m)==null||S.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let v,y=l?ku(t):null;l&&x();function x(){const g=ku(t);y&&(g.x!==y.x||g.y!==y.y||g.width!==y.width||g.height!==y.height)&&n(),y=g,v=requestAnimationFrame(x)}return n(),()=>{var g;u.forEach(_=>{i&&_.removeEventListener("scroll",n),s&&_.removeEventListener("resize",n)}),h==null||h(),(g=m)==null||g.disconnect(),m=null,l&&cancelAnimationFrame(v)}}const G$=b$,X$=M$,$$=_$,Y$=T$,q$=w$,u2=x$,Z$=E$,K$=(t,e,n)=>{const r=new Map,i={platform:j$,...n},s={...i.platform,_c:r};return y$(t,e,{...i,platform:s})};var g0=typeof document<"u"?T.useLayoutEffect:T.useEffect;function gx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gx(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!gx(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function PU(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function d2(t,e){const n=PU(t);return Math.round(e*n)/n}function Pb(t){const e=T.useRef(t);return g0(()=>{e.current=t}),e}function Q$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,h]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=T.useState(r);gx(p,r)||m(r);const[v,y]=T.useState(null),[x,g]=T.useState(null),_=T.useCallback(O=>{O!==I.current&&(I.current=O,y(O))},[]),S=T.useCallback(O=>{O!==C.current&&(C.current=O,g(O))},[]),E=s||v,R=o||x,I=T.useRef(null),C=T.useRef(null),D=T.useRef(u),L=l!=null,P=Pb(l),F=Pb(i),z=Pb(c),H=T.useCallback(()=>{if(!I.current||!C.current)return;const O={placement:e,strategy:n,middleware:p};F.current&&(O.platform=F.current),K$(I.current,C.current,O).then(W=>{const Y={...W,isPositioned:z.current!==!1};q.current&&!gx(D.current,Y)&&(D.current=Y,Gu.flushSync(()=>{h(Y)}))})},[p,e,n,F,z]);g0(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[c]);const q=T.useRef(!1);g0(()=>(q.current=!0,()=>{q.current=!1}),[]),g0(()=>{if(E&&(I.current=E),R&&(C.current=R),E&&R){if(P.current)return P.current(E,R,H);H()}},[E,R,H,P,L]);const se=T.useMemo(()=>({reference:I,floating:C,setReference:_,setFloating:S}),[_,S]),K=T.useMemo(()=>({reference:E,floating:R}),[E,R]),ne=T.useMemo(()=>{const O={position:n,left:0,top:0};if(!K.floating)return O;const W=d2(K.floating,u.x),Y=d2(K.floating,u.y);return a?{...O,transform:"translate("+W+"px, "+Y+"px)",...PU(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:Y}},[n,a,K.floating,u.x,u.y]);return T.useMemo(()=>({...u,update:H,refs:se,elements:K,floatingStyles:ne}),[u,H,se,K,ne])}const J$=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?u2({element:r.current,padding:i}).fn(n):{}:r?u2({element:r,padding:i}).fn(n):{}}}},eY=(t,e)=>({...G$(t),options:[t,e]}),tY=(t,e)=>({...X$(t),options:[t,e]}),nY=(t,e)=>({...Z$(t),options:[t,e]}),rY=(t,e)=>({...$$(t),options:[t,e]}),iY=(t,e)=>({...Y$(t),options:[t,e]}),sY=(t,e)=>({...q$(t),options:[t,e]}),oY=(t,e)=>({...J$(t),options:[t,e]});var aY="Arrow",NU=T.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return b.jsx(Kt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});NU.displayName=aY;var lY=NU;function cY(t,e=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:p,children:m,...v}=h,y=(p==null?void 0:p[t][l])||a,x=T.useMemo(()=>v,Object.values(v));return b.jsx(y.Provider,{value:x,children:m})}function u(h,p){const m=(p==null?void 0:p[t][l])||a,v=T.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,uY(i,...e)]}function uY(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function dY(t){const[e,n]=T.useState(void 0);return Or(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var gA="Popper",[IU,LU]=cY(gA),[fY,DU]=IU(gA),kU=t=>{const{__scopePopper:e,children:n}=t,[r,i]=T.useState(null);return b.jsx(fY,{scope:e,anchor:r,onAnchorChange:i,children:n})};kU.displayName=gA;var OU="PopperAnchor",FU=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=DU(OU,n),o=T.useRef(null),a=Pn(e,o);return T.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:b.jsx(Kt.div,{...i,ref:a})});FU.displayName=OU;var vA="PopperContent",[hY,pY]=IU(vA),UU=T.forwardRef((t,e)=>{var he,ze,rt,je,We,fe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:v,...y}=t,x=DU(vA,n),[g,_]=T.useState(null),S=Pn(e,Me=>_(Me)),[E,R]=T.useState(null),I=dY(E),C=(I==null?void 0:I.width)??0,D=(I==null?void 0:I.height)??0,L=r+(s!=="center"?"-"+s:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(c)?c:[c],z=F.length>0,H={padding:P,boundary:F.filter(gY),altBoundary:z},{refs:q,floatingStyles:se,placement:K,isPositioned:ne,middlewareData:O}=Q$({strategy:"fixed",placement:L,whileElementsMounted:(...Me)=>W$(...Me,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[eY({mainAxis:i+D,alignmentAxis:o}),l&&tY({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?nY():void 0,...H}),l&&rY({...H}),iY({...H,apply:({elements:Me,rects:X,availableWidth:ot,availableHeight:Pe})=>{const{width:Ge,height:Be}=X.reference,_t=Me.floating.style;_t.setProperty("--radix-popper-available-width",`${ot}px`),_t.setProperty("--radix-popper-available-height",`${Pe}px`),_t.setProperty("--radix-popper-anchor-width",`${Ge}px`),_t.setProperty("--radix-popper-anchor-height",`${Be}px`)}}),E&&oY({element:E,padding:a}),vY({arrowWidth:C,arrowHeight:D}),p&&sY({strategy:"referenceHidden",...H})]}),[W,Y]=VU(K),re=Dr(v);Or(()=>{ne&&(re==null||re())},[ne,re]);const we=(he=O.arrow)==null?void 0:he.x,Ue=(ze=O.arrow)==null?void 0:ze.y,de=((rt=O.arrow)==null?void 0:rt.centerOffset)!==0,[Se,Ie]=T.useState();return Or(()=>{g&&Ie(window.getComputedStyle(g).zIndex)},[g]),b.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:ne?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Se,"--radix-popper-transform-origin":[(je=O.transformOrigin)==null?void 0:je.x,(We=O.transformOrigin)==null?void 0:We.y].join(" "),...((fe=O.hide)==null?void 0:fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:b.jsx(hY,{scope:n,placedSide:W,onArrowChange:R,arrowX:we,arrowY:Ue,shouldHideArrow:de,children:b.jsx(Kt.div,{"data-side":W,"data-align":Y,...y,ref:S,style:{...y.style,animation:ne?void 0:"none"}})})})});UU.displayName=vA;var BU="PopperArrow",mY={top:"bottom",right:"left",bottom:"top",left:"right"},zU=T.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=pY(BU,r),o=mY[s.placedSide];return b.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:b.jsx(lY,{...i,ref:n,style:{...i.style,display:"block"}})})});zU.displayName=BU;function gY(t){return t!==null}var vY=t=>({name:"transformOrigin",options:t,fn(e){var x,g,_;const{placement:n,rects:r,middlewareData:i}=e,o=((x=i.arrow)==null?void 0:x.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=VU(n),h={start:"0%",center:"50%",end:"100%"}[u],p=(((g=i.arrow)==null?void 0:g.x)??0)+a/2,m=(((_=i.arrow)==null?void 0:_.y)??0)+l/2;let v="",y="";return c==="bottom"?(v=o?h:`${p}px`,y=`${-l}px`):c==="top"?(v=o?h:`${p}px`,y=`${r.floating.height+l}px`):c==="right"?(v=`${-l}px`,y=o?h:`${m}px`):c==="left"&&(v=`${r.floating.width+l}px`,y=o?h:`${m}px`),{data:{x:v,y}}}});function VU(t){const[e,n="center"]=t.split("-");return[e,n]}var yY=kU,xY=FU,_Y=UU,wY=zU,SY="Portal",yA=T.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=T.useState(!1);Or(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?aF.createPortal(b.jsx(Kt.div,{...r,ref:e}),o):null});yA.displayName=SY;function zm({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=bY({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Dr(n),l=T.useCallback(c=>{if(s){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else i(c)},[s,t,i,a]);return[o,l]}function bY({defaultProp:t,onChange:e}){const n=T.useState(t),[r]=n,i=T.useRef(r),s=Dr(e);return T.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function MY(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var EY="VisuallyHidden",jU=T.forwardRef((t,e)=>b.jsx(Kt.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));jU.displayName=EY;var TY=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},yd=new WeakMap,Jv=new WeakMap,ey={},Nb=0,HU=function(t){return t&&(t.host||HU(t.parentNode))},AY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=HU(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},CY=function(t,e,n,r){var i=AY(e,Array.isArray(t)?t:[t]);ey[n]||(ey[n]=new WeakMap);var s=ey[n],o=[],a=new Set,l=new Set(i),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),v=m!==null&&m!=="false",y=(yd.get(p)||0)+1,x=(s.get(p)||0)+1;yd.set(p,y),s.set(p,x),o.push(p),y===1&&v&&Jv.set(p,!0),x===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(g){console.error("aria-hidden: cannot operate on ",p,g)}})};return u(e),a.clear(),Nb++,function(){o.forEach(function(h){var p=yd.get(h)-1,m=s.get(h)-1;yd.set(h,p),s.set(h,m),p||(Jv.has(h)||h.removeAttribute(r),Jv.delete(h)),m||h.removeAttribute(n)}),Nb--,Nb||(yd=new WeakMap,yd=new WeakMap,Jv=new WeakMap,ey={})}},WU=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=TY(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),CY(r,i,n,"aria-hidden")):function(){return null}},ko=function(){return ko=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ko.apply(this,arguments)};function GU(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RY(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var v0="right-scroll-bar-position",y0="width-before-scroll-bar",PY="with-scroll-bars-hidden",NY="--removed-body-scroll-bar-size";function Ib(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function IY(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var LY=typeof window<"u"?T.useLayoutEffect:T.useEffect,f2=new WeakMap;function DY(t,e){var n=IY(null,function(r){return t.forEach(function(i){return Ib(i,r)})});return LY(function(){var r=f2.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||Ib(a,null)}),s.forEach(function(a){i.has(a)||Ib(a,o)})}f2.set(n,t)},[t]),n}function kY(t){return t}function OY(t,e){e===void 0&&(e=kY);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function FY(t){t===void 0&&(t={});var e=OY(null);return e.options=ko({async:!0,ssr:!1},t),e}var XU=function(t){var e=t.sideCar,n=GU(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,ko({},n))};XU.isSideCarExport=!0;function UY(t,e){return t.useMedium(e),XU}var $U=FY(),Lb=function(){},X_=T.forwardRef(function(t,e){var n=T.useRef(null),r=T.useState({onScrollCapture:Lb,onWheelCapture:Lb,onTouchMoveCapture:Lb}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,p=t.sideCar,m=t.noIsolation,v=t.inert,y=t.allowPinchZoom,x=t.as,g=x===void 0?"div":x,_=t.gapMode,S=GU(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,R=DY([n,e]),I=ko(ko({},S),i);return T.createElement(T.Fragment,null,u&&T.createElement(E,{sideCar:$U,removeScrollBar:c,shards:h,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:_}),o?T.cloneElement(T.Children.only(a),ko(ko({},I),{ref:R})):T.createElement(g,ko({},I,{className:l,ref:R}),a))});X_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};X_.classNames={fullWidth:y0,zeroRight:v0};var BY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=BY();return e&&t.setAttribute("nonce",e),t}function VY(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function jY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var HY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=zY())&&(VY(e,n),jY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},WY=function(){var t=HY();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},YU=function(){var t=WY(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},GY={left:0,top:0,right:0,gap:0},Db=function(t){return parseInt(t||"",10)||0},XY=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Db(n),Db(r),Db(i)]},$Y=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return GY;var e=XY(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},YY=YU(),Mf="data-scroll-locked",qY=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(PY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Mf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(v0,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(y0,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(v0," .").concat(v0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(y0," .").concat(y0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Mf,`] {
    `).concat(NY,": ").concat(a,`px;
  }
`)},h2=function(){var t=parseInt(document.body.getAttribute(Mf)||"0",10);return isFinite(t)?t:0},ZY=function(){T.useEffect(function(){return document.body.setAttribute(Mf,(h2()+1).toString()),function(){var t=h2()-1;t<=0?document.body.removeAttribute(Mf):document.body.setAttribute(Mf,t.toString())}},[])},KY=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;ZY();var s=T.useMemo(function(){return $Y(i)},[i]);return T.createElement(YY,{styles:qY(s,!e,i,n?"":"!important")})},iE=!1;if(typeof window<"u")try{var ty=Object.defineProperty({},"passive",{get:function(){return iE=!0,!0}});window.addEventListener("test",ty,ty),window.removeEventListener("test",ty,ty)}catch{iE=!1}var xd=iE?{passive:!1}:!1,QY=function(t){return t.tagName==="TEXTAREA"},qU=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!QY(t)&&n[e]==="visible")},JY=function(t){return qU(t,"overflowY")},eq=function(t){return qU(t,"overflowX")},p2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=ZU(t,r);if(i){var s=KU(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},tq=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},nq=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},ZU=function(t,e){return t==="v"?JY(e):eq(e)},KU=function(t,e){return t==="v"?tq(e):nq(e)},rq=function(t,e){return t==="h"&&e==="rtl"?-1:1},iq=function(t,e,n,r,i){var s=rq(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,h=0,p=0;do{var m=KU(t,a),v=m[0],y=m[1],x=m[2],g=y-x-s*v;(v||g)&&ZU(t,a)&&(h+=g,p+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(Math.abs(h)<1||!i)||!u&&(Math.abs(p)<1||!i))&&(c=!0),c},ny=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},m2=function(t){return[t.deltaX,t.deltaY]},g2=function(t){return t&&"current"in t?t.current:t},sq=function(t,e){return t[0]===e[0]&&t[1]===e[1]},oq=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},aq=0,_d=[];function lq(t){var e=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),i=T.useState(aq++)[0],s=T.useState(YU)[0],o=T.useRef(t);T.useEffect(function(){o.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=RY([t.lockRef.current],(t.shards||[]).map(g2),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=T.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var g=ny(y),_=n.current,S="deltaX"in y?y.deltaX:_[0]-g[0],E="deltaY"in y?y.deltaY:_[1]-g[1],R,I=y.target,C=Math.abs(S)>Math.abs(E)?"h":"v";if("touches"in y&&C==="h"&&I.type==="range")return!1;var D=p2(C,I);if(!D)return!0;if(D?R=C:(R=C==="v"?"h":"v",D=p2(C,I)),!D)return!1;if(!r.current&&"changedTouches"in y&&(S||E)&&(r.current=R),!R)return!0;var L=r.current||R;return iq(L,x,y,L==="h"?S:E,!0)},[]),l=T.useCallback(function(y){var x=y;if(!(!_d.length||_d[_d.length-1]!==s)){var g="deltaY"in x?m2(x):ny(x),_=e.current.filter(function(R){return R.name===x.type&&(R.target===x.target||x.target===R.shadowParent)&&sq(R.delta,g)})[0];if(_&&_.should){x.cancelable&&x.preventDefault();return}if(!_){var S=(o.current.shards||[]).map(g2).filter(Boolean).filter(function(R){return R.contains(x.target)}),E=S.length>0?a(x,S[0]):!o.current.noIsolation;E&&x.cancelable&&x.preventDefault()}}},[]),c=T.useCallback(function(y,x,g,_){var S={name:y,delta:x,target:g,should:_,shadowParent:cq(g)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(E){return E!==S})},1)},[]),u=T.useCallback(function(y){n.current=ny(y),r.current=void 0},[]),h=T.useCallback(function(y){c(y.type,m2(y),y.target,a(y,t.lockRef.current))},[]),p=T.useCallback(function(y){c(y.type,ny(y),y.target,a(y,t.lockRef.current))},[]);T.useEffect(function(){return _d.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,xd),document.addEventListener("touchmove",l,xd),document.addEventListener("touchstart",u,xd),function(){_d=_d.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,xd),document.removeEventListener("touchmove",l,xd),document.removeEventListener("touchstart",u,xd)}},[]);var m=t.removeScrollBar,v=t.inert;return T.createElement(T.Fragment,null,v?T.createElement(s,{styles:oq(i)}):null,m?T.createElement(KY,{gapMode:t.gapMode}):null)}function cq(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const uq=UY($U,lq);var xA=T.forwardRef(function(t,e){return T.createElement(X_,ko({},t,{ref:e,sideCar:uq}))});xA.classNames=X_.classNames;var dq=[" ","Enter","ArrowUp","ArrowDown"],fq=[" ","Enter"],wg="Select",[$_,Y_,hq]=vU(wg),[fh,Hde]=xg(wg,[hq,LU]),q_=LU(),[pq,hc]=fh(wg),[mq,gq]=fh(wg),QU=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:h,disabled:p,required:m,form:v}=t,y=q_(e),[x,g]=T.useState(null),[_,S]=T.useState(null),[E,R]=T.useState(!1),I=j_(c),[C=!1,D]=zm({prop:r,defaultProp:i,onChange:s}),[L,P]=zm({prop:o,defaultProp:a,onChange:l}),F=T.useRef(null),z=x?v||!!x.closest("form"):!0,[H,q]=T.useState(new Set),se=Array.from(H).map(K=>K.props.value).join(";");return b.jsx(yY,{...y,children:b.jsxs(pq,{required:m,scope:e,trigger:x,onTriggerChange:g,valueNode:_,onValueNodeChange:S,valueNodeHasChildren:E,onValueNodeHasChildrenChange:R,contentId:$l(),value:L,onValueChange:P,open:C,onOpenChange:D,dir:I,triggerPointerDownPosRef:F,disabled:p,children:[b.jsx($_.Provider,{scope:e,children:b.jsx(mq,{scope:t.__scopeSelect,onNativeOptionAdd:T.useCallback(K=>{q(ne=>new Set(ne).add(K))},[]),onNativeOptionRemove:T.useCallback(K=>{q(ne=>{const O=new Set(ne);return O.delete(K),O})},[]),children:n})}),z?b.jsxs(bB,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:L,onChange:K=>P(K.target.value),disabled:p,form:v,children:[L===void 0?b.jsx("option",{value:""}):null,Array.from(H)]},se):null]})})};QU.displayName=wg;var JU="SelectTrigger",eB=T.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=q_(n),o=hc(JU,n),a=o.disabled||r,l=Pn(e,o.onTriggerChange),c=Y_(n),u=T.useRef("touch"),[h,p,m]=MB(y=>{const x=c().filter(S=>!S.disabled),g=x.find(S=>S.value===o.value),_=EB(x,y,g);_!==void 0&&o.onValueChange(_.value)}),v=y=>{a||(o.onOpenChange(!0),m()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return b.jsx(xY,{asChild:!0,...s,children:b.jsx(Kt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":SB(o.value)?"":void 0,...i,ref:l,onClick:en(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&v(y)}),onPointerDown:en(i.onPointerDown,y=>{u.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(v(y),y.preventDefault())}),onKeyDown:en(i.onKeyDown,y=>{const x=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(x&&y.key===" ")&&dq.includes(y.key)&&(v(),y.preventDefault())})})})});eB.displayName=JU;var tB="SelectValue",nB=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=hc(tB,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,h=Pn(e,l.onValueNodeChange);return Or(()=>{c(u)},[c,u]),b.jsx(Kt.span,{...a,ref:h,style:{pointerEvents:"none"},children:SB(l.value)?b.jsx(b.Fragment,{children:o}):s})});nB.displayName=tB;var vq="SelectIcon",rB=T.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return b.jsx(Kt.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});rB.displayName=vq;var yq="SelectPortal",iB=t=>b.jsx(yA,{asChild:!0,...t});iB.displayName=yq;var Ou="SelectContent",sB=T.forwardRef((t,e)=>{const n=hc(Ou,t.__scopeSelect),[r,i]=T.useState();if(Or(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Gu.createPortal(b.jsx(oB,{scope:t.__scopeSelect,children:b.jsx($_.Slot,{scope:t.__scopeSelect,children:b.jsx("div",{children:t.children})})}),s):null}return b.jsx(aB,{...t,ref:e})});sB.displayName=Ou;var Gs=10,[oB,pc]=fh(Ou),xq="SelectContentImpl",aB=T.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:x,...g}=t,_=hc(Ou,n),[S,E]=T.useState(null),[R,I]=T.useState(null),C=Pn(e,he=>E(he)),[D,L]=T.useState(null),[P,F]=T.useState(null),z=Y_(n),[H,q]=T.useState(!1),se=T.useRef(!1);T.useEffect(()=>{if(S)return WU(S)},[S]),_U();const K=T.useCallback(he=>{const[ze,...rt]=z().map(fe=>fe.ref.current),[je]=rt.slice(-1),We=document.activeElement;for(const fe of he)if(fe===We||(fe==null||fe.scrollIntoView({block:"nearest"}),fe===ze&&R&&(R.scrollTop=0),fe===je&&R&&(R.scrollTop=R.scrollHeight),fe==null||fe.focus(),document.activeElement!==We))return},[z,R]),ne=T.useCallback(()=>K([D,S]),[K,D,S]);T.useEffect(()=>{H&&ne()},[H,ne]);const{onOpenChange:O,triggerPointerDownPosRef:W}=_;T.useEffect(()=>{if(S){let he={x:0,y:0};const ze=je=>{var We,fe;he={x:Math.abs(Math.round(je.pageX)-(((We=W.current)==null?void 0:We.x)??0)),y:Math.abs(Math.round(je.pageY)-(((fe=W.current)==null?void 0:fe.y)??0))}},rt=je=>{he.x<=10&&he.y<=10?je.preventDefault():S.contains(je.target)||O(!1),document.removeEventListener("pointermove",ze),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ze),document.addEventListener("pointerup",rt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ze),document.removeEventListener("pointerup",rt,{capture:!0})}}},[S,O,W]),T.useEffect(()=>{const he=()=>O(!1);return window.addEventListener("blur",he),window.addEventListener("resize",he),()=>{window.removeEventListener("blur",he),window.removeEventListener("resize",he)}},[O]);const[Y,re]=MB(he=>{const ze=z().filter(We=>!We.disabled),rt=ze.find(We=>We.ref.current===document.activeElement),je=EB(ze,he,rt);je&&setTimeout(()=>je.ref.current.focus())}),we=T.useCallback((he,ze,rt)=>{const je=!se.current&&!rt;(_.value!==void 0&&_.value===ze||je)&&(L(he),je&&(se.current=!0))},[_.value]),Ue=T.useCallback(()=>S==null?void 0:S.focus(),[S]),de=T.useCallback((he,ze,rt)=>{const je=!se.current&&!rt;(_.value!==void 0&&_.value===ze||je)&&F(he)},[_.value]),Se=r==="popper"?sE:lB,Ie=Se===sE?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:v,hideWhenDetached:y,avoidCollisions:x}:{};return b.jsx(oB,{scope:n,content:S,viewport:R,onViewportChange:I,itemRefCallback:we,selectedItem:D,onItemLeave:Ue,itemTextRefCallback:de,focusSelectedItem:ne,selectedItemText:P,position:r,isPositioned:H,searchRef:Y,children:b.jsx(xA,{as:tc,allowPinchZoom:!0,children:b.jsx(lA,{asChild:!0,trapped:_.open,onMountAutoFocus:he=>{he.preventDefault()},onUnmountAutoFocus:en(i,he=>{var ze;(ze=_.trigger)==null||ze.focus({preventScroll:!0}),he.preventDefault()}),children:b.jsx(aA,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:he=>he.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:b.jsx(Se,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:he=>he.preventDefault(),...g,...Ie,onPlaced:()=>q(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:en(g.onKeyDown,he=>{const ze=he.ctrlKey||he.altKey||he.metaKey;if(he.key==="Tab"&&he.preventDefault(),!ze&&he.key.length===1&&re(he.key),["ArrowUp","ArrowDown","Home","End"].includes(he.key)){let je=z().filter(We=>!We.disabled).map(We=>We.ref.current);if(["ArrowUp","End"].includes(he.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes(he.key)){const We=he.target,fe=je.indexOf(We);je=je.slice(fe+1)}setTimeout(()=>K(je)),he.preventDefault()}})})})})})})});aB.displayName=xq;var _q="SelectItemAlignedPosition",lB=T.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=hc(Ou,n),o=pc(Ou,n),[a,l]=T.useState(null),[c,u]=T.useState(null),h=Pn(e,C=>u(C)),p=Y_(n),m=T.useRef(!1),v=T.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:g,focusSelectedItem:_}=o,S=T.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&y&&x&&g){const C=s.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),L=s.valueNode.getBoundingClientRect(),P=g.getBoundingClientRect();if(s.dir!=="rtl"){const We=P.left-D.left,fe=L.left-We,Me=C.left-fe,X=C.width+Me,ot=Math.max(X,D.width),Pe=window.innerWidth-Gs,Ge=JM(fe,[Gs,Math.max(Gs,Pe-ot)]);a.style.minWidth=X+"px",a.style.left=Ge+"px"}else{const We=D.right-P.right,fe=window.innerWidth-L.right-We,Me=window.innerWidth-C.right-fe,X=C.width+Me,ot=Math.max(X,D.width),Pe=window.innerWidth-Gs,Ge=JM(fe,[Gs,Math.max(Gs,Pe-ot)]);a.style.minWidth=X+"px",a.style.right=Ge+"px"}const F=p(),z=window.innerHeight-Gs*2,H=y.scrollHeight,q=window.getComputedStyle(c),se=parseInt(q.borderTopWidth,10),K=parseInt(q.paddingTop,10),ne=parseInt(q.borderBottomWidth,10),O=parseInt(q.paddingBottom,10),W=se+K+H+O+ne,Y=Math.min(x.offsetHeight*5,W),re=window.getComputedStyle(y),we=parseInt(re.paddingTop,10),Ue=parseInt(re.paddingBottom,10),de=C.top+C.height/2-Gs,Se=z-de,Ie=x.offsetHeight/2,he=x.offsetTop+Ie,ze=se+K+he,rt=W-ze;if(ze<=de){const We=F.length>0&&x===F[F.length-1].ref.current;a.style.bottom="0px";const fe=c.clientHeight-y.offsetTop-y.offsetHeight,Me=Math.max(Se,Ie+(We?Ue:0)+fe+ne),X=ze+Me;a.style.height=X+"px"}else{const We=F.length>0&&x===F[0].ref.current;a.style.top="0px";const Me=Math.max(de,se+y.offsetTop+(We?we:0)+Ie)+rt;a.style.height=Me+"px",y.scrollTop=ze-de+y.offsetTop}a.style.margin=`${Gs}px 0`,a.style.minHeight=Y+"px",a.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,s.trigger,s.valueNode,a,c,y,x,g,s.dir,r]);Or(()=>S(),[S]);const[E,R]=T.useState();Or(()=>{c&&R(window.getComputedStyle(c).zIndex)},[c]);const I=T.useCallback(C=>{C&&v.current===!0&&(S(),_==null||_(),v.current=!1)},[S,_]);return b.jsx(Sq,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:I,children:b.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:b.jsx(Kt.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});lB.displayName=_q;var wq="SelectPopperPosition",sE=T.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Gs,...s}=t,o=q_(n);return b.jsx(_Y,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sE.displayName=wq;var[Sq,_A]=fh(Ou,{}),oE="SelectViewport",cB=T.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=pc(oE,n),o=_A(oE,n),a=Pn(e,s.onViewportChange),l=T.useRef(0);return b.jsxs(b.Fragment,{children:[b.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),b.jsx($_.Slot,{scope:n,children:b.jsx(Kt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:en(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const m=Math.abs(l.current-u.scrollTop);if(m>0){const v=window.innerHeight-Gs*2,y=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),g=Math.max(y,x);if(g<v){const _=g+m,S=Math.min(v,_),E=_-S;h.style.height=S+"px",h.style.bottom==="0px"&&(u.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});cB.displayName=oE;var uB="SelectGroup",[bq,Mq]=fh(uB),Eq=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=$l();return b.jsx(bq,{scope:n,id:i,children:b.jsx(Kt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Eq.displayName=uB;var dB="SelectLabel",fB=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Mq(dB,n);return b.jsx(Kt.div,{id:i.id,...r,ref:e})});fB.displayName=dB;var vx="SelectItem",[Tq,hB]=fh(vx),pB=T.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=hc(vx,n),l=pc(vx,n),c=a.value===r,[u,h]=T.useState(s??""),[p,m]=T.useState(!1),v=Pn(e,_=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,_,r,i)}),y=$l(),x=T.useRef("touch"),g=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return b.jsx(Tq,{scope:n,value:r,disabled:i,textId:y,isSelected:c,onItemTextChange:T.useCallback(_=>{h(S=>S||((_==null?void 0:_.textContent)??"").trim())},[]),children:b.jsx($_.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:b.jsx(Kt.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:v,onFocus:en(o.onFocus,()=>m(!0)),onBlur:en(o.onBlur,()=>m(!1)),onClick:en(o.onClick,()=>{x.current!=="mouse"&&g()}),onPointerUp:en(o.onPointerUp,()=>{x.current==="mouse"&&g()}),onPointerDown:en(o.onPointerDown,_=>{x.current=_.pointerType}),onPointerMove:en(o.onPointerMove,_=>{var S;x.current=_.pointerType,i?(S=l.onItemLeave)==null||S.call(l):x.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:en(o.onPointerLeave,_=>{var S;_.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:en(o.onKeyDown,_=>{var E;((E=l.searchRef)==null?void 0:E.current)!==""&&_.key===" "||(fq.includes(_.key)&&g(),_.key===" "&&_.preventDefault())})})})})});pB.displayName=vx;var Sp="SelectItemText",mB=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=hc(Sp,n),a=pc(Sp,n),l=hB(Sp,n),c=gq(Sp,n),[u,h]=T.useState(null),p=Pn(e,g=>h(g),l.onItemTextChange,g=>{var _;return(_=a.itemTextRefCallback)==null?void 0:_.call(a,g,l.value,l.disabled)}),m=u==null?void 0:u.textContent,v=T.useMemo(()=>b.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=c;return Or(()=>(y(v),()=>x(v)),[y,x,v]),b.jsxs(b.Fragment,{children:[b.jsx(Kt.span,{id:l.textId,...s,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Gu.createPortal(s.children,o.valueNode):null]})});mB.displayName=Sp;var gB="SelectItemIndicator",vB=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return hB(gB,n).isSelected?b.jsx(Kt.span,{"aria-hidden":!0,...r,ref:e}):null});vB.displayName=gB;var aE="SelectScrollUpButton",yB=T.forwardRef((t,e)=>{const n=pc(aE,t.__scopeSelect),r=_A(aE,t.__scopeSelect),[i,s]=T.useState(!1),o=Pn(e,r.onScrollButtonChange);return Or(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?b.jsx(_B,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});yB.displayName=aE;var lE="SelectScrollDownButton",xB=T.forwardRef((t,e)=>{const n=pc(lE,t.__scopeSelect),r=_A(lE,t.__scopeSelect),[i,s]=T.useState(!1),o=Pn(e,r.onScrollButtonChange);return Or(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?b.jsx(_B,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});xB.displayName=lE;var _B=T.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=pc("SelectScrollButton",n),o=T.useRef(null),a=Y_(n),l=T.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),Or(()=>{var u;const c=a().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),b.jsx(Kt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:en(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:en(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:en(i.onPointerLeave,()=>{l()})})}),Aq="SelectSeparator",wB=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return b.jsx(Kt.div,{"aria-hidden":!0,...r,ref:e})});wB.displayName=Aq;var cE="SelectArrow",Cq=T.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=q_(n),s=hc(cE,n),o=pc(cE,n);return s.open&&o.position==="popper"?b.jsx(wY,{...i,...r,ref:e}):null});Cq.displayName=cE;function SB(t){return t===""||t===void 0}var bB=T.forwardRef((t,e)=>{const{value:n,...r}=t,i=T.useRef(null),s=Pn(e,i),o=MY(n);return T.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(h)}},[o,n]),b.jsx(jU,{asChild:!0,children:b.jsx("select",{...r,ref:s,defaultValue:n})})});bB.displayName="BubbleSelect";function MB(t){const e=Dr(t),n=T.useRef(""),r=T.useRef(0),i=T.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function EB(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Rq(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Rq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Pq=QU,TB=eB,Nq=nB,Iq=rB,Lq=iB,AB=sB,Dq=cB,CB=fB,RB=pB,kq=mB,Oq=vB,PB=yB,NB=xB,IB=wB;/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LB=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>T.createElement("svg",{ref:l,...Uq,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:LB("lucide",i),...a},[...o.map(([c,u])=>T.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=(t,e)=>{const n=T.forwardRef(({className:r,...i},s)=>T.createElement(Bq,{ref:s,iconNode:e,className:LB(`lucide-${Fq(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=ea("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=ea("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=ea("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=ea("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=ea("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=ea("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=ea("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=ea("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=ea("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=ea("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Vp=Pq,jp=Nq,Ef=T.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(TB,{ref:r,className:jt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,b.jsx(Iq,{asChild:!0,children:b.jsx(DB,{className:"h-4 w-4 opacity-50"})})]}));Ef.displayName=TB.displayName;const OB=T.forwardRef(({className:t,...e},n)=>b.jsx(PB,{ref:n,className:jt("flex cursor-default items-center justify-center py-1",t),...e,children:b.jsx(Vq,{className:"h-4 w-4"})}));OB.displayName=PB.displayName;const FB=T.forwardRef(({className:t,...e},n)=>b.jsx(NB,{ref:n,className:jt("flex cursor-default items-center justify-center py-1",t),...e,children:b.jsx(DB,{className:"h-4 w-4"})}));FB.displayName=NB.displayName;const Tf=T.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>b.jsx(Lq,{children:b.jsxs(AB,{ref:i,className:jt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[b.jsx(OB,{}),b.jsx(Dq,{className:jt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),b.jsx(FB,{})]})}));Tf.displayName=AB.displayName;const Yq=T.forwardRef(({className:t,...e},n)=>b.jsx(CB,{ref:n,className:jt("px-2 py-1.5 text-sm font-semibold",t),...e}));Yq.displayName=CB.displayName;const Po=T.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(RB,{ref:r,className:jt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[b.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(Oq,{children:b.jsx(zq,{className:"h-4 w-4"})})}),b.jsx(kq,{children:e})]}));Po.displayName=RB.displayName;const qq=T.forwardRef(({className:t,...e},n)=>b.jsx(IB,{ref:n,className:jt("-mx-1 my-1 h-px bg-muted",t),...e}));qq.displayName=IB.displayName;const Yu=T.forwardRef(({className:t,children:e,...n},r)=>b.jsx("div",{ref:r,className:jt("story-container p-6 md:p-8 animate-in fade-in duration-500",t),...n,children:e}));Yu.displayName="FormContainer";const kb={Rabbit:[{type:"Rabbit",name:"Hoppy",description:"fluffy",habitat:"meadow",specialAbility:"incredible jumping ability and sensitive hearing",funFact:"rabbits can see behind them without turning their heads because their eyes are positioned high on the sides of their head"},{type:"Rabbit",name:"Thumper",description:"soft-furred",habitat:"forest",specialAbility:"lightning-fast running and the ability to sense danger",funFact:"rabbits perform a special jump called a 'binky' when they're happy, twisting their body and kicking their feet in the air"},{type:"Rabbit",name:"Cotton",description:"snow-white",habitat:"wildflower field",specialAbility:"finding hidden paths and creating cozy burrows",funFact:"baby rabbits are called kittens, and they can leave their nest when they're only three weeks old"}],Fox:[{type:"Fox",name:"Rusty",description:"clever",habitat:"woodland",specialAbility:"quick thinking and problem-solving",funFact:"foxes have whiskers on their legs as well as their faces to help them navigate in the dark"},{type:"Fox",name:"Amber",description:"bushy-tailed",habitat:"forest edge",specialAbility:"exceptional hearing that can detect small animals underground",funFact:"foxes use the Earth's magnetic field to help them hunt, being the only animal we know that uses magnetic fields to judge distance"}],Bear:[{type:"Bear",name:"Bruno",description:"gentle",habitat:"mountain forest",specialAbility:"amazing sense of smell and incredible strength",funFact:"bears have excellent memories and can remember food sources from years ago"},{type:"Bear",name:"Honey",description:"fluffy",habitat:"river valley",specialAbility:"fishing with their paws and climbing trees",funFact:"bears can run as fast as horses despite their large size, reaching speeds of 35 miles per hour"}],Owl:[{type:"Owl",name:"Hootie",description:"wise",habitat:"ancient oak tree",specialAbility:"rotating their head almost completely around and silent flight",funFact:"owls have special feathers that make their flight completely silent, helping them sneak up on prey"},{type:"Owl",name:"Whisper",description:"wide-eyed",habitat:"hollow tree",specialAbility:"seeing perfectly in the dark and hearing tiny sounds from far away",funFact:"an owl's eyes are so large that they take up over 50% of their skull, and they can't move their eyes - that's why they turn their heads!"}],Elephant:[{type:"Elephant",name:"Ellie",description:"gentle",habitat:"savanna",specialAbility:"using their trunk like a hand and communicating over long distances",funFact:"elephants can recognize themselves in mirrors, showing they have self-awareness like humans"},{type:"Elephant",name:"Trumpet",description:"big-eared",habitat:"grassland",specialAbility:"remembering all their friends and family members for decades",funFact:"elephants 'talk' to each other using sounds too low for humans to hear, allowing them to communicate over several miles"}],Lion:[{type:"Lion",name:"Leo",description:"majestic",habitat:"pride lands",specialAbility:"leading their pride and protecting their family",funFact:"a lion's roar can be heard up to 5 miles away, the loudest of any big cat"},{type:"Lion",name:"Savannah",description:"golden-maned",habitat:"grassy plains",specialAbility:"hunting cooperatively with their pride members",funFact:"lions are the only cats that live in groups called prides, working together as a family"}],Turtle:[{type:"Turtle",name:"Shelly",description:"patient",habitat:"crystal clear pond",specialAbility:"carrying their home wherever they go and living for a very long time",funFact:"some turtles can breathe through their bottoms! They take in oxygen through special sacs near their tail when hibernating"},{type:"Turtle",name:"Slider",description:"slow-moving",habitat:"lazy river",specialAbility:"holding their breath underwater for hours and hiding in their shell",funFact:"turtles have been around since the time of dinosaurs, over 200 million years ago"}],Wolf:[{type:"Wolf",name:"Luna",description:"loyal",habitat:"northern forest",specialAbility:"working together with their pack and howling to communicate",funFact:"wolves can hear other wolves howling from up to 10 miles away in the forest"},{type:"Wolf",name:"Shadow",description:"silver-furred",habitat:"mountain wilderness",specialAbility:"traveling long distances and caring for their pack members",funFact:"wolf pups are born blind and deaf, and the whole pack helps take care of them, like having many babysitters"}],Giraffe:[{type:"Giraffe",name:"Stretch",description:"tall",habitat:"acacia plains",specialAbility:"reaching the highest leaves that no other animal can get",funFact:"giraffes only need to drink water once every few days because they get most of their water from the plants they eat"},{type:"Giraffe",name:"Spots",description:"long-necked",habitat:"savanna",specialAbility:"seeing danger from far away with their height advantage",funFact:"a giraffe's spots are unique like human fingerprints - no two giraffes have the same pattern"}],Koala:[{type:"Koala",name:"Eucly",description:"sleepy",habitat:"eucalyptus forest",specialAbility:"climbing trees and sleeping for up to 20 hours a day",funFact:"baby koalas (called joeys) are only the size of a jelly bean when they're born and crawl into their mother's pouch to grow"},{type:"Koala",name:"Cuddles",description:"fuzzy",habitat:"gum tree canopy",specialAbility:"digesting poisonous eucalyptus leaves that other animals can't eat",funFact:"koalas have fingerprints so similar to humans that they've sometimes confused crime scene investigators!"}],Tiger:[{type:"Tiger",name:"Stripes",description:"powerful",habitat:"dense jungle",specialAbility:"swimming well and blending into tall grass with their stripes",funFact:"tigers have striped skin, not just striped fur. If you shaved a tiger, the stripes would still be visible!"},{type:"Tiger",name:"Raja",description:"magnificent",habitat:"bamboo forest",specialAbility:"moving silently despite their large size and incredible jumping",funFact:"a tiger's roar is so powerful it can paralyze animals that hear it, making them too scared to run away"}],Penguin:[{type:"Penguin",name:"Waddles",description:"tuxedo-wearing",habitat:"icy shore",specialAbility:"swimming like a torpedo and sliding on their bellies",funFact:"penguins propose to each other with a perfect pebble that they search for and give as a gift"},{type:"Penguin",name:"Chilly",description:"playful",habitat:"antarctic colony",specialAbility:"staying warm in freezing temperatures with special feathers and fat",funFact:"emperor penguin dads hold their egg on their feet for two months in the freezing cold without eating anything"}],Squirrel:[{type:"Squirrel",name:"Nutty",description:"bushy-tailed",habitat:"old oak tree",specialAbility:"remembering where they hide thousands of nuts and jumping between branches",funFact:"squirrels plant thousands of trees by accident when they forget where they buried their nuts"},{type:"Squirrel",name:"Acorn",description:"quick",habitat:"city park",specialAbility:"climbing headfirst down trees and balancing on the thinnest branches",funFact:"squirrels use their tails as umbrellas when it rains and as blankets when it's cold"}],Hedgehog:[{type:"Hedgehog",name:"Spike",description:"prickly",habitat:"garden undergrowth",specialAbility:"rolling into a perfect ball when scared and sensing with their spines",funFact:"baby hedgehogs are called hoglets, and they're born with soft spines under their skin that pop out a few hours after birth"},{type:"Hedgehog",name:"Prickles",description:"small",habitat:"forest floor",specialAbility:"finding food with their excellent sense of smell and running surprisingly fast",funFact:"hedgehogs make a cute 'self-anointing' foam when they find new smells, spreading it on their spines with their tongue"}],Panda:[{type:"Panda",name:"Bamboo",description:"black-and-white",habitat:"misty bamboo forest",specialAbility:"using their extra 'thumb' (actually a wrist bone) to hold bamboo and climbing tall trees",funFact:"newborn pandas are tiny - only about the size of a stick of butter - and 900 times smaller than their mothers"},{type:"Panda",name:"Oreo",description:"cuddly",habitat:"mountain bamboo grove",specialAbility:"eating bamboo all day long and being expert climbers despite their size",funFact:"pandas can eat for up to 14 hours a day and poop up to 40 times daily because bamboo is hard to digest"}],Dolphin:[{type:"Dolphin",name:"Splash",description:"playful",habitat:"clear blue ocean",specialAbility:"using echolocation to 'see' with sound and communicating with whistles",funFact:"dolphins call each other by name using special whistles that are unique to each dolphin, like having their own signature song"},{type:"Dolphin",name:"Echo",description:"intelligent",habitat:"coral reef",specialAbility:"swimming very fast and jumping high out of the water",funFact:"dolphins sleep with only half their brain at a time, keeping one eye open to watch for danger and remember to breathe"}],Monkey:[{type:"Monkey",name:"Chatter",description:"curious",habitat:"rainforest canopy",specialAbility:"using their tail like an extra hand and making incredible leaps between trees",funFact:"some monkeys wash their food in streams before eating it, teaching this habit to their babies"},{type:"Monkey",name:"Bananas",description:"mischievous",habitat:"tropical jungle",specialAbility:"using tools like sticks to get food and making over 30 different sounds to communicate",funFact:"monkeys in Japan learn to use vending machines, trading coins for food, and they even choose their favorite snacks"}],Dragon:[{type:"Dragon",name:"Ember",description:"fiery",habitat:"mountain cave",specialAbility:"breathing magical flames and flying high above the clouds",funFact:"in many legends, dragons are the wisest creatures and often guard special treasures or magical knowledge"},{type:"Dragon",name:"Scales",description:"rainbow-colored",habitat:"enchanted valley",specialAbility:"creating beautiful light shows with their shimmering scales and telling riddles",funFact:"ancient stories say that dragon tears can heal any illness and grant special wishes"}],Unicorn:[{type:"Unicorn",name:"Sparkle",description:"pearly-white",habitat:"magical meadow",specialAbility:"making flowers grow with every step and bringing sweet dreams",funFact:"unicorns are said to be able to purify water just by touching it with their magical horn"},{type:"Unicorn",name:"Stardust",description:"silver-maned",habitat:"crystal forest",specialAbility:"creating rainbows and healing small hurts with their gentle touch",funFact:"legends say that unicorns can only be approached by those with pure hearts and kind intentions"}],Butterfly:[{type:"Butterfly",name:"Flutter",description:"rainbow-winged",habitat:"flower garden",specialAbility:"transforming from a caterpillar and carrying messages on the wind",funFact:"butterflies taste with their feet! They have taste sensors on their legs to know if a leaf is good to lay eggs on"},{type:"Butterfly",name:"Nectar",description:"delicate",habitat:"wildflower meadow",specialAbility:"pollinating flowers and dancing gracefully on the breeze",funFact:"monarch butterflies travel over 2,500 miles during migration, one of the longest insect journeys in the world"}],Octopus:[{type:"Octopus",name:"Inky",description:"clever",habitat:"coral city",specialAbility:"changing colors to match any background and squeezing through tiny spaces",funFact:"octopuses have three hearts, blue blood, and are considered the smartest invertebrates in the ocean"},{type:"Octopus",name:"Tentacles",description:"shape-shifting",habitat:"underwater cave",specialAbility:"solving puzzles and using tools with their eight arms",funFact:"an octopus can regrow a lost arm, and that arm will still respond to stimuli even when detached!"}],Dinosaur:[{type:"Dinosaur",name:"Rex",description:"ancient",habitat:"prehistoric jungle",specialAbility:"telling stories about the ancient world and roaring loudly",funFact:"some dinosaurs had brains the size of walnuts despite having enormous bodies"},{type:"Dinosaur",name:"Tricy",description:"gentle giant",habitat:"fern valley",specialAbility:"protecting friends with their strong shield-like frill",funFact:"a dinosaur called Argentinosaurus was so huge it weighed as much as 17 elephants put together!"}]};function Zq(t){if(kb[t]&&kb[t].length>0){const e=kb[t];return e[Math.floor(Math.random()*e.length)]}return{type:t,name:Kq(),description:Qq(),habitat:Jq(),specialAbility:"adapting to any environment and making friends easily",funFact:"each animal has unique traits and behaviors that make them special in their own way"}}function Kq(){const t=["Whiskers","Scout","Lucky","Sunny","Star","Muffin","Pebble","Cocoa","Blossom","Pepper","Ziggy","Willow","Ginger","Misty","Buddy"];return t[Math.floor(Math.random()*t.length)]}function Qq(){const t=["friendly","smart","brave","curious","playful","gentle","adventurous","kind","helpful","clever","cheerful","energetic","patient","wise","caring"];return t[Math.floor(Math.random()*t.length)]}function Jq(){const t=["magical forest","hidden valley","peaceful meadow","ancient woods","crystal cave","rainbow hill","starlight glade","misty mountain","sunny glade","willow grove","secret garden","whispering pines"];return t[Math.floor(Math.random()*t.length)]}const Ob={Kindness:[{introduction:"In a world where sometimes animals forgot to be nice to each other, {animalName} the {animalType} noticed that not everyone was being treated with kindness.",challenge:"One day, {animalName} found a small lost creature who was sad and alone. Other animals walked right past without stopping to help. {animalName} wondered what to do.",resolution:"With a gentle heart, {animalName} approached the lost creature and offered friendship and help. Together they found their way home, helping others along their journey.",learning:"Through this adventure, {animalName} discovered that even small acts of kindness could make a big difference in someone else's life.",moralMessage:"Kindness costs nothing but means everything to those who receive it"},{introduction:"Deep in the {habitat}, {animalName} the {animalType} was known for their {description} appearance but not yet for their heart.",challenge:"During a terrible storm, many animals lost their homes and were struggling. Some were even unkind to each other while competing for shelter and food.",resolution:"{animalName} used their {specialAbility} to help build new homes and find food for everyone, showing that there was enough for all if they worked together.",learning:"The other animals learned from {animalName}'s example that being kind, especially during difficult times, makes everyone's lives better.",moralMessage:"A single act of kindness can change someone's entire world"}],Courage:[{introduction:"{animalName} the {animalType} lived in the {habitat} and was usually very shy, preferring to stay hidden where it was safe and comfortable.",challenge:"A dangerous situation arose when a fallen tree blocked the river, threatening to flood their homes. All the animals were too frightened to approach the rushing water.",resolution:"Despite being scared, {animalName} gathered their courage and used their {specialAbility} to carefully move the tree, saving everyone's homes from the flood.",learning:"The animals celebrated {animalName} and realized that courage isn't about not feeling afraid  it's about doing what's needed even when you are afraid.",moralMessage:"Bravery isn't the absence of fear, but doing what's right despite being afraid"},{introduction:"The {description} {animalName} was known throughout the {habitat} for always being careful and never taking risks.",challenge:"When a young animal became trapped on a high cliff, everyone watched in worry but were too afraid to climb the dangerous rocks to help.",resolution:"Though trembling with fear, {animalName} slowly made their way up the cliff, focusing on each step rather than the height, until they reached and rescued the stranded youngster.",learning:"{animalName} discovered that they were stronger and braver than they ever knew, and that facing your fears can help you grow in amazing ways.",moralMessage:"You are braver than you believe, stronger than you seem, and smarter than you think"}],Friendship:[{introduction:"{animalName} the {animalType} had many acquaintances in the {habitat}, but sometimes felt lonely because they didn't have a true friend who really understood them.",challenge:"When a new animal who was very different from {animalName} arrived in the {habitat}, others kept their distance. The newcomer also had an amazing {specialAbility} but felt left out.",resolution:"{animalName} decided to welcome the newcomer, and despite their differences, they found they enjoyed each other's company and had much to learn from one another.",learning:"Through their new friendship, both animals discovered that the best friends aren't always those who are most similar to you, but those who bring different gifts into your life.",moralMessage:"True friendship sees past our differences to the heart beneath"},{introduction:"In the bustling {habitat}, {animalName} the {description} {animalType} had many casual friends but longed for a deeper connection.",challenge:"During the changing of {season}, {animalName} faced a difficult journey and realized they couldn't make it alone. They needed help but weren't sure who to trust.",resolution:"Unexpectedly, several animals offered to join {animalName}'s journey, each using their unique talents to overcome obstacles together, forming bonds that grew stronger with each challenge.",learning:"{animalName} learned that friendship isn't just about having fun together  it's about supporting each other through difficulties and celebrating each other's successes.",moralMessage:"Friends are the family we choose for ourselves"}],Sharing:[{introduction:"{animalName} the {animalType} had collected the biggest pile of food in the {habitat} and was very proud of their impressive stockpile.",challenge:"When a harsh {season} came unexpectedly, many animals hadn't prepared enough and were hungry. {animalName} had to decide whether to keep everything for themselves or share with others.",resolution:"After some thought, {animalName} organized a community feast where everyone shared what they had. Together, they had more than enough, and the variety made the meal even better!",learning:"To {animalName}'s surprise, sharing didn't leave them with less  it created abundance, variety, and warm friendships that would help everyone through the {season}.",moralMessage:"When we share, we don't divide what we have  we multiply its benefits"},{introduction:"The {description} {animalName} had a special treasure  a wonderful {habitat} with the juiciest berries and safest shelter in the forest.",challenge:"Other animals often looked longingly at {animalName}'s perfect spot, but {animalName} wasn't sure about sharing their special place. What if there wasn't enough for everyone?",resolution:"When {animalName} finally invited others in, they discovered that each animal brought gifts: some planted new berry bushes, others helped build better shelters, and together they created something better than before.",learning:"{animalName} realized that sharing can transform a good thing into a great thing when everyone contributes their talents and works together.",moralMessage:"The joy of sharing is the best way to multiply happiness"}],Patience:[{introduction:"{animalName} the {animalType} was known throughout the {habitat} for always being in a hurry, rushing from one activity to the next without stopping to enjoy the journey.",challenge:"When {animalName} decided to learn an important new skill, they became frustrated when they couldn't master it immediately. It seemed so difficult and was taking too long!",resolution:"A wise old animal taught {animalName} to slow down and enjoy the learning process, practicing a little bit each day instead of trying to rush. Slowly but surely, improvement came.",learning:"Through this experience, {animalName} discovered that some of the best things in life  like skills, friendship, and understanding  grow gradually over time with patience and care.",moralMessage:"Patience isn't just waiting, it's how we behave while we're waiting"},{introduction:"In the beautiful {habitat}, {animalName} the {description} {animalType} was always the first to give up when things got difficult.",challenge:"{animalName} really wanted to reach the legendary Rainbow Falls that was said to be the most beautiful place in the forest, but the journey was long and full of obstacles.",resolution:"Instead of quitting as usual, {animalName} decided to travel just a little bit each day. Through rain, wind, and difficult paths, they kept going, one small step at a time.",learning:"When {animalName} finally reached the magnificent Rainbow Falls after many weeks, they realized that the patient journey itself had been just as wonderful as the destination.",moralMessage:"Great things come to those who wait  and work while they wait"}],Honesty:[{introduction:"{animalName} the {animalType} lived in the {habitat} and was known for their {description} appearance and {specialAbility}.",challenge:"One day, {animalName} accidentally broke the community's special gathering place but was too embarrassed to admit it. They let another animal take the blame, but didn't feel good about it.",resolution:"After seeing the wrongly accused animal's sadness, {animalName} gathered their courage and told everyone the truth, offering to repair the damage.",learning:"To {animalName}'s surprise, the other animals appreciated their honesty and everyone worked together to make the gathering place even better than before.",moralMessage:"Honesty might not always be easy, but it's always the path to peace of mind"},{introduction:"The {description} {animalName} was admired by all the animals in the {habitat} for their amazing stories of adventure and bravery.",challenge:"The only problem was that {animalName} had made up most of these stories to seem impressive. As the tales grew bigger, keeping track of all the untruths became increasingly difficult.",resolution:"When {animalName} finally confessed that the stories weren't true, they feared everyone would be angry. Instead, the animals helped {animalName} plan a real adventure they could all experience together.",learning:"{animalName} discovered that living truthfully created genuine connections with friends who appreciated them for who they really were, not who they pretended to be.",moralMessage:"The truth may not always be what others want to hear, but it's always what they need to hear"}],Perseverance:[{introduction:"{animalName} the {animalType} dreamed of reaching the top of the highest mountain in the {habitat}, but everyone said it was impossible for a {animalType}.",challenge:"On the first attempt, {animalName} barely made it a quarter of the way before having to turn back. Many animals suggested giving up, saying some dreams are just too big.",resolution:"Instead of quitting, {animalName} trained a little each day, learning from each failure and trying new approaches until, step by determined step, they finally reached the summit.",learning:"Standing on top of the mountain, {animalName} realized that perseverance had not only achieved the goal but had made them stronger, wiser, and more confident along the way.",moralMessage:"Fall seven times, stand up eight  persistence is the path to achievement"},{introduction:"The {description} {animalName} had a special talent for creating beautiful things but always abandoned projects when they became difficult.",challenge:"{animalName} started building a bridge across the river that would help all the animals, but the project faced many setbacks  storms washed away their progress, materials broke, and some days it seemed hopeless.",resolution:"This time, instead of giving up, {animalName} kept going despite the challenges, rebuilding after each setback with new determination and learning from each mistake.",learning:"When the bridge was finally completed, {animalName} understood that the sweetest successes are those that come after overcoming the greatest difficulties.",moralMessage:"The difference between a stumbling block and a stepping stone is how you use it"}],Teamwork:[{introduction:"{animalName} the {animalType} was known in the {habitat} for preferring to do everything alone, believing that was the fastest and best way.",challenge:"When an enormous fallen tree blocked the main path to the water source, {animalName} tried to move it alone but couldn't budge it an inch, no matter how they used their {specialAbility}.",resolution:"Finally accepting help, {animalName} organized the animals into teams, each using their unique strengths. Together, they not only moved the tree but built a useful bridge from it.",learning:"Through this experience, {animalName} discovered that teamwork doesn't just solve problems faster  it creates better solutions that no single animal could have thought of alone.",moralMessage:"Alone we can do so little; together we can do so much"},{introduction:"In the beautiful {habitat}, {animalName} the {description} {animalType} and the other animals always competed against each other during the harvest season.",challenge:"This {season}, the harvest was particularly difficult due to unusual weather, and {animalName} realized that competing as individuals meant many would go hungry.",resolution:"{animalName} suggested that instead of each collecting for themselves, they could work as a team, with each animal handling the task they were best at  gathering, carrying, sorting, and storing.",learning:"The animals collected more than ever before and finished in record time, showing that when everyone contributes their special talents to a team, amazing things happen.",moralMessage:"Individual commitment to a group effort  that's what makes a team work"}],Curiosity:[{introduction:"{animalName} the {animalType} lived in the {habitat} and was always asking questions about everything, which sometimes annoyed the other animals who were content with what they already knew.",challenge:"A strange change in the {habitat} puzzled everyone  the water tasted different, plants were wilting, and no one knew why. While others worried, {animalName}'s curiosity led them to investigate.",resolution:"By asking questions and carefully observing, {animalName} discovered that something upstream was affecting their water. Their curious nature helped them find and fix the problem, saving their home.",learning:"The other animals realized that {animalName}'s curiosity wasn't just an annoying habit  it was a valuable gift that helped their whole community.",moralMessage:"The important thing is not to stop questioning; curiosity has its own reason for existing"},{introduction:"The {description} {animalName} was fascinated by the world beyond their {habitat}, always wondering what lay behind the distant hills.",challenge:"When strange new tracks appeared near their home, most animals fearfully avoided them. But {animalName}'s curiosity about who made the tracks was stronger than their fear.",resolution:"By carefully following the tracks, {animalName} discovered a lost young animal from a different species who needed help finding their family, leading to a wonderful new friendship.",learning:"{animalName} realized that curiosity, when balanced with caution, can lead to amazing discoveries and connections that fear would prevent us from finding.",moralMessage:"The cure for boredom is curiosity. There is no cure for curiosity  and that's a wonderful thing"}],Respect:[{introduction:"{animalName} the {animalType} thought their way of doing things in the {habitat} was the only right way, and often made fun of how different animals lived, ate, or built their homes.",challenge:"When a storm forced {animalName} to shelter with animals they'd previously mocked, they felt uncomfortable and out of place, experiencing for the first time how it felt to be the 'different' one.",resolution:"During their time together, {animalName} was surprised to discover clever ideas and valuable wisdom in the very differences they had once ridiculed.",learning:"{animalName} learned that respecting differences isn't just about being polite  it's about recognizing that diversity brings strength and wisdom to the whole community.",moralMessage:"Respect for others' differences opens doors to new understanding and friendship"},{introduction:"The {description} {animalName} lived in a part of the {habitat} where several different species of animals had their homes, each with their own customs and ways of life.",challenge:"Conflicts often arose because each group thought their ways were best. Water usage, noise levels, and territory boundaries became sources of tension and misunderstanding.",resolution:"{animalName} organized a gathering where each group could demonstrate their customs and explain why they were important, helping everyone understand the reasons behind the differences.",learning:"As respect grew between the groups, they began to appreciate each other's unique contributions to their shared environment, creating a community that was stronger because of its diversity.",moralMessage:"Treat everyone with respect, not because of who they are, but because of who you are"}],Creativity:[{introduction:"{animalName} the {animalType} lived in the {habitat} where everything was always done the same way, year after year, because 'that's how it's always been done.'",challenge:"When an unexpected change in the weather made their usual food scarce and their traditional shelters inadequate, the animals worried about how they would survive.",resolution:"While others panicked, {animalName} began experimenting with new food sources and shelter designs, combining ideas in ways no one had thought of before.",learning:"The community discovered that {animalName}'s creative thinking wasn't just fun  it was essential for adapting to new challenges and finding opportunities where others saw only problems.",moralMessage:"Creativity is intelligence having fun, and sometimes it's the key to survival too"},{introduction:"The {description} {animalName} was often told that their unusual ideas were a waste of time, but they couldn't stop imagining new possibilities.",challenge:"During a particularly harsh {season}, the traditional community gathering couldn't happen in its usual way, leaving everyone feeling sad and disconnected from each other.",resolution:"{animalName} used their creativity to design a completely new kind of celebration that would work despite the constraints, incorporating elements that honored tradition while embracing new possibilities.",learning:"The community realized that creativity wasn't just about making pretty things  it was about finding new paths forward when old ways no longer worked.",moralMessage:"Every child is an artist; the problem is staying an artist when you grow up"}],Gratitude:[{introduction:"{animalName} the {animalType} lived in the beautiful {habitat} but was always focusing on what they didn't have instead of appreciating what was all around them.",challenge:"When a temporary drought made the {habitat} less lush than usual, {animalName} complained more than ever, making themselves and everyone around them miserable.",resolution:"A wise old animal challenged {animalName} to find three things to be grateful for each day. At first it was difficult, but gradually {animalName} began noticing wonderful things they'd overlooked.",learning:"When the rains finally returned, {animalName} realized that their growing gratitude had already made their life richer, regardless of external circumstances.",moralMessage:"Gratitude turns what we have into enough and more"},{introduction:"The {description} {animalName} was always rushing from one thing to the next in the busy {habitat}, rarely pausing to notice or appreciate the small wonders of each day.",challenge:"After hurting their leg and being forced to slow down, {animalName} felt frustrated and useless, seeing their temporary disability as nothing but a burden.",resolution:"With no choice but to move slowly, {animalName} began noticing details they'd missed before  the intricate pattern of leaves, the kindness of neighbors, the peaceful beauty of sunrise.",learning:"By the time they healed, {animalName} had developed a habit of gratitude that transformed ordinary days into extraordinary ones, simply by paying attention and giving thanks.",moralMessage:"The more you are thankful for what you have, the more you will have to be thankful for"}],Adventure:[{introduction:"{animalName} the {animalType} had lived in the same small corner of the {habitat} their entire life, following the same routine every day and never straying from familiar paths.",challenge:"When a mysterious map appeared showing a route to a legendary place, {animalName} felt a strange urge to explore despite their fears of the unknown and the comfortable safety of home.",resolution:"Gathering their courage, {animalName} set off on an journey filled with challenges that tested their {specialAbility}, introduced them to new friends, and revealed strengths they never knew they had.",learning:"Even after returning home, {animalName} was changed by their adventure, bringing back not just stories but a new confidence and openness to life's possibilities.",moralMessage:"Adventure may hurt you, but monotony will kill you"},{introduction:"The {description} {animalName} loved reading about exciting adventures but always found reasons why they couldn't have their own  it was too risky, they weren't prepared enough, or it wasn't the right time.",challenge:"When their home in the {habitat} was threatened, the only solution lay across unfamiliar terrain that {animalName} would have to navigate, facing their fears of the unknown.",resolution:"With each step beyond their comfort zone, {animalName} discovered that they were more capable than they thought, finding joy in new experiences and unexpected beauty in unfamiliar places.",learning:"{animalName} realized that while planning and preparation have their place, sometimes the greatest adventures begin with a single brave step into the unknown.",moralMessage:"Life is either a daring adventure or nothing at all"}],Nature:[{introduction:"{animalName} the {animalType} lived in the beautiful {habitat} but had started taking their home for granted, forgetting to care for it properly.",challenge:"Gradually, {animalName} noticed changes  fewer flowers bloomed, the water wasn't as clear, and some animal friends had moved away. Something was happening to their beloved home.",resolution:"Determined to make a difference, {animalName} began small acts of stewardship  planting seeds, clearing debris from the stream, and teaching young animals about respecting their environment.",learning:"As the {habitat} slowly renewed itself, {animalName} understood that nature's gifts require our care and protection, and that even small actions can make a meaningful difference.",moralMessage:"We don't inherit the earth from our ancestors; we borrow it from our children"},{introduction:"The {description} {animalName} had always been fascinated by the incredible web of life in their {habitat}  how each plant, insect, and animal played an important role.",challenge:"When newcomers to the area began changing the landscape without understanding these connections, {animalName} worried about the balance being disrupted but wasn't sure how to explain its importance.",resolution:"{animalName} created a special tour that showed how everything was connected  how certain plants fed insects that pollinated flowers that produced fruits that fed animals who scattered seeds.",learning:"Both {animalName} and the newcomers gained a deeper appreciation for the delicate balance of nature and how each creature, no matter how small, has an essential role to play.",moralMessage:"In nature, nothing exists alone"}],Dreams:[{introduction:"{animalName} the {animalType} had a dream that seemed impossible  something no {animalType} had ever done before. Many animals in the {habitat} told them to be realistic and focus on ordinary goals.",challenge:"Despite discouragement, {animalName} couldn't let go of their dream, but finding a path forward seemed impossible with so many obstacles and so little support from others.",resolution:"By breaking their big dream into smaller steps and finding the few supportive friends who believed in possibilities, {animalName} made slow but steady progress toward what once seemed impossible.",learning:"{animalName} discovered that dreams aren't just pleasant fantasies  they're the vision of what could be that gives us direction and purpose, even when the journey is difficult.",moralMessage:"A dream doesn't become reality through magic; it takes determination and hard work"},{introduction:"The {description} {animalName} had vivid dreams at night of flying high above the {habitat}, seeing wonders no other animal had ever witnessed.",challenge:"During the day, {animalName} tried to describe these magnificent visions to others, but many animals dismissed them as silly or impossible, making {animalName} doubt the value of their dreams.",resolution:"Instead of giving up on their dreams, {animalName} began expressing them through art, creating beautiful images that inspired other animals to share their own dreams and visions.",learning:"Through this experience, {animalName} and their community learned that dreams  whether sleeping or waking  expand our sense of what's possible and connect us to our deepest hopes.",moralMessage:"All our dreams can come true if we have the courage to pursue them"}]};function eZ(t){if(Ob[t]&&Ob[t].length>0){const n=Ob[t];return n[Math.floor(Math.random()*n.length)]}const e={Discovery:{introduction:"Deep in the {habitat}, {animalName} the {description} {animalType} was always searching for something new to learn about.",challenge:"While exploring a part of the {habitat} they'd never seen before, {animalName} discovered something unusual and mysterious that no one could explain.",resolution:"With careful observation and help from wise friends, {animalName} solved the mystery, revealing something wonderful that would help all the animals.",learning:"The experience taught {animalName} that new discoveries happen when we're brave enough to explore beyond what we already know.",moralMessage:"The greatest discoveries often come from having the courage to venture into the unknown"},Imagination:{introduction:"{animalName} the {animalType} was known throughout the {habitat} for having the most extraordinary imagination and telling the most fantastic stories.",challenge:"When the other animals became too focused on their daily routines and forgot how to play and dream, the {habitat} became a dull place lacking in color and joy.",resolution:"{animalName} created an amazing imaginative game that reminded everyone how to see the magic in everyday things, bringing back wonder and creativity.",learning:"The animals realized that imagination isn't just for funit helps them solve problems in new ways and makes life more beautiful and interesting.",moralMessage:"Imagination is the doorway to possibilities that logical thinking alone might never discover"},Empathy:{introduction:"In the diverse community of the {habitat}, {animalName} the {animalType} had a special gift for understanding how others felt just by looking in their eyes.",challenge:"A newcomer to the {habitat} was acting unkindly, and the other animals wanted to exclude them. {animalName} sensed there was more to the story than everyone realized.",resolution:"By spending time with the newcomer, {animalName} discovered they were scared and lonely, helping them express their feelings and connect with the community in a better way.",learning:"{animalName} showed everyone that understanding others' feelings helps turn potential enemies into friends and creates stronger communities.",moralMessage:"When we try to understand how others feel, magical connections can happen"},Wisdom:{introduction:"{animalName} the {animalType} was younger than most animals in the {habitat} but was always asking questions that made even the oldest animals think deeply.",challenge:"A difficult situation arose that divided the community, with different groups of animals arguing about the best solution, each convinced they were right.",resolution:"Instead of picking sides, {animalName} listened to everyone and found the valuable truth in each perspective, helping create a solution that combined the best ideas.",learning:"The animals learned from {animalName} that true wisdom often comes not from knowing all the answers but from asking good questions and listening with an open heart.",moralMessage:"Wisdom is found not in having all the answers, but in being willing to consider all possibilities"},Joy:{introduction:"Even on gloomy days in the {habitat}, {animalName} the {animalType} could always find something to be happy about, spreading cheer wherever they went.",challenge:"After a long, difficult season, many animals became grumpy and stopped appreciating the good things they still had, focusing only on their problems.",resolution:"{animalName} organized a celebration of little joys, helping each animal rediscover simple pleasures like fresh berries, cool breezes, and the laughter of friends.",learning:"The community discovered that joy isn't just something that happens to youit's a way of seeing the world that you can choose even during difficult times.",moralMessage:"Joy can be found in any circumstance if we take time to notice the small wonders around us"}};return e[t]?e[t]:{introduction:"Once upon a time in a beautiful land, there lived a special animal named {animalName} the {animalType}, who was known for being very {description}.",challenge:"One day, something unusual happened that presented {animalName} with a difficult challenge. It wasn't going to be easy to solve this problem.",resolution:"After much thought and effort, {animalName} found a creative solution by using their {specialAbility} in a way they never had before.",learning:"Through this experience, {animalName} learned an important lesson about life and about themselves.",moralMessage:"The most valuable lessons often come from our greatest challenges"}}const v2=[{id:1,content:`Once upon a time, as {timeOfDay} settled over the {habitat}, there lived a {description} {animalType} named {animalName}. {animalName} was known throughout the land for their {specialAbility}, which made them quite special among all the animals.

It was a beautiful {season} evening, with {weather} creating a magical atmosphere. {childName} was just about to fall asleep when they noticed a gentle tapping at their window. Curious, they peeked through the curtains to find {animalName} the {animalType} looking back at them with bright, intelligent eyes.

"Hello, {childName}," said {animalName} in a soft voice. "I've come to share an adventure with you. Would you like to join me tonight?"

{childName} couldn't believe their ears! A talking {animalType}! And one that knew their name! Without hesitation, {childName} nodded excitedly.

"Wonderful," {animalName} {sound}. "Hold my paw and close your eyes. When you open them, you'll be in my world."

{childName} did as they were told, and when they opened their eyes, they found themselves in the most beautiful {habitat} they had ever seen. It was filled with twinkling lights, whispering trees, and the gentle sounds of nature at night.

"{plotIntro}" explained {animalName} as they led {childName} along a moonlit path.

As they walked, {animalName} shared a fascinating fact: "{funFact}." {childName} was amazed by this information and eager to learn more about their new friend.

The path took them deeper into the {habitat}, where the trees grew taller and the moonlight created dancing patterns on the ground. {animalName} {sound} and pointed ahead to a small clearing.

"{plotChallenge}" {animalName} said, looking worried.

{childName} thought for a moment. "Maybe I can help," they offered, feeling brave in this magical place.

Together, {childName} and {animalName} approached the challenge. It wasn't going to be easy, but {childName} noticed how {animalName} used their {specialAbility} in clever ways. They worked side by side, using both human creativity and animal wisdom.

At one particularly difficult moment, {animalName} {sound} and said, "Remember, {childName}, sometimes the biggest challenges bring the greatest rewards."

After much effort and teamwork, they finally succeeded! {plotResolution}

Sitting together under a canopy of stars, {animalName} turned to {childName} with wise eyes. "{plotLearning}"

{childName} nodded thoughtfully, understanding the important lesson. They spent the rest of the evening exploring the magical {habitat}, meeting {animalName}'s friends, and learning about life in this special place.

As the first light of dawn began to appear on the horizon, {animalName} led {childName} back to the path where they had first arrived.

"It's time for you to return home now," said {animalName} gently. "But remember what you learned tonight, and know that whenever you dream, I'll be waiting to share new adventures with you."

{childName} gave {animalName} a warm hug, grateful for the adventure and the friendship. "I'll remember everything," they promised.

Once more, {childName} closed their eyes, and when they opened them, they were back in their own bedroom, tucked safely in bed. Was it all just a dream? Perhaps. But on the windowsill sat a small, perfect leaf from the {habitat}, sparkling with just a touch of magic  a reminder that some dreams are more real than they seem.`},{id:2,content:`In the heart of a {description} {habitat}, where {weather} created a magical atmosphere during {timeOfDay}, lived a remarkable {animalType} named {animalName}. Unlike other {animalType}s, {animalName} possessed an extraordinary {specialAbility} that made the other animals watch in wonder.

One {season} evening, as {childName} was drifting off to sleep, a gentle breeze carried the sweet scent of adventure through their window. Suddenly, the bedroom was filled with a soft, shimmering light, and there stood {animalName} the {animalType}, eyes twinkling with mischief and magic.

"Are you asleep yet, {childName}?" whispered {animalName}.

{childName} rubbed their eyes in disbelief. "I must be dreaming," they murmured.

{animalName} {sound}. "Dreams are just another kind of adventure," they said with a smile. "Would you like to join me in the Whisper Woods tonight? There's something important happening, and I could use a human friend's help."

Before {childName} could fully process what was happening, they found themselves transported to an enchanted forest, where flowers glowed like tiny lanterns and trees swayed in greeting.

"Welcome to my home," said {animalName} proudly. "Did you know that {funFact}? That's how I found you  I could sense you were the perfect friend for tonight's adventure."

As they ventured deeper into the magical woodland, {animalName} explained the situation. "{plotIntro}"

{childName} listened carefully, feeling both excitement and a little nervousness about the adventure ahead. The forest grew denser, and the path narrowed until they reached a moonlit clearing where several other animals had gathered, all looking worried.

"Here's what's happening," {animalName} explained to everyone. "{plotChallenge}"

The animals all began talking at once, suggesting different solutions, but none seemed quite right. {childName} sat quietly, observing everything carefully. They noticed patterns and possibilities that the animals, with their different way of seeing the world, had missed.

"I think I might have an idea," {childName} said shyly.

All the animals turned to look at the human child in their midst. {animalName} {sound} encouragingly.

"Go on, {childName}," they urged. "Sometimes the freshest perspective comes from someone new."

Gathering their courage, {childName} explained their plan. It would require everyone's help, using each animal's unique abilities in creative ways. {animalName} would need to use their {specialAbility} at just the right moment.

Working together through the night, the animals and {childName} implemented the plan. There were moments of doubt and difficulty, times when it seemed like they might fail, but {animalName} kept everyone's spirits up.

"Even in the darkest forest," {animalName} would say, "the moonlight finds a way to shine through."

Finally, after much effort and teamwork, success! {plotResolution}

The animals celebrated joyfully, thanking {childName} for their help. As they shared a feast of forest fruits and honey, {animalName} took {childName} aside.

"You've learned something important tonight, haven't you?" asked the wise {animalType}.

{childName} nodded thoughtfully. "{plotLearning}"

{animalName} {sound} with approval. "That's exactly right. And that's why I chose you for this adventure."

As the night began to fade into dawn, {animalName} led {childName} back through the forest. The path seemed to shimmer beneath their feet, sprinkled with morning dew and magic.

"Will I ever see you again?" {childName} asked, not wanting the adventure to end.

"Look for me in your dreams," {animalName} replied gently. "And remember, the most magical adventures often happen right where you are, if you only look at the world with wonder."

With one last nuzzle, {animalName} {sound} farewell, and {childName} found themselves back in their bed, just as the first rays of sunlight peeked through the curtains.

On their bedside table sat a small, perfect feather (or leaf, or stone) that certainly hadn't been there the night before  a small token from a magical {habitat}, and a reminder that some dreams are more than just dreams.`},{id:3,content:`In a land not so far away, where {weather} painted the skies during {timeOfDay}, there lived a most unusual {animalType}. This {animalType}, named {animalName}, had {description} features and a heart full of wonder. What made {animalName} truly special was their remarkable {specialAbility}, which they used to help all the creatures of the {habitat}.

It was a {season} night when the stars seemed to dance especially brightly over {childName}'s home. Unable to sleep, {childName} was gazing out their window when something extraordinary caught their eye  a trail of softly glowing footprints leading from their garden into the woods beyond.

Curiosity overcame caution, and {childName} slipped out of bed, put on their slippers, and followed the mysterious trail. The footprints led to an ancient oak tree where, to {childName}'s amazement, {animalName} the {animalType} sat waiting.

"I've been hoping you'd come," said {animalName}, eyes gleaming with intelligence. "I've been watching you for some time, {childName}, and I think you're exactly who we need tonight."

{childName} gasped. "You can talk! And... you know my name?"

{animalName} {sound} softly. "There's much more magic in the world than most humans remember to see. Tonight, I need to show you something important. Will you trust me?"

Hesitantly at first, then with growing excitement, {childName} nodded. {animalName} touched their nose to {childName}'s hand, and suddenly the world around them transformed. The trees grew taller, the flowers brighter, and {childName} could understand the whispers of the wind and the conversations of crickets.

As they journeyed through this enchanted version of the familiar woods, {animalName} shared incredible knowledge: "{funFact}" they explained, as they navigated by starlight.

Soon they reached a beautiful meadow bathed in moonlight, where animals of all kinds had gathered in a circle. They fell silent as {animalName} and {childName} approached.

"Friends," announced {animalName}, "this is {childName}, the human child I told you about. {childName}, these are the Guardians of the {habitat}."

An elderly owl nodded respectfully. "Welcome, young one. {animalName} believes you can help us, and we trust their judgment."

{animalName} explained to {childName}, "{plotIntro}"

The assembled animals looked worried as {animalName} continued, "{plotChallenge}"

{childName} felt the weight of the animals' hopes resting on their shoulders. It was both frightening and exciting to be needed this way. Together with {animalName}, they began to form a plan, combining human ingenuity with animal wisdom.

The night grew deep as they worked. At times, {animalName} would use their {specialAbility} in ways that amazed {childName}, while {childName} contributed ideas that would never have occurred to the animals.

"Humans and animals see the world so differently," {animalName} observed. "That's why we need both perspectives to solve this problem."

After facing many challenges and overcoming unexpected obstacles, they finally succeeded. {plotResolution}

As dawn approached and the animals celebrated their triumph, {animalName} took {childName} to a quiet spot beside a gently flowing stream.

"There's a reason I chose you for this adventure," {animalName} said softly. "{plotLearning}"

{childName} felt something shift inside them  a new understanding that they would carry forever.

"It's time to go home now," {animalName} said as the first golden rays of sunrise touched the trees. "But this connection between us remains. Whenever you see a {animalType} or visit the woods, remember tonight."

{animalName} {sound} gently and touched their nose to {childName}'s forehead. In a swirl of morning mist, {childName} found themselves back in their own garden, wondering if it had all been just an elaborate dream.

But in their pocket was a small token  a perfect acorn cap filled with what looked like stardust  proof that some dreams walk the line between imagination and reality, especially on magical nights when the barrier between worlds grows thin.`}];function tZ(){return v2[Math.floor(Math.random()*v2.length)]}function nZ(t,e,n){const r=Zq(e),i=eZ(n),s=tZ(),o=[`${t} and the ${r.description} ${e}`,`The ${n} ${e}`,`${r.name} the ${e}'s ${n} Adventure`,`A Magical Night with ${r.name} the ${e}`,`${t}'s Dream Journey with ${r.name}`],a=o[Math.floor(Math.random()*o.length)],l=rZ(t,r,i,s);return{title:a,content:l,childName:t,animal:e,theme:n}}function rZ(t,e,n,r){let i=r.content.replace(/\{childName\}/g,t).replace(/\{animalName\}/g,e.name).replace(/\{animalType\}/g,e.type).replace(/\{animalDescription\}/g,e.description).replace(/\{habitat\}/g,e.habitat).replace(/\{specialAbility\}/g,e.specialAbility).replace(/\{funFact\}/g,e.funFact).replace(/\{plotIntro\}/g,n.introduction).replace(/\{plotChallenge\}/g,n.challenge).replace(/\{plotResolution\}/g,n.resolution).replace(/\{plotLearning\}/g,n.learning).replace(/\{timeOfDay\}/g,sZ()).replace(/\{weather\}/g,oZ()).replace(/\{season\}/g,aZ());return i=iZ(i,e),i+=`

As ${t}'s eyes grew heavy, they knew that the lesson of ${e.name} the ${e.type} would stay with them forever: ${n.moralMessage}.

And as they drifted off to sleep, ${t} could almost hear ${e.name} whispering, "Sweet dreams, my friend. Until our next adventure."`,i}function iZ(t,e){const n="{sound}";if(!t.includes(n))return t;const i={Rabbit:["thumped their foot","sniffled quietly","made a soft purring sound"],Fox:["yipped excitedly","let out a quiet bark","made a gentle chattering sound"],Bear:["growled softly","let out a gentle huff","rumbled deeply"],Owl:["hooted softly","made a gentle 'who-who' sound","clicked their beak"],Elephant:["trumpeted happily","let out a gentle rumble","flapped their ears with a whoosh"],Lion:["purred deeply","let out a gentle roar","swished their tail with pride"],Turtle:["made a soft clicking sound","retracted slightly into their shell","blinked slowly and deliberately"],Wolf:["howled softly","let out a gentle whine","nuzzled closer"],Giraffe:["made a gentle humming sound","blinked their long eyelashes","swished their tail"],Koala:["made a gentle grunting sound","let out a soft cough","munched sleepily on a eucalyptus leaf"],Tiger:["made a chuffing sound","swished their striped tail","let out a gentle growl"],Penguin:["let out a gentle squawk","flapped their flippers excitedly","waddled happily"],Squirrel:["chittered excitedly","flicked their bushy tail","made a soft clicking sound"],Hedgehog:["snuffled quietly","made their quills stand up slightly","let out a tiny sneeze"],Panda:["munched contentedly","made a gentle bleating sound","rolled playfully"],Dolphin:["clicked happily","let out a series of gentle whistles","splashed playfully"],Monkey:["hooted softly","made a gentle chattering sound","scratched their head thoughtfully"]}[e.type]||["made a gentle sound","looked on thoughtfully","moved closer"];for(;t.includes(n);){const s=i[Math.floor(Math.random()*i.length)];t=t.replace(n,s)}return t}function sZ(){const t=["sunset","twilight","dusk","evening","nighttime","midnight","under the moonlight","as stars twinkled above","as the moon rose high","in the gentle darkness"];return t[Math.floor(Math.random()*t.length)]}function oZ(){const t=["a clear, starry night","a gentle breeze","soft moonlight","a sky full of stars","silver moonbeams","twinkling starlight","a peaceful night","quiet stillness","gentle night sounds","the soft hooting of owls","the gentle rustling of leaves"];return t[Math.floor(Math.random()*t.length)]}function aZ(){const t=["spring","summer","autumn","winter"];return t[Math.floor(Math.random()*t.length)]}const Qo=({animal:t,className:e})=>{const n=T.useMemo(()=>{const i={Rabbit:"#FFB6C1",Fox:"#FF7F50",Bear:"#8B4513",Owl:"#DEB887",Elephant:"#B0C4DE",Lion:"#DAA520",Turtle:"#32CD32",Wolf:"#708090",Giraffe:"#F4A460",Koala:"#A9A9A9",Tiger:"#FF8C00",Penguin:"#4682B4",Squirrel:"#CD853F",Hedgehog:"#BDB76B",Panda:"#000000",Dolphin:"#87CEEB",Monkey:"#A0522D",Dragon:"#FF4500",Unicorn:"#E6E6FA",Butterfly:"#FF69B4",Octopus:"#9932CC",Dinosaur:"#228B22",default:"#9370DB"};return i[t]||i.default},[t]),r=()=>{switch(t.toLowerCase()){case"rabbit":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("ellipse",{cx:"50",cy:"65",rx:"25",ry:"30"}),b.jsx("ellipse",{cx:"35",cy:"30",rx:"10",ry:"25",transform:"rotate(-20, 35, 30)"}),b.jsx("ellipse",{cx:"65",cy:"30",rx:"10",ry:"25",transform:"rotate(20, 65, 30)"}),b.jsx("circle",{cx:"40",cy:"60",r:"3",fill:"black"}),b.jsx("circle",{cx:"60",cy:"60",r:"3",fill:"black"}),b.jsx("ellipse",{cx:"50",cy:"68",rx:"6",ry:"4",fill:"pink"}),b.jsx("circle",{cx:"50",cy:"85",r:"5",fill:"white"})]});case"fox":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("path",{d:"M50,20 L30,50 L20,90 L50,75 L80,90 L70,50 Z"}),b.jsx("polygon",{points:"30,50 20,20 40,40"}),b.jsx("polygon",{points:"70,50 80,20 60,40"}),b.jsx("circle",{cx:"40",cy:"60",r:"3",fill:"black"}),b.jsx("circle",{cx:"60",cy:"60",r:"3",fill:"black"}),b.jsx("path",{d:"M45,70 Q50,75 55,70",stroke:"black",strokeWidth:"2",fill:"none"})]});case"bear":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("circle",{cx:"50",cy:"60",r:"30"}),b.jsx("circle",{cx:"25",cy:"35",r:"12"}),b.jsx("circle",{cx:"75",cy:"35",r:"12"}),b.jsx("circle",{cx:"40",cy:"55",r:"3",fill:"black"}),b.jsx("circle",{cx:"60",cy:"55",r:"3",fill:"black"}),b.jsx("ellipse",{cx:"50",cy:"65",rx:"8",ry:"5"}),b.jsx("ellipse",{cx:"50",cy:"77",rx:"5",ry:"3",fill:"black"})]});case"owl":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("circle",{cx:"50",cy:"50",r:"30"}),b.jsx("circle",{cx:"35",cy:"40",r:"10",fill:"white"}),b.jsx("circle",{cx:"65",cy:"40",r:"10",fill:"white"}),b.jsx("circle",{cx:"35",cy:"40",r:"5",fill:"black"}),b.jsx("circle",{cx:"65",cy:"40",r:"5",fill:"black"}),b.jsx("path",{d:"M40,60 Q50,70 60,60",fill:"orange"}),b.jsx("path",{d:"M30,25 L40,35",stroke:"black",strokeWidth:"2"}),b.jsx("path",{d:"M70,25 L60,35",stroke:"black",strokeWidth:"2"})]});case"dragon":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("path",{d:"M50,20 C60,15 70,25 75,30 C85,35 85,45 80,55 C75,65 65,75 50,75 C35,75 25,65 20,55 C15,45 15,35 25,30 C30,25 40,15 50,20"}),b.jsx("path",{d:"M25,30 L15,10 L30,25",fill:"none",stroke:n,strokeWidth:"2"}),b.jsx("path",{d:"M75,30 L85,10 L70,25",fill:"none",stroke:n,strokeWidth:"2"}),b.jsx("circle",{cx:"40",cy:"45",r:"3",fill:"yellow"}),b.jsx("circle",{cx:"60",cy:"45",r:"3",fill:"yellow"}),b.jsx("path",{d:"M45,60 Q50,65 55,60",stroke:"black",strokeWidth:"2",fill:"none"}),b.jsx("path",{d:"M50,75 L60,95 L40,95 Z"})]});case"unicorn":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("ellipse",{cx:"50",cy:"65",rx:"30",ry:"15"}),b.jsx("circle",{cx:"30",cy:"65",r:"5"}),b.jsx("circle",{cx:"70",cy:"65",r:"5"}),b.jsx("ellipse",{cx:"65",cy:"45",rx:"20",ry:"10"}),b.jsx("path",{d:"M50,30 L50,5",stroke:n,strokeWidth:"4"}),b.jsx("circle",{cx:"72",cy:"42",r:"3",fill:"black"}),b.jsx("path",{d:"M58,50 Q62,55 66,50",stroke:"black",strokeWidth:"1",fill:"none"}),b.jsx("path",{d:"M30,65 L30,80",stroke:n,strokeWidth:"3"}),b.jsx("path",{d:"M70,65 L70,80",stroke:n,strokeWidth:"3"}),b.jsx("path",{d:"M40,65 L40,80",stroke:n,strokeWidth:"3"}),b.jsx("path",{d:"M60,65 L60,80",stroke:n,strokeWidth:"3"}),b.jsx("path",{d:"M75,40 C85,30 65,20 55,30",fill:"none",stroke:n,strokeWidth:"2"})]});case"butterfly":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("path",{d:"M50,50 C30,30 10,40 30,60 C10,80 30,90 50,70 C70,90 90,80 70,60 C90,40 70,30 50,50"}),b.jsx("path",{d:"M50,40 L50,80",stroke:"black",strokeWidth:"2"}),b.jsx("circle",{cx:"50",cy:"35",r:"5"}),b.jsx("circle",{cx:"47",cy:"32",r:"2",fill:"black"}),b.jsx("circle",{cx:"53",cy:"32",r:"2",fill:"black"}),b.jsx("path",{d:"M48,38 Q50,40 52,38",stroke:"black",strokeWidth:"1",fill:"none"})]});case"octopus":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("circle",{cx:"50",cy:"40",r:"20"}),b.jsx("path",{d:"M40,55 C20,65 30,85 35,95",fill:"none",stroke:n,strokeWidth:"4"}),b.jsx("path",{d:"M45,58 C30,75 40,85 35,95",fill:"none",stroke:n,strokeWidth:"4"}),b.jsx("path",{d:"M50,60 C50,75 45,85 50,95",fill:"none",stroke:n,strokeWidth:"4"}),b.jsx("path",{d:"M55,58 C70,75 60,85 65,95",fill:"none",stroke:n,strokeWidth:"4"}),b.jsx("path",{d:"M60,55 C80,65 70,85 65,95",fill:"none",stroke:n,strokeWidth:"4"}),b.jsx("circle",{cx:"40",cy:"35",r:"5",fill:"white"}),b.jsx("circle",{cx:"60",cy:"35",r:"5",fill:"white"}),b.jsx("circle",{cx:"40",cy:"35",r:"2",fill:"black"}),b.jsx("circle",{cx:"60",cy:"35",r:"2",fill:"black"})]});case"dinosaur":return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("path",{d:"M20,65 L40,65 L45,55 L75,55 L85,45 L80,30 L60,30 L50,40 L20,40 Z"}),b.jsx("circle",{cx:"70",cy:"35",r:"3",fill:"black"}),b.jsx("path",{d:"M65,45 Q70,50 75,45",stroke:"black",strokeWidth:"1",fill:"none"}),b.jsx("path",{d:"M20,65 L20,85 L30,85 L30,65",fill:"none",stroke:n,strokeWidth:"4"}),b.jsx("path",{d:"M40,65 L40,85 L50,85 L50,65",fill:"none",stroke:n,strokeWidth:"4"}),b.jsx("path",{d:"M80,30 L90,20 L85,30"}),b.jsx("path",{d:"M20,40 L10,20 L15,40"})]});default:return b.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",fill:n,children:[b.jsx("circle",{cx:"50",cy:"50",r:"35"}),b.jsx("circle",{cx:"35",cy:"40",r:"5",fill:"black"}),b.jsx("circle",{cx:"65",cy:"40",r:"5",fill:"black"}),b.jsx("path",{d:"M40,65 Q50,75 60,65",stroke:"black",strokeWidth:"2",fill:"none"})]})}};return b.jsx("div",{className:jt("w-36 h-36",e),children:r()})},lZ=su.object({childName:su.string().min(2,{message:"Name must be at least 2 characters."}).max(30,{message:"Name can't be longer than 30 characters."}),animal:su.string({required_error:"Please select an animal."}),theme:su.string({required_error:"Please select a theme."})}),cZ=["Rabbit","Fox","Bear","Owl","Elephant","Lion","Turtle","Wolf","Giraffe","Koala","Tiger","Penguin","Squirrel","Hedgehog","Panda","Dolphin","Monkey","Dragon","Unicorn","Butterfly","Octopus","Dinosaur"],uZ=["Kindness","Courage","Friendship","Sharing","Patience","Honesty","Perseverance","Teamwork","Curiosity","Respect","Creativity","Gratitude","Adventure","Nature","Dreams","Discovery","Imagination","Empathy","Wisdom","Joy"],dZ=({onStoryGenerated:t})=>{const[e,n]=T.useState(null),[r,i]=T.useState(!1),s=nA({resolver:rA(lZ),defaultValues:{childName:"",animal:"",theme:""}}),o=a=>{i(!0),setTimeout(()=>{const l=nZ(a.childName,a.animal,a.theme);t(l),i(!1)},1500)};return b.jsxs(Yu,{className:"mb-12",children:[b.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-primary mb-6 text-center",children:"Create a Magical Bedtime Story"}),b.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[b.jsx("div",{className:"md:w-1/3 flex justify-center items-start",children:b.jsx(Qo,{animal:e||"default"})}),b.jsx("div",{className:"md:w-2/3",children:b.jsx(oA,{...s,children:b.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-6",children:[b.jsx(to,{control:s.control,name:"childName",render:({field:a})=>b.jsxs(Es,{children:[b.jsx(Ts,{className:"text-lg",children:"Child's Name"}),b.jsx(As,{children:b.jsx(Du,{placeholder:"Enter child's name",className:"text-lg p-6",...a})}),b.jsx(Cs,{})]})}),b.jsx(to,{control:s.control,name:"animal",render:({field:a})=>b.jsxs(Es,{children:[b.jsx(Ts,{className:"text-lg",children:"Favorite Animal"}),b.jsxs(Vp,{onValueChange:l=>{a.onChange(l),n(l)},value:a.value,children:[b.jsx(As,{children:b.jsx(Ef,{className:"text-lg p-6",children:b.jsx(jp,{placeholder:"Select an animal"})})}),b.jsx(Tf,{children:cZ.map(l=>b.jsx(Po,{value:l,className:"text-lg",children:l},l))})]}),b.jsx(Cs,{})]})}),b.jsx(to,{control:s.control,name:"theme",render:({field:a})=>b.jsxs(Es,{children:[b.jsx(Ts,{className:"text-lg",children:"Story Theme"}),b.jsxs(Vp,{onValueChange:a.onChange,value:a.value,children:[b.jsx(As,{children:b.jsx(Ef,{className:"text-lg p-6",children:b.jsx(jp,{placeholder:"Select a theme"})})}),b.jsx(Tf,{children:uZ.map(l=>b.jsx(Po,{value:l,className:"text-lg",children:l},l))})]}),b.jsx(Cs,{})]})}),b.jsx(Cn,{type:"submit",size:"lg",className:"w-full text-lg p-6",disabled:r,children:r?"Creating Story...":"Generate Bedtime Story"})]})})})]})]})},fZ=({story:t})=>{const e=T.useRef(null);T.useEffect(()=>{e.current&&e.current.focus()},[]);const n=t.content.split(`
`).filter(r=>r.trim()!=="");return b.jsx("div",{ref:e,className:"hidden print-only",tabIndex:-1,children:b.jsxs("div",{className:"py-8 px-6",children:[b.jsxs("header",{className:"text-center mb-8",children:[b.jsx("div",{className:"flex justify-center mb-4",children:b.jsx(Qo,{animal:t.animal,className:"w-16 h-16"})}),b.jsx("h1",{className:"text-3xl font-bold mb-2",children:t.title}),b.jsxs("p",{className:"text-sm",children:["A personalized bedtime story for ",t.childName]})]}),b.jsx("div",{className:"prose max-w-none",children:n.map((r,i)=>b.jsx("p",{className:"mb-4",children:r},i))}),b.jsxs("footer",{className:"mt-8 text-center text-sm",children:[b.jsxs("p",{children:[" ",new Date().getFullYear()," Dreamy Tales"]}),b.jsxs("p",{className:"mt-1",children:["Sweet dreams, ",t.childName,"!"]})]})]})})},wA=T.createContext({});function SA(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const Z_=T.createContext(null),bA=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class hZ extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pZ({children:t,isPresent:e}){const n=T.useId(),r=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=T.useContext(bA);return T.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),b.jsx(hZ,{isPresent:e,childRef:r,sizeRef:i,children:T.cloneElement(t,{ref:r})})}const mZ=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=SA(gZ),l=T.useId(),c=T.useCallback(h=>{a.set(h,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),u=T.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),c]:[n,c]);return T.useMemo(()=>{a.forEach((h,p)=>a.set(p,!1))},[n]),T.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=b.jsx(pZ,{isPresent:n,children:t})),b.jsx(Z_.Provider,{value:u,children:t})};function gZ(){return new Map}function UB(t=!0){const e=T.useContext(Z_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=T.useId();T.useEffect(()=>{t&&i(s)},[t]);const o=T.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const ry=t=>t.key||"";function y2(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const MA=typeof window<"u",BB=MA?T.useLayoutEffect:T.useEffect,x0=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=UB(o),c=T.useMemo(()=>y2(t),[t]),u=o&&!a?[]:c.map(ry),h=T.useRef(!0),p=T.useRef(c),m=SA(()=>new Map),[v,y]=T.useState(c),[x,g]=T.useState(c);BB(()=>{h.current=!1,p.current=c;for(let E=0;E<x.length;E++){const R=ry(x[E]);u.includes(R)?m.delete(R):m.get(R)!==!0&&m.set(R,!1)}},[x,u.length,u.join("-")]);const _=[];if(c!==v){let E=[...c];for(let R=0;R<x.length;R++){const I=x[R],C=ry(I);u.includes(C)||(E.splice(R,0,I),_.push(I))}s==="wait"&&_.length&&(E=_),g(y2(E)),y(c);return}const{forceRender:S}=T.useContext(wA);return b.jsx(b.Fragment,{children:x.map(E=>{const R=ry(E),I=o&&!a?!1:c===x||u.includes(R),C=()=>{if(m.has(R))m.set(R,!0);else return;let D=!0;m.forEach(L=>{L||(D=!1)}),D&&(S==null||S(),g(p.current),o&&(l==null||l()),r&&r())};return b.jsx(mZ,{isPresent:I,initial:!h.current||n?void 0:!1,custom:I?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:I?void 0:C,children:E},R)})})},is=t=>t;let uE=is;function EA(t){let e;return()=>(e===void 0&&(e=t()),e)}const qf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ia=t=>t*1e3,La=t=>t/1e3,vZ={skipAnimations:!1,useManualTiming:!1};function yZ(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const m=h&&r?e:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const iy=["read","resolveKeyframes","update","preRender","render","postRender"],xZ=40;function zB(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=iy.reduce((g,_)=>(g[_]=yZ(s),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:p}=o,m=()=>{const g=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(g-i.timestamp,xZ),1),i.timestamp=g,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},v=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:iy.reduce((g,_)=>{const S=o[_];return g[_]=(E,R=!1,I=!1)=>(n||v(),S.schedule(E,R,I)),g},{}),cancel:g=>{for(let _=0;_<iy.length;_++)o[iy[_]].cancel(g)},state:i,steps:o}}const{schedule:Un,cancel:sc,state:zr,steps:Fb}=zB(typeof requestAnimationFrame<"u"?requestAnimationFrame:is,!0),VB=T.createContext({strict:!1}),x2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zf={};for(const t in x2)Zf[t]={isEnabled:e=>x2[t].some(n=>!!e[n])};function _Z(t){for(const e in t)Zf[e]={...Zf[e],...t[e]}}const wZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||wZ.has(t)}let jB=t=>!yx(t);function SZ(t){t&&(jB=e=>e.startsWith("on")?!yx(e):t(e))}try{SZ(require("@emotion/is-prop-valid").default)}catch{}function bZ(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(jB(i)||n===!0&&yx(i)||!e&&!yx(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function MZ(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const K_=T.createContext({});function Vm(t){return typeof t=="string"||Array.isArray(t)}function Q_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const TA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],AA=["initial",...TA];function J_(t){return Q_(t.animate)||AA.some(e=>Vm(t[e]))}function HB(t){return!!(J_(t)||t.variants)}function EZ(t,e){if(J_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vm(n)?n:void 0,animate:Vm(r)?r:void 0}}return t.inherit!==!1?e:{}}function TZ(t){const{initial:e,animate:n}=EZ(t,T.useContext(K_));return T.useMemo(()=>({initial:e,animate:n}),[_2(e),_2(n)])}function _2(t){return Array.isArray(t)?t.join(" "):t}const AZ=Symbol.for("motionComponentSymbol");function rf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function CZ(t,e,n){return T.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):rf(n)&&(n.current=r))},[e])}const CA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),RZ="framerAppearId",WB="data-"+CA(RZ),{schedule:RA,cancel:Wde}=zB(queueMicrotask,!1),GB=T.createContext({});function PZ(t,e,n,r,i){var s,o;const{visualElement:a}=T.useContext(K_),l=T.useContext(VB),c=T.useContext(Z_),u=T.useContext(bA).reducedMotion,h=T.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=h.current,m=T.useContext(GB);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&NZ(h.current,n,i,m);const v=T.useRef(!1);T.useInsertionEffect(()=>{p&&v.current&&p.update(n,c)});const y=n[WB],x=T.useRef(!!y&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return BB(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),RA.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),T.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,y)}),x.current=!1))}),p}function NZ(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:XB(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&rf(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function XB(t){if(t)return t.options.allowProjection!==!1?t.projection:XB(t.parent)}function IZ({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&_Z(t);function a(c,u){let h;const p={...T.useContext(bA),...c,layoutId:LZ(c)},{isStatic:m}=p,v=TZ(c),y=r(c,m);if(!m&&MA){DZ();const x=kZ(p);h=x.MeasureLayout,v.visualElement=PZ(i,y,p,e,x.ProjectionNode)}return b.jsxs(K_.Provider,{value:v,children:[h&&v.visualElement?b.jsx(h,{visualElement:v.visualElement,...p}):null,n(i,c,CZ(y,v.visualElement,u),y,m,v.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=T.forwardRef(a);return l[AZ]=i,l}function LZ({layoutId:t}){const e=T.useContext(wA).id;return e&&t!==void 0?e+"-"+t:t}function DZ(t,e){T.useContext(VB).strict}function kZ(t){const{drag:e,layout:n}=Zf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const OZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function PA(t){return typeof t!="string"||t.includes("-")?!1:!!(OZ.indexOf(t)>-1||/[A-Z]/u.test(t))}function w2(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function NA(t,e,n,r){if(typeof e=="function"){const[i,s]=w2(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=w2(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const dE=t=>Array.isArray(t),FZ=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),UZ=t=>dE(t)?t[t.length-1]||0:t,ri=t=>!!(t&&t.getVelocity);function _0(t){const e=ri(t)?t.get():t;return FZ(e)?e.toValue():e}function BZ({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:zZ(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const $B=t=>(e,n)=>{const r=T.useContext(K_),i=T.useContext(Z_),s=()=>BZ(t,e,r,i);return n?s():SA(s)};function zZ(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=_0(s[p]);let{initial:o,animate:a}=t;const l=J_(t),c=HB(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Q_(h)){const p=Array.isArray(h)?h:[h];for(let m=0;m<p.length;m++){const v=NA(t,p[m]);if(v){const{transitionEnd:y,transition:x,...g}=v;for(const _ in g){let S=g[_];if(Array.isArray(S)){const E=u?S.length-1:0;S=S[E]}S!==null&&(i[_]=S)}for(const _ in y)i[_]=y[_]}}}return i}const hh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qu=new Set(hh),YB=t=>e=>typeof e=="string"&&e.startsWith(t),qB=YB("--"),VZ=YB("var(--"),IA=t=>VZ(t)?jZ.test(t.split("/*")[0].trim()):!1,jZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ZB=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ha=(t,e,n)=>n>e?e:n<t?t:n,ph={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jm={...ph,transform:t=>Ha(0,1,t)},sy={...ph,default:1},Sg=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bl=Sg("deg"),Wo=Sg("%"),Ot=Sg("px"),HZ=Sg("vh"),WZ=Sg("vw"),S2={...Wo,parse:t=>Wo.parse(t)/100,transform:t=>Wo.transform(t*100)},GZ={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,backgroundPositionX:Ot,backgroundPositionY:Ot},XZ={rotate:bl,rotateX:bl,rotateY:bl,rotateZ:bl,scale:sy,scaleX:sy,scaleY:sy,scaleZ:sy,skew:bl,skewX:bl,skewY:bl,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:jm,originX:S2,originY:S2,originZ:Ot},b2={...ph,transform:Math.round},LA={...GZ,...XZ,zIndex:b2,size:Ot,fillOpacity:jm,strokeOpacity:jm,numOctaves:b2},$Z={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YZ=hh.length;function qZ(t,e,n){let r="",i=!0;for(let s=0;s<YZ;s++){const o=hh[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=ZB(a,LA[o]);if(!l){i=!1;const u=$Z[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function DA(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(qu.has(l)){o=!0;continue}else if(qB(l)){i[l]=c;continue}else{const u=ZB(c,LA[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=qZ(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const ZZ={offset:"stroke-dashoffset",array:"stroke-dasharray"},KZ={offset:"strokeDashoffset",array:"strokeDasharray"};function QZ(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?ZZ:KZ;t[s.offset]=Ot.transform(-r);const o=Ot.transform(e),a=Ot.transform(n);t[s.array]=`${o} ${a}`}function M2(t,e,n){return typeof t=="string"?t:Ot.transform(e+n*t)}function JZ(t,e,n){const r=M2(e,t.x,t.width),i=M2(n,t.y,t.height);return`${r} ${i}`}function kA(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(DA(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:v}=t;p.transform&&(v&&(m.transform=p.transform),delete p.transform),v&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=JZ(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&QZ(p,o,a,l,!1)}const OA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),KB=()=>({...OA(),attrs:{}}),FA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function QB(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const JB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ez(t,e,n,r){QB(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(JB.has(i)?i:CA(i),e.attrs[i])}const xx={};function eK(t){Object.assign(xx,t)}function tz(t,{layout:e,layoutId:n}){return qu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!xx[t]||t==="opacity")}function UA(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ri(i[o])||e.style&&ri(e.style[o])||tz(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function nz(t,e,n){const r=UA(t,e,n);for(const i in t)if(ri(t[i])||ri(e[i])){const s=hh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function tK(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const E2=["x","y","width","height","cx","cy","r"],nK={useVisualState:$B({scrapeMotionValuesFromProps:nz,createRenderState:KB,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(qu.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<E2.length;a++){const l=E2[a];t[l]!==e[l]&&(o=!0)}o&&Un.read(()=>{tK(n,r),Un.render(()=>{kA(r,i,FA(n.tagName),t.transformTemplate),ez(n,r)})})}})},rK={useVisualState:$B({scrapeMotionValuesFromProps:UA,createRenderState:OA})};function rz(t,e,n){for(const r in e)!ri(e[r])&&!tz(r,n)&&(t[r]=e[r])}function iK({transformTemplate:t},e){return T.useMemo(()=>{const n=OA();return DA(n,e,t),Object.assign({},n.vars,n.style)},[e])}function sK(t,e){const n=t.style||{},r={};return rz(r,n,t),Object.assign(r,iK(t,e)),r}function oK(t,e){const n={},r=sK(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function aK(t,e,n,r){const i=T.useMemo(()=>{const s=KB();return kA(s,e,FA(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};rz(s,t.style,t),i.style={...s,...i.style}}return i}function lK(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(PA(n)?aK:oK)(r,s,o,n),c=bZ(r,typeof n=="string",t),u=n!==T.Fragment?{...c,...l,ref:i}:{},{children:h}=r,p=T.useMemo(()=>ri(h)?h.get():h,[h]);return T.createElement(n,{...u,children:p})}}function cK(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...PA(r)?nK:rK,preloadedFeatures:t,useRender:lK(i),createVisualElement:e,Component:r};return IZ(o)}}function iz(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function ew(t,e,n){const r=t.getProps();return NA(r,e,n!==void 0?n:r.custom,t)}const uK=EA(()=>window.ScrollTimeline!==void 0);class dK{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(uK()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class fK extends dK{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function BA(t,e){return t?t[e]||t.default||t:void 0}const fE=2e4;function sz(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fE;)e+=n,r=t.next(e);return e>=fE?1/0:e}function zA(t){return typeof t=="function"}function T2(t,e){t.timeline=e,t.onfinish=null}const VA=t=>Array.isArray(t)&&typeof t[0]=="number",hK={linearEasing:void 0};function pK(t,e){const n=EA(t);return()=>{var r;return(r=hK[e])!==null&&r!==void 0?r:n()}}const _x=pK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),oz=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(qf(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function az(t){return!!(typeof t=="function"&&_x()||!t||typeof t=="string"&&(t in hE||_x())||VA(t)||Array.isArray(t)&&t.every(az))}const bp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,hE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:bp([0,.65,.55,1]),circOut:bp([.55,0,1,.45]),backIn:bp([.31,.01,.66,-.59]),backOut:bp([.33,1.53,.69,.99])};function lz(t,e){if(t)return typeof t=="function"&&_x()?oz(t,e):VA(t)?bp(t):Array.isArray(t)?t.map(n=>lz(n,e)||hE.easeOut):hE[t]}const Xs={x:!1,y:!1};function cz(){return Xs.x||Xs.y}function mK(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function uz(t,e){const n=mK(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function A2(t){return e=>{e.pointerType==="touch"||cz()||t(e)}}function gK(t,e,n={}){const[r,i,s]=uz(t,n),o=A2(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=A2(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const dz=(t,e)=>e?t===e?!0:dz(t,e.parentElement):!1,jA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,vK=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yK(t){return vK.has(t.tagName)||t.tabIndex!==-1}const Mp=new WeakSet;function C2(t){return e=>{e.key==="Enter"&&t(e)}}function Ub(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const xK=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=C2(()=>{if(Mp.has(n))return;Ub(n,"down");const i=C2(()=>{Ub(n,"up")}),s=()=>Ub(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function R2(t){return jA(t)&&!cz()}function _K(t,e,n={}){const[r,i,s]=uz(t,n),o=a=>{const l=a.currentTarget;if(!R2(a)||Mp.has(l))return;Mp.add(l);const c=e(a),u=(m,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),!(!R2(m)||!Mp.has(l))&&(Mp.delete(l),typeof c=="function"&&c(m,{success:v}))},h=m=>{u(m,n.useGlobalTarget||dz(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!yK(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>xK(c,i),i)}),s}function wK(t){return t==="x"||t==="y"?Xs[t]?null:(Xs[t]=!0,()=>{Xs[t]=!1}):Xs.x||Xs.y?null:(Xs.x=Xs.y=!0,()=>{Xs.x=Xs.y=!1})}const fz=new Set(["width","height","top","left","right","bottom",...hh]);let w0;function SK(){w0=void 0}const Go={now:()=>(w0===void 0&&Go.set(zr.isProcessing||vZ.useManualTiming?zr.timestamp:performance.now()),w0),set:t=>{w0=t,queueMicrotask(SK)}};function HA(t,e){t.indexOf(e)===-1&&t.push(e)}function WA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class GA{constructor(){this.subscriptions=[]}add(e){return HA(this.subscriptions,e),()=>WA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function hz(t,e){return e?t*(1e3/e):0}const P2=30,bK=t=>!isNaN(parseFloat(t));class MK{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Go.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Go.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=bK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new GA);const r=this.events[e].add(n);return e==="change"?()=>{r(),Un.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Go.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>P2)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,P2);return hz(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hm(t,e){return new MK(t,e)}function EK(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Hm(n))}function TK(t,e){const n=ew(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=UZ(s[o]);EK(t,o,a)}}function AK(t){return!!(ri(t)&&t.add)}function pE(t,e){const n=t.getValue("willChange");if(AK(n))return n.add(e)}function pz(t){return t.props[WB]}const mz=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,CK=1e-7,RK=12;function PK(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=mz(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>CK&&++a<RK);return o}function bg(t,e,n,r){if(t===e&&n===r)return is;const i=s=>PK(s,0,1,t,n);return s=>s===0||s===1?s:mz(i(s),e,r)}const gz=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vz=t=>e=>1-t(1-e),yz=bg(.33,1.53,.69,.99),XA=vz(yz),xz=gz(XA),_z=t=>(t*=2)<1?.5*XA(t):.5*(2-Math.pow(2,-10*(t-1))),$A=t=>1-Math.sin(Math.acos(t)),wz=vz($A),Sz=gz($A),bz=t=>/^0[^.\s]+$/u.test(t);function NK(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||bz(t):!0}const Hp=t=>Math.round(t*1e5)/1e5,YA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function IK(t){return t==null}const LK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qA=(t,e)=>n=>!!(typeof n=="string"&&LK.test(n)&&n.startsWith(t)||e&&!IK(n)&&Object.prototype.hasOwnProperty.call(n,e)),Mz=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(YA);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},DK=t=>Ha(0,255,t),Bb={...ph,transform:t=>Math.round(DK(t))},ou={test:qA("rgb","red"),parse:Mz("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Bb.transform(t)+", "+Bb.transform(e)+", "+Bb.transform(n)+", "+Hp(jm.transform(r))+")"};function kK(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mE={test:qA("#"),parse:kK,transform:ou.transform},sf={test:qA("hsl","hue"),parse:Mz("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Wo.transform(Hp(e))+", "+Wo.transform(Hp(n))+", "+Hp(jm.transform(r))+")"},ti={test:t=>ou.test(t)||mE.test(t)||sf.test(t),parse:t=>ou.test(t)?ou.parse(t):sf.test(t)?sf.parse(t):mE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ou.transform(t):sf.transform(t)},OK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FK(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(YA))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(OK))===null||n===void 0?void 0:n.length)||0)>0}const Ez="number",Tz="color",UK="var",BK="var(",N2="${}",zK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wm(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(zK,l=>(ti.test(l)?(r.color.push(s),i.push(Tz),n.push(ti.parse(l))):l.startsWith(BK)?(r.var.push(s),i.push(UK),n.push(l)):(r.number.push(s),i.push(Ez),n.push(parseFloat(l))),++s,N2)).split(N2);return{values:n,split:a,indexes:r,types:i}}function Az(t){return Wm(t).values}function Cz(t){const{split:e,types:n}=Wm(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Ez?s+=Hp(i[o]):a===Tz?s+=ti.transform(i[o]):s+=i[o]}return s}}const VK=t=>typeof t=="number"?0:t;function jK(t){const e=Az(t);return Cz(t)(e.map(VK))}const oc={test:FK,parse:Az,createTransformer:Cz,getAnimatableNone:jK},HK=new Set(["brightness","contrast","saturate","opacity"]);function WK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(YA)||[];if(!r)return t;const i=n.replace(r,"");let s=HK.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const GK=/\b([a-z-]*)\(.*?\)/gu,gE={...oc,getAnimatableNone:t=>{const e=t.match(GK);return e?e.map(WK).join(" "):t}},XK={...LA,color:ti,backgroundColor:ti,outlineColor:ti,fill:ti,stroke:ti,borderColor:ti,borderTopColor:ti,borderRightColor:ti,borderBottomColor:ti,borderLeftColor:ti,filter:gE,WebkitFilter:gE},ZA=t=>XK[t];function Rz(t,e){let n=ZA(t);return n!==gE&&(n=oc),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $K=new Set(["auto","none","0"]);function YK(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!$K.has(s)&&Wm(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=Rz(n,i)}const I2=t=>t===ph||t===Ot,L2=(t,e)=>parseFloat(t.split(", ")[e]),D2=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return L2(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?L2(s[1],t):0}},qK=new Set(["x","y","z"]),ZK=hh.filter(t=>!qK.has(t));function KK(t){const e=[];return ZK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Kf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:D2(4,13),y:D2(5,14)};Kf.translateX=Kf.x;Kf.translateY=Kf.y;const xu=new Set;let vE=!1,yE=!1;function Pz(){if(yE){const t=Array.from(xu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=KK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}yE=!1,vE=!1,xu.forEach(t=>t.complete()),xu.clear()}function Nz(){xu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(yE=!0)})}function QK(){Nz(),Pz()}class KA{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(xu.add(this),vE||(vE=!0,Un.read(Nz),Un.resolveKeyframes(Pz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),xu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,xu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Iz=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),JK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eQ(t){const e=JK.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Lz(t,e,n=1){const[r,i]=eQ(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Iz(o)?parseFloat(o):o}return IA(i)?Lz(i,e,n+1):i}const Dz=t=>e=>e.test(t),tQ={test:t=>t==="auto",parse:t=>t},kz=[ph,Ot,Wo,bl,WZ,HZ,tQ],k2=t=>kz.find(Dz(t));class Oz extends KA{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),IA(c))){const u=Lz(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!fz.has(r)||e.length!==2)return;const[i,s]=e,o=k2(i),a=k2(s);if(o!==a)if(I2(o)&&I2(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)NK(e[i])&&r.push(i);r.length&&YK(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Kf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const O2=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(oc.test(t)||t==="0")&&!t.startsWith("url("));function nQ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function rQ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=O2(i,e),a=O2(s,e);return!o||!a?!1:nQ(t)||(n==="spring"||zA(n))&&r}const iQ=t=>t!==null;function tw(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(iQ),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const sQ=40;class Fz{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Go.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>sQ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&QK(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Go.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!rQ(e,r,i,s))if(o)this.options.duration=0;else{l&&l(tw(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Xn=(t,e,n)=>t+(e-t)*n;function zb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function oQ({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=zb(l,a,t+1/3),s=zb(l,a,t),o=zb(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function wx(t,e){return n=>n>0?e:t}const Vb=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},aQ=[mE,ou,sf],lQ=t=>aQ.find(e=>e.test(t));function F2(t){const e=lQ(t);if(!e)return!1;let n=e.parse(t);return e===sf&&(n=oQ(n)),n}const U2=(t,e)=>{const n=F2(t),r=F2(e);if(!n||!r)return wx(t,e);const i={...n};return s=>(i.red=Vb(n.red,r.red,s),i.green=Vb(n.green,r.green,s),i.blue=Vb(n.blue,r.blue,s),i.alpha=Xn(n.alpha,r.alpha,s),ou.transform(i))},cQ=(t,e)=>n=>e(t(n)),Mg=(...t)=>t.reduce(cQ),xE=new Set(["none","hidden"]);function uQ(t,e){return xE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function dQ(t,e){return n=>Xn(t,e,n)}function QA(t){return typeof t=="number"?dQ:typeof t=="string"?IA(t)?wx:ti.test(t)?U2:pQ:Array.isArray(t)?Uz:typeof t=="object"?ti.test(t)?U2:fQ:wx}function Uz(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>QA(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function fQ(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=QA(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function hQ(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const pQ=(t,e)=>{const n=oc.createTransformer(e),r=Wm(t),i=Wm(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?xE.has(t)&&!i.values.length||xE.has(e)&&!r.values.length?uQ(t,e):Mg(Uz(hQ(r,i),i.values),n):wx(t,e)};function Bz(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xn(t,e,n):QA(t)(t,e)}const mQ=5;function zz(t,e,n){const r=Math.max(e-mQ,0);return hz(n-t(r),e-r)}const tr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jb=.001;function gQ({duration:t=tr.duration,bounce:e=tr.bounce,velocity:n=tr.velocity,mass:r=tr.mass}){let i,s,o=1-e;o=Ha(tr.minDamping,tr.maxDamping,o),t=Ha(tr.minDuration,tr.maxDuration,La(t)),o<1?(i=c=>{const u=c*o,h=u*t,p=u-n,m=_E(c,o),v=Math.exp(-h);return jb-p/m*v},s=c=>{const h=c*o*t,p=h*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-h),y=_E(Math.pow(c,2),o);return(-i(c)+jb>0?-1:1)*((p-m)*v)/y}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-jb+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=yQ(i,s,a);if(t=Ia(t),isNaN(l))return{stiffness:tr.stiffness,damping:tr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const vQ=12;function yQ(t,e,n){let r=n;for(let i=1;i<vQ;i++)r=r-t(r)/e(r);return r}function _E(t,e){return t*Math.sqrt(1-e*e)}const xQ=["duration","bounce"],_Q=["stiffness","damping","mass"];function B2(t,e){return e.some(n=>t[n]!==void 0)}function wQ(t){let e={velocity:tr.velocity,stiffness:tr.stiffness,damping:tr.damping,mass:tr.mass,isResolvedFromDuration:!1,...t};if(!B2(t,_Q)&&B2(t,xQ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ha(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:tr.mass,stiffness:i,damping:s}}else{const n=gQ(t);e={...e,...n,mass:tr.mass},e.isResolvedFromDuration=!0}return e}function Vz(t=tr.visualDuration,e=tr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:p,isResolvedFromDuration:m}=wQ({...n,velocity:-La(n.velocity||0)}),v=p||0,y=c/(2*Math.sqrt(l*u)),x=o-s,g=La(Math.sqrt(l/u)),_=Math.abs(x)<5;r||(r=_?tr.restSpeed.granular:tr.restSpeed.default),i||(i=_?tr.restDelta.granular:tr.restDelta.default);let S;if(y<1){const R=_E(g,y);S=I=>{const C=Math.exp(-y*g*I);return o-C*((v+y*g*x)/R*Math.sin(R*I)+x*Math.cos(R*I))}}else if(y===1)S=R=>o-Math.exp(-g*R)*(x+(v+g*x)*R);else{const R=g*Math.sqrt(y*y-1);S=I=>{const C=Math.exp(-y*g*I),D=Math.min(R*I,300);return o-C*((v+y*g*x)*Math.sinh(D)+R*x*Math.cosh(D))/R}}const E={calculatedDuration:m&&h||null,next:R=>{const I=S(R);if(m)a.done=R>=h;else{let C=0;y<1&&(C=R===0?Ia(v):zz(S,R,I));const D=Math.abs(C)<=r,L=Math.abs(o-I)<=i;a.done=D&&L}return a.value=a.done?o:I,a},toString:()=>{const R=Math.min(sz(E),fE),I=oz(C=>E.next(R*C).value,R,30);return R+"ms "+I}};return E}function z2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],p={done:!1,value:h},m=D=>a!==void 0&&D<a||l!==void 0&&D>l,v=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let y=n*e;const x=h+y,g=o===void 0?x:o(x);g!==x&&(y=g-h);const _=D=>-y*Math.exp(-D/r),S=D=>g+_(D),E=D=>{const L=_(D),P=S(D);p.done=Math.abs(L)<=c,p.value=p.done?g:P};let R,I;const C=D=>{m(p.value)&&(R=D,I=Vz({keyframes:[p.value,v(p.value)],velocity:zz(S,D,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:D=>{let L=!1;return!I&&R===void 0&&(L=!0,E(D),C(D)),R!==void 0&&D>=R?I.next(D-R):(!L&&E(D),p)}}}const SQ=bg(.42,0,1,1),bQ=bg(0,0,.58,1),jz=bg(.42,0,.58,1),MQ=t=>Array.isArray(t)&&typeof t[0]!="number",V2={linear:is,easeIn:SQ,easeInOut:jz,easeOut:bQ,circIn:$A,circInOut:Sz,circOut:wz,backIn:XA,backInOut:xz,backOut:yz,anticipate:_z},j2=t=>{if(VA(t)){uE(t.length===4);const[e,n,r,i]=t;return bg(e,n,r,i)}else if(typeof t=="string")return uE(V2[t]!==void 0),V2[t];return t};function EQ(t,e,n){const r=[],i=n||Bz,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||is:e;a=Mg(l,a)}r.push(a)}return r}function TQ(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(uE(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=EQ(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const p=qf(t[h],t[h+1],u);return a[h](p)};return n?u=>c(Ha(t[0],t[s-1],u)):c}function AQ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=qf(0,e,r);t.push(Xn(n,1,i))}}function CQ(t){const e=[0];return AQ(e,t.length-1),e}function RQ(t,e){return t.map(n=>n*e)}function PQ(t,e){return t.map(()=>e||jz).splice(0,t.length-1)}function Sx({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=MQ(r)?r.map(j2):j2(r),s={done:!1,value:e[0]},o=RQ(n&&n.length===e.length?n:CQ(e),t),a=TQ(o,e,{ease:Array.isArray(i)?i:PQ(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const NQ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Un.update(e,!0),stop:()=>sc(e),now:()=>zr.isProcessing?zr.timestamp:Go.now()}},IQ={decay:z2,inertia:z2,tween:Sx,keyframes:Sx,spring:Vz},LQ=t=>t/100;class JA extends Fz{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||KA,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=zA(n)?n:IQ[n]||Sx;let l,c;a!==Sx&&typeof e[0]!="number"&&(l=Mg(LQ,Bz(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=sz(u));const{calculatedDuration:h}=u,p=h+i,m=p*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:D}=this.options;return{done:!0,value:D[D.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:v,repeatDelay:y,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),_=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,E=s;if(m){const D=Math.min(this.currentTime,u)/h;let L=Math.floor(D),P=D%1;!P&&D>=1&&(P=1),P===1&&L--,L=Math.min(L,m+1),!!(L%2)&&(v==="reverse"?(P=1-P,y&&(P-=y/h)):v==="mirror"&&(E=o)),S=Ha(0,1,P)*h}const R=_?{done:!1,value:l[0]}:E.next(S);a&&(R.value=a(R.value));let{done:I}=R;!_&&c!==null&&(I=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return C&&i!==void 0&&(R.value=tw(l,this.options,i)),x&&x(R.value),C&&this.finish(),R}get duration(){const{resolved:e}=this;return e?La(e.calculatedDuration):0}get time(){return La(this.currentTime)}set time(e){e=Ia(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=La(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=NQ,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const DQ=new Set(["opacity","clipPath","filter","transform"]);function kQ(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=lz(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const OQ=EA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bx=10,FQ=2e4;function UQ(t){return zA(t.type)||t.type==="spring"||!az(t.ease)}function BQ(t,e){const n=new JA({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<FQ;)r=n.sample(s),i.push(r.value),s+=bx;return{times:void 0,keyframes:i,duration:s-bx,ease:"linear"}}const Hz={anticipate:_z,backInOut:xz,circInOut:Sz};function zQ(t){return t in Hz}class H2 extends Fz{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new Oz(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&_x()&&zQ(s)&&(s=Hz[s]),UQ(this.options)){const{onComplete:h,onUpdate:p,motionValue:m,element:v,...y}=this.options,x=BQ(e,y);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const u=kQ(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(T2(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(tw(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return La(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return La(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ia(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return is;const{animation:r}=n;T2(r,e)}return is}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:p,...m}=this.options,v=new JA({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),y=Ia(this.time);c.setWithVelocity(v.sample(y-bx).value,v.sample(y).value,bx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return OQ()&&r&&DQ.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const VQ={type:"spring",stiffness:500,damping:25,restSpeed:10},jQ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),HQ={type:"keyframes",duration:.8},WQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},GQ=(t,{keyframes:e})=>e.length>2?HQ:qu.has(t)?t.startsWith("scale")?jQ(e[1]):VQ:WQ;function XQ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const eC=(t,e,n,r={},i,s)=>o=>{const a=BA(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Ia(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};XQ(a)||(u={...u,...GQ(t,u)}),u.duration&&(u.duration=Ia(u.duration)),u.repeatDelay&&(u.repeatDelay=Ia(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const p=tw(u.keyframes,a);if(p!==void 0)return Un.update(()=>{u.onUpdate(p),u.onComplete()}),new fK([])}return!s&&H2.supports(u)?new H2(u):new JA(u)};function $Q({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Wz(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const p=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),m=l[h];if(m===void 0||u&&$Q(u,h))continue;const v={delay:n,...BA(o||{},h)};let y=!1;if(window.MotionHandoffAnimation){const g=pz(t);if(g){const _=window.MotionHandoffAnimation(g,h,Un);_!==null&&(v.startTime=_,y=!0)}}pE(t,h),p.start(eC(h,p,m,t.shouldReduceMotion&&fz.has(h)?{type:!1}:v,t,y));const x=p.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{Un.update(()=>{a&&TK(t,a)})}),c}function wE(t,e,n={}){var r;const i=ew(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(Wz(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:p}=s;return YQ(t,e,u+c,h,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function YQ(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(qQ).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(wE(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function qQ(t,e){return t.sortNodePosition(e)}function ZQ(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>wE(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=wE(t,e,n);else{const i=typeof e=="function"?ew(t,e,n.custom):e;r=Promise.all(Wz(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const KQ=AA.length;function Gz(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Gz(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<KQ;n++){const r=AA[n],i=t.props[r];(Vm(i)||i===!1)&&(e[r]=i)}return e}const QQ=[...TA].reverse(),JQ=TA.length;function eJ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ZQ(t,n,r)))}function tJ(t){let e=eJ(t),n=W2(),r=!0;const i=l=>(c,u)=>{var h;const p=ew(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(p){const{transition:m,transitionEnd:v,...y}=p;c={...c,...y,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=Gz(t.parent)||{},h=[],p=new Set;let m={},v=1/0;for(let x=0;x<JQ;x++){const g=QQ[x],_=n[g],S=c[g]!==void 0?c[g]:u[g],E=Vm(S),R=g===l?_.isActive:null;R===!1&&(v=x);let I=S===u[g]&&S!==c[g]&&E;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),_.protectedKeys={...m},!_.isActive&&R===null||!S&&!_.prevProp||Q_(S)||typeof S=="boolean")continue;const C=nJ(_.prevProp,S);let D=C||g===l&&_.isActive&&!I&&E||x>v&&E,L=!1;const P=Array.isArray(S)?S:[S];let F=P.reduce(i(g),{});R===!1&&(F={});const{prevResolvedValues:z={}}=_,H={...z,...F},q=ne=>{D=!0,p.has(ne)&&(L=!0,p.delete(ne)),_.needsAnimating[ne]=!0;const O=t.getValue(ne);O&&(O.liveStyle=!1)};for(const ne in H){const O=F[ne],W=z[ne];if(m.hasOwnProperty(ne))continue;let Y=!1;dE(O)&&dE(W)?Y=!iz(O,W):Y=O!==W,Y?O!=null?q(ne):p.add(ne):O!==void 0&&p.has(ne)?q(ne):_.protectedKeys[ne]=!0}_.prevProp=S,_.prevResolvedValues=F,_.isActive&&(m={...m,...F}),r&&t.blockInitialAnimation&&(D=!1),D&&(!(I&&C)||L)&&h.push(...P.map(ne=>({animation:ne,options:{type:g}})))}if(p.size){const x={};p.forEach(g=>{const _=t.getBaseTarget(g),S=t.getValue(g);S&&(S.liveStyle=!0),x[g]=_??null}),h.push({animation:x})}let y=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=W2(),r=!0}}}function nJ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!iz(e,t):!1}function Rc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function W2(){return{animate:Rc(!0),whileInView:Rc(),whileHover:Rc(),whileTap:Rc(),whileDrag:Rc(),whileFocus:Rc(),exit:Rc()}}class mc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class rJ extends mc{constructor(e){super(e),e.animationState||(e.animationState=tJ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Q_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let iJ=0;class sJ extends mc{constructor(){super(...arguments),this.id=iJ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const oJ={animation:{Feature:rJ},exit:{Feature:sJ}};function Gm(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Eg(t){return{point:{x:t.pageX,y:t.pageY}}}const aJ=t=>e=>jA(e)&&t(e,Eg(e));function Wp(t,e,n,r){return Gm(t,e,aJ(n),r)}const G2=(t,e)=>Math.abs(t-e);function lJ(t,e){const n=G2(t.x,e.x),r=G2(t.y,e.y);return Math.sqrt(n**2+r**2)}class Xz{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Wb(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=lJ(h.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:v}=h,{timestamp:y}=zr;this.history.push({...v,timestamp:y});const{onStart:x,onMove:g}=this.handlers;p||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Hb(p,this.transformPagePoint),Un.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Wb(h.type==="pointercancel"?this.lastMoveEventInfo:Hb(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,x),v&&v(h,x)},!jA(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Eg(e),a=Hb(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=zr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Wb(a,this.history)),this.removeListeners=Mg(Wp(this.contextWindow,"pointermove",this.handlePointerMove),Wp(this.contextWindow,"pointerup",this.handlePointerUp),Wp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),sc(this.updatePoint)}}function Hb(t,e){return e?{point:e(t.point)}:t}function X2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wb({point:t},e){return{point:t,delta:X2(t,$z(e)),offset:X2(t,cJ(e)),velocity:uJ(e,.1)}}function cJ(t){return t[0]}function $z(t){return t[t.length-1]}function uJ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=$z(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ia(e)));)n--;if(!r)return{x:0,y:0};const s=La(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Yz=1e-4,dJ=1-Yz,fJ=1+Yz,qz=.01,hJ=0-qz,pJ=0+qz;function as(t){return t.max-t.min}function mJ(t,e,n){return Math.abs(t-e)<=n}function $2(t,e,n,r=.5){t.origin=r,t.originPoint=Xn(e.min,e.max,t.origin),t.scale=as(n)/as(e),t.translate=Xn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=dJ&&t.scale<=fJ||isNaN(t.scale))&&(t.scale=1),(t.translate>=hJ&&t.translate<=pJ||isNaN(t.translate))&&(t.translate=0)}function Gp(t,e,n,r){$2(t.x,e.x,n.x,r?r.originX:void 0),$2(t.y,e.y,n.y,r?r.originY:void 0)}function Y2(t,e,n){t.min=n.min+e.min,t.max=t.min+as(e)}function gJ(t,e,n){Y2(t.x,e.x,n.x),Y2(t.y,e.y,n.y)}function q2(t,e,n){t.min=e.min-n.min,t.max=t.min+as(e)}function Xp(t,e,n){q2(t.x,e.x,n.x),q2(t.y,e.y,n.y)}function vJ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Xn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Xn(n,t,r.max):Math.min(t,n)),t}function Z2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function yJ(t,{top:e,left:n,bottom:r,right:i}){return{x:Z2(t.x,n,i),y:Z2(t.y,e,r)}}function K2(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xJ(t,e){return{x:K2(t.x,e.x),y:K2(t.y,e.y)}}function _J(t,e){let n=.5;const r=as(t),i=as(e);return i>r?n=qf(e.min,e.max-r,t.min):r>i&&(n=qf(t.min,t.max-i,e.min)),Ha(0,1,n)}function wJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const SE=.35;function SJ(t=SE){return t===!1?t=0:t===!0&&(t=SE),{x:Q2(t,"left","right"),y:Q2(t,"top","bottom")}}function Q2(t,e,n){return{min:J2(t,e),max:J2(t,n)}}function J2(t,e){return typeof t=="number"?t:t[e]||0}const eL=()=>({translate:0,scale:1,origin:0,originPoint:0}),of=()=>({x:eL(),y:eL()}),tL=()=>({min:0,max:0}),lr=()=>({x:tL(),y:tL()});function ws(t){return[t("x"),t("y")]}function Zz({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function bJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function MJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Gb(t){return t===void 0||t===1}function bE({scale:t,scaleX:e,scaleY:n}){return!Gb(t)||!Gb(e)||!Gb(n)}function Gc(t){return bE(t)||Kz(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Kz(t){return nL(t.x)||nL(t.y)}function nL(t){return t&&t!=="0%"}function Mx(t,e,n){const r=t-n,i=e*r;return n+i}function rL(t,e,n,r,i){return i!==void 0&&(t=Mx(t,i,r)),Mx(t,n,r)+e}function ME(t,e=0,n=1,r,i){t.min=rL(t.min,e,n,r,i),t.max=rL(t.max,e,n,r,i)}function Qz(t,{x:e,y:n}){ME(t.x,e.translate,e.scale,e.originPoint),ME(t.y,n.translate,n.scale,n.originPoint)}const iL=.999999999999,sL=1.0000000000001;function EJ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&lf(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Qz(t,o)),r&&Gc(s.latestValues)&&lf(t,s.latestValues))}e.x<sL&&e.x>iL&&(e.x=1),e.y<sL&&e.y>iL&&(e.y=1)}function af(t,e){t.min=t.min+e,t.max=t.max+e}function oL(t,e,n,r,i=.5){const s=Xn(t.min,t.max,i);ME(t,e,n,s,r)}function lf(t,e){oL(t.x,e.x,e.scaleX,e.scale,e.originX),oL(t.y,e.y,e.scaleY,e.scale,e.originY)}function Jz(t,e){return Zz(MJ(t.getBoundingClientRect(),e))}function TJ(t,e,n){const r=Jz(t,n),{scroll:i}=e;return i&&(af(r.x,i.offset.x),af(r.y,i.offset.y)),r}const e4=({current:t})=>t?t.ownerDocument.defaultView:null,AJ=new WeakMap;class CJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=lr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Eg(u).point)},s=(u,h)=>{const{drag:p,dragPropagation:m,onDragStart:v}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wK(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ws(x=>{let g=this.getAxisMotionValue(x).get()||0;if(Wo.test(g)){const{projection:_}=this.visualElement;if(_&&_.layout){const S=_.layout.layoutBox[x];S&&(g=as(S)*(parseFloat(g)/100))}}this.originPoint[x]=g}),v&&Un.postRender(()=>v(u,h)),pE(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:v,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=h;if(m&&this.currentDirection===null){this.currentDirection=RJ(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),y&&y(u,h)},a=(u,h)=>this.stop(u,h),l=()=>ws(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Xz(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:e4(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Un.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!oy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=vJ(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&rf(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=yJ(i.layoutBox,n):this.constraints=!1,this.elastic=SJ(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ws(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=wJ(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!rf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=TJ(r,i.root,this.visualElement.getTransformPagePoint());let o=xJ(i.layout.layoutBox,s);if(n){const a=n(bJ(o));this.hasMutatedConstraints=!!a,a&&(o=Zz(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ws(u=>{if(!oy(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return pE(this.visualElement,e),r.start(eC(e,r,0,n,this.visualElement,!1))}stopAnimation(){ws(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ws(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ws(n=>{const{drag:r}=this.getProps();if(!oy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Xn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ws(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=_J({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ws(o=>{if(!oy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Xn(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;AJ.set(this.visualElement,this);const e=this.visualElement.current,n=Wp(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();rf(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Un.read(r);const o=Gm(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ws(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=SE,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function oy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function RJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class PJ extends mc{constructor(e){super(e),this.removeGroupControls=is,this.removeListeners=is,this.controls=new CJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||is}unmount(){this.removeGroupControls(),this.removeListeners()}}const aL=t=>(e,n)=>{t&&Un.postRender(()=>t(e,n))};class NJ extends mc{constructor(){super(...arguments),this.removePointerDownListener=is}onPointerDown(e){this.session=new Xz(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:e4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:aL(e),onStart:aL(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Un.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Wp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const S0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ep={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ot.test(t))t=parseFloat(t);else return t;const n=lL(t,e.target.x),r=lL(t,e.target.y);return`${n}% ${r}%`}},IJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=oc.parse(t);if(i.length>5)return r;const s=oc.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Xn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class LJ extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;eK(DJ),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),S0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Un.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),RA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function t4(t){const[e,n]=UB(),r=T.useContext(wA);return b.jsx(LJ,{...t,layoutGroup:r,switchLayoutGroup:T.useContext(GB),isPresent:e,safeToRemove:n})}const DJ={borderRadius:{...ep,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ep,borderTopRightRadius:ep,borderBottomLeftRadius:ep,borderBottomRightRadius:ep,boxShadow:IJ};function kJ(t,e,n){const r=ri(t)?t:Hm(t);return r.start(eC("",r,e,n)),r.animation}function OJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const FJ=(t,e)=>t.depth-e.depth;class UJ{constructor(){this.children=[],this.isDirty=!1}add(e){HA(this.children,e),this.isDirty=!0}remove(e){WA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(FJ),this.isDirty=!1,this.children.forEach(e)}}function BJ(t,e){const n=Go.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(sc(r),t(s-e))};return Un.read(r,!0),()=>sc(r)}const n4=["TopLeft","TopRight","BottomLeft","BottomRight"],zJ=n4.length,cL=t=>typeof t=="string"?parseFloat(t):t,uL=t=>typeof t=="number"||Ot.test(t);function VJ(t,e,n,r,i,s){i?(t.opacity=Xn(0,n.opacity!==void 0?n.opacity:1,jJ(r)),t.opacityExit=Xn(e.opacity!==void 0?e.opacity:1,0,HJ(r))):s&&(t.opacity=Xn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<zJ;o++){const a=`border${n4[o]}Radius`;let l=dL(e,a),c=dL(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||uL(l)===uL(c)?(t[a]=Math.max(Xn(cL(l),cL(c),r),0),(Wo.test(c)||Wo.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Xn(e.rotate||0,n.rotate||0,r))}function dL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const jJ=r4(0,.5,wz),HJ=r4(.5,.95,is);function r4(t,e,n){return r=>r<t?0:r>e?1:n(qf(t,e,r))}function fL(t,e){t.min=e.min,t.max=e.max}function xs(t,e){fL(t.x,e.x),fL(t.y,e.y)}function hL(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function pL(t,e,n,r,i){return t-=e,t=Mx(t,1/n,r),i!==void 0&&(t=Mx(t,1/i,r)),t}function WJ(t,e=0,n=1,r=.5,i,s=t,o=t){if(Wo.test(e)&&(e=parseFloat(e),e=Xn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Xn(s.min,s.max,r);t===s&&(a-=e),t.min=pL(t.min,e,n,a,i),t.max=pL(t.max,e,n,a,i)}function mL(t,e,[n,r,i],s,o){WJ(t,e[n],e[r],e[i],e.scale,s,o)}const GJ=["x","scaleX","originX"],XJ=["y","scaleY","originY"];function gL(t,e,n,r){mL(t.x,e,GJ,n?n.x:void 0,r?r.x:void 0),mL(t.y,e,XJ,n?n.y:void 0,r?r.y:void 0)}function vL(t){return t.translate===0&&t.scale===1}function i4(t){return vL(t.x)&&vL(t.y)}function yL(t,e){return t.min===e.min&&t.max===e.max}function $J(t,e){return yL(t.x,e.x)&&yL(t.y,e.y)}function xL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function s4(t,e){return xL(t.x,e.x)&&xL(t.y,e.y)}function _L(t){return as(t.x)/as(t.y)}function wL(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class YJ{constructor(){this.members=[]}add(e){HA(this.members,e),e.scheduleRender()}remove(e){if(WA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qJ(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:p,skewX:m,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Xc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ep=typeof window<"u"&&window.MotionDebug!==void 0,Xb=["","X","Y","Z"],ZJ={visibility:"hidden"},SL=1e3;let KJ=0;function $b(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function o4(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=pz(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Un,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&o4(r)}function a4({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=KJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ep&&(Xc.totalNodes=Xc.resolvedTargetDeltas=Xc.recalculatedProjection=0),this.nodes.forEach(eee),this.nodes.forEach(see),this.nodes.forEach(oee),this.nodes.forEach(tee),Ep&&window.MotionDebug.record(Xc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new UJ)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new GA),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=OJ(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=BJ(p,250),S0.hasAnimatedSinceResize&&(S0.hasAnimatedSinceResize=!1,this.nodes.forEach(ML))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||dee,{onLayoutAnimationStart:x,onLayoutAnimationComplete:g}=u.getProps(),_=!this.targetLayout||!s4(this.targetLayout,v)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,S);const E={...BA(y,"layout"),onPlay:x,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||ML(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aee),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&o4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bL);return}this.isUpdating||this.nodes.forEach(ree),this.isUpdating=!1,this.nodes.forEach(iee),this.nodes.forEach(QJ),this.nodes.forEach(JJ),this.clearAllSnapshots();const a=Go.now();zr.delta=Ha(0,1e3/60,a-zr.timestamp),zr.timestamp=a,zr.isProcessing=!0,Fb.update.process(zr),Fb.preRender.process(zr),Fb.render.process(zr),zr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,RA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nee),this.sharedNodes.forEach(lee)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Un.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Un.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!i4(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Gc(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),fee(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return lr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(hee))){const{scroll:u}=this.root;u&&(af(l.x,u.offset.x),af(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=lr();if(xs(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:p}=u;u!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&xs(l,o),af(l.x,h.offset.x),af(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=lr();xs(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&lf(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Gc(u.latestValues)&&lf(l,u.latestValues)}return Gc(this.latestValues)&&lf(l,this.latestValues),l}removeTransform(o){const a=lr();xs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Gc(c.latestValues))continue;bE(c.latestValues)&&c.updateSnapshot();const u=lr(),h=c.measurePageBox();xs(u,h),gL(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Gc(this.latestValues)&&gL(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=zr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lr(),this.relativeTargetOrigin=lr(),Xp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=lr(),this.targetWithTransforms=lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xs(this.target,this.layout.layoutBox),Qz(this.target,this.targetDelta)):xs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=lr(),this.relativeTargetOrigin=lr(),Xp(this.relativeTargetOrigin,this.target,m.target),xs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ep&&Xc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||bE(this.parent.latestValues)||Kz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===zr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;xs(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;EJ(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=lr());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(hL(this.prevProjectionDelta.x,this.projectionDelta.x),hL(this.prevProjectionDelta.y,this.projectionDelta.y)),Gp(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!wL(this.projectionDelta.x,this.prevProjectionDelta.x)||!wL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Ep&&Xc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=of(),this.projectionDelta=of(),this.projectionDeltaWithTransform=of()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=of();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=lr(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=m!==v,x=this.getStack(),g=!x||x.members.length<=1,_=!!(y&&!g&&this.options.crossfade===!0&&!this.path.some(uee));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const R=E/1e3;EL(h.x,o.x,R),EL(h.y,o.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xp(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),cee(this.relativeTarget,this.relativeTargetOrigin,p,R),S&&$J(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=lr()),xs(S,this.relativeTarget)),y&&(this.animationValues=u,VJ(u,c,this.latestValues,R,_,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Un.update(()=>{S0.hasAnimatedSinceResize=!0,this.currentAnimation=kJ(0,SL,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&l4(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||lr();const h=as(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=as(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}xs(a,l),lf(a,u),Gp(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new YJ),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&$b("z",o,c,this.animationValues);for(let u=0;u<Xb.length;u++)$b(`rotate${Xb[u]}`,o,c,this.animationValues),$b(`skew${Xb[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZJ;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=_0(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=_0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Gc(this.latestValues)&&(y.transform=u?u({},""):"none",this.hasProjected=!1),y}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=qJ(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in xx){if(p[y]===void 0)continue;const{correct:x,applyTo:g}=xx[y],_=c.transform==="none"?p[y]:x(p[y],h);if(g){const S=g.length;for(let E=0;E<S;E++)c[g[E]]=_}else c[y]=_}return this.options.layoutId&&(c.pointerEvents=h===this?_0(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(bL),this.root.sharedNodes.clear()}}}function QJ(t){t.updateLayout()}function JJ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?ws(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=as(p);p.min=r[h].min,p.max=p.min+m}):l4(s,n.layoutBox,r)&&ws(h=>{const p=o?n.measuredBox[h]:n.layoutBox[h],m=as(r[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const a=of();Gp(a,r,n.layoutBox);const l=of();o?Gp(l,t.applyTransform(i,!0),n.measuredBox):Gp(l,r,n.layoutBox);const c=!i4(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const v=lr();Xp(v,n.layoutBox,p.layoutBox);const y=lr();Xp(y,r,m.layoutBox),s4(v,y)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function eee(t){Ep&&Xc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tee(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nee(t){t.clearSnapshot()}function bL(t){t.clearMeasurements()}function ree(t){t.isLayoutDirty=!1}function iee(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ML(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function see(t){t.resolveTargetDelta()}function oee(t){t.calcProjection()}function aee(t){t.resetSkewAndRotation()}function lee(t){t.removeLeadSnapshot()}function EL(t,e,n){t.translate=Xn(e.translate,0,n),t.scale=Xn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function TL(t,e,n,r){t.min=Xn(e.min,n.min,r),t.max=Xn(e.max,n.max,r)}function cee(t,e,n,r){TL(t.x,e.x,n.x,r),TL(t.y,e.y,n.y,r)}function uee(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const dee={duration:.45,ease:[.4,0,.1,1]},AL=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),CL=AL("applewebkit/")&&!AL("chrome/")?Math.round:is;function RL(t){t.min=CL(t.min),t.max=CL(t.max)}function fee(t){RL(t.x),RL(t.y)}function l4(t,e,n){return t==="position"||t==="preserve-aspect"&&!mJ(_L(e),_L(n),.2)}function hee(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const pee=a4({attachResizeListener:(t,e)=>Gm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yb={current:void 0},c4=a4({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Yb.current){const t=new pee({});t.mount(window),t.setOptions({layoutScroll:!0}),Yb.current=t}return Yb.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mee={pan:{Feature:NJ},drag:{Feature:PJ,ProjectionNode:c4,MeasureLayout:t4}};function PL(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Un.postRender(()=>s(e,Eg(e)))}class gee extends mc{mount(){const{current:e}=this.node;e&&(this.unmount=gK(e,n=>(PL(this.node,n,"Start"),r=>PL(this.node,r,"End"))))}unmount(){}}class vee extends mc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mg(Gm(this.node.current,"focus",()=>this.onFocus()),Gm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NL(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Un.postRender(()=>s(e,Eg(e)))}class yee extends mc{mount(){const{current:e}=this.node;e&&(this.unmount=_K(e,n=>(NL(this.node,n,"Start"),(r,{success:i})=>NL(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const EE=new WeakMap,qb=new WeakMap,xee=t=>{const e=EE.get(t.target);e&&e(t)},_ee=t=>{t.forEach(xee)};function wee({root:t,...e}){const n=t||document;qb.has(n)||qb.set(n,{});const r=qb.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(_ee,{root:t,...e})),r[i]}function See(t,e,n){const r=wee(e);return EE.set(t,n),r.observe(t),()=>{EE.delete(t),r.unobserve(t)}}const bee={some:0,all:1};class Mee extends mc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bee[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),p=c?u:h;p&&p(l)};return See(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Eee(e,n))&&this.startObserver()}unmount(){}}function Eee({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Tee={inView:{Feature:Mee},tap:{Feature:yee},focus:{Feature:vee},hover:{Feature:gee}},Aee={layout:{ProjectionNode:c4,MeasureLayout:t4}},TE={current:null},u4={current:!1};function Cee(){if(u4.current=!0,!!MA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>TE.current=t.matches;t.addListener(e),e()}else TE.current=!1}const Ree=[...kz,ti,oc],Pee=t=>Ree.find(Dz(t)),IL=new WeakMap;function Nee(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ri(i))t.addValue(r,i);else if(ri(s))t.addValue(r,Hm(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Hm(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const LL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Iee{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Go.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Un.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=J_(n),this.isVariantNode=HB(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const v=p[m];l[m]!==void 0&&ri(v)&&v.set(l[m],!1)}}mount(e){this.current=e,IL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),u4.current||Cee(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:TE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){IL.delete(this.current),this.projection&&this.projection.unmount(),sc(this.notifyUpdate),sc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=qu.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Un.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Zf){const n=Zf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):lr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<LL.length;r++){const i=LL[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Nee(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Hm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Iz(i)||bz(i))?i=parseFloat(i):!Pee(i)&&oc.test(n)&&(i=Rz(e,n)),this.setBaseTarget(e,ri(i)?i.get():i)),ri(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=NA(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ri(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new GA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class d4 extends Iee{constructor(){super(...arguments),this.KeyframeResolver=Oz}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ri(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Lee(t){return window.getComputedStyle(t)}class Dee extends d4{constructor(){super(...arguments),this.type="html",this.renderInstance=QB}readValueFromInstance(e,n){if(qu.has(n)){const r=ZA(n);return r&&r.default||0}else{const r=Lee(e),i=(qB(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Jz(e,n)}build(e,n,r){DA(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return UA(e,n,r)}}class kee extends d4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=lr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(qu.has(n)){const r=ZA(n);return r&&r.default||0}return n=JB.has(n)?n:CA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return nz(e,n,r)}build(e,n,r){kA(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){ez(e,n,r,i)}mount(e){this.isSVGTag=FA(e.tagName),super.mount(e)}}const Oee=(t,e)=>PA(t)?new kee(e):new Dee(e,{allowProjection:t!==T.Fragment}),Fee=cK({...oJ,...Tee,...mee,...Aee},Oee),Rs=MZ(Fee),DL=t=>{let e;const n=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const p=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(m=>m(e,p))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,i,a);return a},Uee=t=>t?DL(t):DL,Bee=t=>t;function zee(t,e=Bee){const n=sn.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return sn.useDebugValue(n),n}const kL=t=>{const e=Uee(t),n=r=>zee(e,r);return Object.assign(n,e),n},nw=t=>t?kL(t):kL,Vee=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let h=o(r.getState());c=p=>{const m=o(p);if(!u(h,m)){const v=h;a(h=m,v)}},l!=null&&l.fireImmediately&&a(h,h)}return i(c)},t(e,n,r)},tC=Vee;function jee(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const AE=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return AE(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return AE(r)(n)}}}},Hee=(t,e)=>(n,r,i)=>{let s={storage:jee(()=>localStorage),partialize:y=>y,version:0,merge:(y,x)=>({...x,...y}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...y)},r,i);const u=()=>{const y=s.partialize({...r()});return c.setItem(s.name,{state:y,version:s.version})},h=i.setState;i.setState=(y,x)=>{h(y,x),u()};const p=t((...y)=>{n(...y),u()},r,i);i.getInitialState=()=>p;let m;const v=()=>{var y,x;if(!c)return;o=!1,a.forEach(_=>{var S;return _((S=r())!=null?S:p)});const g=((x=s.onRehydrateStorage)==null?void 0:x.call(s,(y=r())!=null?y:p))||void 0;return AE(c.getItem.bind(c))(s.name).then(_=>{if(_)if(typeof _.version=="number"&&_.version!==s.version){if(s.migrate){const S=s.migrate(_.state,_.version);return S instanceof Promise?S.then(E=>[!0,E]):[!0,S]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,_.state];return[!1,void 0]}).then(_=>{var S;const[E,R]=_;if(m=s.merge(R,(S=r())!=null?S:p),n(m,!0),E)return u()}).then(()=>{g==null||g(m,void 0),m=r(),o=!0,l.forEach(_=>_(m))}).catch(_=>{g==null||g(void 0,_)})};return i.persist={setOptions:y=>{s={...s,...y},y.storage&&(c=y.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:y=>(a.add(y),()=>{a.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},s.skipHydration||v(),m||p},Wee=Hee,nC=nw()(Wee((t,e)=>({storiesRead:0,storyHistory:[],incrementStoriesRead:n=>{t(r=>r.storyHistory.includes(n)?r:{storiesRead:r.storiesRead+1,storyHistory:[...r.storyHistory,n]})},resetProgress:()=>t({storiesRead:0,storyHistory:[]})}),{name:"reading-progress-storage"}));/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const rw="170",$c={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Yc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},f4=0,CE=1,h4=2,Gee=3,p4=0,iw=1,$p=2,qs=3,Wa=0,bi=1,Oo=2,Da=0,_u=1,RE=2,PE=3,NE=4,m4=5,Pl=100,g4=101,v4=102,y4=103,x4=104,_4=200,w4=201,S4=202,b4=203,Ex=204,Tx=205,M4=206,E4=207,T4=208,A4=209,C4=210,R4=211,P4=212,N4=213,I4=214,Ax=0,Cx=1,Rx=2,Fu=3,Px=4,Nx=5,Ix=6,Lx=7,Tg=0,L4=1,D4=2,Xo=0,k4=1,O4=2,F4=3,rC=4,U4=5,B4=6,z4=7,IE="attached",V4="detached",sw=300,Ga=301,ac=302,Xm=303,$m=304,mh=306,Ym=1e3,Ns=1001,qm=1002,jr=1003,iC=1004,Xee=1004,cf=1005,$ee=1005,fr=1006,Yp=1007,Yee=1007,Uo=1008,qee=1008,po=1009,sC=1010,oC=1011,Qf=1012,ow=1013,Xa=1014,wi=1015,Zu=1016,aw=1017,lw=1018,Uu=1020,aC=35902,lC=1021,cC=1022,ii=1023,uC=1024,dC=1025,wu=1026,Bu=1027,cw=1028,Ag=1029,fC=1030,uw=1031,Zee=1032,dw=1033,qp=33776,Zp=33777,Kp=33778,Qp=33779,Dx=35840,kx=35841,Ox=35842,Fx=35843,Ux=36196,Bx=37492,zx=37496,Vx=37808,jx=37809,Hx=37810,Wx=37811,Gx=37812,Xx=37813,$x=37814,Yx=37815,qx=37816,Zx=37817,Kx=37818,Qx=37819,Jx=37820,e_=37821,Jp=36492,t_=36494,n_=36495,hC=36283,r_=36284,i_=36285,s_=36286,j4=2200,H4=2201,W4=2202,Zm=2300,o_=2301,b0=2302,au=2400,lu=2401,Km=2402,fw=2500,pC=2501,Kee=0,Qee=1,Jee=2,G4=3200,X4=3201,ete=3202,tte=3203,gc=0,$4=1,Ea="",ki="srgb",Ku="srgb-linear",Cg="linear",Mn="srgb",nte=0,qc=7680,rte=7681,ite=7682,ste=7683,ote=34055,ate=34056,lte=5386,cte=512,ute=513,dte=514,fte=515,hte=516,pte=517,mte=518,LE=519,Y4=512,q4=513,Z4=514,mC=515,K4=516,Q4=517,J4=518,eV=519,Qm=35044,gte=35048,vte=35040,yte=35045,xte=35049,_te=35041,wte=35046,Ste=35050,bte=35042,Mte="100",DE="300 es",Bo=2e3,Jm=2001;let ta=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Kr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let OL=1234567;const Su=Math.PI/180,Jf=180/Math.PI;function ss(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Kr[t&255]+Kr[t>>8&255]+Kr[t>>16&255]+Kr[t>>24&255]+"-"+Kr[e&255]+Kr[e>>8&255]+"-"+Kr[e>>16&15|64]+Kr[e>>24&255]+"-"+Kr[n&63|128]+Kr[n>>8&255]+"-"+Kr[n>>16&255]+Kr[n>>24&255]+Kr[r&255]+Kr[r>>8&255]+Kr[r>>16&255]+Kr[r>>24&255]).toLowerCase()}function rr(t,e,n){return Math.max(e,Math.min(n,t))}function gC(t,e){return(t%e+e)%e}function Ete(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Tte(t,e,n){return t!==e?(n-t)/(e-t):0}function em(t,e,n){return(1-n)*t+n*e}function Ate(t,e,n,r){return em(t,e,1-Math.exp(-n*r))}function Cte(t,e=1){return e-Math.abs(gC(t,e*2)-e)}function Rte(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Pte(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Nte(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Ite(t,e){return t+Math.random()*(e-t)}function Lte(t){return t*(.5-Math.random())}function Dte(t){t!==void 0&&(OL=t);let e=OL+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function kte(t){return t*Su}function Ote(t){return t*Jf}function Fte(t){return(t&t-1)===0&&t!==0}function Ute(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Bte(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function zte(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),p=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":t.set(a*u,l*h,l*p,a*c);break;case"YZY":t.set(l*p,a*u,l*h,a*c);break;case"ZXZ":t.set(l*h,l*p,a*u,a*c);break;case"XZX":t.set(a*u,l*v,l*m,a*c);break;case"YXY":t.set(l*m,a*u,l*v,a*c);break;case"ZYZ":t.set(l*v,l*m,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function _i(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function qt(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Vte={DEG2RAD:Su,RAD2DEG:Jf,generateUUID:ss,clamp:rr,euclideanModulo:gC,mapLinear:Ete,inverseLerp:Tte,lerp:em,damp:Ate,pingpong:Cte,smoothstep:Rte,smootherstep:Pte,randInt:Nte,randFloat:Ite,randFloatSpread:Lte,seededRandom:Dte,degToRad:kte,radToDeg:Ote,isPowerOfTwo:Fte,ceilPowerOfTwo:Ute,floorPowerOfTwo:Bte,setQuaternionFromProperEuler:zte,normalize:qt,denormalize:_i};class Ae{constructor(e=0,n=0){Ae.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(rr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class $t{constructor(e,n,r,i,s,o,a,l,c){$t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],p=r[2],m=r[5],v=r[8],y=i[0],x=i[3],g=i[6],_=i[1],S=i[4],E=i[7],R=i[2],I=i[5],C=i[8];return s[0]=o*y+a*_+l*R,s[3]=o*x+a*S+l*I,s[6]=o*g+a*E+l*C,s[1]=c*y+u*_+h*R,s[4]=c*x+u*S+h*I,s[7]=c*g+u*E+h*C,s[2]=p*y+m*_+v*R,s[5]=p*x+m*S+v*I,s[8]=p*g+m*E+v*C,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,p=a*l-u*s,m=c*s-o*l,v=n*h+r*p+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=h*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=p*y,e[4]=(u*n-i*l)*y,e[5]=(i*s-a*n)*y,e[6]=m*y,e[7]=(r*l-c*n)*y,e[8]=(o*n-r*s)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(Zb.makeScale(e,n)),this}rotate(e){return this.premultiply(Zb.makeRotation(-e)),this}translate(e,n){return this.premultiply(Zb.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Zb=new $t;function tV(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const jte={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function uf(t,e){return new jte[t](e)}function eg(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function nV(){const t=eg("canvas");return t.style.display="block",t}const FL={};function Tp(t){t in FL||(FL[t]=!0,console.warn(t))}function Hte(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function Wte(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Gte(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const fn={enabled:!0,workingColorSpace:Ku,spaces:{},convert:function(t,e,n){return this.enabled===!1||e===n||!e||!n||(this.spaces[e].transfer===Mn&&(t.r=ka(t.r),t.g=ka(t.g),t.b=ka(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Mn&&(t.r=Af(t.r),t.g=Af(t.g),t.b=Af(t.b))),t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===Ea?Cg:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}};function ka(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Af(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const UL=[.64,.33,.3,.6,.15,.06],BL=[.2126,.7152,.0722],zL=[.3127,.329],VL=new $t().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),jL=new $t().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);fn.define({[Ku]:{primaries:UL,whitePoint:zL,transfer:Cg,toXYZ:VL,fromXYZ:jL,luminanceCoefficients:BL,workingColorSpaceConfig:{unpackColorSpace:ki},outputColorSpaceConfig:{drawingBufferColorSpace:ki}},[ki]:{primaries:UL,whitePoint:zL,transfer:Mn,toXYZ:VL,fromXYZ:jL,luminanceCoefficients:BL,outputColorSpaceConfig:{drawingBufferColorSpace:ki}}});let wd;class rV{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{wd===void 0&&(wd=eg("canvas")),wd.width=e.width,wd.height=e.height;const r=wd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=wd}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=eg("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=ka(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ka(n[r]/255)*255):n[r]=ka(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Xte=0;class cu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Xte++}),this.uuid=ss(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Kb(i[o].image)):s.push(Kb(i[o]))}else s=Kb(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function Kb(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?rV.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $te=0;class ir extends ta{constructor(e=ir.DEFAULT_IMAGE,n=ir.DEFAULT_MAPPING,r=Ns,i=Ns,s=fr,o=Uo,a=ii,l=po,c=ir.DEFAULT_ANISOTROPY,u=Ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$te++}),this.uuid=ss(),this.name="",this.source=new cu(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ae(0,0),this.repeat=new Ae(1,1),this.center=new Ae(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ym:e.x=e.x-Math.floor(e.x);break;case Ns:e.x=e.x<0?0:1;break;case qm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ym:e.y=e.y-Math.floor(e.y);break;case Ns:e.y=e.y<0?0:1;break;case qm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ir.DEFAULT_IMAGE=null;ir.DEFAULT_MAPPING=sw;ir.DEFAULT_ANISOTROPY=1;class mn{constructor(e=0,n=0,r=0,i=1){mn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],p=l[1],m=l[5],v=l[9],y=l[2],x=l[6],g=l[10];if(Math.abs(u-p)<.01&&Math.abs(h-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(u+p)<.1&&Math.abs(h+y)<.1&&Math.abs(v+x)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const S=(c+1)/2,E=(m+1)/2,R=(g+1)/2,I=(u+p)/4,C=(h+y)/4,D=(v+x)/4;return S>E&&S>R?S<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(S),i=I/r,s=C/r):E>R?E<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(E),r=I/i,s=D/i):R<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(R),r=C/s,i=D/s),this.set(r,i,s,n),this}let _=Math.sqrt((x-v)*(x-v)+(h-y)*(h-y)+(p-u)*(p-u));return Math.abs(_)<.001&&(_=1),this.x=(x-v)/_,this.y=(h-y)/_,this.z=(p-u)/_,this.w=Math.acos((c+m+g-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iV extends ta{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new mn(0,0,e,n),this.scissorTest=!1,this.viewport=new mn(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:fr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new ir(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new cu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ks extends iV{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class hw extends ir{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=jr,this.minFilter=jr,this.wrapR=Ns,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Yte extends ks{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new hw(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class vC extends ir{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=jr,this.minFilter=jr,this.wrapR=Ns,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qte extends ks{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new vC(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class si{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3];const p=s[o+0],m=s[o+1],v=s[o+2],y=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=v,e[n+3]=y;return}if(h!==y||l!==p||c!==m||u!==v){let x=1-a;const g=l*p+c*m+u*v+h*y,_=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const R=Math.sqrt(S),I=Math.atan2(R,g*_);x=Math.sin(x*I)/R,a=Math.sin(a*I)/R}const E=a*_;if(l=l*x+p*E,c=c*x+m*E,u=u*x+v*E,h=h*x+y*E,x===1-a){const R=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=R,c*=R,u*=R,h*=R}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[n]=a*v+u*h+l*m-c*p,e[n+1]=l*v+u*p+c*h-a*m,e[n+2]=c*v+u*m+a*p-l*h,e[n+3]=u*v-a*h-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),h=a(s/2),p=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*u*h+c*m*v,this._y=c*m*h-p*u*v,this._z=c*u*v+p*m*h,this._w=c*u*h-p*m*v;break;case"YXZ":this._x=p*u*h+c*m*v,this._y=c*m*h-p*u*v,this._z=c*u*v-p*m*h,this._w=c*u*h+p*m*v;break;case"ZXY":this._x=p*u*h-c*m*v,this._y=c*m*h+p*u*v,this._z=c*u*v+p*m*h,this._w=c*u*h-p*m*v;break;case"ZYX":this._x=p*u*h-c*m*v,this._y=c*m*h+p*u*v,this._z=c*u*v-p*m*h,this._w=c*u*h+p*m*v;break;case"YZX":this._x=p*u*h+c*m*v,this._y=c*m*h+p*u*v,this._z=c*u*v-p*m*h,this._w=c*u*h-p*m*v;break;case"XZY":this._x=p*u*h-c*m*v,this._y=c*m*h-p*u*v,this._z=c*u*v+p*m*h,this._w=c*u*h+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],h=n[10],p=r+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>h){const m=2*Math.sqrt(1+r-a-h);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-r-h);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+h-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(rr(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-n)*u)/c,p=Math.sin(n*u)/c;return this._w=o*h+this._w*p,this._x=r*h+this._x*p,this._y=i*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,n=0,r=0){j.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(HL.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(HL.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),h=2*(s*r-o*n);return this.x=n+l*c+o*h-a*u,this.y=r+l*u+a*c-s*h,this.z=i+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Qb.copy(this).projectOnVector(e),this.sub(Qb)}reflect(e){return this.sub(Qb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(rr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Qb=new j,HL=new si;class Mi{constructor(e=new j(1/0,1/0,1/0),n=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(js.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(js.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=js.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,js):js.fromBufferAttribute(s,o),js.applyMatrix4(e.matrixWorld),this.expandByPoint(js);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ay.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),ay.copy(r.boundingBox)),ay.applyMatrix4(e.matrixWorld),this.union(ay)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,js),js.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(tp),ly.subVectors(this.max,tp),Sd.subVectors(e.a,tp),bd.subVectors(e.b,tp),Md.subVectors(e.c,tp),hl.subVectors(bd,Sd),pl.subVectors(Md,bd),Pc.subVectors(Sd,Md);let n=[0,-hl.z,hl.y,0,-pl.z,pl.y,0,-Pc.z,Pc.y,hl.z,0,-hl.x,pl.z,0,-pl.x,Pc.z,0,-Pc.x,-hl.y,hl.x,0,-pl.y,pl.x,0,-Pc.y,Pc.x,0];return!Jb(n,Sd,bd,Md,ly)||(n=[1,0,0,0,1,0,0,0,1],!Jb(n,Sd,bd,Md,ly))?!1:(cy.crossVectors(hl,pl),n=[cy.x,cy.y,cy.z],Jb(n,Sd,bd,Md,ly))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,js).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(js).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(fa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const fa=[new j,new j,new j,new j,new j,new j,new j,new j],js=new j,ay=new Mi,Sd=new j,bd=new j,Md=new j,hl=new j,pl=new j,Pc=new j,tp=new j,ly=new j,cy=new j,Nc=new j;function Jb(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Nc.fromArray(t,s);const a=i.x*Math.abs(Nc.x)+i.y*Math.abs(Nc.y)+i.z*Math.abs(Nc.z),l=e.dot(Nc),c=n.dot(Nc),u=r.dot(Nc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Zte=new Mi,np=new j,e1=new j;class oi{constructor(e=new j,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):Zte.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;np.subVectors(e,this.center);const n=np.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(np,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(e1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(np.copy(e.center).add(e1)),this.expandByPoint(np.copy(e.center).sub(e1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ha=new j,t1=new j,uy=new j,ml=new j,n1=new j,dy=new j,r1=new j;class Qu{constructor(e=new j,n=new j(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ha)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=ha.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(ha.copy(this.origin).addScaledVector(this.direction,n),ha.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){t1.copy(e).add(n).multiplyScalar(.5),uy.copy(n).sub(e).normalize(),ml.copy(this.origin).sub(t1);const s=e.distanceTo(n)*.5,o=-this.direction.dot(uy),a=ml.dot(this.direction),l=-ml.dot(uy),c=ml.lengthSq(),u=Math.abs(1-o*o);let h,p,m,v;if(u>0)if(h=o*l-a,p=o*a-l,v=s*u,h>=0)if(p>=-v)if(p<=v){const y=1/u;h*=y,p*=y,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-v?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c):p<=v?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(t1).addScaledVector(uy,p),m}intersectSphere(e,n){ha.subVectors(e.center,this.origin);const r=ha.dot(this.direction),i=ha.dot(ha)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,ha)!==null}intersectTriangle(e,n,r,i,s){n1.subVectors(n,e),dy.subVectors(r,e),r1.crossVectors(n1,dy);let o=this.direction.dot(r1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ml.subVectors(this.origin,e);const l=a*this.direction.dot(dy.crossVectors(ml,dy));if(l<0)return null;const c=a*this.direction.dot(n1.cross(ml));if(c<0||l+c>o)return null;const u=-a*ml.dot(r1);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zt{constructor(e,n,r,i,s,o,a,l,c,u,h,p,m,v,y,x){zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,h,p,m,v,y,x)}set(e,n,r,i,s,o,a,l,c,u,h,p,m,v,y,x){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=u,g[10]=h,g[14]=p,g[3]=m,g[7]=v,g[11]=y,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zt().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Ed.setFromMatrixColumn(e,0).length(),s=1/Ed.setFromMatrixColumn(e,1).length(),o=1/Ed.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*h,v=a*u,y=a*h;n[0]=l*u,n[4]=-l*h,n[8]=c,n[1]=m+v*c,n[5]=p-y*c,n[9]=-a*l,n[2]=y-p*c,n[6]=v+m*c,n[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*h,v=c*u,y=c*h;n[0]=p+y*a,n[4]=v*a-m,n[8]=o*c,n[1]=o*h,n[5]=o*u,n[9]=-a,n[2]=m*a-v,n[6]=y+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*h,v=c*u,y=c*h;n[0]=p-y*a,n[4]=-o*h,n[8]=v+m*a,n[1]=m+v*a,n[5]=o*u,n[9]=y-p*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*h,v=a*u,y=a*h;n[0]=l*u,n[4]=v*c-m,n[8]=p*c+y,n[1]=l*h,n[5]=y*c+p,n[9]=m*c-v,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,v=a*l,y=a*c;n[0]=l*u,n[4]=y-p*h,n[8]=v*h+m,n[1]=h,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=m*h+v,n[10]=p-y*h}else if(e.order==="XZY"){const p=o*l,m=o*c,v=a*l,y=a*c;n[0]=l*u,n[4]=-h,n[8]=c*u,n[1]=p*h+y,n[5]=o*u,n[9]=m*h-v,n[2]=v*h-m,n[6]=a*u,n[10]=y*h+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Kte,e,Qte)}lookAt(e,n,r){const i=this.elements;return $i.subVectors(e,n),$i.lengthSq()===0&&($i.z=1),$i.normalize(),gl.crossVectors(r,$i),gl.lengthSq()===0&&(Math.abs(r.z)===1?$i.x+=1e-4:$i.z+=1e-4,$i.normalize(),gl.crossVectors(r,$i)),gl.normalize(),fy.crossVectors($i,gl),i[0]=gl.x,i[4]=fy.x,i[8]=$i.x,i[1]=gl.y,i[5]=fy.y,i[9]=$i.y,i[2]=gl.z,i[6]=fy.z,i[10]=$i.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],p=r[9],m=r[13],v=r[2],y=r[6],x=r[10],g=r[14],_=r[3],S=r[7],E=r[11],R=r[15],I=i[0],C=i[4],D=i[8],L=i[12],P=i[1],F=i[5],z=i[9],H=i[13],q=i[2],se=i[6],K=i[10],ne=i[14],O=i[3],W=i[7],Y=i[11],re=i[15];return s[0]=o*I+a*P+l*q+c*O,s[4]=o*C+a*F+l*se+c*W,s[8]=o*D+a*z+l*K+c*Y,s[12]=o*L+a*H+l*ne+c*re,s[1]=u*I+h*P+p*q+m*O,s[5]=u*C+h*F+p*se+m*W,s[9]=u*D+h*z+p*K+m*Y,s[13]=u*L+h*H+p*ne+m*re,s[2]=v*I+y*P+x*q+g*O,s[6]=v*C+y*F+x*se+g*W,s[10]=v*D+y*z+x*K+g*Y,s[14]=v*L+y*H+x*ne+g*re,s[3]=_*I+S*P+E*q+R*O,s[7]=_*C+S*F+E*se+R*W,s[11]=_*D+S*z+E*K+R*Y,s[15]=_*L+S*H+E*ne+R*re,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],p=e[10],m=e[14],v=e[3],y=e[7],x=e[11],g=e[15];return v*(+s*l*h-i*c*h-s*a*p+r*c*p+i*a*m-r*l*m)+y*(+n*l*m-n*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+x*(+n*c*h-n*a*m-s*o*h+r*o*m+s*a*u-r*c*u)+g*(-i*a*u-n*l*h+n*a*p+i*o*h-r*o*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],m=e[11],v=e[12],y=e[13],x=e[14],g=e[15],_=h*x*c-y*p*c+y*l*m-a*x*m-h*l*g+a*p*g,S=v*p*c-u*x*c-v*l*m+o*x*m+u*l*g-o*p*g,E=u*y*c-v*h*c+v*a*m-o*y*m-u*a*g+o*h*g,R=v*h*l-u*y*l-v*a*p+o*y*p+u*a*x-o*h*x,I=n*_+r*S+i*E+s*R;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/I;return e[0]=_*C,e[1]=(y*p*s-h*x*s-y*i*m+r*x*m+h*i*g-r*p*g)*C,e[2]=(a*x*s-y*l*s+y*i*c-r*x*c-a*i*g+r*l*g)*C,e[3]=(h*l*s-a*p*s-h*i*c+r*p*c+a*i*m-r*l*m)*C,e[4]=S*C,e[5]=(u*x*s-v*p*s+v*i*m-n*x*m-u*i*g+n*p*g)*C,e[6]=(v*l*s-o*x*s-v*i*c+n*x*c+o*i*g-n*l*g)*C,e[7]=(o*p*s-u*l*s+u*i*c-n*p*c-o*i*m+n*l*m)*C,e[8]=E*C,e[9]=(v*h*s-u*y*s-v*r*m+n*y*m+u*r*g-n*h*g)*C,e[10]=(o*y*s-v*a*s+v*r*c-n*y*c-o*r*g+n*a*g)*C,e[11]=(u*a*s-o*h*s-u*r*c+n*h*c+o*r*m-n*a*m)*C,e[12]=R*C,e[13]=(u*y*i-v*h*i+v*r*p-n*y*p-u*r*x+n*h*x)*C,e[14]=(v*a*i-o*y*i-v*r*l+n*y*l+o*r*x-n*a*x)*C,e[15]=(o*h*i-u*a*i+u*r*l-n*h*l-o*r*p+n*a*p)*C,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,h=a+a,p=s*c,m=s*u,v=s*h,y=o*u,x=o*h,g=a*h,_=l*c,S=l*u,E=l*h,R=r.x,I=r.y,C=r.z;return i[0]=(1-(y+g))*R,i[1]=(m+E)*R,i[2]=(v-S)*R,i[3]=0,i[4]=(m-E)*I,i[5]=(1-(p+g))*I,i[6]=(x+_)*I,i[7]=0,i[8]=(v+S)*C,i[9]=(x-_)*C,i[10]=(1-(p+y))*C,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Ed.set(i[0],i[1],i[2]).length();const o=Ed.set(i[4],i[5],i[6]).length(),a=Ed.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Hs.copy(this);const c=1/s,u=1/o,h=1/a;return Hs.elements[0]*=c,Hs.elements[1]*=c,Hs.elements[2]*=c,Hs.elements[4]*=u,Hs.elements[5]*=u,Hs.elements[6]*=u,Hs.elements[8]*=h,Hs.elements[9]*=h,Hs.elements[10]*=h,n.setFromRotationMatrix(Hs),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Bo){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),h=(n+e)/(n-e),p=(r+i)/(r-i);let m,v;if(a===Bo)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Jm)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Bo){const l=this.elements,c=1/(n-e),u=1/(r-i),h=1/(o-s),p=(n+e)*c,m=(r+i)*u;let v,y;if(a===Bo)v=(o+s)*h,y=-2*h;else if(a===Jm)v=s*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=y,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Ed=new j,Hs=new zt,Kte=new j(0,0,0),Qte=new j(1,1,1),gl=new j,fy=new j,$i=new j,WL=new zt,GL=new si;class ls{constructor(e=0,n=0,r=0,i=ls.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(rr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-rr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(rr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-rr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(rr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-rr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return WL.makeRotationFromQuaternion(e),this.setFromRotationMatrix(WL,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return GL.setFromEuler(this),this.setFromQuaternion(GL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ls.DEFAULT_ORDER="XYZ";class bu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Jte=0;const XL=new j,Td=new si,pa=new zt,hy=new j,rp=new j,ene=new j,tne=new si,$L=new j(1,0,0),YL=new j(0,1,0),qL=new j(0,0,1),ZL={type:"added"},nne={type:"removed"},Ad={type:"childadded",child:null},i1={type:"childremoved",child:null};class vn extends ta{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jte++}),this.uuid=ss(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vn.DEFAULT_UP.clone();const e=new j,n=new ls,r=new si,i=new j(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zt},normalMatrix:{value:new $t}}),this.matrix=new zt,this.matrixWorld=new zt,this.matrixAutoUpdate=vn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Td.setFromAxisAngle(e,n),this.quaternion.multiply(Td),this}rotateOnWorldAxis(e,n){return Td.setFromAxisAngle(e,n),this.quaternion.premultiply(Td),this}rotateX(e){return this.rotateOnAxis($L,e)}rotateY(e){return this.rotateOnAxis(YL,e)}rotateZ(e){return this.rotateOnAxis(qL,e)}translateOnAxis(e,n){return XL.copy(e).applyQuaternion(this.quaternion),this.position.add(XL.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis($L,e)}translateY(e){return this.translateOnAxis(YL,e)}translateZ(e){return this.translateOnAxis(qL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(pa.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?hy.copy(e):hy.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),rp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pa.lookAt(rp,hy,this.up):pa.lookAt(hy,rp,this.up),this.quaternion.setFromRotationMatrix(pa),i&&(pa.extractRotation(i.matrixWorld),Td.setFromRotationMatrix(pa),this.quaternion.premultiply(Td.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ZL),Ad.child=e,this.dispatchEvent(Ad),Ad.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(nne),i1.child=e,this.dispatchEvent(i1),i1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),pa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),pa.multiply(e.parent.matrixWorld)),e.applyMatrix4(pa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ZL),Ad.child=e,this.dispatchEvent(Ad),Ad.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rp,e,ene),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(rp,tne,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}vn.DEFAULT_UP=new j(0,1,0);vn.DEFAULT_MATRIX_AUTO_UPDATE=!0;vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ws=new j,ma=new j,s1=new j,ga=new j,Cd=new j,Rd=new j,KL=new j,o1=new j,a1=new j,l1=new j,c1=new mn,u1=new mn,d1=new mn;class Fi{constructor(e=new j,n=new j,r=new j){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ws.subVectors(e,n),i.cross(Ws);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ws.subVectors(i,n),ma.subVectors(r,n),s1.subVectors(e,n);const o=Ws.dot(Ws),a=Ws.dot(ma),l=Ws.dot(s1),c=ma.dot(ma),u=ma.dot(s1),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const p=1/h,m=(c*l-a*u)*p,v=(o*u-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,ga)===null?!1:ga.x>=0&&ga.y>=0&&ga.x+ga.y<=1}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,ga)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ga.x),l.addScaledVector(o,ga.y),l.addScaledVector(a,ga.z),l)}static getInterpolatedAttribute(e,n,r,i,s,o){return c1.setScalar(0),u1.setScalar(0),d1.setScalar(0),c1.fromBufferAttribute(e,n),u1.fromBufferAttribute(e,r),d1.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(c1,s.x),o.addScaledVector(u1,s.y),o.addScaledVector(d1,s.z),o}static isFrontFacing(e,n,r,i){return Ws.subVectors(r,n),ma.subVectors(e,n),Ws.cross(ma).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ws.subVectors(this.c,this.b),ma.subVectors(this.a,this.b),Ws.cross(ma).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Fi.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return Fi.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Fi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;Cd.subVectors(i,r),Rd.subVectors(s,r),o1.subVectors(e,r);const l=Cd.dot(o1),c=Rd.dot(o1);if(l<=0&&c<=0)return n.copy(r);a1.subVectors(e,i);const u=Cd.dot(a1),h=Rd.dot(a1);if(u>=0&&h<=u)return n.copy(i);const p=l*h-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(Cd,o);l1.subVectors(e,s);const m=Cd.dot(l1),v=Rd.dot(l1);if(v>=0&&m<=v)return n.copy(s);const y=m*c-l*v;if(y<=0&&c>=0&&v<=0)return a=c/(c-v),n.copy(r).addScaledVector(Rd,a);const x=u*v-m*h;if(x<=0&&h-u>=0&&m-v>=0)return KL.subVectors(s,i),a=(h-u)/(h-u+(m-v)),n.copy(i).addScaledVector(KL,a);const g=1/(x+y+p);return o=y*g,a=p*g,n.copy(r).addScaledVector(Cd,o).addScaledVector(Rd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const sV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vl={h:0,s:0,l:0},py={h:0,s:0,l:0};function f1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class ut{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=ki){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=fn.workingColorSpace){return this.r=e,this.g=n,this.b=r,fn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=fn.workingColorSpace){if(e=gC(e,1),n=rr(n,0,1),r=rr(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=f1(o,s,e+1/3),this.g=f1(o,s,e),this.b=f1(o,s,e-1/3)}return fn.toWorkingColorSpace(this,i),this}setStyle(e,n=ki){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=ki){const r=sV[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ka(e.r),this.g=ka(e.g),this.b=ka(e.b),this}copyLinearToSRGB(e){return this.r=Af(e.r),this.g=Af(e.g),this.b=Af(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ki){return fn.fromWorkingColorSpace(Qr.copy(this),e),Math.round(rr(Qr.r*255,0,255))*65536+Math.round(rr(Qr.g*255,0,255))*256+Math.round(rr(Qr.b*255,0,255))}getHexString(e=ki){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=fn.workingColorSpace){fn.fromWorkingColorSpace(Qr.copy(this),n);const r=Qr.r,i=Qr.g,s=Qr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=fn.workingColorSpace){return fn.fromWorkingColorSpace(Qr.copy(this),n),e.r=Qr.r,e.g=Qr.g,e.b=Qr.b,e}getStyle(e=ki){fn.fromWorkingColorSpace(Qr.copy(this),e);const n=Qr.r,r=Qr.g,i=Qr.b;return e!==ki?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(vl),this.setHSL(vl.h+e,vl.s+n,vl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(vl),e.getHSL(py);const r=em(vl.h,py.h,n),i=em(vl.s,py.s,n),s=em(vl.l,py.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new ut;ut.NAMES=sV;let rne=0;class ci extends ta{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rne++}),this.uuid=ss(),this.name="",this.blending=_u,this.side=Wa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ex,this.blendDst=Tx,this.blendEquation=Pl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ut(0,0,0),this.blendAlpha=0,this.depthFunc=Fu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=LE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qc,this.stencilZFail=qc,this.stencilZPass=qc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==_u&&(r.blending=this.blending),this.side!==Wa&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Ex&&(r.blendSrc=this.blendSrc),this.blendDst!==Tx&&(r.blendDst=this.blendDst),this.blendEquation!==Pl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Fu&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==LE&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==qc&&(r.stencilFail=this.stencilFail),this.stencilZFail!==qc&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==qc&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class vc extends ci{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ta=ine();function ine(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Li(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=rr(t,-65504,65504),Ta.floatView[0]=t;const e=Ta.uint32View[0],n=e>>23&511;return Ta.baseTable[n]+((e&8388607)>>Ta.shiftTable[n])}function Ap(t){const e=t>>10;return Ta.uint32View[0]=Ta.mantissaTable[Ta.offsetTable[e]+(t&1023)]+Ta.exponentTable[e],Ta.floatView[0]}const sne={toHalfFloat:Li,fromHalfFloat:Ap},gr=new j,my=new Ae;class Rn{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Qm,this.updateRanges=[],this.gpuType=wi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)my.fromBufferAttribute(this,n),my.applyMatrix3(e),this.setXY(n,my.x,my.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)gr.fromBufferAttribute(this,n),gr.applyMatrix3(e),this.setXYZ(n,gr.x,gr.y,gr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)gr.fromBufferAttribute(this,n),gr.applyMatrix4(e),this.setXYZ(n,gr.x,gr.y,gr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)gr.fromBufferAttribute(this,n),gr.applyNormalMatrix(e),this.setXYZ(n,gr.x,gr.y,gr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)gr.fromBufferAttribute(this,n),gr.transformDirection(e),this.setXYZ(n,gr.x,gr.y,gr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=_i(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=qt(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=_i(n,this.array)),n}setX(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=_i(n,this.array)),n}setY(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=_i(n,this.array)),n}setZ(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=_i(n,this.array)),n}setW(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array),i=qt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array),i=qt(i,this.array),s=qt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Qm&&(e.usage=this.usage),e}}class one extends Rn{constructor(e,n,r){super(new Int8Array(e),n,r)}}class ane extends Rn{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class lne extends Rn{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class cne extends Rn{constructor(e,n,r){super(new Int16Array(e),n,r)}}class yC extends Rn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class une extends Rn{constructor(e,n,r){super(new Int32Array(e),n,r)}}class xC extends Rn{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class dne extends Rn{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=Ap(this.array[e*this.itemSize]);return this.normalized&&(n=_i(n,this.array)),n}setX(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize]=Li(n),this}getY(e){let n=Ap(this.array[e*this.itemSize+1]);return this.normalized&&(n=_i(n,this.array)),n}setY(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+1]=Li(n),this}getZ(e){let n=Ap(this.array[e*this.itemSize+2]);return this.normalized&&(n=_i(n,this.array)),n}setZ(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+2]=Li(n),this}getW(e){let n=Ap(this.array[e*this.itemSize+3]);return this.normalized&&(n=_i(n,this.array)),n}setW(e,n){return this.normalized&&(n=qt(n,this.array)),this.array[e*this.itemSize+3]=Li(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array)),this.array[e+0]=Li(n),this.array[e+1]=Li(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array),i=qt(i,this.array)),this.array[e+0]=Li(n),this.array[e+1]=Li(r),this.array[e+2]=Li(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array),i=qt(i,this.array),s=qt(s,this.array)),this.array[e+0]=Li(n),this.array[e+1]=Li(r),this.array[e+2]=Li(i),this.array[e+3]=Li(s),this}}class bt extends Rn{constructor(e,n,r){super(new Float32Array(e),n,r)}}let fne=0;const _s=new zt,h1=new vn,Pd=new j,Yi=new Mi,ip=new Mi,Ir=new j;class tn extends ta{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fne++}),this.uuid=ss(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tV(e)?xC:yC)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new $t().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _s.makeRotationFromQuaternion(e),this.applyMatrix4(_s),this}rotateX(e){return _s.makeRotationX(e),this.applyMatrix4(_s),this}rotateY(e){return _s.makeRotationY(e),this.applyMatrix4(_s),this}rotateZ(e){return _s.makeRotationZ(e),this.applyMatrix4(_s),this}translate(e,n,r){return _s.makeTranslation(e,n,r),this.applyMatrix4(_s),this}scale(e,n,r){return _s.makeScale(e,n,r),this.applyMatrix4(_s),this}lookAt(e){return h1.lookAt(e),h1.updateMatrix(),this.applyMatrix4(h1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pd).negate(),this.translate(Pd.x,Pd.y,Pd.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new bt(r,3))}else{for(let r=0,i=n.count;r<i;r++){const s=e[r];n.setXYZ(r,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Yi.setFromBufferAttribute(s),this.morphTargetsRelative?(Ir.addVectors(this.boundingBox.min,Yi.min),this.boundingBox.expandByPoint(Ir),Ir.addVectors(this.boundingBox.max,Yi.max),this.boundingBox.expandByPoint(Ir)):(this.boundingBox.expandByPoint(Yi.min),this.boundingBox.expandByPoint(Yi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){const r=this.boundingSphere.center;if(Yi.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];ip.setFromBufferAttribute(a),this.morphTargetsRelative?(Ir.addVectors(Yi.min,ip.min),Yi.expandByPoint(Ir),Ir.addVectors(Yi.max,ip.max),Yi.expandByPoint(Ir)):(Yi.expandByPoint(ip.min),Yi.expandByPoint(ip.max))}Yi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Ir.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Ir));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Ir.fromBufferAttribute(a,c),l&&(Pd.fromBufferAttribute(e,c),Ir.add(Pd)),i=Math.max(i,r.distanceToSquared(Ir))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Rn(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let D=0;D<r.count;D++)a[D]=new j,l[D]=new j;const c=new j,u=new j,h=new j,p=new Ae,m=new Ae,v=new Ae,y=new j,x=new j;function g(D,L,P){c.fromBufferAttribute(r,D),u.fromBufferAttribute(r,L),h.fromBufferAttribute(r,P),p.fromBufferAttribute(s,D),m.fromBufferAttribute(s,L),v.fromBufferAttribute(s,P),u.sub(c),h.sub(c),m.sub(p),v.sub(p);const F=1/(m.x*v.y-v.x*m.y);isFinite(F)&&(y.copy(u).multiplyScalar(v.y).addScaledVector(h,-m.y).multiplyScalar(F),x.copy(h).multiplyScalar(m.x).addScaledVector(u,-v.x).multiplyScalar(F),a[D].add(y),a[L].add(y),a[P].add(y),l[D].add(x),l[L].add(x),l[P].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let D=0,L=_.length;D<L;++D){const P=_[D],F=P.start,z=P.count;for(let H=F,q=F+z;H<q;H+=3)g(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const S=new j,E=new j,R=new j,I=new j;function C(D){R.fromBufferAttribute(i,D),I.copy(R);const L=a[D];S.copy(L),S.sub(R.multiplyScalar(R.dot(L))).normalize(),E.crossVectors(I,L);const F=E.dot(l[D])<0?-1:1;o.setXYZW(D,S.x,S.y,S.z,F)}for(let D=0,L=_.length;D<L;++D){const P=_[D],F=P.start,z=P.count;for(let H=F,q=F+z;H<q;H+=3)C(e.getX(H+0)),C(e.getX(H+1)),C(e.getX(H+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Rn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new j,s=new j,o=new j,a=new j,l=new j,c=new j,u=new j,h=new j;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),y=e.getX(p+1),x=e.getX(p+2);i.fromBufferAttribute(n,v),s.fromBufferAttribute(n,y),o.fromBufferAttribute(n,x),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,x),a.add(u),l.add(u),c.add(u),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(x,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Ir.fromBufferAttribute(e,n),Ir.normalize(),e.setXYZ(n,Ir.x,Ir.y,Ir.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,p=new c.constructor(l.length*u);let m=0,v=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?m=l[y]*a.data.stride+a.offset:m=l[y]*u;for(let g=0;g<u;g++)p[v++]=c[m++]}return new Rn(p,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new tn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const p=c[u],m=e(p,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,p=c.length;h<p;h++){const m=c[h];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let p=0,m=h.length;p<m;p++)u.push(h[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const QL=new zt,Ic=new Qu,gy=new oi,JL=new j,vy=new j,yy=new j,xy=new j,p1=new j,_y=new j,eD=new j,wy=new j;class xr extends vn{constructor(e=new tn,n=new vc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){_y.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(p1.fromBufferAttribute(h,e),o?_y.addScaledVector(p1,u):_y.addScaledVector(p1.sub(n),u))}n.add(_y)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),gy.copy(r.boundingSphere),gy.applyMatrix4(s),Ic.copy(e.ray).recast(e.near),!(gy.containsPoint(Ic.origin)===!1&&(Ic.intersectSphere(gy,JL)===null||Ic.origin.distanceToSquared(JL)>(e.far-e.near)**2))&&(QL.copy(s).invert(),Ic.copy(e.ray).applyMatrix4(QL),!(r.boundingBox!==null&&Ic.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Ic)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,y=p.length;v<y;v++){const x=p[v],g=o[x.materialIndex],_=Math.max(x.start,m.start),S=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let E=_,R=S;E<R;E+=3){const I=a.getX(E),C=a.getX(E+1),D=a.getX(E+2);i=Sy(this,g,e,r,c,u,h,I,C,D),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=x.materialIndex,n.push(i))}}else{const v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);for(let x=v,g=y;x<g;x+=3){const _=a.getX(x),S=a.getX(x+1),E=a.getX(x+2);i=Sy(this,o,e,r,c,u,h,_,S,E),i&&(i.faceIndex=Math.floor(x/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,y=p.length;v<y;v++){const x=p[v],g=o[x.materialIndex],_=Math.max(x.start,m.start),S=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let E=_,R=S;E<R;E+=3){const I=E,C=E+1,D=E+2;i=Sy(this,g,e,r,c,u,h,I,C,D),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=x.materialIndex,n.push(i))}}else{const v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);for(let x=v,g=y;x<g;x+=3){const _=x,S=x+1,E=x+2;i=Sy(this,o,e,r,c,u,h,_,S,E),i&&(i.faceIndex=Math.floor(x/3),n.push(i))}}}}function hne(t,e,n,r,i,s,o,a){let l;if(e.side===bi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Wa,a),l===null)return null;wy.copy(a),wy.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(wy);return c<n.near||c>n.far?null:{distance:c,point:wy.clone(),object:t}}function Sy(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,vy),t.getVertexPosition(l,yy),t.getVertexPosition(c,xy);const u=hne(t,e,n,r,vy,yy,xy,eD);if(u){const h=new j;Fi.getBarycoord(eD,vy,yy,xy,h),i&&(u.uv=Fi.getInterpolatedAttribute(i,a,l,c,h,new Ae)),s&&(u.uv1=Fi.getInterpolatedAttribute(s,a,l,c,h,new Ae)),o&&(u.normal=Fi.getInterpolatedAttribute(o,a,l,c,h,new j),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new j,materialIndex:0};Fi.getNormal(vy,yy,xy,p.normal),u.face=p,u.barycoord=h}return u}class Ju extends tn{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let p=0,m=0;v("z","y","x",-1,-1,r,n,e,o,s,0),v("z","y","x",1,-1,r,n,-e,o,s,1),v("x","z","y",1,1,e,r,n,i,o,2),v("x","z","y",1,-1,e,r,-n,i,o,3),v("x","y","z",1,-1,e,n,r,i,s,4),v("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new bt(c,3)),this.setAttribute("normal",new bt(u,3)),this.setAttribute("uv",new bt(h,2));function v(y,x,g,_,S,E,R,I,C,D,L){const P=E/C,F=R/D,z=E/2,H=R/2,q=I/2,se=C+1,K=D+1;let ne=0,O=0;const W=new j;for(let Y=0;Y<K;Y++){const re=Y*F-H;for(let we=0;we<se;we++){const Ue=we*P-z;W[y]=Ue*_,W[x]=re*S,W[g]=q,c.push(W.x,W.y,W.z),W[y]=0,W[x]=0,W[g]=I>0?1:-1,u.push(W.x,W.y,W.z),h.push(we/C),h.push(1-Y/D),ne+=1}}for(let Y=0;Y<D;Y++)for(let re=0;re<C;re++){const we=p+re+se*Y,Ue=p+re+se*(Y+1),de=p+(re+1)+se*(Y+1),Se=p+(re+1)+se*Y;l.push(we,Ue,Se),l.push(Ue,de,Se),O+=6}a.addGroup(m,O,L),m+=O,p+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ju(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function eh(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function pi(t){const e={};for(let n=0;n<t.length;n++){const r=eh(t[n]);for(const i in r)e[i]=r[i]}return e}function pne(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function oV(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const aV={clone:eh,merge:pi};var mne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gne=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class mo extends ci{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mne,this.fragmentShader=gne,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=eh(e.uniforms),this.uniformsGroups=pne(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Rg extends vn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zt,this.projectionMatrix=new zt,this.projectionMatrixInverse=new zt,this.coordinateSystem=Bo}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const yl=new j,tD=new Ae,nD=new Ae;let dr=class extends Rg{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Jf*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Su*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Jf*2*Math.atan(Math.tan(Su*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){yl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(yl.x,yl.y).multiplyScalar(-e/yl.z),yl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(yl.x,yl.y).multiplyScalar(-e/yl.z)}getViewSize(e,n){return this.getViewBounds(e,tD,nD),n.subVectors(nD,tD)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Su*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const Nd=-90,Id=1;class lV extends vn{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new dr(Nd,Id,e,n);i.layers=this.layers,this.add(i);const s=new dr(Nd,Id,e,n);s.layers=this.layers,this.add(s);const o=new dr(Nd,Id,e,n);o.layers=this.layers,this.add(o);const a=new dr(Nd,Id,e,n);a.layers=this.layers,this.add(a);const l=new dr(Nd,Id,e,n);l.layers=this.layers,this.add(l);const c=new dr(Nd,Id,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Bo)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Jm)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(h,p,m),e.xr.enabled=v,r.texture.needsPMREMUpdate=!0}}class Pg extends ir{constructor(e,n,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],n=n!==void 0?n:Ga,super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class cV extends ks{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Pg(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:fr}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ju(5,5,5),s=new mo({name:"CubemapFromEquirect",uniforms:eh(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:bi,blending:Da});s.uniforms.tEquirect.value=n;const o=new xr(i,s),a=n.minFilter;return n.minFilter===Uo&&(n.minFilter=fr),new lV(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const m1=new j,vne=new j,yne=new $t;class ba{constructor(e=new j(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=m1.subVectors(r,n).cross(vne.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(m1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||yne.getNormalMatrix(e),i=this.coplanarPoint(m1).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Lc=new oi,by=new j;class Ng{constructor(e=new ba,n=new ba,r=new ba,i=new ba,s=new ba,o=new ba){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Bo){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],p=i[7],m=i[8],v=i[9],y=i[10],x=i[11],g=i[12],_=i[13],S=i[14],E=i[15];if(r[0].setComponents(l-s,p-c,x-m,E-g).normalize(),r[1].setComponents(l+s,p+c,x+m,E+g).normalize(),r[2].setComponents(l+o,p+u,x+v,E+_).normalize(),r[3].setComponents(l-o,p-u,x-v,E-_).normalize(),r[4].setComponents(l-a,p-h,x-y,E-S).normalize(),n===Bo)r[5].setComponents(l+a,p+h,x+y,E+S).normalize();else if(n===Jm)r[5].setComponents(a,h,y,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Lc.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lc)}intersectsSprite(e){return Lc.center.set(0,0,0),Lc.radius=.7071067811865476,Lc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lc)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(by.x=i.normal.x>0?e.max.x:e.min.x,by.y=i.normal.y>0?e.max.y:e.min.y,by.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(by)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function uV(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function xne(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,h=c.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=t.SHORT;else if(c instanceof Uint32Array)m=t.UNSIGNED_INT;else if(c instanceof Int32Array)m=t.INT;else if(c instanceof Int8Array)m=t.BYTE;else if(c instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,l,c){const u=l.array,h=l.updateRanges;if(t.bindBuffer(c,a),h.length===0)t.bufferSubData(c,0,u);else{h.sort((m,v)=>m.start-v.start);let p=0;for(let m=1;m<h.length;m++){const v=h[p],y=h[m];y.start<=v.start+v.count+1?v.count=Math.max(v.count,y.start+y.count-v.start):(++p,h[p]=y)}h.length=p+1;for(let m=0,v=h.length;m<v;m++){const y=h[m];t.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}class gh extends tn{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,h=e/a,p=n/l,m=[],v=[],y=[],x=[];for(let g=0;g<u;g++){const _=g*p-o;for(let S=0;S<c;S++){const E=S*h-s;v.push(E,-_,0),y.push(0,0,1),x.push(S/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const S=_+c*g,E=_+c*(g+1),R=_+1+c*(g+1),I=_+1+c*g;m.push(S,E,I),m.push(E,R,I)}this.setIndex(m),this.setAttribute("position",new bt(v,3)),this.setAttribute("normal",new bt(y,3)),this.setAttribute("uv",new bt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gh(e.width,e.height,e.widthSegments,e.heightSegments)}}var _ne=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wne=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Sne=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bne=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Mne=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Ene=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Tne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ane=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Cne=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Rne=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Pne=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Nne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ine=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Lne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Dne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,One=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Fne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Une=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Bne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,zne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Vne=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,jne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Hne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Wne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Gne=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Xne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$ne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Yne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,qne=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Zne="gl_FragColor = linearToOutputTexel( gl_FragColor );",Kne=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Qne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Jne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ere=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,tre=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nre=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rre=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ire=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,sre=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ore=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,are=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lre=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cre=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,ure=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,dre=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,fre=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hre=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,pre=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,mre=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,gre=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,vre=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,yre=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xre=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_re=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,wre=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Sre=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bre=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Mre=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ere=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Tre=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Are=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Cre=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Rre=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pre=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Nre=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ire=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Lre=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Dre=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,kre=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Ore=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Fre=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ure=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Bre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,zre=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Vre=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,jre=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Hre=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Wre=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Gre=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Xre=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$re=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Yre=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,qre=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Zre=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Kre=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Qre=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Jre=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eie=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tie=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,nie=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rie=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,iie=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sie=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oie=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,aie=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lie=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cie=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uie=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,die=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,fie=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,hie=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,pie=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vie=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,yie=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const xie=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_ie=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sie=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Mie=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Eie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Tie=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Aie=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Cie=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Rie=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Pie=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Nie=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Iie=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Lie=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Die=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kie=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oie=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fie=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Uie=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bie=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,zie=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Vie=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Wie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$ie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Yie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,qie=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zie=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Kie=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Jt={alphahash_fragment:_ne,alphahash_pars_fragment:wne,alphamap_fragment:Sne,alphamap_pars_fragment:bne,alphatest_fragment:Mne,alphatest_pars_fragment:Ene,aomap_fragment:Tne,aomap_pars_fragment:Ane,batching_pars_vertex:Cne,batching_vertex:Rne,begin_vertex:Pne,beginnormal_vertex:Nne,bsdfs:Ine,iridescence_fragment:Lne,bumpmap_pars_fragment:Dne,clipping_planes_fragment:kne,clipping_planes_pars_fragment:One,clipping_planes_pars_vertex:Fne,clipping_planes_vertex:Une,color_fragment:Bne,color_pars_fragment:zne,color_pars_vertex:Vne,color_vertex:jne,common:Hne,cube_uv_reflection_fragment:Wne,defaultnormal_vertex:Gne,displacementmap_pars_vertex:Xne,displacementmap_vertex:$ne,emissivemap_fragment:Yne,emissivemap_pars_fragment:qne,colorspace_fragment:Zne,colorspace_pars_fragment:Kne,envmap_fragment:Qne,envmap_common_pars_fragment:Jne,envmap_pars_fragment:ere,envmap_pars_vertex:tre,envmap_physical_pars_fragment:fre,envmap_vertex:nre,fog_vertex:rre,fog_pars_vertex:ire,fog_fragment:sre,fog_pars_fragment:ore,gradientmap_pars_fragment:are,lightmap_pars_fragment:lre,lights_lambert_fragment:cre,lights_lambert_pars_fragment:ure,lights_pars_begin:dre,lights_toon_fragment:hre,lights_toon_pars_fragment:pre,lights_phong_fragment:mre,lights_phong_pars_fragment:gre,lights_physical_fragment:vre,lights_physical_pars_fragment:yre,lights_fragment_begin:xre,lights_fragment_maps:_re,lights_fragment_end:wre,logdepthbuf_fragment:Sre,logdepthbuf_pars_fragment:bre,logdepthbuf_pars_vertex:Mre,logdepthbuf_vertex:Ere,map_fragment:Tre,map_pars_fragment:Are,map_particle_fragment:Cre,map_particle_pars_fragment:Rre,metalnessmap_fragment:Pre,metalnessmap_pars_fragment:Nre,morphinstance_vertex:Ire,morphcolor_vertex:Lre,morphnormal_vertex:Dre,morphtarget_pars_vertex:kre,morphtarget_vertex:Ore,normal_fragment_begin:Fre,normal_fragment_maps:Ure,normal_pars_fragment:Bre,normal_pars_vertex:zre,normal_vertex:Vre,normalmap_pars_fragment:jre,clearcoat_normal_fragment_begin:Hre,clearcoat_normal_fragment_maps:Wre,clearcoat_pars_fragment:Gre,iridescence_pars_fragment:Xre,opaque_fragment:$re,packing:Yre,premultiplied_alpha_fragment:qre,project_vertex:Zre,dithering_fragment:Kre,dithering_pars_fragment:Qre,roughnessmap_fragment:Jre,roughnessmap_pars_fragment:eie,shadowmap_pars_fragment:tie,shadowmap_pars_vertex:nie,shadowmap_vertex:rie,shadowmask_pars_fragment:iie,skinbase_vertex:sie,skinning_pars_vertex:oie,skinning_vertex:aie,skinnormal_vertex:lie,specularmap_fragment:cie,specularmap_pars_fragment:uie,tonemapping_fragment:die,tonemapping_pars_fragment:fie,transmission_fragment:hie,transmission_pars_fragment:pie,uv_pars_fragment:mie,uv_pars_vertex:gie,uv_vertex:vie,worldpos_vertex:yie,background_vert:xie,background_frag:_ie,backgroundCube_vert:wie,backgroundCube_frag:Sie,cube_vert:bie,cube_frag:Mie,depth_vert:Eie,depth_frag:Tie,distanceRGBA_vert:Aie,distanceRGBA_frag:Cie,equirect_vert:Rie,equirect_frag:Pie,linedashed_vert:Nie,linedashed_frag:Iie,meshbasic_vert:Lie,meshbasic_frag:Die,meshlambert_vert:kie,meshlambert_frag:Oie,meshmatcap_vert:Fie,meshmatcap_frag:Uie,meshnormal_vert:Bie,meshnormal_frag:zie,meshphong_vert:Vie,meshphong_frag:jie,meshphysical_vert:Hie,meshphysical_frag:Wie,meshtoon_vert:Gie,meshtoon_frag:Xie,points_vert:$ie,points_frag:Yie,shadow_vert:qie,shadow_frag:Zie,sprite_vert:Kie,sprite_frag:Qie},Ke={common:{diffuse:{value:new ut(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new Ae(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new ut(16777215)},opacity:{value:1},center:{value:new Ae(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},no={basic:{uniforms:pi([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:Jt.meshbasic_vert,fragmentShader:Jt.meshbasic_frag},lambert:{uniforms:pi([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new ut(0)}}]),vertexShader:Jt.meshlambert_vert,fragmentShader:Jt.meshlambert_frag},phong:{uniforms:pi([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new ut(0)},specular:{value:new ut(1118481)},shininess:{value:30}}]),vertexShader:Jt.meshphong_vert,fragmentShader:Jt.meshphong_frag},standard:{uniforms:pi([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag},toon:{uniforms:pi([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new ut(0)}}]),vertexShader:Jt.meshtoon_vert,fragmentShader:Jt.meshtoon_frag},matcap:{uniforms:pi([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:Jt.meshmatcap_vert,fragmentShader:Jt.meshmatcap_frag},points:{uniforms:pi([Ke.points,Ke.fog]),vertexShader:Jt.points_vert,fragmentShader:Jt.points_frag},dashed:{uniforms:pi([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Jt.linedashed_vert,fragmentShader:Jt.linedashed_frag},depth:{uniforms:pi([Ke.common,Ke.displacementmap]),vertexShader:Jt.depth_vert,fragmentShader:Jt.depth_frag},normal:{uniforms:pi([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:Jt.meshnormal_vert,fragmentShader:Jt.meshnormal_frag},sprite:{uniforms:pi([Ke.sprite,Ke.fog]),vertexShader:Jt.sprite_vert,fragmentShader:Jt.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Jt.background_vert,fragmentShader:Jt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:Jt.backgroundCube_vert,fragmentShader:Jt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Jt.cube_vert,fragmentShader:Jt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Jt.equirect_vert,fragmentShader:Jt.equirect_frag},distanceRGBA:{uniforms:pi([Ke.common,Ke.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Jt.distanceRGBA_vert,fragmentShader:Jt.distanceRGBA_frag},shadow:{uniforms:pi([Ke.lights,Ke.fog,{color:{value:new ut(0)},opacity:{value:1}}]),vertexShader:Jt.shadow_vert,fragmentShader:Jt.shadow_frag}};no.physical={uniforms:pi([no.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new Ae(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new ut(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new Ae},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new ut(0)},specularColor:{value:new ut(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new Ae},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:Jt.meshphysical_vert,fragmentShader:Jt.meshphysical_frag};const My={r:0,b:0,g:0},Dc=new ls,Jie=new zt;function ese(t,e,n,r,i,s,o){const a=new ut(0);let l=s===!0?0:1,c,u,h=null,p=0,m=null;function v(_){let S=_.isScene===!0?_.background:null;return S&&S.isTexture&&(S=(_.backgroundBlurriness>0?n:e).get(S)),S}function y(_){let S=!1;const E=v(_);E===null?g(a,l):E&&E.isColor&&(g(E,1),S=!0);const R=t.xr.getEnvironmentBlendMode();R==="additive"?r.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||S)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function x(_,S){const E=v(S);E&&(E.isCubeTexture||E.mapping===mh)?(u===void 0&&(u=new xr(new Ju(1,1,1),new mo({name:"BackgroundCubeMaterial",uniforms:eh(no.backgroundCube.uniforms),vertexShader:no.backgroundCube.vertexShader,fragmentShader:no.backgroundCube.fragmentShader,side:bi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(R,I,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Dc.copy(S.backgroundRotation),Dc.x*=-1,Dc.y*=-1,Dc.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Dc.y*=-1,Dc.z*=-1),u.material.uniforms.envMap.value=E,u.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Jie.makeRotationFromEuler(Dc)),u.material.toneMapped=fn.getTransfer(E.colorSpace)!==Mn,(h!==E||p!==E.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,h=E,p=E.version,m=t.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):E&&E.isTexture&&(c===void 0&&(c=new xr(new gh(2,2),new mo({name:"BackgroundMaterial",uniforms:eh(no.background.uniforms),vertexShader:no.background.vertexShader,fragmentShader:no.background.fragmentShader,side:Wa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=E,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=fn.getTransfer(E.colorSpace)!==Mn,E.matrixAutoUpdate===!0&&E.updateMatrix(),c.material.uniforms.uvTransform.value.copy(E.matrix),(h!==E||p!==E.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,h=E,p=E.version,m=t.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function g(_,S){_.getRGB(My,oV(t)),r.buffers.color.setClear(My.r,My.g,My.b,S,o)}return{getClearColor:function(){return a},setClearColor:function(_,S=1){a.set(_),l=S,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:y,addToRenderList:x}}function tse(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(P,F,z,H,q){let se=!1;const K=h(H,z,F);s!==K&&(s=K,c(s.object)),se=m(P,H,z,q),se&&v(P,H,z,q),q!==null&&e.update(q,t.ELEMENT_ARRAY_BUFFER),(se||o)&&(o=!1,E(P,F,z,H),q!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(q).buffer))}function l(){return t.createVertexArray()}function c(P){return t.bindVertexArray(P)}function u(P){return t.deleteVertexArray(P)}function h(P,F,z){const H=z.wireframe===!0;let q=r[P.id];q===void 0&&(q={},r[P.id]=q);let se=q[F.id];se===void 0&&(se={},q[F.id]=se);let K=se[H];return K===void 0&&(K=p(l()),se[H]=K),K}function p(P){const F=[],z=[],H=[];for(let q=0;q<n;q++)F[q]=0,z[q]=0,H[q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:z,attributeDivisors:H,object:P,attributes:{},index:null}}function m(P,F,z,H){const q=s.attributes,se=F.attributes;let K=0;const ne=z.getAttributes();for(const O in ne)if(ne[O].location>=0){const Y=q[O];let re=se[O];if(re===void 0&&(O==="instanceMatrix"&&P.instanceMatrix&&(re=P.instanceMatrix),O==="instanceColor"&&P.instanceColor&&(re=P.instanceColor)),Y===void 0||Y.attribute!==re||re&&Y.data!==re.data)return!0;K++}return s.attributesNum!==K||s.index!==H}function v(P,F,z,H){const q={},se=F.attributes;let K=0;const ne=z.getAttributes();for(const O in ne)if(ne[O].location>=0){let Y=se[O];Y===void 0&&(O==="instanceMatrix"&&P.instanceMatrix&&(Y=P.instanceMatrix),O==="instanceColor"&&P.instanceColor&&(Y=P.instanceColor));const re={};re.attribute=Y,Y&&Y.data&&(re.data=Y.data),q[O]=re,K++}s.attributes=q,s.attributesNum=K,s.index=H}function y(){const P=s.newAttributes;for(let F=0,z=P.length;F<z;F++)P[F]=0}function x(P){g(P,0)}function g(P,F){const z=s.newAttributes,H=s.enabledAttributes,q=s.attributeDivisors;z[P]=1,H[P]===0&&(t.enableVertexAttribArray(P),H[P]=1),q[P]!==F&&(t.vertexAttribDivisor(P,F),q[P]=F)}function _(){const P=s.newAttributes,F=s.enabledAttributes;for(let z=0,H=F.length;z<H;z++)F[z]!==P[z]&&(t.disableVertexAttribArray(z),F[z]=0)}function S(P,F,z,H,q,se,K){K===!0?t.vertexAttribIPointer(P,F,z,q,se):t.vertexAttribPointer(P,F,z,H,q,se)}function E(P,F,z,H){y();const q=H.attributes,se=z.getAttributes(),K=F.defaultAttributeValues;for(const ne in se){const O=se[ne];if(O.location>=0){let W=q[ne];if(W===void 0&&(ne==="instanceMatrix"&&P.instanceMatrix&&(W=P.instanceMatrix),ne==="instanceColor"&&P.instanceColor&&(W=P.instanceColor)),W!==void 0){const Y=W.normalized,re=W.itemSize,we=e.get(W);if(we===void 0)continue;const Ue=we.buffer,de=we.type,Se=we.bytesPerElement,Ie=de===t.INT||de===t.UNSIGNED_INT||W.gpuType===ow;if(W.isInterleavedBufferAttribute){const he=W.data,ze=he.stride,rt=W.offset;if(he.isInstancedInterleavedBuffer){for(let je=0;je<O.locationSize;je++)g(O.location+je,he.meshPerAttribute);P.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let je=0;je<O.locationSize;je++)x(O.location+je);t.bindBuffer(t.ARRAY_BUFFER,Ue);for(let je=0;je<O.locationSize;je++)S(O.location+je,re/O.locationSize,de,Y,ze*Se,(rt+re/O.locationSize*je)*Se,Ie)}else{if(W.isInstancedBufferAttribute){for(let he=0;he<O.locationSize;he++)g(O.location+he,W.meshPerAttribute);P.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let he=0;he<O.locationSize;he++)x(O.location+he);t.bindBuffer(t.ARRAY_BUFFER,Ue);for(let he=0;he<O.locationSize;he++)S(O.location+he,re/O.locationSize,de,Y,re*Se,re/O.locationSize*he*Se,Ie)}}else if(K!==void 0){const Y=K[ne];if(Y!==void 0)switch(Y.length){case 2:t.vertexAttrib2fv(O.location,Y);break;case 3:t.vertexAttrib3fv(O.location,Y);break;case 4:t.vertexAttrib4fv(O.location,Y);break;default:t.vertexAttrib1fv(O.location,Y)}}}}_()}function R(){D();for(const P in r){const F=r[P];for(const z in F){const H=F[z];for(const q in H)u(H[q].object),delete H[q];delete F[z]}delete r[P]}}function I(P){if(r[P.id]===void 0)return;const F=r[P.id];for(const z in F){const H=F[z];for(const q in H)u(H[q].object),delete H[q];delete F[z]}delete r[P.id]}function C(P){for(const F in r){const z=r[F];if(z[P.id]===void 0)continue;const H=z[P.id];for(const q in H)u(H[q].object),delete H[q];delete z[P.id]}}function D(){L(),o=!0,s!==i&&(s=i,c(s.object))}function L(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:D,resetDefaultState:L,dispose:R,releaseStatesOfGeometry:I,releaseStatesOfProgram:C,initAttributes:y,enableAttribute:x,disableUnusedAttributes:_}}function nse(t,e,n){let r;function i(c){r=c}function s(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function o(c,u,h){h!==0&&(t.drawArraysInstanced(r,c,u,h),n.update(u,r,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,h);let m=0;for(let v=0;v<h;v++)m+=u[v];n.update(m,r,1)}function l(c,u,h,p){if(h===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],u[v],p[v]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,h);let v=0;for(let y=0;y<h;y++)v+=u[y]*p[y];n.update(v,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function rse(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(C){return!(C!==ii&&r.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(C){const D=C===Zu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==po&&r.convert(C)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==wi&&!D)}function l(C){if(C==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=n.logarithmicDepthBuffer===!0,p=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),v=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_TEXTURE_SIZE),x=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),g=t.getParameter(t.MAX_VERTEX_ATTRIBS),_=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),S=t.getParameter(t.MAX_VARYING_VECTORS),E=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),R=v>0,I=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:x,maxAttributes:g,maxVertexUniforms:_,maxVaryings:S,maxFragmentUniforms:E,vertexTextures:R,maxSamples:I}}function ise(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new ba,a=new $t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=h.length!==0||p||r!==0||i;return i=p,r=h.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){n=u(h,p,0)},this.setState=function(h,p,m){const v=h.clippingPlanes,y=h.clipIntersection,x=h.clipShadows,g=t.get(h);if(!i||v===null||v.length===0||s&&!x)s?u(null):c();else{const _=s?0:r,S=_*4;let E=g.clippingState||null;l.value=E,E=u(v,p,S,m);for(let R=0;R!==S;++R)E[R]=n[R];g.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,p,m,v){const y=h!==null?h.length:0;let x=null;if(y!==0){if(x=l.value,v!==!0||x===null){const g=m+y*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<g)&&(x=new Float32Array(g));for(let S=0,E=m;S!==y;++S,E+=4)o.copy(h[S]).applyMatrix4(_,a),o.normal.toArray(x,E),x[E+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function sse(t){let e=new WeakMap;function n(o,a){return a===Xm?o.mapping=Ga:a===$m&&(o.mapping=ac),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===Xm||a===$m)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new cV(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Yl extends Rg{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const df=4,rD=[.125,.215,.35,.446,.526,.582],Jc=20,g1=new Yl,iD=new ut;let v1=null,y1=0,x1=0,_1=!1;const Zc=(1+Math.sqrt(5))/2,Ld=1/Zc,sD=[new j(-Zc,Ld,0),new j(Zc,Ld,0),new j(-Ld,0,Zc),new j(Ld,0,Zc),new j(0,Zc,-Ld),new j(0,Zc,Ld),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)];class kE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){v1=this._renderer.getRenderTarget(),y1=this._renderer.getActiveCubeFace(),x1=this._renderer.getActiveMipmapLevel(),_1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lD(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=aD(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(v1,y1,x1),this._renderer.xr.enabled=_1,e.scissorTest=!1,Ey(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Ga||e.mapping===ac?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),v1=this._renderer.getRenderTarget(),y1=this._renderer.getActiveCubeFace(),x1=this._renderer.getActiveMipmapLevel(),_1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:fr,minFilter:fr,generateMipmaps:!1,type:Zu,format:ii,colorSpace:Ku,depthBuffer:!1},i=oD(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=oD(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=ose(s)),this._blurMaterial=ase(s,e,n)}return i}_compileMaterial(e){const n=new xr(this._lodPlanes[0],e);this._renderer.compile(n,g1)}_sceneToCubeUV(e,n,r,i){const a=new dr(90,1,n,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,p=u.toneMapping;u.getClearColor(iD),u.toneMapping=Xo,u.autoClear=!1;const m=new vc({name:"PMREM.Background",side:bi,depthWrite:!1,depthTest:!1}),v=new xr(new Ju,m);let y=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,y=!0):(m.color.copy(iD),y=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const S=this._cubeSize;Ey(i,_*S,g>2?S:0,S,S),u.setRenderTarget(i),y&&u.render(v,a),u.render(e,a)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=p,u.autoClear=h,e.background=x}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Ga||e.mapping===ac;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=lD()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=aD());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new xr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Ey(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,g1)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=sD[(i-s-1)%sD.length];this._blur(e,s-1,s,o,a)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new xr(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Jc-1),y=s/v,x=isFinite(s)?1+Math.floor(u*y):Jc;x>Jc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Jc}`);const g=[];let _=0;for(let C=0;C<Jc;++C){const D=C/y,L=Math.exp(-D*D/2);g.push(L),C===0?_+=L:C<x&&(_+=2*L)}for(let C=0;C<g.length;C++)g[C]=g[C]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-r;const E=this._sizeLods[i],R=3*E*(i>S-df?i-S+df:0),I=4*(this._cubeSize-E);Ey(n,R,I,3*E,2*E),l.setRenderTarget(n),l.render(h,g1)}}function ose(t){const e=[],n=[],r=[];let i=t;const s=t-df+1+rD.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-df?l=rD[o-t+df-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,h=1+c,p=[u,u,h,u,h,h,u,u,h,h,u,h],m=6,v=6,y=3,x=2,g=1,_=new Float32Array(y*v*m),S=new Float32Array(x*v*m),E=new Float32Array(g*v*m);for(let I=0;I<m;I++){const C=I%3*2/3-1,D=I>2?0:-1,L=[C,D,0,C+2/3,D,0,C+2/3,D+1,0,C,D,0,C+2/3,D+1,0,C,D+1,0];_.set(L,y*v*I),S.set(p,x*v*I);const P=[I,I,I,I,I,I];E.set(P,g*v*I)}const R=new tn;R.setAttribute("position",new Rn(_,y)),R.setAttribute("uv",new Rn(S,x)),R.setAttribute("faceIndex",new Rn(E,g)),e.push(R),i>df&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function oD(t,e,n){const r=new ks(t,e,n);return r.texture.mapping=mh,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Ey(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function ase(t,e,n){const r=new Float32Array(Jc),i=new j(0,1,0);return new mo({name:"SphericalGaussianBlur",defines:{n:Jc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:_C(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function aD(){return new mo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_C(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function lD(){return new mo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_C(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function _C(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lse(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===Xm||l===$m,u=l===Ga||l===ac;if(c||u){let h=e.get(a);const p=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return n===null&&(n=new kE(t)),h=c?n.fromEquirectangular(a,h):n.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(n===null&&(n=new kE(t)),h=c?n.fromEquirectangular(a):n.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function cse(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&Tp("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function use(t,e,n,r){const i={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const y=p.morphAttributes[v];for(let x=0,g=y.length;x<g;x++)e.remove(y[x])}p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(h,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],t.ARRAY_BUFFER);const m=h.morphAttributes;for(const v in m){const y=m[v];for(let x=0,g=y.length;x<g;x++)e.update(y[x],t.ARRAY_BUFFER)}}function c(h){const p=[],m=h.index,v=h.attributes.position;let y=0;if(m!==null){const _=m.array;y=m.version;for(let S=0,E=_.length;S<E;S+=3){const R=_[S+0],I=_[S+1],C=_[S+2];p.push(R,I,I,C,C,R)}}else if(v!==void 0){const _=v.array;y=v.version;for(let S=0,E=_.length/3-1;S<E;S+=3){const R=S+0,I=S+1,C=S+2;p.push(R,I,I,C,C,R)}}else return;const x=new(tV(p)?xC:yC)(p,1);x.version=y;const g=s.get(h);g&&e.remove(g),s.set(h,x)}function u(h){const p=s.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function dse(t,e,n){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){t.drawElements(r,m,s,p*o),n.update(m,r,1)}function c(p,m,v){v!==0&&(t.drawElementsInstanced(r,m,s,p*o,v),n.update(m,r,v))}function u(p,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,p,0,v);let x=0;for(let g=0;g<v;g++)x+=m[g];n.update(x,r,1)}function h(p,m,v,y){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)c(p[g]/o,m[g],y[g]);else{x.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,y,0,v);let g=0;for(let _=0;_<v;_++)g+=m[_]*y[_];n.update(g,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function fse(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function hse(t,e,n){const r=new WeakMap,i=new mn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==h){let P=function(){D.dispose(),r.delete(a),a.removeEventListener("dispose",P)};var m=P;p!==void 0&&p.texture.dispose();const v=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],S=a.morphAttributes.color||[];let E=0;v===!0&&(E=1),y===!0&&(E=2),x===!0&&(E=3);let R=a.attributes.position.count*E,I=1;R>e.maxTextureSize&&(I=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const C=new Float32Array(R*I*4*h),D=new hw(C,R,I,h);D.type=wi,D.needsUpdate=!0;const L=E*4;for(let F=0;F<h;F++){const z=g[F],H=_[F],q=S[F],se=R*I*4*F;for(let K=0;K<z.count;K++){const ne=K*L;v===!0&&(i.fromBufferAttribute(z,K),C[se+ne+0]=i.x,C[se+ne+1]=i.y,C[se+ne+2]=i.z,C[se+ne+3]=0),y===!0&&(i.fromBufferAttribute(H,K),C[se+ne+4]=i.x,C[se+ne+5]=i.y,C[se+ne+6]=i.z,C[se+ne+7]=0),x===!0&&(i.fromBufferAttribute(q,K),C[se+ne+8]=i.x,C[se+ne+9]=i.y,C[se+ne+10]=i.z,C[se+ne+11]=q.itemSize===4?i.w:1)}}p={count:h,texture:D,size:new Ae(R,I)},r.set(a,p),a.addEventListener("dispose",P)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let v=0;for(let x=0;x<c.length;x++)v+=c[x];const y=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(t,"morphTargetBaseInfluence",y),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:s}}function pse(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);if(i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return h}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}class pw extends ir{constructor(e,n,r,i,s,o,a,l,c,u=wu){if(u!==wu&&u!==Bu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===wu&&(r=Xa),r===void 0&&u===Bu&&(r=Uu),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:jr,this.minFilter=l!==void 0?l:jr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const dV=new ir,cD=new pw(1,1),fV=new hw,hV=new vC,pV=new Pg,uD=[],dD=[],fD=new Float32Array(16),hD=new Float32Array(9),pD=new Float32Array(4);function vh(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=uD[i];if(s===void 0&&(s=new Float32Array(i),uD[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Mr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Er(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function mw(t,e){let n=dD[e];n===void 0&&(n=new Int32Array(e),dD[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function mse(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function gse(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mr(n,e))return;t.uniform2fv(this.addr,e),Er(n,e)}}function vse(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Mr(n,e))return;t.uniform3fv(this.addr,e),Er(n,e)}}function yse(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mr(n,e))return;t.uniform4fv(this.addr,e),Er(n,e)}}function xse(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Mr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Er(n,e)}else{if(Mr(n,r))return;pD.set(r),t.uniformMatrix2fv(this.addr,!1,pD),Er(n,r)}}function _se(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Mr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Er(n,e)}else{if(Mr(n,r))return;hD.set(r),t.uniformMatrix3fv(this.addr,!1,hD),Er(n,r)}}function wse(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Mr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Er(n,e)}else{if(Mr(n,r))return;fD.set(r),t.uniformMatrix4fv(this.addr,!1,fD),Er(n,r)}}function Sse(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function bse(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mr(n,e))return;t.uniform2iv(this.addr,e),Er(n,e)}}function Mse(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Mr(n,e))return;t.uniform3iv(this.addr,e),Er(n,e)}}function Ese(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mr(n,e))return;t.uniform4iv(this.addr,e),Er(n,e)}}function Tse(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ase(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mr(n,e))return;t.uniform2uiv(this.addr,e),Er(n,e)}}function Cse(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Mr(n,e))return;t.uniform3uiv(this.addr,e),Er(n,e)}}function Rse(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mr(n,e))return;t.uniform4uiv(this.addr,e),Er(n,e)}}function Pse(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(cD.compareFunction=mC,s=cD):s=dV,n.setTexture2D(e||s,i)}function Nse(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||hV,i)}function Ise(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||pV,i)}function Lse(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||fV,i)}function Dse(t){switch(t){case 5126:return mse;case 35664:return gse;case 35665:return vse;case 35666:return yse;case 35674:return xse;case 35675:return _se;case 35676:return wse;case 5124:case 35670:return Sse;case 35667:case 35671:return bse;case 35668:case 35672:return Mse;case 35669:case 35673:return Ese;case 5125:return Tse;case 36294:return Ase;case 36295:return Cse;case 36296:return Rse;case 35678:case 36198:case 36298:case 36306:case 35682:return Pse;case 35679:case 36299:case 36307:return Nse;case 35680:case 36300:case 36308:case 36293:return Ise;case 36289:case 36303:case 36311:case 36292:return Lse}}function kse(t,e){t.uniform1fv(this.addr,e)}function Ose(t,e){const n=vh(e,this.size,2);t.uniform2fv(this.addr,n)}function Fse(t,e){const n=vh(e,this.size,3);t.uniform3fv(this.addr,n)}function Use(t,e){const n=vh(e,this.size,4);t.uniform4fv(this.addr,n)}function Bse(t,e){const n=vh(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function zse(t,e){const n=vh(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Vse(t,e){const n=vh(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function jse(t,e){t.uniform1iv(this.addr,e)}function Hse(t,e){t.uniform2iv(this.addr,e)}function Wse(t,e){t.uniform3iv(this.addr,e)}function Gse(t,e){t.uniform4iv(this.addr,e)}function Xse(t,e){t.uniform1uiv(this.addr,e)}function $se(t,e){t.uniform2uiv(this.addr,e)}function Yse(t,e){t.uniform3uiv(this.addr,e)}function qse(t,e){t.uniform4uiv(this.addr,e)}function Zse(t,e,n){const r=this.cache,i=e.length,s=mw(n,i);Mr(r,s)||(t.uniform1iv(this.addr,s),Er(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||dV,s[o])}function Kse(t,e,n){const r=this.cache,i=e.length,s=mw(n,i);Mr(r,s)||(t.uniform1iv(this.addr,s),Er(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||hV,s[o])}function Qse(t,e,n){const r=this.cache,i=e.length,s=mw(n,i);Mr(r,s)||(t.uniform1iv(this.addr,s),Er(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||pV,s[o])}function Jse(t,e,n){const r=this.cache,i=e.length,s=mw(n,i);Mr(r,s)||(t.uniform1iv(this.addr,s),Er(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||fV,s[o])}function eoe(t){switch(t){case 5126:return kse;case 35664:return Ose;case 35665:return Fse;case 35666:return Use;case 35674:return Bse;case 35675:return zse;case 35676:return Vse;case 5124:case 35670:return jse;case 35667:case 35671:return Hse;case 35668:case 35672:return Wse;case 35669:case 35673:return Gse;case 5125:return Xse;case 36294:return $se;case 36295:return Yse;case 36296:return qse;case 35678:case 36198:case 36298:case 36306:case 35682:return Zse;case 35679:case 36299:case 36307:return Kse;case 35680:case 36300:case 36308:case 36293:return Qse;case 36289:case 36303:case 36311:case 36292:return Jse}}class toe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Dse(n.type)}}class noe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=eoe(n.type)}}class roe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const w1=/(\w+)(\])?(\[|\.)?/g;function mD(t,e){t.seq.push(e),t.map[e.id]=e}function ioe(t,e,n){const r=t.name,i=r.length;for(w1.lastIndex=0;;){const s=w1.exec(r),o=w1.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){mD(n,c===void 0?new toe(a,t,e):new noe(a,t,e));break}else{let h=n.map[a];h===void 0&&(h=new roe(a),mD(n,h)),n=h}}}class M0{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);ioe(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function gD(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const soe=37297;let ooe=0;function aoe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}const vD=new $t;function loe(t){fn._getMatrix(vD,fn.workingColorSpace,t);const e=`mat3( ${vD.elements.map(n=>n.toFixed(4))} )`;switch(fn.getTransfer(t)){case Cg:return[e,"LinearTransferOETF"];case Mn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function yD(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+aoe(t.getShaderSource(e),o)}else return i}function coe(t,e){const n=loe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function uoe(t,e){let n;switch(e){case k4:n="Linear";break;case O4:n="Reinhard";break;case F4:n="Cineon";break;case rC:n="ACESFilmic";break;case B4:n="AgX";break;case z4:n="Neutral";break;case U4:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Ty=new j;function doe(){fn.getLuminanceCoefficients(Ty);const t=Ty.x.toFixed(4),e=Ty.y.toFixed(4),n=Ty.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function foe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Cp).join(`
`)}function hoe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function poe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Cp(t){return t!==""}function xD(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function _D(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const moe=/^[ \t]*#include +<([\w\d./]+)>/gm;function OE(t){return t.replace(moe,voe)}const goe=new Map;function voe(t,e){let n=Jt[e];if(n===void 0){const r=goe.get(e);if(r!==void 0)n=Jt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return OE(n)}const yoe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function wD(t){return t.replace(yoe,xoe)}function xoe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function SD(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function _oe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===iw?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===$p?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===qs&&(e="SHADOWMAP_TYPE_VSM"),e}function woe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Ga:case ac:e="ENVMAP_TYPE_CUBE";break;case mh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Soe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ac:e="ENVMAP_MODE_REFRACTION";break}return e}function boe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Tg:e="ENVMAP_BLENDING_MULTIPLY";break;case L4:e="ENVMAP_BLENDING_MIX";break;case D4:e="ENVMAP_BLENDING_ADD";break}return e}function Moe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Eoe(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=_oe(n),c=woe(n),u=Soe(n),h=boe(n),p=Moe(n),m=foe(n),v=hoe(s),y=i.createProgram();let x,g,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Cp).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Cp).join(`
`),g.length>0&&(g+=`
`)):(x=[SD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Cp).join(`
`),g=[SD(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Xo?"#define TONE_MAPPING":"",n.toneMapping!==Xo?Jt.tonemapping_pars_fragment:"",n.toneMapping!==Xo?uoe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Jt.colorspace_pars_fragment,coe("linearToOutputTexel",n.outputColorSpace),doe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Cp).join(`
`)),o=OE(o),o=xD(o,n),o=_D(o,n),a=OE(a),a=xD(a,n),a=_D(a,n),o=wD(o),a=wD(a),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",n.glslVersion===DE?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===DE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=_+x+o,E=_+g+a,R=gD(i,i.VERTEX_SHADER,S),I=gD(i,i.FRAGMENT_SHADER,E);i.attachShader(y,R),i.attachShader(y,I),n.index0AttributeName!==void 0?i.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function C(F){if(t.debug.checkShaderErrors){const z=i.getProgramInfoLog(y).trim(),H=i.getShaderInfoLog(R).trim(),q=i.getShaderInfoLog(I).trim();let se=!0,K=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(se=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,y,R,I);else{const ne=yD(i,R,"vertex"),O=yD(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+F.name+`
Material Type: `+F.type+`

Program Info Log: `+z+`
`+ne+`
`+O)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(H===""||q==="")&&(K=!1);K&&(F.diagnostics={runnable:se,programLog:z,vertexShader:{log:H,prefix:x},fragmentShader:{log:q,prefix:g}})}i.deleteShader(R),i.deleteShader(I),D=new M0(i,y),L=poe(i,y)}let D;this.getUniforms=function(){return D===void 0&&C(this),D};let L;this.getAttributes=function(){return L===void 0&&C(this),L};let P=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=i.getProgramParameter(y,soe)),P},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=ooe++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=R,this.fragmentShader=I,this}let Toe=0;class Aoe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new Coe(e),n.set(e,r)),r}}class Coe{constructor(e){this.id=Toe++,this.code=e,this.usedTimes=0}}function Roe(t,e,n,r,i,s,o){const a=new bu,l=new Aoe,c=new Set,u=[],h=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(L){return c.add(L),L===0?"uv":`uv${L}`}function x(L,P,F,z,H){const q=z.fog,se=H.geometry,K=L.isMeshStandardMaterial?z.environment:null,ne=(L.isMeshStandardMaterial?n:e).get(L.envMap||K),O=ne&&ne.mapping===mh?ne.image.height:null,W=v[L.type];L.precision!==null&&(m=i.getMaxPrecision(L.precision),m!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",m,"instead."));const Y=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,re=Y!==void 0?Y.length:0;let we=0;se.morphAttributes.position!==void 0&&(we=1),se.morphAttributes.normal!==void 0&&(we=2),se.morphAttributes.color!==void 0&&(we=3);let Ue,de,Se,Ie;if(W){const Wt=no[W];Ue=Wt.vertexShader,de=Wt.fragmentShader}else Ue=L.vertexShader,de=L.fragmentShader,l.update(L),Se=l.getVertexShaderID(L),Ie=l.getFragmentShaderID(L);const he=t.getRenderTarget(),ze=t.state.buffers.depth.getReversed(),rt=H.isInstancedMesh===!0,je=H.isBatchedMesh===!0,We=!!L.map,fe=!!L.matcap,Me=!!ne,X=!!L.aoMap,ot=!!L.lightMap,Pe=!!L.bumpMap,Ge=!!L.normalMap,Be=!!L.displacementMap,_t=!!L.emissiveMap,Ze=!!L.metalnessMap,V=!!L.roughnessMap,N=L.anisotropy>0,B=L.clearcoat>0,$=L.dispersion>0,ae=L.iridescence>0,te=L.sheen>0,pe=L.transmission>0,me=N&&!!L.anisotropyMap,Ne=B&&!!L.clearcoatMap,xt=B&&!!L.clearcoatNormalMap,Ce=B&&!!L.clearcoatRoughnessMap,at=ae&&!!L.iridescenceMap,vt=ae&&!!L.iridescenceThicknessMap,Rt=te&&!!L.sheenColorMap,et=te&&!!L.sheenRoughnessMap,J=!!L.specularMap,Ee=!!L.specularColorMap,Xe=!!L.specularIntensityMap,Z=pe&&!!L.transmissionMap,ke=pe&&!!L.thicknessMap,xe=!!L.gradientMap,Te=!!L.alphaMap,tt=L.alphaTest>0,qe=!!L.alphaHash,Nt=!!L.extensions;let cn=Xo;L.toneMapped&&(he===null||he.isXRRenderTarget===!0)&&(cn=t.toneMapping);const Sn={shaderID:W,shaderType:L.type,shaderName:L.name,vertexShader:Ue,fragmentShader:de,defines:L.defines,customVertexShaderID:Se,customFragmentShaderID:Ie,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:m,batching:je,batchingColor:je&&H._colorsTexture!==null,instancing:rt,instancingColor:rt&&H.instanceColor!==null,instancingMorph:rt&&H.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:he===null?t.outputColorSpace:he.isXRRenderTarget===!0?he.texture.colorSpace:Ku,alphaToCoverage:!!L.alphaToCoverage,map:We,matcap:fe,envMap:Me,envMapMode:Me&&ne.mapping,envMapCubeUVHeight:O,aoMap:X,lightMap:ot,bumpMap:Pe,normalMap:Ge,displacementMap:p&&Be,emissiveMap:_t,normalMapObjectSpace:Ge&&L.normalMapType===$4,normalMapTangentSpace:Ge&&L.normalMapType===gc,metalnessMap:Ze,roughnessMap:V,anisotropy:N,anisotropyMap:me,clearcoat:B,clearcoatMap:Ne,clearcoatNormalMap:xt,clearcoatRoughnessMap:Ce,dispersion:$,iridescence:ae,iridescenceMap:at,iridescenceThicknessMap:vt,sheen:te,sheenColorMap:Rt,sheenRoughnessMap:et,specularMap:J,specularColorMap:Ee,specularIntensityMap:Xe,transmission:pe,transmissionMap:Z,thicknessMap:ke,gradientMap:xe,opaque:L.transparent===!1&&L.blending===_u&&L.alphaToCoverage===!1,alphaMap:Te,alphaTest:tt,alphaHash:qe,combine:L.combine,mapUv:We&&y(L.map.channel),aoMapUv:X&&y(L.aoMap.channel),lightMapUv:ot&&y(L.lightMap.channel),bumpMapUv:Pe&&y(L.bumpMap.channel),normalMapUv:Ge&&y(L.normalMap.channel),displacementMapUv:Be&&y(L.displacementMap.channel),emissiveMapUv:_t&&y(L.emissiveMap.channel),metalnessMapUv:Ze&&y(L.metalnessMap.channel),roughnessMapUv:V&&y(L.roughnessMap.channel),anisotropyMapUv:me&&y(L.anisotropyMap.channel),clearcoatMapUv:Ne&&y(L.clearcoatMap.channel),clearcoatNormalMapUv:xt&&y(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ce&&y(L.clearcoatRoughnessMap.channel),iridescenceMapUv:at&&y(L.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&y(L.iridescenceThicknessMap.channel),sheenColorMapUv:Rt&&y(L.sheenColorMap.channel),sheenRoughnessMapUv:et&&y(L.sheenRoughnessMap.channel),specularMapUv:J&&y(L.specularMap.channel),specularColorMapUv:Ee&&y(L.specularColorMap.channel),specularIntensityMapUv:Xe&&y(L.specularIntensityMap.channel),transmissionMapUv:Z&&y(L.transmissionMap.channel),thicknessMapUv:ke&&y(L.thicknessMap.channel),alphaMapUv:Te&&y(L.alphaMap.channel),vertexTangents:!!se.attributes.tangent&&(Ge||N),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!se.attributes.uv&&(We||Te),fog:!!q,useFog:L.fog===!0,fogExp2:!!q&&q.isFogExp2,flatShading:L.flatShading===!0,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:ze,skinning:H.isSkinnedMesh===!0,morphTargets:se.morphAttributes.position!==void 0,morphNormals:se.morphAttributes.normal!==void 0,morphColors:se.morphAttributes.color!==void 0,morphTargetsCount:re,morphTextureStride:we,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:t.shadowMap.enabled&&F.length>0,shadowMapType:t.shadowMap.type,toneMapping:cn,decodeVideoTexture:We&&L.map.isVideoTexture===!0&&fn.getTransfer(L.map.colorSpace)===Mn,decodeVideoTextureEmissive:_t&&L.emissiveMap.isVideoTexture===!0&&fn.getTransfer(L.emissiveMap.colorSpace)===Mn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Oo,flipSided:L.side===bi,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Nt&&L.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Nt&&L.extensions.multiDraw===!0||je)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return Sn.vertexUv1s=c.has(1),Sn.vertexUv2s=c.has(2),Sn.vertexUv3s=c.has(3),c.clear(),Sn}function g(L){const P=[];if(L.shaderID?P.push(L.shaderID):(P.push(L.customVertexShaderID),P.push(L.customFragmentShaderID)),L.defines!==void 0)for(const F in L.defines)P.push(F),P.push(L.defines[F]);return L.isRawShaderMaterial===!1&&(_(P,L),S(P,L),P.push(t.outputColorSpace)),P.push(L.customProgramCacheKey),P.join()}function _(L,P){L.push(P.precision),L.push(P.outputColorSpace),L.push(P.envMapMode),L.push(P.envMapCubeUVHeight),L.push(P.mapUv),L.push(P.alphaMapUv),L.push(P.lightMapUv),L.push(P.aoMapUv),L.push(P.bumpMapUv),L.push(P.normalMapUv),L.push(P.displacementMapUv),L.push(P.emissiveMapUv),L.push(P.metalnessMapUv),L.push(P.roughnessMapUv),L.push(P.anisotropyMapUv),L.push(P.clearcoatMapUv),L.push(P.clearcoatNormalMapUv),L.push(P.clearcoatRoughnessMapUv),L.push(P.iridescenceMapUv),L.push(P.iridescenceThicknessMapUv),L.push(P.sheenColorMapUv),L.push(P.sheenRoughnessMapUv),L.push(P.specularMapUv),L.push(P.specularColorMapUv),L.push(P.specularIntensityMapUv),L.push(P.transmissionMapUv),L.push(P.thicknessMapUv),L.push(P.combine),L.push(P.fogExp2),L.push(P.sizeAttenuation),L.push(P.morphTargetsCount),L.push(P.morphAttributeCount),L.push(P.numDirLights),L.push(P.numPointLights),L.push(P.numSpotLights),L.push(P.numSpotLightMaps),L.push(P.numHemiLights),L.push(P.numRectAreaLights),L.push(P.numDirLightShadows),L.push(P.numPointLightShadows),L.push(P.numSpotLightShadows),L.push(P.numSpotLightShadowsWithMaps),L.push(P.numLightProbes),L.push(P.shadowMapType),L.push(P.toneMapping),L.push(P.numClippingPlanes),L.push(P.numClipIntersection),L.push(P.depthPacking)}function S(L,P){a.disableAll(),P.supportsVertexTextures&&a.enable(0),P.instancing&&a.enable(1),P.instancingColor&&a.enable(2),P.instancingMorph&&a.enable(3),P.matcap&&a.enable(4),P.envMap&&a.enable(5),P.normalMapObjectSpace&&a.enable(6),P.normalMapTangentSpace&&a.enable(7),P.clearcoat&&a.enable(8),P.iridescence&&a.enable(9),P.alphaTest&&a.enable(10),P.vertexColors&&a.enable(11),P.vertexAlphas&&a.enable(12),P.vertexUv1s&&a.enable(13),P.vertexUv2s&&a.enable(14),P.vertexUv3s&&a.enable(15),P.vertexTangents&&a.enable(16),P.anisotropy&&a.enable(17),P.alphaHash&&a.enable(18),P.batching&&a.enable(19),P.dispersion&&a.enable(20),P.batchingColor&&a.enable(21),L.push(a.mask),a.disableAll(),P.fog&&a.enable(0),P.useFog&&a.enable(1),P.flatShading&&a.enable(2),P.logarithmicDepthBuffer&&a.enable(3),P.reverseDepthBuffer&&a.enable(4),P.skinning&&a.enable(5),P.morphTargets&&a.enable(6),P.morphNormals&&a.enable(7),P.morphColors&&a.enable(8),P.premultipliedAlpha&&a.enable(9),P.shadowMapEnabled&&a.enable(10),P.doubleSided&&a.enable(11),P.flipSided&&a.enable(12),P.useDepthPacking&&a.enable(13),P.dithering&&a.enable(14),P.transmission&&a.enable(15),P.sheen&&a.enable(16),P.opaque&&a.enable(17),P.pointsUvs&&a.enable(18),P.decodeVideoTexture&&a.enable(19),P.decodeVideoTextureEmissive&&a.enable(20),P.alphaToCoverage&&a.enable(21),L.push(a.mask)}function E(L){const P=v[L.type];let F;if(P){const z=no[P];F=aV.clone(z.uniforms)}else F=L.uniforms;return F}function R(L,P){let F;for(let z=0,H=u.length;z<H;z++){const q=u[z];if(q.cacheKey===P){F=q,++F.usedTimes;break}}return F===void 0&&(F=new Eoe(t,P,L,s),u.push(F)),F}function I(L){if(--L.usedTimes===0){const P=u.indexOf(L);u[P]=u[u.length-1],u.pop(),L.destroy()}}function C(L){l.remove(L)}function D(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:E,acquireProgram:R,releaseProgram:I,releaseShaderCache:C,programs:u,dispose:D}}function Poe(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function i(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function Noe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function bD(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function MD(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(h,p,m,v,y,x){let g=t[e];return g===void 0?(g={id:h.id,object:h,geometry:p,material:m,groupOrder:v,renderOrder:h.renderOrder,z:y,group:x},t[e]=g):(g.id=h.id,g.object=h,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=y,g.group=x),e++,g}function a(h,p,m,v,y,x){const g=o(h,p,m,v,y,x);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):n.push(g)}function l(h,p,m,v,y,x){const g=o(h,p,m,v,y,x);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):n.unshift(g)}function c(h,p){n.length>1&&n.sort(h||Noe),r.length>1&&r.sort(p||bD),i.length>1&&i.sort(p||bD)}function u(){for(let h=e,p=t.length;h<p;h++){const m=t[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Ioe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new MD,t.set(r,[o])):i>=s.length?(o=new MD,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Loe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new j,color:new ut};break;case"SpotLight":n={position:new j,direction:new j,color:new ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new j,color:new ut,distance:0,decay:0};break;case"HemisphereLight":n={direction:new j,skyColor:new ut,groundColor:new ut};break;case"RectAreaLight":n={color:new ut,position:new j,halfWidth:new j,halfHeight:new j};break}return t[e.id]=n,n}}}function Doe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ae,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let koe=0;function Ooe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Foe(t){const e=new Loe,n=Doe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new j);const i=new j,s=new zt,o=new zt;function a(c){let u=0,h=0,p=0;for(let L=0;L<9;L++)r.probe[L].set(0,0,0);let m=0,v=0,y=0,x=0,g=0,_=0,S=0,E=0,R=0,I=0,C=0;c.sort(Ooe);for(let L=0,P=c.length;L<P;L++){const F=c[L],z=F.color,H=F.intensity,q=F.distance,se=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)u+=z.r*H,h+=z.g*H,p+=z.b*H;else if(F.isLightProbe){for(let K=0;K<9;K++)r.probe[K].addScaledVector(F.sh.coefficients[K],H);C++}else if(F.isDirectionalLight){const K=e.get(F);if(K.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const ne=F.shadow,O=n.get(F);O.shadowIntensity=ne.intensity,O.shadowBias=ne.bias,O.shadowNormalBias=ne.normalBias,O.shadowRadius=ne.radius,O.shadowMapSize=ne.mapSize,r.directionalShadow[m]=O,r.directionalShadowMap[m]=se,r.directionalShadowMatrix[m]=F.shadow.matrix,_++}r.directional[m]=K,m++}else if(F.isSpotLight){const K=e.get(F);K.position.setFromMatrixPosition(F.matrixWorld),K.color.copy(z).multiplyScalar(H),K.distance=q,K.coneCos=Math.cos(F.angle),K.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),K.decay=F.decay,r.spot[y]=K;const ne=F.shadow;if(F.map&&(r.spotLightMap[R]=F.map,R++,ne.updateMatrices(F),F.castShadow&&I++),r.spotLightMatrix[y]=ne.matrix,F.castShadow){const O=n.get(F);O.shadowIntensity=ne.intensity,O.shadowBias=ne.bias,O.shadowNormalBias=ne.normalBias,O.shadowRadius=ne.radius,O.shadowMapSize=ne.mapSize,r.spotShadow[y]=O,r.spotShadowMap[y]=se,E++}y++}else if(F.isRectAreaLight){const K=e.get(F);K.color.copy(z).multiplyScalar(H),K.halfWidth.set(F.width*.5,0,0),K.halfHeight.set(0,F.height*.5,0),r.rectArea[x]=K,x++}else if(F.isPointLight){const K=e.get(F);if(K.color.copy(F.color).multiplyScalar(F.intensity),K.distance=F.distance,K.decay=F.decay,F.castShadow){const ne=F.shadow,O=n.get(F);O.shadowIntensity=ne.intensity,O.shadowBias=ne.bias,O.shadowNormalBias=ne.normalBias,O.shadowRadius=ne.radius,O.shadowMapSize=ne.mapSize,O.shadowCameraNear=ne.camera.near,O.shadowCameraFar=ne.camera.far,r.pointShadow[v]=O,r.pointShadowMap[v]=se,r.pointShadowMatrix[v]=F.shadow.matrix,S++}r.point[v]=K,v++}else if(F.isHemisphereLight){const K=e.get(F);K.skyColor.copy(F.color).multiplyScalar(H),K.groundColor.copy(F.groundColor).multiplyScalar(H),r.hemi[g]=K,g++}}x>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ke.LTC_FLOAT_1,r.rectAreaLTC2=Ke.LTC_FLOAT_2):(r.rectAreaLTC1=Ke.LTC_HALF_1,r.rectAreaLTC2=Ke.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=p;const D=r.hash;(D.directionalLength!==m||D.pointLength!==v||D.spotLength!==y||D.rectAreaLength!==x||D.hemiLength!==g||D.numDirectionalShadows!==_||D.numPointShadows!==S||D.numSpotShadows!==E||D.numSpotMaps!==R||D.numLightProbes!==C)&&(r.directional.length=m,r.spot.length=y,r.rectArea.length=x,r.point.length=v,r.hemi.length=g,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=E,r.spotShadowMap.length=E,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=E+R-I,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=I,r.numLightProbes=C,D.directionalLength=m,D.pointLength=v,D.spotLength=y,D.rectAreaLength=x,D.hemiLength=g,D.numDirectionalShadows=_,D.numPointShadows=S,D.numSpotShadows=E,D.numSpotMaps=R,D.numLightProbes=C,r.version=koe++)}function l(c,u){let h=0,p=0,m=0,v=0,y=0;const x=u.matrixWorldInverse;for(let g=0,_=c.length;g<_;g++){const S=c[g];if(S.isDirectionalLight){const E=r.directional[h];E.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(x),h++}else if(S.isSpotLight){const E=r.spot[m];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(x),E.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(x),m++}else if(S.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(x),o.identity(),s.copy(S.matrixWorld),s.premultiply(x),o.extractRotation(s),E.halfWidth.set(S.width*.5,0,0),E.halfHeight.set(0,S.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(S.isPointLight){const E=r.point[p];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(x),p++}else if(S.isHemisphereLight){const E=r.hemi[y];E.direction.setFromMatrixPosition(S.matrixWorld),E.direction.transformDirection(x),y++}}}return{setup:a,setupView:l,state:r}}function ED(t){const e=new Foe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function o(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Uoe(t){let e=new WeakMap;function n(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new ED(t),e.set(i,[a])):s>=o.length?(a=new ED(t),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:n,dispose:r}}class wC extends ci{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=G4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class SC extends ci{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Boe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,zoe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Voe(t,e,n){let r=new Ng;const i=new Ae,s=new Ae,o=new mn,a=new wC({depthPacking:X4}),l=new SC,c={},u=n.maxTextureSize,h={[Wa]:bi,[bi]:Wa,[Oo]:Oo},p=new mo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ae},radius:{value:4}},vertexShader:Boe,fragmentShader:zoe}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new tn;v.setAttribute("position",new Rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new xr(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=iw;let g=this.type;this.render=function(I,C,D){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||I.length===0)return;const L=t.getRenderTarget(),P=t.getActiveCubeFace(),F=t.getActiveMipmapLevel(),z=t.state;z.setBlending(Da),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const H=g!==qs&&this.type===qs,q=g===qs&&this.type!==qs;for(let se=0,K=I.length;se<K;se++){const ne=I[se],O=ne.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",ne,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const W=O.getFrameExtents();if(i.multiply(W),s.copy(O.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/W.x),i.x=s.x*W.x,O.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/W.y),i.y=s.y*W.y,O.mapSize.y=s.y)),O.map===null||H===!0||q===!0){const re=this.type!==qs?{minFilter:jr,magFilter:jr}:{};O.map!==null&&O.map.dispose(),O.map=new ks(i.x,i.y,re),O.map.texture.name=ne.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();const Y=O.getViewportCount();for(let re=0;re<Y;re++){const we=O.getViewport(re);o.set(s.x*we.x,s.y*we.y,s.x*we.z,s.y*we.w),z.viewport(o),O.updateMatrices(ne,re),r=O.getFrustum(),E(C,D,O.camera,ne,this.type)}O.isPointLightShadow!==!0&&this.type===qs&&_(O,D),O.needsUpdate=!1}g=this.type,x.needsUpdate=!1,t.setRenderTarget(L,P,F)};function _(I,C){const D=e.update(y);p.defines.VSM_SAMPLES!==I.blurSamples&&(p.defines.VSM_SAMPLES=I.blurSamples,m.defines.VSM_SAMPLES=I.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new ks(i.x,i.y)),p.uniforms.shadow_pass.value=I.map.texture,p.uniforms.resolution.value=I.mapSize,p.uniforms.radius.value=I.radius,t.setRenderTarget(I.mapPass),t.clear(),t.renderBufferDirect(C,null,D,p,y,null),m.uniforms.shadow_pass.value=I.mapPass.texture,m.uniforms.resolution.value=I.mapSize,m.uniforms.radius.value=I.radius,t.setRenderTarget(I.map),t.clear(),t.renderBufferDirect(C,null,D,m,y,null)}function S(I,C,D,L){let P=null;const F=D.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(F!==void 0)P=F;else if(P=D.isPointLight===!0?l:a,t.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const z=P.uuid,H=C.uuid;let q=c[z];q===void 0&&(q={},c[z]=q);let se=q[H];se===void 0&&(se=P.clone(),q[H]=se,C.addEventListener("dispose",R)),P=se}if(P.visible=C.visible,P.wireframe=C.wireframe,L===qs?P.side=C.shadowSide!==null?C.shadowSide:C.side:P.side=C.shadowSide!==null?C.shadowSide:h[C.side],P.alphaMap=C.alphaMap,P.alphaTest=C.alphaTest,P.map=C.map,P.clipShadows=C.clipShadows,P.clippingPlanes=C.clippingPlanes,P.clipIntersection=C.clipIntersection,P.displacementMap=C.displacementMap,P.displacementScale=C.displacementScale,P.displacementBias=C.displacementBias,P.wireframeLinewidth=C.wireframeLinewidth,P.linewidth=C.linewidth,D.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const z=t.properties.get(P);z.light=D}return P}function E(I,C,D,L,P){if(I.visible===!1)return;if(I.layers.test(C.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&P===qs)&&(!I.frustumCulled||r.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,I.matrixWorld);const H=e.update(I),q=I.material;if(Array.isArray(q)){const se=H.groups;for(let K=0,ne=se.length;K<ne;K++){const O=se[K],W=q[O.materialIndex];if(W&&W.visible){const Y=S(I,W,L,P);I.onBeforeShadow(t,I,C,D,H,Y,O),t.renderBufferDirect(D,null,H,Y,I,O),I.onAfterShadow(t,I,C,D,H,Y,O)}}}else if(q.visible){const se=S(I,q,L,P);I.onBeforeShadow(t,I,C,D,H,se,null),t.renderBufferDirect(D,null,H,se,I,null),I.onAfterShadow(t,I,C,D,H,se,null)}}const z=I.children;for(let H=0,q=z.length;H<q;H++)E(z[H],C,D,L,P)}function R(I){I.target.removeEventListener("dispose",R);for(const D in c){const L=c[D],P=I.target.uuid;P in L&&(L[P].dispose(),delete L[P])}}}const joe={[Ax]:Cx,[Rx]:Ix,[Px]:Lx,[Fu]:Nx,[Cx]:Ax,[Ix]:Rx,[Lx]:Px,[Nx]:Fu};function Hoe(t,e){function n(){let Z=!1;const ke=new mn;let xe=null;const Te=new mn(0,0,0,0);return{setMask:function(tt){xe!==tt&&!Z&&(t.colorMask(tt,tt,tt,tt),xe=tt)},setLocked:function(tt){Z=tt},setClear:function(tt,qe,Nt,cn,Sn){Sn===!0&&(tt*=cn,qe*=cn,Nt*=cn),ke.set(tt,qe,Nt,cn),Te.equals(ke)===!1&&(t.clearColor(tt,qe,Nt,cn),Te.copy(ke))},reset:function(){Z=!1,xe=null,Te.set(-1,0,0,0)}}}function r(){let Z=!1,ke=!1,xe=null,Te=null,tt=null;return{setReversed:function(qe){if(ke!==qe){const Nt=e.get("EXT_clip_control");ke?Nt.clipControlEXT(Nt.LOWER_LEFT_EXT,Nt.ZERO_TO_ONE_EXT):Nt.clipControlEXT(Nt.LOWER_LEFT_EXT,Nt.NEGATIVE_ONE_TO_ONE_EXT);const cn=tt;tt=null,this.setClear(cn)}ke=qe},getReversed:function(){return ke},setTest:function(qe){qe?he(t.DEPTH_TEST):ze(t.DEPTH_TEST)},setMask:function(qe){xe!==qe&&!Z&&(t.depthMask(qe),xe=qe)},setFunc:function(qe){if(ke&&(qe=joe[qe]),Te!==qe){switch(qe){case Ax:t.depthFunc(t.NEVER);break;case Cx:t.depthFunc(t.ALWAYS);break;case Rx:t.depthFunc(t.LESS);break;case Fu:t.depthFunc(t.LEQUAL);break;case Px:t.depthFunc(t.EQUAL);break;case Nx:t.depthFunc(t.GEQUAL);break;case Ix:t.depthFunc(t.GREATER);break;case Lx:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Te=qe}},setLocked:function(qe){Z=qe},setClear:function(qe){tt!==qe&&(ke&&(qe=1-qe),t.clearDepth(qe),tt=qe)},reset:function(){Z=!1,xe=null,Te=null,tt=null,ke=!1}}}function i(){let Z=!1,ke=null,xe=null,Te=null,tt=null,qe=null,Nt=null,cn=null,Sn=null;return{setTest:function(Wt){Z||(Wt?he(t.STENCIL_TEST):ze(t.STENCIL_TEST))},setMask:function(Wt){ke!==Wt&&!Z&&(t.stencilMask(Wt),ke=Wt)},setFunc:function(Wt,Zn,Tr){(xe!==Wt||Te!==Zn||tt!==Tr)&&(t.stencilFunc(Wt,Zn,Tr),xe=Wt,Te=Zn,tt=Tr)},setOp:function(Wt,Zn,Tr){(qe!==Wt||Nt!==Zn||cn!==Tr)&&(t.stencilOp(Wt,Zn,Tr),qe=Wt,Nt=Zn,cn=Tr)},setLocked:function(Wt){Z=Wt},setClear:function(Wt){Sn!==Wt&&(t.clearStencil(Wt),Sn=Wt)},reset:function(){Z=!1,ke=null,xe=null,Te=null,tt=null,qe=null,Nt=null,cn=null,Sn=null}}}const s=new n,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},h={},p=new WeakMap,m=[],v=null,y=!1,x=null,g=null,_=null,S=null,E=null,R=null,I=null,C=new ut(0,0,0),D=0,L=!1,P=null,F=null,z=null,H=null,q=null;const se=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let K=!1,ne=0;const O=t.getParameter(t.VERSION);O.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(O)[1]),K=ne>=1):O.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),K=ne>=2);let W=null,Y={};const re=t.getParameter(t.SCISSOR_BOX),we=t.getParameter(t.VIEWPORT),Ue=new mn().fromArray(re),de=new mn().fromArray(we);function Se(Z,ke,xe,Te){const tt=new Uint8Array(4),qe=t.createTexture();t.bindTexture(Z,qe),t.texParameteri(Z,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Z,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Nt=0;Nt<xe;Nt++)Z===t.TEXTURE_3D||Z===t.TEXTURE_2D_ARRAY?t.texImage3D(ke,0,t.RGBA,1,1,Te,0,t.RGBA,t.UNSIGNED_BYTE,tt):t.texImage2D(ke+Nt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,tt);return qe}const Ie={};Ie[t.TEXTURE_2D]=Se(t.TEXTURE_2D,t.TEXTURE_2D,1),Ie[t.TEXTURE_CUBE_MAP]=Se(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ie[t.TEXTURE_2D_ARRAY]=Se(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Ie[t.TEXTURE_3D]=Se(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),he(t.DEPTH_TEST),o.setFunc(Fu),Pe(!1),Ge(CE),he(t.CULL_FACE),X(Da);function he(Z){u[Z]!==!0&&(t.enable(Z),u[Z]=!0)}function ze(Z){u[Z]!==!1&&(t.disable(Z),u[Z]=!1)}function rt(Z,ke){return h[Z]!==ke?(t.bindFramebuffer(Z,ke),h[Z]=ke,Z===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=ke),Z===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=ke),!0):!1}function je(Z,ke){let xe=m,Te=!1;if(Z){xe=p.get(ke),xe===void 0&&(xe=[],p.set(ke,xe));const tt=Z.textures;if(xe.length!==tt.length||xe[0]!==t.COLOR_ATTACHMENT0){for(let qe=0,Nt=tt.length;qe<Nt;qe++)xe[qe]=t.COLOR_ATTACHMENT0+qe;xe.length=tt.length,Te=!0}}else xe[0]!==t.BACK&&(xe[0]=t.BACK,Te=!0);Te&&t.drawBuffers(xe)}function We(Z){return v!==Z?(t.useProgram(Z),v=Z,!0):!1}const fe={[Pl]:t.FUNC_ADD,[g4]:t.FUNC_SUBTRACT,[v4]:t.FUNC_REVERSE_SUBTRACT};fe[y4]=t.MIN,fe[x4]=t.MAX;const Me={[_4]:t.ZERO,[w4]:t.ONE,[S4]:t.SRC_COLOR,[Ex]:t.SRC_ALPHA,[C4]:t.SRC_ALPHA_SATURATE,[T4]:t.DST_COLOR,[M4]:t.DST_ALPHA,[b4]:t.ONE_MINUS_SRC_COLOR,[Tx]:t.ONE_MINUS_SRC_ALPHA,[A4]:t.ONE_MINUS_DST_COLOR,[E4]:t.ONE_MINUS_DST_ALPHA,[R4]:t.CONSTANT_COLOR,[P4]:t.ONE_MINUS_CONSTANT_COLOR,[N4]:t.CONSTANT_ALPHA,[I4]:t.ONE_MINUS_CONSTANT_ALPHA};function X(Z,ke,xe,Te,tt,qe,Nt,cn,Sn,Wt){if(Z===Da){y===!0&&(ze(t.BLEND),y=!1);return}if(y===!1&&(he(t.BLEND),y=!0),Z!==m4){if(Z!==x||Wt!==L){if((g!==Pl||E!==Pl)&&(t.blendEquation(t.FUNC_ADD),g=Pl,E=Pl),Wt)switch(Z){case _u:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case RE:t.blendFunc(t.ONE,t.ONE);break;case PE:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case NE:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case _u:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case RE:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case PE:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case NE:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}_=null,S=null,R=null,I=null,C.set(0,0,0),D=0,x=Z,L=Wt}return}tt=tt||ke,qe=qe||xe,Nt=Nt||Te,(ke!==g||tt!==E)&&(t.blendEquationSeparate(fe[ke],fe[tt]),g=ke,E=tt),(xe!==_||Te!==S||qe!==R||Nt!==I)&&(t.blendFuncSeparate(Me[xe],Me[Te],Me[qe],Me[Nt]),_=xe,S=Te,R=qe,I=Nt),(cn.equals(C)===!1||Sn!==D)&&(t.blendColor(cn.r,cn.g,cn.b,Sn),C.copy(cn),D=Sn),x=Z,L=!1}function ot(Z,ke){Z.side===Oo?ze(t.CULL_FACE):he(t.CULL_FACE);let xe=Z.side===bi;ke&&(xe=!xe),Pe(xe),Z.blending===_u&&Z.transparent===!1?X(Da):X(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),o.setFunc(Z.depthFunc),o.setTest(Z.depthTest),o.setMask(Z.depthWrite),s.setMask(Z.colorWrite);const Te=Z.stencilWrite;a.setTest(Te),Te&&(a.setMask(Z.stencilWriteMask),a.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),a.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),_t(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?he(t.SAMPLE_ALPHA_TO_COVERAGE):ze(t.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(Z){P!==Z&&(Z?t.frontFace(t.CW):t.frontFace(t.CCW),P=Z)}function Ge(Z){Z!==f4?(he(t.CULL_FACE),Z!==F&&(Z===CE?t.cullFace(t.BACK):Z===h4?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ze(t.CULL_FACE),F=Z}function Be(Z){Z!==z&&(K&&t.lineWidth(Z),z=Z)}function _t(Z,ke,xe){Z?(he(t.POLYGON_OFFSET_FILL),(H!==ke||q!==xe)&&(t.polygonOffset(ke,xe),H=ke,q=xe)):ze(t.POLYGON_OFFSET_FILL)}function Ze(Z){Z?he(t.SCISSOR_TEST):ze(t.SCISSOR_TEST)}function V(Z){Z===void 0&&(Z=t.TEXTURE0+se-1),W!==Z&&(t.activeTexture(Z),W=Z)}function N(Z,ke,xe){xe===void 0&&(W===null?xe=t.TEXTURE0+se-1:xe=W);let Te=Y[xe];Te===void 0&&(Te={type:void 0,texture:void 0},Y[xe]=Te),(Te.type!==Z||Te.texture!==ke)&&(W!==xe&&(t.activeTexture(xe),W=xe),t.bindTexture(Z,ke||Ie[Z]),Te.type=Z,Te.texture=ke)}function B(){const Z=Y[W];Z!==void 0&&Z.type!==void 0&&(t.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function $(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ae(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function te(){try{t.texSubImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function pe(){try{t.texSubImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function me(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ne(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function xt(){try{t.texStorage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Ce(){try{t.texStorage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function at(){try{t.texImage2D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function vt(){try{t.texImage3D.apply(t,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Rt(Z){Ue.equals(Z)===!1&&(t.scissor(Z.x,Z.y,Z.z,Z.w),Ue.copy(Z))}function et(Z){de.equals(Z)===!1&&(t.viewport(Z.x,Z.y,Z.z,Z.w),de.copy(Z))}function J(Z,ke){let xe=c.get(ke);xe===void 0&&(xe=new WeakMap,c.set(ke,xe));let Te=xe.get(Z);Te===void 0&&(Te=t.getUniformBlockIndex(ke,Z.name),xe.set(Z,Te))}function Ee(Z,ke){const Te=c.get(ke).get(Z);l.get(ke)!==Te&&(t.uniformBlockBinding(ke,Te,Z.__bindingPointIndex),l.set(ke,Te))}function Xe(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},W=null,Y={},h={},p=new WeakMap,m=[],v=null,y=!1,x=null,g=null,_=null,S=null,E=null,R=null,I=null,C=new ut(0,0,0),D=0,L=!1,P=null,F=null,z=null,H=null,q=null,Ue.set(0,0,t.canvas.width,t.canvas.height),de.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:he,disable:ze,bindFramebuffer:rt,drawBuffers:je,useProgram:We,setBlending:X,setMaterial:ot,setFlipSided:Pe,setCullFace:Ge,setLineWidth:Be,setPolygonOffset:_t,setScissorTest:Ze,activeTexture:V,bindTexture:N,unbindTexture:B,compressedTexImage2D:$,compressedTexImage3D:ae,texImage2D:at,texImage3D:vt,updateUBOMapping:J,uniformBlockBinding:Ee,texStorage2D:xt,texStorage3D:Ce,texSubImage2D:te,texSubImage3D:pe,compressedTexSubImage2D:me,compressedTexSubImage3D:Ne,scissor:Rt,viewport:et,reset:Xe}}function Woe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2):(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0),t}function Goe(t,e){const n=t.image&&t.image.width?t.image.width/t.image.height:1;return n>e?(t.repeat.x=e/n,t.repeat.y=1,t.offset.x=(1-t.repeat.x)/2,t.offset.y=0):(t.repeat.x=1,t.repeat.y=n/e,t.offset.x=0,t.offset.y=(1-t.repeat.y)/2),t}function Xoe(t){return t.repeat.x=1,t.repeat.y=1,t.offset.x=0,t.offset.y=0,t}function FE(t,e,n,r){const i=$oe(r);switch(n){case lC:return t*e;case uC:return t*e;case dC:return t*e*2;case cw:return t*e/i.components*i.byteLength;case Ag:return t*e/i.components*i.byteLength;case fC:return t*e*2/i.components*i.byteLength;case uw:return t*e*2/i.components*i.byteLength;case cC:return t*e*3/i.components*i.byteLength;case ii:return t*e*4/i.components*i.byteLength;case dw:return t*e*4/i.components*i.byteLength;case qp:case Zp:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Kp:case Qp:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case kx:case Fx:return Math.max(t,16)*Math.max(e,8)/4;case Dx:case Ox:return Math.max(t,8)*Math.max(e,8)/2;case Ux:case Bx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case zx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Vx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case jx:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Hx:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case Wx:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Gx:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case Xx:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case $x:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Yx:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case qx:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Zx:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case Kx:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Qx:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Jx:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case e_:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Jp:case t_:case n_:return Math.ceil(t/4)*Math.ceil(e/4)*16;case hC:case r_:return Math.ceil(t/4)*Math.ceil(e/4)*8;case i_:case s_:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function $oe(t){switch(t){case po:case sC:return{byteLength:1,components:1};case Qf:case oC:case Zu:return{byteLength:2,components:1};case aw:case lw:return{byteLength:2,components:4};case Xa:case ow:case wi:return{byteLength:4,components:1};case aC:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}const Yoe={contain:Woe,cover:Goe,fill:Xoe,getByteLength:FE};function qoe(t,e,n,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ae,u=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(V,N){return m?new OffscreenCanvas(V,N):eg("canvas")}function y(V,N,B){let $=1;const ae=Ze(V);if((ae.width>B||ae.height>B)&&($=B/Math.max(ae.width,ae.height)),$<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const te=Math.floor($*ae.width),pe=Math.floor($*ae.height);h===void 0&&(h=v(te,pe));const me=N?v(te,pe):h;return me.width=te,me.height=pe,me.getContext("2d").drawImage(V,0,0,te,pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+te+"x"+pe+")."),me}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),V;return V}function x(V){return V.generateMipmaps}function g(V){t.generateMipmap(V)}function _(V){return V.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:V.isWebGL3DRenderTarget?t.TEXTURE_3D:V.isWebGLArrayRenderTarget||V.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function S(V,N,B,$,ae=!1){if(V!==null){if(t[V]!==void 0)return t[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let te=N;if(N===t.RED&&(B===t.FLOAT&&(te=t.R32F),B===t.HALF_FLOAT&&(te=t.R16F),B===t.UNSIGNED_BYTE&&(te=t.R8)),N===t.RED_INTEGER&&(B===t.UNSIGNED_BYTE&&(te=t.R8UI),B===t.UNSIGNED_SHORT&&(te=t.R16UI),B===t.UNSIGNED_INT&&(te=t.R32UI),B===t.BYTE&&(te=t.R8I),B===t.SHORT&&(te=t.R16I),B===t.INT&&(te=t.R32I)),N===t.RG&&(B===t.FLOAT&&(te=t.RG32F),B===t.HALF_FLOAT&&(te=t.RG16F),B===t.UNSIGNED_BYTE&&(te=t.RG8)),N===t.RG_INTEGER&&(B===t.UNSIGNED_BYTE&&(te=t.RG8UI),B===t.UNSIGNED_SHORT&&(te=t.RG16UI),B===t.UNSIGNED_INT&&(te=t.RG32UI),B===t.BYTE&&(te=t.RG8I),B===t.SHORT&&(te=t.RG16I),B===t.INT&&(te=t.RG32I)),N===t.RGB_INTEGER&&(B===t.UNSIGNED_BYTE&&(te=t.RGB8UI),B===t.UNSIGNED_SHORT&&(te=t.RGB16UI),B===t.UNSIGNED_INT&&(te=t.RGB32UI),B===t.BYTE&&(te=t.RGB8I),B===t.SHORT&&(te=t.RGB16I),B===t.INT&&(te=t.RGB32I)),N===t.RGBA_INTEGER&&(B===t.UNSIGNED_BYTE&&(te=t.RGBA8UI),B===t.UNSIGNED_SHORT&&(te=t.RGBA16UI),B===t.UNSIGNED_INT&&(te=t.RGBA32UI),B===t.BYTE&&(te=t.RGBA8I),B===t.SHORT&&(te=t.RGBA16I),B===t.INT&&(te=t.RGBA32I)),N===t.RGB&&B===t.UNSIGNED_INT_5_9_9_9_REV&&(te=t.RGB9_E5),N===t.RGBA){const pe=ae?Cg:fn.getTransfer($);B===t.FLOAT&&(te=t.RGBA32F),B===t.HALF_FLOAT&&(te=t.RGBA16F),B===t.UNSIGNED_BYTE&&(te=pe===Mn?t.SRGB8_ALPHA8:t.RGBA8),B===t.UNSIGNED_SHORT_4_4_4_4&&(te=t.RGBA4),B===t.UNSIGNED_SHORT_5_5_5_1&&(te=t.RGB5_A1)}return(te===t.R16F||te===t.R32F||te===t.RG16F||te===t.RG32F||te===t.RGBA16F||te===t.RGBA32F)&&e.get("EXT_color_buffer_float"),te}function E(V,N){let B;return V?N===null||N===Xa||N===Uu?B=t.DEPTH24_STENCIL8:N===wi?B=t.DEPTH32F_STENCIL8:N===Qf&&(B=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):N===null||N===Xa||N===Uu?B=t.DEPTH_COMPONENT24:N===wi?B=t.DEPTH_COMPONENT32F:N===Qf&&(B=t.DEPTH_COMPONENT16),B}function R(V,N){return x(V)===!0||V.isFramebufferTexture&&V.minFilter!==jr&&V.minFilter!==fr?Math.log2(Math.max(N.width,N.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?N.mipmaps.length:1}function I(V){const N=V.target;N.removeEventListener("dispose",I),D(N),N.isVideoTexture&&u.delete(N)}function C(V){const N=V.target;N.removeEventListener("dispose",C),P(N)}function D(V){const N=r.get(V);if(N.__webglInit===void 0)return;const B=V.source,$=p.get(B);if($){const ae=$[N.__cacheKey];ae.usedTimes--,ae.usedTimes===0&&L(V),Object.keys($).length===0&&p.delete(B)}r.remove(V)}function L(V){const N=r.get(V);t.deleteTexture(N.__webglTexture);const B=V.source,$=p.get(B);delete $[N.__cacheKey],o.memory.textures--}function P(V){const N=r.get(V);if(V.depthTexture&&(V.depthTexture.dispose(),r.remove(V.depthTexture)),V.isWebGLCubeRenderTarget)for(let $=0;$<6;$++){if(Array.isArray(N.__webglFramebuffer[$]))for(let ae=0;ae<N.__webglFramebuffer[$].length;ae++)t.deleteFramebuffer(N.__webglFramebuffer[$][ae]);else t.deleteFramebuffer(N.__webglFramebuffer[$]);N.__webglDepthbuffer&&t.deleteRenderbuffer(N.__webglDepthbuffer[$])}else{if(Array.isArray(N.__webglFramebuffer))for(let $=0;$<N.__webglFramebuffer.length;$++)t.deleteFramebuffer(N.__webglFramebuffer[$]);else t.deleteFramebuffer(N.__webglFramebuffer);if(N.__webglDepthbuffer&&t.deleteRenderbuffer(N.__webglDepthbuffer),N.__webglMultisampledFramebuffer&&t.deleteFramebuffer(N.__webglMultisampledFramebuffer),N.__webglColorRenderbuffer)for(let $=0;$<N.__webglColorRenderbuffer.length;$++)N.__webglColorRenderbuffer[$]&&t.deleteRenderbuffer(N.__webglColorRenderbuffer[$]);N.__webglDepthRenderbuffer&&t.deleteRenderbuffer(N.__webglDepthRenderbuffer)}const B=V.textures;for(let $=0,ae=B.length;$<ae;$++){const te=r.get(B[$]);te.__webglTexture&&(t.deleteTexture(te.__webglTexture),o.memory.textures--),r.remove(B[$])}r.remove(V)}let F=0;function z(){F=0}function H(){const V=F;return V>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+i.maxTextures),F+=1,V}function q(V){const N=[];return N.push(V.wrapS),N.push(V.wrapT),N.push(V.wrapR||0),N.push(V.magFilter),N.push(V.minFilter),N.push(V.anisotropy),N.push(V.internalFormat),N.push(V.format),N.push(V.type),N.push(V.generateMipmaps),N.push(V.premultiplyAlpha),N.push(V.flipY),N.push(V.unpackAlignment),N.push(V.colorSpace),N.join()}function se(V,N){const B=r.get(V);if(V.isVideoTexture&&Be(V),V.isRenderTargetTexture===!1&&V.version>0&&B.__version!==V.version){const $=V.image;if($===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if($.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(B,V,N);return}}n.bindTexture(t.TEXTURE_2D,B.__webglTexture,t.TEXTURE0+N)}function K(V,N){const B=r.get(V);if(V.version>0&&B.__version!==V.version){de(B,V,N);return}n.bindTexture(t.TEXTURE_2D_ARRAY,B.__webglTexture,t.TEXTURE0+N)}function ne(V,N){const B=r.get(V);if(V.version>0&&B.__version!==V.version){de(B,V,N);return}n.bindTexture(t.TEXTURE_3D,B.__webglTexture,t.TEXTURE0+N)}function O(V,N){const B=r.get(V);if(V.version>0&&B.__version!==V.version){Se(B,V,N);return}n.bindTexture(t.TEXTURE_CUBE_MAP,B.__webglTexture,t.TEXTURE0+N)}const W={[Ym]:t.REPEAT,[Ns]:t.CLAMP_TO_EDGE,[qm]:t.MIRRORED_REPEAT},Y={[jr]:t.NEAREST,[iC]:t.NEAREST_MIPMAP_NEAREST,[cf]:t.NEAREST_MIPMAP_LINEAR,[fr]:t.LINEAR,[Yp]:t.LINEAR_MIPMAP_NEAREST,[Uo]:t.LINEAR_MIPMAP_LINEAR},re={[Y4]:t.NEVER,[eV]:t.ALWAYS,[q4]:t.LESS,[mC]:t.LEQUAL,[Z4]:t.EQUAL,[J4]:t.GEQUAL,[K4]:t.GREATER,[Q4]:t.NOTEQUAL};function we(V,N){if(N.type===wi&&e.has("OES_texture_float_linear")===!1&&(N.magFilter===fr||N.magFilter===Yp||N.magFilter===cf||N.magFilter===Uo||N.minFilter===fr||N.minFilter===Yp||N.minFilter===cf||N.minFilter===Uo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(V,t.TEXTURE_WRAP_S,W[N.wrapS]),t.texParameteri(V,t.TEXTURE_WRAP_T,W[N.wrapT]),(V===t.TEXTURE_3D||V===t.TEXTURE_2D_ARRAY)&&t.texParameteri(V,t.TEXTURE_WRAP_R,W[N.wrapR]),t.texParameteri(V,t.TEXTURE_MAG_FILTER,Y[N.magFilter]),t.texParameteri(V,t.TEXTURE_MIN_FILTER,Y[N.minFilter]),N.compareFunction&&(t.texParameteri(V,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(V,t.TEXTURE_COMPARE_FUNC,re[N.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(N.magFilter===jr||N.minFilter!==cf&&N.minFilter!==Uo||N.type===wi&&e.has("OES_texture_float_linear")===!1)return;if(N.anisotropy>1||r.get(N).__currentAnisotropy){const B=e.get("EXT_texture_filter_anisotropic");t.texParameterf(V,B.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,i.getMaxAnisotropy())),r.get(N).__currentAnisotropy=N.anisotropy}}}function Ue(V,N){let B=!1;V.__webglInit===void 0&&(V.__webglInit=!0,N.addEventListener("dispose",I));const $=N.source;let ae=p.get($);ae===void 0&&(ae={},p.set($,ae));const te=q(N);if(te!==V.__cacheKey){ae[te]===void 0&&(ae[te]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,B=!0),ae[te].usedTimes++;const pe=ae[V.__cacheKey];pe!==void 0&&(ae[V.__cacheKey].usedTimes--,pe.usedTimes===0&&L(N)),V.__cacheKey=te,V.__webglTexture=ae[te].texture}return B}function de(V,N,B){let $=t.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&($=t.TEXTURE_2D_ARRAY),N.isData3DTexture&&($=t.TEXTURE_3D);const ae=Ue(V,N),te=N.source;n.bindTexture($,V.__webglTexture,t.TEXTURE0+B);const pe=r.get(te);if(te.version!==pe.__version||ae===!0){n.activeTexture(t.TEXTURE0+B);const me=fn.getPrimaries(fn.workingColorSpace),Ne=N.colorSpace===Ea?null:fn.getPrimaries(N.colorSpace),xt=N.colorSpace===Ea||me===Ne?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,N.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,N.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let Ce=y(N.image,!1,i.maxTextureSize);Ce=_t(N,Ce);const at=s.convert(N.format,N.colorSpace),vt=s.convert(N.type);let Rt=S(N.internalFormat,at,vt,N.colorSpace,N.isVideoTexture);we($,N);let et;const J=N.mipmaps,Ee=N.isVideoTexture!==!0,Xe=pe.__version===void 0||ae===!0,Z=te.dataReady,ke=R(N,Ce);if(N.isDepthTexture)Rt=E(N.format===Bu,N.type),Xe&&(Ee?n.texStorage2D(t.TEXTURE_2D,1,Rt,Ce.width,Ce.height):n.texImage2D(t.TEXTURE_2D,0,Rt,Ce.width,Ce.height,0,at,vt,null));else if(N.isDataTexture)if(J.length>0){Ee&&Xe&&n.texStorage2D(t.TEXTURE_2D,ke,Rt,J[0].width,J[0].height);for(let xe=0,Te=J.length;xe<Te;xe++)et=J[xe],Ee?Z&&n.texSubImage2D(t.TEXTURE_2D,xe,0,0,et.width,et.height,at,vt,et.data):n.texImage2D(t.TEXTURE_2D,xe,Rt,et.width,et.height,0,at,vt,et.data);N.generateMipmaps=!1}else Ee?(Xe&&n.texStorage2D(t.TEXTURE_2D,ke,Rt,Ce.width,Ce.height),Z&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ce.width,Ce.height,at,vt,Ce.data)):n.texImage2D(t.TEXTURE_2D,0,Rt,Ce.width,Ce.height,0,at,vt,Ce.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){Ee&&Xe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ke,Rt,J[0].width,J[0].height,Ce.depth);for(let xe=0,Te=J.length;xe<Te;xe++)if(et=J[xe],N.format!==ii)if(at!==null)if(Ee){if(Z)if(N.layerUpdates.size>0){const tt=FE(et.width,et.height,N.format,N.type);for(const qe of N.layerUpdates){const Nt=et.data.subarray(qe*tt/et.data.BYTES_PER_ELEMENT,(qe+1)*tt/et.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,qe,et.width,et.height,1,at,Nt)}N.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,et.width,et.height,Ce.depth,at,et.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,xe,Rt,et.width,et.height,Ce.depth,0,et.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ee?Z&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,et.width,et.height,Ce.depth,at,vt,et.data):n.texImage3D(t.TEXTURE_2D_ARRAY,xe,Rt,et.width,et.height,Ce.depth,0,at,vt,et.data)}else{Ee&&Xe&&n.texStorage2D(t.TEXTURE_2D,ke,Rt,J[0].width,J[0].height);for(let xe=0,Te=J.length;xe<Te;xe++)et=J[xe],N.format!==ii?at!==null?Ee?Z&&n.compressedTexSubImage2D(t.TEXTURE_2D,xe,0,0,et.width,et.height,at,et.data):n.compressedTexImage2D(t.TEXTURE_2D,xe,Rt,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ee?Z&&n.texSubImage2D(t.TEXTURE_2D,xe,0,0,et.width,et.height,at,vt,et.data):n.texImage2D(t.TEXTURE_2D,xe,Rt,et.width,et.height,0,at,vt,et.data)}else if(N.isDataArrayTexture)if(Ee){if(Xe&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ke,Rt,Ce.width,Ce.height,Ce.depth),Z)if(N.layerUpdates.size>0){const xe=FE(Ce.width,Ce.height,N.format,N.type);for(const Te of N.layerUpdates){const tt=Ce.data.subarray(Te*xe/Ce.data.BYTES_PER_ELEMENT,(Te+1)*xe/Ce.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Te,Ce.width,Ce.height,1,at,vt,tt)}N.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,at,vt,Ce.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Rt,Ce.width,Ce.height,Ce.depth,0,at,vt,Ce.data);else if(N.isData3DTexture)Ee?(Xe&&n.texStorage3D(t.TEXTURE_3D,ke,Rt,Ce.width,Ce.height,Ce.depth),Z&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,at,vt,Ce.data)):n.texImage3D(t.TEXTURE_3D,0,Rt,Ce.width,Ce.height,Ce.depth,0,at,vt,Ce.data);else if(N.isFramebufferTexture){if(Xe)if(Ee)n.texStorage2D(t.TEXTURE_2D,ke,Rt,Ce.width,Ce.height);else{let xe=Ce.width,Te=Ce.height;for(let tt=0;tt<ke;tt++)n.texImage2D(t.TEXTURE_2D,tt,Rt,xe,Te,0,at,vt,null),xe>>=1,Te>>=1}}else if(J.length>0){if(Ee&&Xe){const xe=Ze(J[0]);n.texStorage2D(t.TEXTURE_2D,ke,Rt,xe.width,xe.height)}for(let xe=0,Te=J.length;xe<Te;xe++)et=J[xe],Ee?Z&&n.texSubImage2D(t.TEXTURE_2D,xe,0,0,at,vt,et):n.texImage2D(t.TEXTURE_2D,xe,Rt,at,vt,et);N.generateMipmaps=!1}else if(Ee){if(Xe){const xe=Ze(Ce);n.texStorage2D(t.TEXTURE_2D,ke,Rt,xe.width,xe.height)}Z&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,at,vt,Ce)}else n.texImage2D(t.TEXTURE_2D,0,Rt,at,vt,Ce);x(N)&&g($),pe.__version=te.version,N.onUpdate&&N.onUpdate(N)}V.__version=N.version}function Se(V,N,B){if(N.image.length!==6)return;const $=Ue(V,N),ae=N.source;n.bindTexture(t.TEXTURE_CUBE_MAP,V.__webglTexture,t.TEXTURE0+B);const te=r.get(ae);if(ae.version!==te.__version||$===!0){n.activeTexture(t.TEXTURE0+B);const pe=fn.getPrimaries(fn.workingColorSpace),me=N.colorSpace===Ea?null:fn.getPrimaries(N.colorSpace),Ne=N.colorSpace===Ea||pe===me?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,N.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,N.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);const xt=N.isCompressedTexture||N.image[0].isCompressedTexture,Ce=N.image[0]&&N.image[0].isDataTexture,at=[];for(let Te=0;Te<6;Te++)!xt&&!Ce?at[Te]=y(N.image[Te],!0,i.maxCubemapSize):at[Te]=Ce?N.image[Te].image:N.image[Te],at[Te]=_t(N,at[Te]);const vt=at[0],Rt=s.convert(N.format,N.colorSpace),et=s.convert(N.type),J=S(N.internalFormat,Rt,et,N.colorSpace),Ee=N.isVideoTexture!==!0,Xe=te.__version===void 0||$===!0,Z=ae.dataReady;let ke=R(N,vt);we(t.TEXTURE_CUBE_MAP,N);let xe;if(xt){Ee&&Xe&&n.texStorage2D(t.TEXTURE_CUBE_MAP,ke,J,vt.width,vt.height);for(let Te=0;Te<6;Te++){xe=at[Te].mipmaps;for(let tt=0;tt<xe.length;tt++){const qe=xe[tt];N.format!==ii?Rt!==null?Ee?Z&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,0,0,qe.width,qe.height,Rt,qe.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,J,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ee?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,0,0,qe.width,qe.height,Rt,et,qe.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt,J,qe.width,qe.height,0,Rt,et,qe.data)}}}else{if(xe=N.mipmaps,Ee&&Xe){xe.length>0&&ke++;const Te=Ze(at[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,ke,J,Te.width,Te.height)}for(let Te=0;Te<6;Te++)if(Ce){Ee?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,at[Te].width,at[Te].height,Rt,et,at[Te].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,J,at[Te].width,at[Te].height,0,Rt,et,at[Te].data);for(let tt=0;tt<xe.length;tt++){const Nt=xe[tt].image[Te].image;Ee?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,0,0,Nt.width,Nt.height,Rt,et,Nt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,J,Nt.width,Nt.height,0,Rt,et,Nt.data)}}else{Ee?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Rt,et,at[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,J,Rt,et,at[Te]);for(let tt=0;tt<xe.length;tt++){const qe=xe[tt];Ee?Z&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,0,0,Rt,et,qe.image[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,tt+1,J,Rt,et,qe.image[Te])}}}x(N)&&g(t.TEXTURE_CUBE_MAP),te.__version=ae.version,N.onUpdate&&N.onUpdate(N)}V.__version=N.version}function Ie(V,N,B,$,ae,te){const pe=s.convert(B.format,B.colorSpace),me=s.convert(B.type),Ne=S(B.internalFormat,pe,me,B.colorSpace),xt=r.get(N),Ce=r.get(B);if(Ce.__renderTarget=N,!xt.__hasExternalTextures){const at=Math.max(1,N.width>>te),vt=Math.max(1,N.height>>te);ae===t.TEXTURE_3D||ae===t.TEXTURE_2D_ARRAY?n.texImage3D(ae,te,Ne,at,vt,N.depth,0,pe,me,null):n.texImage2D(ae,te,Ne,at,vt,0,pe,me,null)}n.bindFramebuffer(t.FRAMEBUFFER,V),Ge(N)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,$,ae,Ce.__webglTexture,0,Pe(N)):(ae===t.TEXTURE_2D||ae>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&ae<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,$,ae,Ce.__webglTexture,te),n.bindFramebuffer(t.FRAMEBUFFER,null)}function he(V,N,B){if(t.bindRenderbuffer(t.RENDERBUFFER,V),N.depthBuffer){const $=N.depthTexture,ae=$&&$.isDepthTexture?$.type:null,te=E(N.stencilBuffer,ae),pe=N.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,me=Pe(N);Ge(N)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,me,te,N.width,N.height):B?t.renderbufferStorageMultisample(t.RENDERBUFFER,me,te,N.width,N.height):t.renderbufferStorage(t.RENDERBUFFER,te,N.width,N.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,pe,t.RENDERBUFFER,V)}else{const $=N.textures;for(let ae=0;ae<$.length;ae++){const te=$[ae],pe=s.convert(te.format,te.colorSpace),me=s.convert(te.type),Ne=S(te.internalFormat,pe,me,te.colorSpace),xt=Pe(N);B&&Ge(N)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,xt,Ne,N.width,N.height):Ge(N)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xt,Ne,N.width,N.height):t.renderbufferStorage(t.RENDERBUFFER,Ne,N.width,N.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ze(V,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,V),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const $=r.get(N.depthTexture);$.__renderTarget=N,(!$.__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),se(N.depthTexture,0);const ae=$.__webglTexture,te=Pe(N);if(N.depthTexture.format===wu)Ge(N)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ae,0,te):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ae,0);else if(N.depthTexture.format===Bu)Ge(N)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ae,0,te):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ae,0);else throw new Error("Unknown depthTexture format")}function rt(V){const N=r.get(V),B=V.isWebGLCubeRenderTarget===!0;if(N.__boundDepthTexture!==V.depthTexture){const $=V.depthTexture;if(N.__depthDisposeCallback&&N.__depthDisposeCallback(),$){const ae=()=>{delete N.__boundDepthTexture,delete N.__depthDisposeCallback,$.removeEventListener("dispose",ae)};$.addEventListener("dispose",ae),N.__depthDisposeCallback=ae}N.__boundDepthTexture=$}if(V.depthTexture&&!N.__autoAllocateDepthBuffer){if(B)throw new Error("target.depthTexture not supported in Cube render targets");ze(N.__webglFramebuffer,V)}else if(B){N.__webglDepthbuffer=[];for(let $=0;$<6;$++)if(n.bindFramebuffer(t.FRAMEBUFFER,N.__webglFramebuffer[$]),N.__webglDepthbuffer[$]===void 0)N.__webglDepthbuffer[$]=t.createRenderbuffer(),he(N.__webglDepthbuffer[$],V,!1);else{const ae=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,te=N.__webglDepthbuffer[$];t.bindRenderbuffer(t.RENDERBUFFER,te),t.framebufferRenderbuffer(t.FRAMEBUFFER,ae,t.RENDERBUFFER,te)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer===void 0)N.__webglDepthbuffer=t.createRenderbuffer(),he(N.__webglDepthbuffer,V,!1);else{const $=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ae=N.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,ae),t.framebufferRenderbuffer(t.FRAMEBUFFER,$,t.RENDERBUFFER,ae)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function je(V,N,B){const $=r.get(V);N!==void 0&&Ie($.__webglFramebuffer,V,V.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),B!==void 0&&rt(V)}function We(V){const N=V.texture,B=r.get(V),$=r.get(N);V.addEventListener("dispose",C);const ae=V.textures,te=V.isWebGLCubeRenderTarget===!0,pe=ae.length>1;if(pe||($.__webglTexture===void 0&&($.__webglTexture=t.createTexture()),$.__version=N.version,o.memory.textures++),te){B.__webglFramebuffer=[];for(let me=0;me<6;me++)if(N.mipmaps&&N.mipmaps.length>0){B.__webglFramebuffer[me]=[];for(let Ne=0;Ne<N.mipmaps.length;Ne++)B.__webglFramebuffer[me][Ne]=t.createFramebuffer()}else B.__webglFramebuffer[me]=t.createFramebuffer()}else{if(N.mipmaps&&N.mipmaps.length>0){B.__webglFramebuffer=[];for(let me=0;me<N.mipmaps.length;me++)B.__webglFramebuffer[me]=t.createFramebuffer()}else B.__webglFramebuffer=t.createFramebuffer();if(pe)for(let me=0,Ne=ae.length;me<Ne;me++){const xt=r.get(ae[me]);xt.__webglTexture===void 0&&(xt.__webglTexture=t.createTexture(),o.memory.textures++)}if(V.samples>0&&Ge(V)===!1){B.__webglMultisampledFramebuffer=t.createFramebuffer(),B.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,B.__webglMultisampledFramebuffer);for(let me=0;me<ae.length;me++){const Ne=ae[me];B.__webglColorRenderbuffer[me]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,B.__webglColorRenderbuffer[me]);const xt=s.convert(Ne.format,Ne.colorSpace),Ce=s.convert(Ne.type),at=S(Ne.internalFormat,xt,Ce,Ne.colorSpace,V.isXRRenderTarget===!0),vt=Pe(V);t.renderbufferStorageMultisample(t.RENDERBUFFER,vt,at,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+me,t.RENDERBUFFER,B.__webglColorRenderbuffer[me])}t.bindRenderbuffer(t.RENDERBUFFER,null),V.depthBuffer&&(B.__webglDepthRenderbuffer=t.createRenderbuffer(),he(B.__webglDepthRenderbuffer,V,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(te){n.bindTexture(t.TEXTURE_CUBE_MAP,$.__webglTexture),we(t.TEXTURE_CUBE_MAP,N);for(let me=0;me<6;me++)if(N.mipmaps&&N.mipmaps.length>0)for(let Ne=0;Ne<N.mipmaps.length;Ne++)Ie(B.__webglFramebuffer[me][Ne],V,N,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ne);else Ie(B.__webglFramebuffer[me],V,N,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+me,0);x(N)&&g(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(pe){for(let me=0,Ne=ae.length;me<Ne;me++){const xt=ae[me],Ce=r.get(xt);n.bindTexture(t.TEXTURE_2D,Ce.__webglTexture),we(t.TEXTURE_2D,xt),Ie(B.__webglFramebuffer,V,xt,t.COLOR_ATTACHMENT0+me,t.TEXTURE_2D,0),x(xt)&&g(t.TEXTURE_2D)}n.unbindTexture()}else{let me=t.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(me=V.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(me,$.__webglTexture),we(me,N),N.mipmaps&&N.mipmaps.length>0)for(let Ne=0;Ne<N.mipmaps.length;Ne++)Ie(B.__webglFramebuffer[Ne],V,N,t.COLOR_ATTACHMENT0,me,Ne);else Ie(B.__webglFramebuffer,V,N,t.COLOR_ATTACHMENT0,me,0);x(N)&&g(me),n.unbindTexture()}V.depthBuffer&&rt(V)}function fe(V){const N=V.textures;for(let B=0,$=N.length;B<$;B++){const ae=N[B];if(x(ae)){const te=_(V),pe=r.get(ae).__webglTexture;n.bindTexture(te,pe),g(te),n.unbindTexture()}}}const Me=[],X=[];function ot(V){if(V.samples>0){if(Ge(V)===!1){const N=V.textures,B=V.width,$=V.height;let ae=t.COLOR_BUFFER_BIT;const te=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,pe=r.get(V),me=N.length>1;if(me)for(let Ne=0;Ne<N.length;Ne++)n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,pe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,pe.__webglFramebuffer);for(let Ne=0;Ne<N.length;Ne++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(ae|=t.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(ae|=t.STENCIL_BUFFER_BIT)),me){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,pe.__webglColorRenderbuffer[Ne]);const xt=r.get(N[Ne]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,xt,0)}t.blitFramebuffer(0,0,B,$,0,0,B,$,ae,t.NEAREST),l===!0&&(Me.length=0,X.length=0,Me.push(t.COLOR_ATTACHMENT0+Ne),V.depthBuffer&&V.resolveDepthBuffer===!1&&(Me.push(te),X.push(te),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,X)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Me))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),me)for(let Ne=0;Ne<N.length;Ne++){n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.RENDERBUFFER,pe.__webglColorRenderbuffer[Ne]);const xt=r.get(N[Ne]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ne,t.TEXTURE_2D,xt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,pe.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&l){const N=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[N])}}}function Pe(V){return Math.min(i.maxSamples,V.samples)}function Ge(V){const N=r.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function Be(V){const N=o.render.frame;u.get(V)!==N&&(u.set(V,N),V.update())}function _t(V,N){const B=V.colorSpace,$=V.format,ae=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||B!==Ku&&B!==Ea&&(fn.getTransfer(B)===Mn?($!==ii||ae!==po)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",B)),N}function Ze(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(c.width=V.naturalWidth||V.width,c.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(c.width=V.displayWidth,c.height=V.displayHeight):(c.width=V.width,c.height=V.height),c}this.allocateTextureUnit=H,this.resetTextureUnits=z,this.setTexture2D=se,this.setTexture2DArray=K,this.setTexture3D=ne,this.setTextureCube=O,this.rebindTextures=je,this.setupRenderTarget=We,this.updateRenderTargetMipmap=fe,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=rt,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=Ge}function mV(t,e){function n(r,i=Ea){let s;const o=fn.getTransfer(i);if(r===po)return t.UNSIGNED_BYTE;if(r===aw)return t.UNSIGNED_SHORT_4_4_4_4;if(r===lw)return t.UNSIGNED_SHORT_5_5_5_1;if(r===aC)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===sC)return t.BYTE;if(r===oC)return t.SHORT;if(r===Qf)return t.UNSIGNED_SHORT;if(r===ow)return t.INT;if(r===Xa)return t.UNSIGNED_INT;if(r===wi)return t.FLOAT;if(r===Zu)return t.HALF_FLOAT;if(r===lC)return t.ALPHA;if(r===cC)return t.RGB;if(r===ii)return t.RGBA;if(r===uC)return t.LUMINANCE;if(r===dC)return t.LUMINANCE_ALPHA;if(r===wu)return t.DEPTH_COMPONENT;if(r===Bu)return t.DEPTH_STENCIL;if(r===cw)return t.RED;if(r===Ag)return t.RED_INTEGER;if(r===fC)return t.RG;if(r===uw)return t.RG_INTEGER;if(r===dw)return t.RGBA_INTEGER;if(r===qp||r===Zp||r===Kp||r===Qp)if(o===Mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===qp)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Zp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Kp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Qp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===qp)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Zp)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Kp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Qp)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Dx||r===kx||r===Ox||r===Fx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Dx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===kx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Ox)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Fx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Ux||r===Bx||r===zx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===Ux||r===Bx)return o===Mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===zx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Vx||r===jx||r===Hx||r===Wx||r===Gx||r===Xx||r===$x||r===Yx||r===qx||r===Zx||r===Kx||r===Qx||r===Jx||r===e_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Vx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===jx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Hx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===Wx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Gx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Xx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===$x)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Yx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===qx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Zx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Kx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Qx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Jx)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===e_)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Jp||r===t_||r===n_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Jp)return o===Mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===t_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===n_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===hC||r===r_||r===i_||r===s_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Jp)return s.COMPRESSED_RED_RGTC1_EXT;if(r===r_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===i_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===s_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Uu?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}class gV extends dr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ff extends vn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Zoe={type:"move"};class S1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ff,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ff,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ff,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const x=n.getJointPose(y,r),g=this._getHandJoint(c,y);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],p=u.position.distanceTo(h.position),m=.02,v=.005;c.inputState.pinching&&p>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Zoe)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new ff;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const Koe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Qoe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Joe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new ir,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new mo({vertexShader:Koe,fragmentShader:Qoe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new xr(new gh(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eae extends ta{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,p=null,m=null,v=null;const y=new Joe,x=n.getContextAttributes();let g=null,_=null;const S=[],E=[],R=new Ae;let I=null;const C=new dr;C.viewport=new mn;const D=new dr;D.viewport=new mn;const L=[C,D],P=new gV;let F=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let Se=S[de];return Se===void 0&&(Se=new S1,S[de]=Se),Se.getTargetRaySpace()},this.getControllerGrip=function(de){let Se=S[de];return Se===void 0&&(Se=new S1,S[de]=Se),Se.getGripSpace()},this.getHand=function(de){let Se=S[de];return Se===void 0&&(Se=new S1,S[de]=Se),Se.getHandSpace()};function H(de){const Se=E.indexOf(de.inputSource);if(Se===-1)return;const Ie=S[Se];Ie!==void 0&&(Ie.update(de.inputSource,de.frame,c||o),Ie.dispatchEvent({type:de.type,data:de.inputSource}))}function q(){i.removeEventListener("select",H),i.removeEventListener("selectstart",H),i.removeEventListener("selectend",H),i.removeEventListener("squeeze",H),i.removeEventListener("squeezestart",H),i.removeEventListener("squeezeend",H),i.removeEventListener("end",q),i.removeEventListener("inputsourceschange",se);for(let de=0;de<S.length;de++){const Se=E[de];Se!==null&&(E[de]=null,S[de].disconnect(Se))}F=null,z=null,y.reset(),e.setRenderTarget(g),m=null,p=null,h=null,i=null,_=null,Ue.stop(),r.isPresenting=!1,e.setPixelRatio(I),e.setSize(R.width,R.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(de){s=de,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(de){c=de},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(de){if(i=de,i!==null){if(g=e.getRenderTarget(),i.addEventListener("select",H),i.addEventListener("selectstart",H),i.addEventListener("selectend",H),i.addEventListener("squeeze",H),i.addEventListener("squeezestart",H),i.addEventListener("squeezeend",H),i.addEventListener("end",q),i.addEventListener("inputsourceschange",se),x.xrCompatible!==!0&&await n.makeXRCompatible(),I=e.getPixelRatio(),e.getSize(R),i.renderState.layers===void 0){const Se={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,Se),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new ks(m.framebufferWidth,m.framebufferHeight,{format:ii,type:po,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let Se=null,Ie=null,he=null;x.depth&&(he=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Se=x.stencil?Bu:wu,Ie=x.stencil?Uu:Xa);const ze={colorFormat:n.RGBA8,depthFormat:he,scaleFactor:s};h=new XRWebGLBinding(i,n),p=h.createProjectionLayer(ze),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),_=new ks(p.textureWidth,p.textureHeight,{format:ii,type:po,depthTexture:new pw(p.textureWidth,p.textureHeight,Ie,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),Ue.setContext(i),Ue.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function se(de){for(let Se=0;Se<de.removed.length;Se++){const Ie=de.removed[Se],he=E.indexOf(Ie);he>=0&&(E[he]=null,S[he].disconnect(Ie))}for(let Se=0;Se<de.added.length;Se++){const Ie=de.added[Se];let he=E.indexOf(Ie);if(he===-1){for(let rt=0;rt<S.length;rt++)if(rt>=E.length){E.push(Ie),he=rt;break}else if(E[rt]===null){E[rt]=Ie,he=rt;break}if(he===-1)break}const ze=S[he];ze&&ze.connect(Ie)}}const K=new j,ne=new j;function O(de,Se,Ie){K.setFromMatrixPosition(Se.matrixWorld),ne.setFromMatrixPosition(Ie.matrixWorld);const he=K.distanceTo(ne),ze=Se.projectionMatrix.elements,rt=Ie.projectionMatrix.elements,je=ze[14]/(ze[10]-1),We=ze[14]/(ze[10]+1),fe=(ze[9]+1)/ze[5],Me=(ze[9]-1)/ze[5],X=(ze[8]-1)/ze[0],ot=(rt[8]+1)/rt[0],Pe=je*X,Ge=je*ot,Be=he/(-X+ot),_t=Be*-X;if(Se.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(_t),de.translateZ(Be),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert(),ze[10]===-1)de.projectionMatrix.copy(Se.projectionMatrix),de.projectionMatrixInverse.copy(Se.projectionMatrixInverse);else{const Ze=je+Be,V=We+Be,N=Pe-_t,B=Ge+(he-_t),$=fe*We/V*Ze,ae=Me*We/V*Ze;de.projectionMatrix.makePerspective(N,B,$,ae,Ze,V),de.projectionMatrixInverse.copy(de.projectionMatrix).invert()}}function W(de,Se){Se===null?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(Se.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(i===null)return;let Se=de.near,Ie=de.far;y.texture!==null&&(y.depthNear>0&&(Se=y.depthNear),y.depthFar>0&&(Ie=y.depthFar)),P.near=D.near=C.near=Se,P.far=D.far=C.far=Ie,(F!==P.near||z!==P.far)&&(i.updateRenderState({depthNear:P.near,depthFar:P.far}),F=P.near,z=P.far),C.layers.mask=de.layers.mask|2,D.layers.mask=de.layers.mask|4,P.layers.mask=C.layers.mask|D.layers.mask;const he=de.parent,ze=P.cameras;W(P,he);for(let rt=0;rt<ze.length;rt++)W(ze[rt],he);ze.length===2?O(P,C,D):P.projectionMatrix.copy(C.projectionMatrix),Y(de,P,he)};function Y(de,Se,Ie){Ie===null?de.matrix.copy(Se.matrixWorld):(de.matrix.copy(Ie.matrixWorld),de.matrix.invert(),de.matrix.multiply(Se.matrixWorld)),de.matrix.decompose(de.position,de.quaternion,de.scale),de.updateMatrixWorld(!0),de.projectionMatrix.copy(Se.projectionMatrix),de.projectionMatrixInverse.copy(Se.projectionMatrixInverse),de.isPerspectiveCamera&&(de.fov=Jf*2*Math.atan(1/de.projectionMatrix.elements[5]),de.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(de){l=de,p!==null&&(p.fixedFoveation=de),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=de)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(P)};let re=null;function we(de,Se){if(u=Se.getViewerPose(c||o),v=Se,u!==null){const Ie=u.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let he=!1;Ie.length!==P.cameras.length&&(P.cameras.length=0,he=!0);for(let rt=0;rt<Ie.length;rt++){const je=Ie[rt];let We=null;if(m!==null)We=m.getViewport(je);else{const Me=h.getViewSubImage(p,je);We=Me.viewport,rt===0&&(e.setRenderTargetTextures(_,Me.colorTexture,p.ignoreDepthValues?void 0:Me.depthStencilTexture),e.setRenderTarget(_))}let fe=L[rt];fe===void 0&&(fe=new dr,fe.layers.enable(rt),fe.viewport=new mn,L[rt]=fe),fe.matrix.fromArray(je.transform.matrix),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.projectionMatrix.fromArray(je.projectionMatrix),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert(),fe.viewport.set(We.x,We.y,We.width,We.height),rt===0&&(P.matrix.copy(fe.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),he===!0&&P.cameras.push(fe)}const ze=i.enabledFeatures;if(ze&&ze.includes("depth-sensing")){const rt=h.getDepthInformation(Ie[0]);rt&&rt.isValid&&rt.texture&&y.init(e,rt,i.renderState)}}for(let Ie=0;Ie<S.length;Ie++){const he=E[Ie],ze=S[Ie];he!==null&&ze!==void 0&&ze.update(he,Se,c||o)}re&&re(de,Se),Se.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Se}),v=null}const Ue=new uV;Ue.setAnimationLoop(we),this.setAnimationLoop=function(de){re=de},this.dispose=function(){}}}const kc=new ls,tae=new zt;function nae(t,e){function n(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function r(x,g){g.color.getRGB(x.fogColor.value,oV(t)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function i(x,g,_,S,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),h(x,g)):g.isMeshPhongMaterial?(s(x,g),u(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,E)):g.isMeshMatcapMaterial?(s(x,g),v(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),y(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,_,S):g.isSpriteMaterial?c(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,n(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,n(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,n(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===bi&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,n(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===bi&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,n(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,n(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const _=e.get(g),S=_.envMap,E=_.envMapRotation;S&&(x.envMap.value=S,kc.copy(E),kc.x*=-1,kc.y*=-1,kc.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(kc.y*=-1,kc.z*=-1),x.envMapRotation.value.setFromMatrix4(tae.makeRotationFromEuler(kc)),x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,n(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,n(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,_,S){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*_,x.scale.value=S*.5,g.map&&(x.map.value=g.map,n(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,n(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,n(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,n(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function u(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function h(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,_){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===bi&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,g){g.matcap&&(x.matcap.value=g.matcap)}function y(x,g){const _=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function rae(t,e,n,r){let i={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,S){const E=S.program;r.uniformBlockBinding(_,E)}function c(_,S){let E=i[_.id];E===void 0&&(v(_),E=u(_),i[_.id]=E,_.addEventListener("dispose",x));const R=S.program;r.updateUBOMapping(_,R);const I=e.render.frame;s[_.id]!==I&&(p(_),s[_.id]=I)}function u(_){const S=h();_.__bindingPointIndex=S;const E=t.createBuffer(),R=_.__size,I=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,E),t.bufferData(t.UNIFORM_BUFFER,R,I),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,S,E),E}function h(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const S=i[_.id],E=_.uniforms,R=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,S);for(let I=0,C=E.length;I<C;I++){const D=Array.isArray(E[I])?E[I]:[E[I]];for(let L=0,P=D.length;L<P;L++){const F=D[L];if(m(F,I,L,R)===!0){const z=F.__offset,H=Array.isArray(F.value)?F.value:[F.value];let q=0;for(let se=0;se<H.length;se++){const K=H[se],ne=y(K);typeof K=="number"||typeof K=="boolean"?(F.__data[0]=K,t.bufferSubData(t.UNIFORM_BUFFER,z+q,F.__data)):K.isMatrix3?(F.__data[0]=K.elements[0],F.__data[1]=K.elements[1],F.__data[2]=K.elements[2],F.__data[3]=0,F.__data[4]=K.elements[3],F.__data[5]=K.elements[4],F.__data[6]=K.elements[5],F.__data[7]=0,F.__data[8]=K.elements[6],F.__data[9]=K.elements[7],F.__data[10]=K.elements[8],F.__data[11]=0):(K.toArray(F.__data,q),q+=ne.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,z,F.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(_,S,E,R){const I=_.value,C=S+"_"+E;if(R[C]===void 0)return typeof I=="number"||typeof I=="boolean"?R[C]=I:R[C]=I.clone(),!0;{const D=R[C];if(typeof I=="number"||typeof I=="boolean"){if(D!==I)return R[C]=I,!0}else if(D.equals(I)===!1)return D.copy(I),!0}return!1}function v(_){const S=_.uniforms;let E=0;const R=16;for(let C=0,D=S.length;C<D;C++){const L=Array.isArray(S[C])?S[C]:[S[C]];for(let P=0,F=L.length;P<F;P++){const z=L[P],H=Array.isArray(z.value)?z.value:[z.value];for(let q=0,se=H.length;q<se;q++){const K=H[q],ne=y(K),O=E%R,W=O%ne.boundary,Y=O+W;E+=W,Y!==0&&R-Y<ne.storage&&(E+=R-Y),z.__data=new Float32Array(ne.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=E,E+=ne.storage}}}const I=E%R;return I>0&&(E+=R-I),_.__size=E,_.__cache={},this}function y(_){const S={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(S.boundary=4,S.storage=4):_.isVector2?(S.boundary=8,S.storage=8):_.isVector3||_.isColor?(S.boundary=16,S.storage=12):_.isVector4?(S.boundary=16,S.storage=16):_.isMatrix3?(S.boundary=48,S.storage=48):_.isMatrix4?(S.boundary=64,S.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),S}function x(_){const S=_.target;S.removeEventListener("dispose",x);const E=o.indexOf(S.__bindingPointIndex);o.splice(E,1),t.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function g(){for(const _ in i)t.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:g}}class vV{constructor(e={}){const{canvas:n=nV(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=o;const v=new Uint32Array(4),y=new Int32Array(4);let x=null,g=null;const _=[],S=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ki,this.toneMapping=Xo,this.toneMappingExposure=1;const E=this;let R=!1,I=0,C=0,D=null,L=-1,P=null;const F=new mn,z=new mn;let H=null;const q=new ut(0);let se=0,K=n.width,ne=n.height,O=1,W=null,Y=null;const re=new mn(0,0,K,ne),we=new mn(0,0,K,ne);let Ue=!1;const de=new Ng;let Se=!1,Ie=!1;const he=new zt,ze=new zt,rt=new j,je=new mn,We={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let fe=!1;function Me(){return D===null?O:1}let X=r;function ot(U,ee){return n.getContext(U,ee)}try{const U={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${rw}`),n.addEventListener("webglcontextlost",Te,!1),n.addEventListener("webglcontextrestored",tt,!1),n.addEventListener("webglcontextcreationerror",qe,!1),X===null){const ee="webgl2";if(X=ot(ee,U),X===null)throw ot(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let Pe,Ge,Be,_t,Ze,V,N,B,$,ae,te,pe,me,Ne,xt,Ce,at,vt,Rt,et,J,Ee,Xe,Z;function ke(){Pe=new cse(X),Pe.init(),Ee=new mV(X,Pe),Ge=new rse(X,Pe,e,Ee),Be=new Hoe(X,Pe),Ge.reverseDepthBuffer&&p&&Be.buffers.depth.setReversed(!0),_t=new fse(X),Ze=new Poe,V=new qoe(X,Pe,Be,Ze,Ge,Ee,_t),N=new sse(E),B=new lse(E),$=new xne(X),Xe=new tse(X,$),ae=new use(X,$,_t,Xe),te=new pse(X,ae,$,_t),Rt=new hse(X,Ge,V),Ce=new ise(Ze),pe=new Roe(E,N,B,Pe,Ge,Xe,Ce),me=new nae(E,Ze),Ne=new Ioe,xt=new Uoe(Pe),vt=new ese(E,N,B,Be,te,m,l),at=new Voe(E,te,Ge),Z=new rae(X,_t,Ge,Be),et=new nse(X,Pe,_t),J=new dse(X,Pe,_t),_t.programs=pe.programs,E.capabilities=Ge,E.extensions=Pe,E.properties=Ze,E.renderLists=Ne,E.shadowMap=at,E.state=Be,E.info=_t}ke();const xe=new eae(E,X);this.xr=xe,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const U=Pe.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=Pe.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(U){U!==void 0&&(O=U,this.setSize(K,ne,!1))},this.getSize=function(U){return U.set(K,ne)},this.setSize=function(U,ee,ue=!0){if(xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=U,ne=ee,n.width=Math.floor(U*O),n.height=Math.floor(ee*O),ue===!0&&(n.style.width=U+"px",n.style.height=ee+"px"),this.setViewport(0,0,U,ee)},this.getDrawingBufferSize=function(U){return U.set(K*O,ne*O).floor()},this.setDrawingBufferSize=function(U,ee,ue){K=U,ne=ee,O=ue,n.width=Math.floor(U*ue),n.height=Math.floor(ee*ue),this.setViewport(0,0,U,ee)},this.getCurrentViewport=function(U){return U.copy(F)},this.getViewport=function(U){return U.copy(re)},this.setViewport=function(U,ee,ue,ye){U.isVector4?re.set(U.x,U.y,U.z,U.w):re.set(U,ee,ue,ye),Be.viewport(F.copy(re).multiplyScalar(O).round())},this.getScissor=function(U){return U.copy(we)},this.setScissor=function(U,ee,ue,ye){U.isVector4?we.set(U.x,U.y,U.z,U.w):we.set(U,ee,ue,ye),Be.scissor(z.copy(we).multiplyScalar(O).round())},this.getScissorTest=function(){return Ue},this.setScissorTest=function(U){Be.setScissorTest(Ue=U)},this.setOpaqueSort=function(U){W=U},this.setTransparentSort=function(U){Y=U},this.getClearColor=function(U){return U.copy(vt.getClearColor())},this.setClearColor=function(){vt.setClearColor.apply(vt,arguments)},this.getClearAlpha=function(){return vt.getClearAlpha()},this.setClearAlpha=function(){vt.setClearAlpha.apply(vt,arguments)},this.clear=function(U=!0,ee=!0,ue=!0){let ye=0;if(U){let oe=!1;if(D!==null){const De=D.texture.format;oe=De===dw||De===uw||De===Ag}if(oe){const De=D.texture.type,He=De===po||De===Xa||De===Qf||De===Uu||De===aw||De===lw,dt=vt.getClearColor(),ft=vt.getClearAlpha(),It=dt.r,Ut=dt.g,mt=dt.b;He?(v[0]=It,v[1]=Ut,v[2]=mt,v[3]=ft,X.clearBufferuiv(X.COLOR,0,v)):(y[0]=It,y[1]=Ut,y[2]=mt,y[3]=ft,X.clearBufferiv(X.COLOR,0,y))}else ye|=X.COLOR_BUFFER_BIT}ee&&(ye|=X.DEPTH_BUFFER_BIT),ue&&(ye|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(ye)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Te,!1),n.removeEventListener("webglcontextrestored",tt,!1),n.removeEventListener("webglcontextcreationerror",qe,!1),Ne.dispose(),xt.dispose(),Ze.dispose(),N.dispose(),B.dispose(),te.dispose(),Xe.dispose(),Z.dispose(),pe.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",Q),xe.removeEventListener("sessionend",ce),ge.stop()};function Te(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function tt(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const U=_t.autoReset,ee=at.enabled,ue=at.autoUpdate,ye=at.needsUpdate,oe=at.type;ke(),_t.autoReset=U,at.enabled=ee,at.autoUpdate=ue,at.needsUpdate=ye,at.type=oe}function qe(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Nt(U){const ee=U.target;ee.removeEventListener("dispose",Nt),cn(ee)}function cn(U){Sn(U),Ze.remove(U)}function Sn(U){const ee=Ze.get(U).programs;ee!==void 0&&(ee.forEach(function(ue){pe.releaseProgram(ue)}),U.isShaderMaterial&&pe.releaseShaderCache(U))}this.renderBufferDirect=function(U,ee,ue,ye,oe,De){ee===null&&(ee=We);const He=oe.isMesh&&oe.matrixWorld.determinant()<0,dt=Ht(U,ee,ue,ye,oe);Be.setMaterial(ye,He);let ft=ue.index,It=1;if(ye.wireframe===!0){if(ft=ae.getWireframeAttribute(ue),ft===void 0)return;It=2}const Ut=ue.drawRange,mt=ue.attributes.position;let it=Ut.start*It,Tt=(Ut.start+Ut.count)*It;De!==null&&(it=Math.max(it,De.start*It),Tt=Math.min(Tt,(De.start+De.count)*It)),ft!==null?(it=Math.max(it,0),Tt=Math.min(Tt,ft.count)):mt!=null&&(it=Math.max(it,0),Tt=Math.min(Tt,mt.count));const At=Tt-it;if(At<0||At===1/0)return;Xe.setup(oe,ye,dt,ue,ft);let Vt,Mt=et;if(ft!==null&&(Vt=$.get(ft),Mt=J,Mt.setIndex(Vt)),oe.isMesh)ye.wireframe===!0?(Be.setLineWidth(ye.wireframeLinewidth*Me()),Mt.setMode(X.LINES)):Mt.setMode(X.TRIANGLES);else if(oe.isLine){let Ye=ye.linewidth;Ye===void 0&&(Ye=1),Be.setLineWidth(Ye*Me()),oe.isLineSegments?Mt.setMode(X.LINES):oe.isLineLoop?Mt.setMode(X.LINE_LOOP):Mt.setMode(X.LINE_STRIP)}else oe.isPoints?Mt.setMode(X.POINTS):oe.isSprite&&Mt.setMode(X.TRIANGLES);if(oe.isBatchedMesh)if(oe._multiDrawInstances!==null)Mt.renderMultiDrawInstances(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount,oe._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))Mt.renderMultiDraw(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount);else{const Ye=oe._multiDrawStarts,Nn=oe._multiDrawCounts,nn=oe._multiDrawCount,Ar=ft?$.get(ft).bytesPerElement:1,sr=Ze.get(ye).currentProgram.getUniforms();for(let Cr=0;Cr<nn;Cr++)sr.setValue(X,"_gl_DrawID",Cr),Mt.render(Ye[Cr]/Ar,Nn[Cr])}else if(oe.isInstancedMesh)Mt.renderInstances(it,At,oe.count);else if(ue.isInstancedBufferGeometry){const Ye=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,Nn=Math.min(ue.instanceCount,Ye);Mt.renderInstances(it,At,Nn)}else Mt.render(it,At)};function Wt(U,ee,ue){U.transparent===!0&&U.side===Oo&&U.forceSinglePass===!1?(U.side=bi,U.needsUpdate=!0,pt(U,ee,ue),U.side=Wa,U.needsUpdate=!0,pt(U,ee,ue),U.side=Oo):pt(U,ee,ue)}this.compile=function(U,ee,ue=null){ue===null&&(ue=U),g=xt.get(ue),g.init(ee),S.push(g),ue.traverseVisible(function(oe){oe.isLight&&oe.layers.test(ee.layers)&&(g.pushLight(oe),oe.castShadow&&g.pushShadow(oe))}),U!==ue&&U.traverseVisible(function(oe){oe.isLight&&oe.layers.test(ee.layers)&&(g.pushLight(oe),oe.castShadow&&g.pushShadow(oe))}),g.setupLights();const ye=new Set;return U.traverse(function(oe){if(!(oe.isMesh||oe.isPoints||oe.isLine||oe.isSprite))return;const De=oe.material;if(De)if(Array.isArray(De))for(let He=0;He<De.length;He++){const dt=De[He];Wt(dt,ue,oe),ye.add(dt)}else Wt(De,ue,oe),ye.add(De)}),S.pop(),g=null,ye},this.compileAsync=function(U,ee,ue=null){const ye=this.compile(U,ee,ue);return new Promise(oe=>{function De(){if(ye.forEach(function(He){Ze.get(He).currentProgram.isReady()&&ye.delete(He)}),ye.size===0){oe(U);return}setTimeout(De,10)}Pe.get("KHR_parallel_shader_compile")!==null?De():setTimeout(De,10)})};let Zn=null;function Tr(U){Zn&&Zn(U)}function Q(){ge.stop()}function ce(){ge.start()}const ge=new uV;ge.setAnimationLoop(Tr),typeof self<"u"&&ge.setContext(self),this.setAnimationLoop=function(U){Zn=U,xe.setAnimationLoop(U),U===null?ge.stop():ge.start()},xe.addEventListener("sessionstart",Q),xe.addEventListener("sessionend",ce),this.render=function(U,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;if(U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),xe.enabled===!0&&xe.isPresenting===!0&&(xe.cameraAutoUpdate===!0&&xe.updateCamera(ee),ee=xe.getCamera()),U.isScene===!0&&U.onBeforeRender(E,U,ee,D),g=xt.get(U,S.length),g.init(ee),S.push(g),ze.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),de.setFromProjectionMatrix(ze),Ie=this.localClippingEnabled,Se=Ce.init(this.clippingPlanes,Ie),x=Ne.get(U,_.length),x.init(),_.push(x),xe.enabled===!0&&xe.isPresenting===!0){const De=E.xr.getDepthSensingMesh();De!==null&&Le(De,ee,-1/0,E.sortObjects)}Le(U,ee,0,E.sortObjects),x.finish(),E.sortObjects===!0&&x.sort(W,Y),fe=xe.enabled===!1||xe.isPresenting===!1||xe.hasDepthSensing()===!1,fe&&vt.addToRenderList(x,U),this.info.render.frame++,Se===!0&&Ce.beginShadows();const ue=g.state.shadowsArray;at.render(ue,U,ee),Se===!0&&Ce.endShadows(),this.info.autoReset===!0&&this.info.reset();const ye=x.opaque,oe=x.transmissive;if(g.setupLights(),ee.isArrayCamera){const De=ee.cameras;if(oe.length>0)for(let He=0,dt=De.length;He<dt;He++){const ft=De[He];wt(ye,oe,U,ft)}fe&&vt.render(U);for(let He=0,dt=De.length;He<dt;He++){const ft=De[He];$e(x,U,ft,ft.viewport)}}else oe.length>0&&wt(ye,oe,U,ee),fe&&vt.render(U),$e(x,U,ee);D!==null&&(V.updateMultisampleRenderTarget(D),V.updateRenderTargetMipmap(D)),U.isScene===!0&&U.onAfterRender(E,U,ee),Xe.resetDefaultState(),L=-1,P=null,S.pop(),S.length>0?(g=S[S.length-1],Se===!0&&Ce.setGlobalState(E.clippingPlanes,g.state.camera)):g=null,_.pop(),_.length>0?x=_[_.length-1]:x=null};function Le(U,ee,ue,ye){if(U.visible===!1)return;if(U.layers.test(ee.layers)){if(U.isGroup)ue=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(ee);else if(U.isLight)g.pushLight(U),U.castShadow&&g.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||de.intersectsSprite(U)){ye&&je.setFromMatrixPosition(U.matrixWorld).applyMatrix4(ze);const He=te.update(U),dt=U.material;dt.visible&&x.push(U,He,dt,ue,je.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||de.intersectsObject(U))){const He=te.update(U),dt=U.material;if(ye&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),je.copy(U.boundingSphere.center)):(He.boundingSphere===null&&He.computeBoundingSphere(),je.copy(He.boundingSphere.center)),je.applyMatrix4(U.matrixWorld).applyMatrix4(ze)),Array.isArray(dt)){const ft=He.groups;for(let It=0,Ut=ft.length;It<Ut;It++){const mt=ft[It],it=dt[mt.materialIndex];it&&it.visible&&x.push(U,He,it,ue,je.z,mt)}}else dt.visible&&x.push(U,He,dt,ue,je.z,null)}}const De=U.children;for(let He=0,dt=De.length;He<dt;He++)Le(De[He],ee,ue,ye)}function $e(U,ee,ue,ye){const oe=U.opaque,De=U.transmissive,He=U.transparent;g.setupLightsView(ue),Se===!0&&Ce.setGlobalState(E.clippingPlanes,ue),ye&&Be.viewport(F.copy(ye)),oe.length>0&&Lt(oe,ee,ue),De.length>0&&Lt(De,ee,ue),He.length>0&&Lt(He,ee,ue),Be.buffers.depth.setTest(!0),Be.buffers.depth.setMask(!0),Be.buffers.color.setMask(!0),Be.setPolygonOffset(!1)}function wt(U,ee,ue,ye){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[ye.id]===void 0&&(g.state.transmissionRenderTarget[ye.id]=new ks(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?Zu:po,minFilter:Uo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fn.workingColorSpace}));const De=g.state.transmissionRenderTarget[ye.id],He=ye.viewport||F;De.setSize(He.z,He.w);const dt=E.getRenderTarget();E.setRenderTarget(De),E.getClearColor(q),se=E.getClearAlpha(),se<1&&E.setClearColor(16777215,.5),E.clear(),fe&&vt.render(ue);const ft=E.toneMapping;E.toneMapping=Xo;const It=ye.viewport;if(ye.viewport!==void 0&&(ye.viewport=void 0),g.setupLightsView(ye),Se===!0&&Ce.setGlobalState(E.clippingPlanes,ye),Lt(U,ue,ye),V.updateMultisampleRenderTarget(De),V.updateRenderTargetMipmap(De),Pe.has("WEBGL_multisampled_render_to_texture")===!1){let Ut=!1;for(let mt=0,it=ee.length;mt<it;mt++){const Tt=ee[mt],At=Tt.object,Vt=Tt.geometry,Mt=Tt.material,Ye=Tt.group;if(Mt.side===Oo&&At.layers.test(ye.layers)){const Nn=Mt.side;Mt.side=bi,Mt.needsUpdate=!0,ht(At,ue,ye,Vt,Mt,Ye),Mt.side=Nn,Mt.needsUpdate=!0,Ut=!0}}Ut===!0&&(V.updateMultisampleRenderTarget(De),V.updateRenderTargetMipmap(De))}E.setRenderTarget(dt),E.setClearColor(q,se),It!==void 0&&(ye.viewport=It),E.toneMapping=ft}function Lt(U,ee,ue){const ye=ee.isScene===!0?ee.overrideMaterial:null;for(let oe=0,De=U.length;oe<De;oe++){const He=U[oe],dt=He.object,ft=He.geometry,It=ye===null?He.material:ye,Ut=He.group;dt.layers.test(ue.layers)&&ht(dt,ee,ue,ft,It,Ut)}}function ht(U,ee,ue,ye,oe,De){U.onBeforeRender(E,ee,ue,ye,oe,De),U.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),oe.onBeforeRender(E,ee,ue,ye,U,De),oe.transparent===!0&&oe.side===Oo&&oe.forceSinglePass===!1?(oe.side=bi,oe.needsUpdate=!0,E.renderBufferDirect(ue,ee,ye,oe,U,De),oe.side=Wa,oe.needsUpdate=!0,E.renderBufferDirect(ue,ee,ye,oe,U,De),oe.side=Oo):E.renderBufferDirect(ue,ee,ye,oe,U,De),U.onAfterRender(E,ee,ue,ye,oe,De)}function pt(U,ee,ue){ee.isScene!==!0&&(ee=We);const ye=Ze.get(U),oe=g.state.lights,De=g.state.shadowsArray,He=oe.state.version,dt=pe.getParameters(U,oe.state,De,ee,ue),ft=pe.getProgramCacheKey(dt);let It=ye.programs;ye.environment=U.isMeshStandardMaterial?ee.environment:null,ye.fog=ee.fog,ye.envMap=(U.isMeshStandardMaterial?B:N).get(U.envMap||ye.environment),ye.envMapRotation=ye.environment!==null&&U.envMap===null?ee.environmentRotation:U.envMapRotation,It===void 0&&(U.addEventListener("dispose",Nt),It=new Map,ye.programs=It);let Ut=It.get(ft);if(Ut!==void 0){if(ye.currentProgram===Ut&&ye.lightsStateVersion===He)return St(U,dt),Ut}else dt.uniforms=pe.getUniforms(U),U.onBeforeCompile(dt,E),Ut=pe.acquireProgram(dt,ft),It.set(ft,Ut),ye.uniforms=dt.uniforms;const mt=ye.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(mt.clippingPlanes=Ce.uniform),St(U,dt),ye.needsLights=Kn(U),ye.lightsStateVersion=He,ye.needsLights&&(mt.ambientLightColor.value=oe.state.ambient,mt.lightProbe.value=oe.state.probe,mt.directionalLights.value=oe.state.directional,mt.directionalLightShadows.value=oe.state.directionalShadow,mt.spotLights.value=oe.state.spot,mt.spotLightShadows.value=oe.state.spotShadow,mt.rectAreaLights.value=oe.state.rectArea,mt.ltc_1.value=oe.state.rectAreaLTC1,mt.ltc_2.value=oe.state.rectAreaLTC2,mt.pointLights.value=oe.state.point,mt.pointLightShadows.value=oe.state.pointShadow,mt.hemisphereLights.value=oe.state.hemi,mt.directionalShadowMap.value=oe.state.directionalShadowMap,mt.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,mt.spotShadowMap.value=oe.state.spotShadowMap,mt.spotLightMatrix.value=oe.state.spotLightMatrix,mt.spotLightMap.value=oe.state.spotLightMap,mt.pointShadowMap.value=oe.state.pointShadowMap,mt.pointShadowMatrix.value=oe.state.pointShadowMatrix),ye.currentProgram=Ut,ye.uniformsList=null,Ut}function lt(U){if(U.uniformsList===null){const ee=U.currentProgram.getUniforms();U.uniformsList=M0.seqWithValue(ee.seq,U.uniforms)}return U.uniformsList}function St(U,ee){const ue=Ze.get(U);ue.outputColorSpace=ee.outputColorSpace,ue.batching=ee.batching,ue.batchingColor=ee.batchingColor,ue.instancing=ee.instancing,ue.instancingColor=ee.instancingColor,ue.instancingMorph=ee.instancingMorph,ue.skinning=ee.skinning,ue.morphTargets=ee.morphTargets,ue.morphNormals=ee.morphNormals,ue.morphColors=ee.morphColors,ue.morphTargetsCount=ee.morphTargetsCount,ue.numClippingPlanes=ee.numClippingPlanes,ue.numIntersection=ee.numClipIntersection,ue.vertexAlphas=ee.vertexAlphas,ue.vertexTangents=ee.vertexTangents,ue.toneMapping=ee.toneMapping}function Ht(U,ee,ue,ye,oe){ee.isScene!==!0&&(ee=We),V.resetTextureUnits();const De=ee.fog,He=ye.isMeshStandardMaterial?ee.environment:null,dt=D===null?E.outputColorSpace:D.isXRRenderTarget===!0?D.texture.colorSpace:Ku,ft=(ye.isMeshStandardMaterial?B:N).get(ye.envMap||He),It=ye.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,Ut=!!ue.attributes.tangent&&(!!ye.normalMap||ye.anisotropy>0),mt=!!ue.morphAttributes.position,it=!!ue.morphAttributes.normal,Tt=!!ue.morphAttributes.color;let At=Xo;ye.toneMapped&&(D===null||D.isXRRenderTarget===!0)&&(At=E.toneMapping);const Vt=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Mt=Vt!==void 0?Vt.length:0,Ye=Ze.get(ye),Nn=g.state.lights;if(Se===!0&&(Ie===!0||U!==P)){const Bn=U===P&&ye.id===L;Ce.setState(ye,U,Bn)}let nn=!1;ye.version===Ye.__version?(Ye.needsLights&&Ye.lightsStateVersion!==Nn.state.version||Ye.outputColorSpace!==dt||oe.isBatchedMesh&&Ye.batching===!1||!oe.isBatchedMesh&&Ye.batching===!0||oe.isBatchedMesh&&Ye.batchingColor===!0&&oe.colorTexture===null||oe.isBatchedMesh&&Ye.batchingColor===!1&&oe.colorTexture!==null||oe.isInstancedMesh&&Ye.instancing===!1||!oe.isInstancedMesh&&Ye.instancing===!0||oe.isSkinnedMesh&&Ye.skinning===!1||!oe.isSkinnedMesh&&Ye.skinning===!0||oe.isInstancedMesh&&Ye.instancingColor===!0&&oe.instanceColor===null||oe.isInstancedMesh&&Ye.instancingColor===!1&&oe.instanceColor!==null||oe.isInstancedMesh&&Ye.instancingMorph===!0&&oe.morphTexture===null||oe.isInstancedMesh&&Ye.instancingMorph===!1&&oe.morphTexture!==null||Ye.envMap!==ft||ye.fog===!0&&Ye.fog!==De||Ye.numClippingPlanes!==void 0&&(Ye.numClippingPlanes!==Ce.numPlanes||Ye.numIntersection!==Ce.numIntersection)||Ye.vertexAlphas!==It||Ye.vertexTangents!==Ut||Ye.morphTargets!==mt||Ye.morphNormals!==it||Ye.morphColors!==Tt||Ye.toneMapping!==At||Ye.morphTargetsCount!==Mt)&&(nn=!0):(nn=!0,Ye.__version=ye.version);let Ar=Ye.currentProgram;nn===!0&&(Ar=pt(ye,ee,oe));let sr=!1,Cr=!1,el=!1;const An=Ar.getUniforms(),ui=Ye.uniforms;if(Be.useProgram(Ar.program)&&(sr=!0,Cr=!0,el=!0),ye.id!==L&&(L=ye.id,Cr=!0),sr||P!==U){Be.buffers.depth.getReversed()?(he.copy(U.projectionMatrix),Wte(he),Gte(he),An.setValue(X,"projectionMatrix",he)):An.setValue(X,"projectionMatrix",U.projectionMatrix),An.setValue(X,"viewMatrix",U.matrixWorldInverse);const xo=An.map.cameraPosition;xo!==void 0&&xo.setValue(X,rt.setFromMatrixPosition(U.matrixWorld)),Ge.logarithmicDepthBuffer&&An.setValue(X,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(ye.isMeshPhongMaterial||ye.isMeshToonMaterial||ye.isMeshLambertMaterial||ye.isMeshBasicMaterial||ye.isMeshStandardMaterial||ye.isShaderMaterial)&&An.setValue(X,"isOrthographic",U.isOrthographicCamera===!0),P!==U&&(P=U,Cr=!0,el=!0)}if(oe.isSkinnedMesh){An.setOptional(X,oe,"bindMatrix"),An.setOptional(X,oe,"bindMatrixInverse");const Bn=oe.skeleton;Bn&&(Bn.boneTexture===null&&Bn.computeBoneTexture(),An.setValue(X,"boneTexture",Bn.boneTexture,V))}oe.isBatchedMesh&&(An.setOptional(X,oe,"batchingTexture"),An.setValue(X,"batchingTexture",oe._matricesTexture,V),An.setOptional(X,oe,"batchingIdTexture"),An.setValue(X,"batchingIdTexture",oe._indirectTexture,V),An.setOptional(X,oe,"batchingColorTexture"),oe._colorsTexture!==null&&An.setValue(X,"batchingColorTexture",oe._colorsTexture,V));const tl=ue.morphAttributes;if((tl.position!==void 0||tl.normal!==void 0||tl.color!==void 0)&&Rt.update(oe,ue,Ar),(Cr||Ye.receiveShadow!==oe.receiveShadow)&&(Ye.receiveShadow=oe.receiveShadow,An.setValue(X,"receiveShadow",oe.receiveShadow)),ye.isMeshGouraudMaterial&&ye.envMap!==null&&(ui.envMap.value=ft,ui.flipEnvMap.value=ft.isCubeTexture&&ft.isRenderTargetTexture===!1?-1:1),ye.isMeshStandardMaterial&&ye.envMap===null&&ee.environment!==null&&(ui.envMapIntensity.value=ee.environmentIntensity),Cr&&(An.setValue(X,"toneMappingExposure",E.toneMappingExposure),Ye.needsLights&&ln(ui,el),De&&ye.fog===!0&&me.refreshFogUniforms(ui,De),me.refreshMaterialUniforms(ui,ye,O,ne,g.state.transmissionRenderTarget[U.id]),M0.upload(X,lt(Ye),ui,V)),ye.isShaderMaterial&&ye.uniformsNeedUpdate===!0&&(M0.upload(X,lt(Ye),ui,V),ye.uniformsNeedUpdate=!1),ye.isSpriteMaterial&&An.setValue(X,"center",oe.center),An.setValue(X,"modelViewMatrix",oe.modelViewMatrix),An.setValue(X,"normalMatrix",oe.normalMatrix),An.setValue(X,"modelMatrix",oe.matrixWorld),ye.isShaderMaterial||ye.isRawShaderMaterial){const Bn=ye.uniformsGroups;for(let xo=0,_o=Bn.length;xo<_o;xo++){const Bg=Bn[xo];Z.update(Bg,Ar),Z.bind(Bg,Ar)}}return Ar}function ln(U,ee){U.ambientLightColor.needsUpdate=ee,U.lightProbe.needsUpdate=ee,U.directionalLights.needsUpdate=ee,U.directionalLightShadows.needsUpdate=ee,U.pointLights.needsUpdate=ee,U.pointLightShadows.needsUpdate=ee,U.spotLights.needsUpdate=ee,U.spotLightShadows.needsUpdate=ee,U.rectAreaLights.needsUpdate=ee,U.hemisphereLights.needsUpdate=ee}function Kn(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(U,ee,ue){Ze.get(U.texture).__webglTexture=ee,Ze.get(U.depthTexture).__webglTexture=ue;const ye=Ze.get(U);ye.__hasExternalTextures=!0,ye.__autoAllocateDepthBuffer=ue===void 0,ye.__autoAllocateDepthBuffer||Pe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ye.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(U,ee){const ue=Ze.get(U);ue.__webglFramebuffer=ee,ue.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(U,ee=0,ue=0){D=U,I=ee,C=ue;let ye=!0,oe=null,De=!1,He=!1;if(U){const ft=Ze.get(U);if(ft.__useDefaultFramebuffer!==void 0)Be.bindFramebuffer(X.FRAMEBUFFER,null),ye=!1;else if(ft.__webglFramebuffer===void 0)V.setupRenderTarget(U);else if(ft.__hasExternalTextures)V.rebindTextures(U,Ze.get(U.texture).__webglTexture,Ze.get(U.depthTexture).__webglTexture);else if(U.depthBuffer){const mt=U.depthTexture;if(ft.__boundDepthTexture!==mt){if(mt!==null&&Ze.has(mt)&&(U.width!==mt.image.width||U.height!==mt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");V.setupDepthRenderbuffer(U)}}const It=U.texture;(It.isData3DTexture||It.isDataArrayTexture||It.isCompressedArrayTexture)&&(He=!0);const Ut=Ze.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(Ut[ee])?oe=Ut[ee][ue]:oe=Ut[ee],De=!0):U.samples>0&&V.useMultisampledRTT(U)===!1?oe=Ze.get(U).__webglMultisampledFramebuffer:Array.isArray(Ut)?oe=Ut[ue]:oe=Ut,F.copy(U.viewport),z.copy(U.scissor),H=U.scissorTest}else F.copy(re).multiplyScalar(O).floor(),z.copy(we).multiplyScalar(O).floor(),H=Ue;if(Be.bindFramebuffer(X.FRAMEBUFFER,oe)&&ye&&Be.drawBuffers(U,oe),Be.viewport(F),Be.scissor(z),Be.setScissorTest(H),De){const ft=Ze.get(U.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+ee,ft.__webglTexture,ue)}else if(He){const ft=Ze.get(U.texture),It=ee||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,ft.__webglTexture,ue||0,It)}L=-1},this.readRenderTargetPixels=function(U,ee,ue,ye,oe,De,He){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=Ze.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&He!==void 0&&(dt=dt[He]),dt){Be.bindFramebuffer(X.FRAMEBUFFER,dt);try{const ft=U.texture,It=ft.format,Ut=ft.type;if(!Ge.textureFormatReadable(It)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ge.textureTypeReadable(Ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=U.width-ye&&ue>=0&&ue<=U.height-oe&&X.readPixels(ee,ue,ye,oe,Ee.convert(It),Ee.convert(Ut),De)}finally{const ft=D!==null?Ze.get(D).__webglFramebuffer:null;Be.bindFramebuffer(X.FRAMEBUFFER,ft)}}},this.readRenderTargetPixelsAsync=async function(U,ee,ue,ye,oe,De,He){if(!(U&&U.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let dt=Ze.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&He!==void 0&&(dt=dt[He]),dt){const ft=U.texture,It=ft.format,Ut=ft.type;if(!Ge.textureFormatReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ge.textureTypeReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ee>=0&&ee<=U.width-ye&&ue>=0&&ue<=U.height-oe){Be.bindFramebuffer(X.FRAMEBUFFER,dt);const mt=X.createBuffer();X.bindBuffer(X.PIXEL_PACK_BUFFER,mt),X.bufferData(X.PIXEL_PACK_BUFFER,De.byteLength,X.STREAM_READ),X.readPixels(ee,ue,ye,oe,Ee.convert(It),Ee.convert(Ut),0);const it=D!==null?Ze.get(D).__webglFramebuffer:null;Be.bindFramebuffer(X.FRAMEBUFFER,it);const Tt=X.fenceSync(X.SYNC_GPU_COMMANDS_COMPLETE,0);return X.flush(),await Hte(X,Tt,4),X.bindBuffer(X.PIXEL_PACK_BUFFER,mt),X.getBufferSubData(X.PIXEL_PACK_BUFFER,0,De),X.deleteBuffer(mt),X.deleteSync(Tt),De}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(U,ee=null,ue=0){U.isTexture!==!0&&(Tp("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ee=arguments[0]||null,U=arguments[1]);const ye=Math.pow(2,-ue),oe=Math.floor(U.image.width*ye),De=Math.floor(U.image.height*ye),He=ee!==null?ee.x:0,dt=ee!==null?ee.y:0;V.setTexture2D(U,0),X.copyTexSubImage2D(X.TEXTURE_2D,ue,0,0,He,dt,oe,De),Be.unbindTexture()},this.copyTextureToTexture=function(U,ee,ue=null,ye=null,oe=0){U.isTexture!==!0&&(Tp("WebGLRenderer: copyTextureToTexture function signature has changed."),ye=arguments[0]||null,U=arguments[1],ee=arguments[2],oe=arguments[3]||0,ue=null);let De,He,dt,ft,It,Ut,mt,it,Tt;const At=U.isCompressedTexture?U.mipmaps[oe]:U.image;ue!==null?(De=ue.max.x-ue.min.x,He=ue.max.y-ue.min.y,dt=ue.isBox3?ue.max.z-ue.min.z:1,ft=ue.min.x,It=ue.min.y,Ut=ue.isBox3?ue.min.z:0):(De=At.width,He=At.height,dt=At.depth||1,ft=0,It=0,Ut=0),ye!==null?(mt=ye.x,it=ye.y,Tt=ye.z):(mt=0,it=0,Tt=0);const Vt=Ee.convert(ee.format),Mt=Ee.convert(ee.type);let Ye;ee.isData3DTexture?(V.setTexture3D(ee,0),Ye=X.TEXTURE_3D):ee.isDataArrayTexture||ee.isCompressedArrayTexture?(V.setTexture2DArray(ee,0),Ye=X.TEXTURE_2D_ARRAY):(V.setTexture2D(ee,0),Ye=X.TEXTURE_2D),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,ee.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,ee.unpackAlignment);const Nn=X.getParameter(X.UNPACK_ROW_LENGTH),nn=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Ar=X.getParameter(X.UNPACK_SKIP_PIXELS),sr=X.getParameter(X.UNPACK_SKIP_ROWS),Cr=X.getParameter(X.UNPACK_SKIP_IMAGES);X.pixelStorei(X.UNPACK_ROW_LENGTH,At.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,At.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,ft),X.pixelStorei(X.UNPACK_SKIP_ROWS,It),X.pixelStorei(X.UNPACK_SKIP_IMAGES,Ut);const el=U.isDataArrayTexture||U.isData3DTexture,An=ee.isDataArrayTexture||ee.isData3DTexture;if(U.isRenderTargetTexture||U.isDepthTexture){const ui=Ze.get(U),tl=Ze.get(ee),Bn=Ze.get(ui.__renderTarget),xo=Ze.get(tl.__renderTarget);Be.bindFramebuffer(X.READ_FRAMEBUFFER,Bn.__webglFramebuffer),Be.bindFramebuffer(X.DRAW_FRAMEBUFFER,xo.__webglFramebuffer);for(let _o=0;_o<dt;_o++)el&&X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Ze.get(U).__webglTexture,oe,Ut+_o),U.isDepthTexture?(An&&X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Ze.get(ee).__webglTexture,oe,Tt+_o),X.blitFramebuffer(ft,It,De,He,mt,it,De,He,X.DEPTH_BUFFER_BIT,X.NEAREST)):An?X.copyTexSubImage3D(Ye,oe,mt,it,Tt+_o,ft,It,De,He):X.copyTexSubImage2D(Ye,oe,mt,it,Tt+_o,ft,It,De,He);Be.bindFramebuffer(X.READ_FRAMEBUFFER,null),Be.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else An?U.isDataTexture||U.isData3DTexture?X.texSubImage3D(Ye,oe,mt,it,Tt,De,He,dt,Vt,Mt,At.data):ee.isCompressedArrayTexture?X.compressedTexSubImage3D(Ye,oe,mt,it,Tt,De,He,dt,Vt,At.data):X.texSubImage3D(Ye,oe,mt,it,Tt,De,He,dt,Vt,Mt,At):U.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,oe,mt,it,De,He,Vt,Mt,At.data):U.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,oe,mt,it,At.width,At.height,Vt,At.data):X.texSubImage2D(X.TEXTURE_2D,oe,mt,it,De,He,Vt,Mt,At);X.pixelStorei(X.UNPACK_ROW_LENGTH,Nn),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,nn),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Ar),X.pixelStorei(X.UNPACK_SKIP_ROWS,sr),X.pixelStorei(X.UNPACK_SKIP_IMAGES,Cr),oe===0&&ee.generateMipmaps&&X.generateMipmap(Ye),Be.unbindTexture()},this.copyTextureToTexture3D=function(U,ee,ue=null,ye=null,oe=0){return U.isTexture!==!0&&(Tp("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ue=arguments[0]||null,ye=arguments[1]||null,U=arguments[2],ee=arguments[3],oe=arguments[4]||0),Tp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(U,ee,ue,ye,oe)},this.initRenderTarget=function(U){Ze.get(U).__webglFramebuffer===void 0&&V.setupRenderTarget(U)},this.initTexture=function(U){U.isCubeTexture?V.setTextureCube(U,0):U.isData3DTexture?V.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?V.setTexture2DArray(U,0):V.setTexture2D(U,0),Be.unbindTexture()},this.resetState=function(){I=0,C=0,D=null,Be.reset(),Xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Bo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=fn._getDrawingBufferColorSpace(e),n.unpackColorSpace=fn._getUnpackColorSpace()}}class gw{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ut(e),this.density=n}clone(){return new gw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class vw{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new ut(e),this.near=n,this.far=r}clone(){return new vw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class bC extends vn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ls,this.environmentIntensity=1,this.environmentRotation=new ls,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class yw{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Qm,this.updateRanges=[],this.version=0,this.uuid=ss()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ss()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ss()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const hi=new j;class zu{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)hi.fromBufferAttribute(this,n),hi.applyMatrix4(e),this.setXYZ(n,hi.x,hi.y,hi.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)hi.fromBufferAttribute(this,n),hi.applyNormalMatrix(e),this.setXYZ(n,hi.x,hi.y,hi.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)hi.fromBufferAttribute(this,n),hi.transformDirection(e),this.setXYZ(n,hi.x,hi.y,hi.z);return this}getComponent(e,n){let r=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(r=_i(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=qt(r,this.array)),this.data.array[e*this.data.stride+this.offset+n]=r,this}setX(e,n){return this.normalized&&(n=qt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=qt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=qt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=qt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=_i(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=_i(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=_i(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=_i(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array),i=qt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=qt(n,this.array),r=qt(r,this.array),i=qt(i,this.array),s=qt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Rn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class MC extends ci{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Dd;const sp=new j,kd=new j,Od=new j,Fd=new Ae,op=new Ae,yV=new zt,Ay=new j,ap=new j,Cy=new j,TD=new Ae,b1=new Ae,AD=new Ae;class xV extends vn{constructor(e=new MC){if(super(),this.isSprite=!0,this.type="Sprite",Dd===void 0){Dd=new tn;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new yw(n,5);Dd.setIndex([0,1,2,0,2,3]),Dd.setAttribute("position",new zu(r,3,0,!1)),Dd.setAttribute("uv",new zu(r,2,3,!1))}this.geometry=Dd,this.material=e,this.center=new Ae(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),kd.setFromMatrixScale(this.matrixWorld),yV.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Od.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&kd.multiplyScalar(-Od.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Ry(Ay.set(-.5,-.5,0),Od,o,kd,i,s),Ry(ap.set(.5,-.5,0),Od,o,kd,i,s),Ry(Cy.set(.5,.5,0),Od,o,kd,i,s),TD.set(0,0),b1.set(1,0),AD.set(1,1);let a=e.ray.intersectTriangle(Ay,ap,Cy,!1,sp);if(a===null&&(Ry(ap.set(-.5,.5,0),Od,o,kd,i,s),b1.set(0,1),a=e.ray.intersectTriangle(Ay,Cy,ap,!1,sp),a===null))return;const l=e.ray.origin.distanceTo(sp);l<e.near||l>e.far||n.push({distance:l,point:sp.clone(),uv:Fi.getInterpolation(sp,Ay,ap,Cy,TD,b1,AD,new Ae),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ry(t,e,n,r,i,s){Fd.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(op.x=s*Fd.x-i*Fd.y,op.y=i*Fd.x+s*Fd.y):op.copy(Fd),t.copy(e),t.x+=op.x,t.y+=op.y,t.applyMatrix4(yV)}const Py=new j,CD=new j;class _V extends vn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){const n=this.levels;for(let r=0;r<n.length;r++)if(n[r].distance===e){const i=n.splice(r,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){Py.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Py);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Py.setFromMatrixPosition(e.matrixWorld),CD.setFromMatrixPosition(this.matrixWorld);const r=Py.distanceTo(CD)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const RD=new j,PD=new mn,ND=new mn,iae=new j,ID=new zt,Ny=new j,M1=new oi,LD=new zt,E1=new Qu;class wV extends xr{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=IE,this.bindMatrix=new zt,this.bindMatrixInverse=new zt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Mi),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Ny),this.boundingBox.expandByPoint(Ny)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new oi),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,Ny),this.boundingSphere.expandByPoint(Ny)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),M1.copy(this.boundingSphere),M1.applyMatrix4(i),e.ray.intersectsSphere(M1)!==!1&&(LD.copy(i).invert(),E1.copy(e.ray).applyMatrix4(LD),!(this.boundingBox!==null&&E1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,E1)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new mn,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===IE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===V4?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;PD.fromBufferAttribute(i.attributes.skinIndex,e),ND.fromBufferAttribute(i.attributes.skinWeight,e),RD.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=ND.getComponent(s);if(o!==0){const a=PD.getComponent(s);ID.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(iae.copy(RD).applyMatrix4(ID),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}class EC extends vn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class $o extends ir{constructor(e=null,n=1,r=1,i,s,o,a,l,c=jr,u=jr,h,p){super(null,o,a,l,c,u,i,s,h,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DD=new zt,sae=new zt;class xw{constructor(e=[],n=[]){this.uuid=ss(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new zt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:sae;DD.multiplyMatrices(a,n[s]),DD.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new xw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new $o(n,e,e,ii,wi);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new EC),this.bones.push(o),this.boneInverses.push(new zt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class th extends Rn{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ud=new zt,kD=new zt,Iy=[],OD=new Mi,oae=new zt,lp=new xr,cp=new oi;class SV extends xr{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new th(new Float32Array(r*16),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,oae)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Mi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Ud),OD.copy(e.boundingBox).applyMatrix4(Ud),this.boundingBox.union(OD)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new oi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Ud),cp.copy(e.boundingSphere).applyMatrix4(Ud),this.boundingSphere.union(cp)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const r=n.morphTargetInfluences,i=this.morphTexture.source.data.data,s=r.length+1,o=e*s+1;for(let a=0;a<r.length;a++)r[a]=i[o+a]}raycast(e,n){const r=this.matrixWorld,i=this.count;if(lp.geometry=this.geometry,lp.material=this.material,lp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),cp.copy(this.boundingSphere),cp.applyMatrix4(r),e.ray.intersectsSphere(cp)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Ud),kD.multiplyMatrices(r,Ud),lp.matrixWorld=kD,lp.raycast(e,Iy);for(let o=0,a=Iy.length;o<a;o++){const l=Iy[o];l.instanceId=s,l.object=this,n.push(l)}Iy.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new th(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const r=n.morphTargetInfluences,i=r.length+1;this.morphTexture===null&&(this.morphTexture=new $o(new Float32Array(i*this.count),i,this.count,cw,wi));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<r.length;c++)o+=r[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=i*e;s[l]=a,s.set(r,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function T1(t,e){return t-e}function aae(t,e){return t.z-e.z}function lae(t,e){return e.z-t.z}class cae{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n,r,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=n,a.z=r,a.index=i}reset(){this.list.length=0,this.index=0}}const Ii=new zt,uae=new ut(1,1,1),A1=new Ng,Ly=new Mi,Oc=new oi,up=new j,FD=new j,dae=new j,C1=new cae,Jr=new xr,Dy=[];function fae(t,e,n=0){const r=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let o=0;o<r;o++)e.setComponent(s+n,o,t.getComponent(s,o))}else e.array.set(t.array,n*r);e.needsUpdate=!0}function Fc(t,e){if(t.constructor!==e.constructor){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)e[r]=t[r]}else{const n=Math.min(t.length,e.length);e.set(new t.constructor(t.buffer,0,n))}}class bV extends xr{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,n,r=n*2,i){super(new tn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=n,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),r=new $o(n,e,e,ii,wi);this._matricesTexture=r}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Uint32Array(e*e),r=new $o(n,e,e,Ag,Xa);this._indirectTexture=r}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const n=new Float32Array(e*e*4).fill(1),r=new $o(n,e,e,ii,wi);r.colorSpace=fn.workingColorSpace,this._colorsTexture=r}_initializeGeometry(e){const n=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(r*l),h=new Rn(u,l,c);n.setAttribute(s,h)}if(e.getIndex()!==null){const s=r>65535?new Uint32Array(i):new Uint16Array(i);n.setIndex(new Rn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const r in n.attributes){if(!e.hasAttribute(r))throw new Error(`BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);const i=e.getAttribute(r),s=n.getAttribute(r);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mi);const e=this.boundingBox,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Ii),this.getBoundingBoxAt(s,Ly).applyMatrix4(Ii),e.union(Ly)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new oi);const e=this.boundingSphere,n=this._instanceInfo;e.makeEmpty();for(let r=0,i=n.length;r<i;r++){if(n[r].active===!1)continue;const s=n[r].geometryIndex;this.getMatrixAt(r,Ii),this.getBoundingSphereAt(s,Oc).applyMatrix4(Ii),e.union(Oc)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(T1),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=r):(i=this._instanceInfo.length,this._instanceInfo.push(r));const s=this._matricesTexture;Ii.identity().toArray(s.image.data,i*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(uae.toArray(o.image.data,i*4),o.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,n=-1,r=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=n===-1?e.getAttribute("position").count:n;const o=e.getIndex();if(o!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=r===-1?o.count:r),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(T1),l=this._availableGeometryIds.shift(),s[l]=i):(l=this._geometryCount,this._geometryCount++,s.push(i)),this.setGeometryAt(l,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,l}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const r=this.geometry,i=r.getIndex()!==null,s=r.getIndex(),o=n.getIndex(),a=this._geometryInfo[e];if(i&&o.count>a.reservedIndexCount||n.attributes.position.count>a.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=n.getAttribute("position").count;for(const u in r.attributes){const h=n.getAttribute(u),p=r.getAttribute(u);fae(h,p,l);const m=h.itemSize;for(let v=h.count,y=c;v<y;v++){const x=l+v;for(let g=0;g<m;g++)p.setComponent(x,g,0)}p.needsUpdate=!0,p.addUpdateRange(l*m,c*m)}if(i){const u=a.indexStart,h=a.reservedIndexCount;a.indexCount=n.getIndex().count;for(let p=0;p<o.count;p++)s.setX(u+p,l+o.getX(p));for(let p=o.count,m=h;p<m;p++)s.setX(u+p,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=i?a.indexStart:a.vertexStart,a.count=i?a.indexCount:a.vertexCount,a.boundingBox=null,n.boundingBox!==null&&(a.boundingBox=n.boundingBox.clone()),a.boundingSphere=null,n.boundingSphere!==null&&(a.boundingSphere=n.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._geometryInfo;if(e>=n.length||n[e].active===!1)return this;const r=this._instanceInfo;for(let i=0,s=r.length;i<s;i++)r[i].geometryIndex===e&&this.deleteInstance(i);return n[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){const n=this._instanceInfo;return e>=n.length||n[e].active===!1?this:(n[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,n=0;const r=this._geometryInfo,i=r.map((o,a)=>a).sort((o,a)=>r[o].vertexStart-r[a].vertexStart),s=this.geometry;for(let o=0,a=r.length;o<a;o++){const l=i[o],c=r[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==n){const{indexStart:u,vertexStart:h,reservedIndexCount:p}=c,m=s.index,v=m.array,y=e-h;for(let x=u;x<u+p;x++)v[x]=v[x]+y;m.array.copyWithin(n,u,u+p),m.addUpdateRange(n,p),c.indexStart=n}n+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:h}=c,p=s.attributes;for(const m in p){const v=p[m],{array:y,itemSize:x}=v;y.copyWithin(e*x,u*x,(u+h)*x),v.addUpdateRange(e*x,h*x)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const s=new Mi,o=r.index,a=r.attributes.position;for(let l=i.start,c=i.start+i.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(up.fromBufferAttribute(a,u))}i.boundingBox=s}return n.copy(i.boundingBox),n}getBoundingSphereAt(e,n){if(e>=this._geometryCount)return null;const r=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const s=new oi;this.getBoundingBoxAt(e,Ly),Ly.getCenter(s.center);const o=r.index,a=r.attributes.position;let l=0;for(let c=i.start,u=i.start+i.count;c<u;c++){let h=c;o&&(h=o.getX(h)),up.fromBufferAttribute(a,h),l=Math.max(l,s.center.distanceToSquared(up))}s.radius=Math.sqrt(l),i.boundingSphere=s}return n.copy(i.boundingSphere),n}setMatrixAt(e,n){const r=this._instanceInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?this:(n.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,n){const r=this._instanceInfo,i=this._matricesTexture.image.data;return e>=r.length||r[e].active===!1?null:n.fromArray(i,e*16)}setColorAt(e,n){this._colorsTexture===null&&this._initColorsTexture();const r=this._colorsTexture,i=this._colorsTexture.image.data,s=this._instanceInfo;return e>=s.length||s[e].active===!1?this:(n.toArray(i,e*4),r.needsUpdate=!0,this)}getColorAt(e,n){const r=this._colorsTexture.image.data,i=this._instanceInfo;return e>=i.length||i[e].active===!1?null:n.fromArray(r,e*4)}setVisibleAt(e,n){const r=this._instanceInfo;return e>=r.length||r[e].active===!1||r[e].visible===n?this:(r[e].visible=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._instanceInfo;return e>=n.length||n[e].active===!1?!1:n[e].visible}setGeometryIdAt(e,n){const r=this._instanceInfo,i=this._geometryInfo;return e>=r.length||r[e].active===!1||n>=i.length||i[n].active===!1?null:(r[e].geometryIndex=n,this)}getGeometryIdAt(e){const n=this._instanceInfo;return e>=n.length||n[e].active===!1?-1:n[e].geometryIndex}getGeometryRangeAt(e,n={}){if(e<0||e>=this._geometryCount)return null;const r=this._geometryInfo[e];return n.vertexStart=r.vertexStart,n.vertexCount=r.vertexCount,n.reservedVertexCount=r.reservedVertexCount,n.indexStart=r.indexStart,n.indexCount=r.indexCount,n.reservedIndexCount=r.reservedIndexCount,n.start=r.start,n.count=r.count,n}setInstanceCount(e){const n=this._availableInstanceIds,r=this._instanceInfo;for(n.sort(T1);n[n.length-1]===r.length;)r.pop(),n.pop();if(e<r.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),s=new Int32Array(e);Fc(this._multiDrawCounts,i),Fc(this._multiDrawStarts,s),this._multiDrawCounts=i,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Fc(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Fc(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Fc(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,n){const r=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...r.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${n}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(l=>l.indexStart+l.reservedIndexCount))>n)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${n}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=n,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new tn,this._initializeGeometry(s));const o=this.geometry;s.index&&Fc(s.index.array,o.index.array);for(const a in s.attributes)Fc(s.attributes[a].array,o.attributes[a].array)}raycast(e,n){const r=this._instanceInfo,i=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Jr.material=this.material,Jr.geometry.index=o.index,Jr.geometry.attributes=o.attributes,Jr.geometry.boundingBox===null&&(Jr.geometry.boundingBox=new Mi),Jr.geometry.boundingSphere===null&&(Jr.geometry.boundingSphere=new oi);for(let a=0,l=r.length;a<l;a++){if(!r[a].visible||!r[a].active)continue;const c=r[a].geometryIndex,u=i[c];Jr.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Jr.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Jr.geometry.boundingBox),this.getBoundingSphereAt(c,Jr.geometry.boundingSphere),Jr.raycast(e,Dy);for(let h=0,p=Dy.length;h<p;h++){const m=Dy[h];m.object=this,m.batchId=a,n.push(m)}Dy.length=0}Jr.material=null,Jr.geometry.index=null,Jr.geometry.attributes={},Jr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(n=>({...n,boundingBox:n.boundingBox!==null?n.boundingBox.clone():null,boundingSphere:n.boundingSphere!==null?n.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(n=>({...n})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,n,r,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,h=this._geometryInfo,p=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data;p&&(Ii.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),A1.setFromProjectionMatrix(Ii,e.coordinateSystem));let y=0;if(this.sortObjects){Ii.copy(this.matrixWorld).invert(),up.setFromMatrixPosition(r.matrixWorld).applyMatrix4(Ii),FD.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(Ii);for(let _=0,S=l.length;_<S;_++)if(l[_].visible&&l[_].active){const E=l[_].geometryIndex;this.getMatrixAt(_,Ii),this.getBoundingSphereAt(E,Oc).applyMatrix4(Ii);let R=!1;if(p&&(R=!A1.intersectsSphere(Oc)),!R){const I=h[E],C=dae.subVectors(Oc.center,up).dot(FD);C1.push(I.start,I.count,C,_)}}const x=C1.list,g=this.customSort;g===null?x.sort(s.transparent?lae:aae):g.call(this,x,r);for(let _=0,S=x.length;_<S;_++){const E=x[_];c[y]=E.start*a,u[y]=E.count,v[y]=E.index,y++}C1.reset()}else for(let x=0,g=l.length;x<g;x++)if(l[x].visible&&l[x].active){const _=l[x].geometryIndex;let S=!1;if(p&&(this.getMatrixAt(x,Ii),this.getBoundingSphereAt(_,Oc).applyMatrix4(Ii),S=!A1.intersectsSphere(Oc)),!S){const E=h[_];c[y]=E.start*a,u[y]=E.count,v[y]=x,y++}}m.needsUpdate=!0,this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,n,r,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class Ci extends ci{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new ut(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const a_=new j,l_=new j,UD=new zt,dp=new Qu,ky=new oi,R1=new j,BD=new j;class lc extends vn{constructor(e=new tn,n=new Ci){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)a_.fromBufferAttribute(n,i-1),l_.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=a_.distanceTo(l_);e.setAttribute("lineDistance",new bt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ky.copy(r.boundingSphere),ky.applyMatrix4(i),ky.radius+=s,e.ray.intersectsSphere(ky)===!1)return;UD.copy(i).invert(),dp.copy(e.ray).applyMatrix4(UD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,p=r.attributes.position;if(u!==null){const m=Math.max(0,o.start),v=Math.min(u.count,o.start+o.count);for(let y=m,x=v-1;y<x;y+=c){const g=u.getX(y),_=u.getX(y+1),S=Oy(this,e,dp,l,g,_);S&&n.push(S)}if(this.isLineLoop){const y=u.getX(v-1),x=u.getX(m),g=Oy(this,e,dp,l,y,x);g&&n.push(g)}}else{const m=Math.max(0,o.start),v=Math.min(p.count,o.start+o.count);for(let y=m,x=v-1;y<x;y+=c){const g=Oy(this,e,dp,l,y,y+1);g&&n.push(g)}if(this.isLineLoop){const y=Oy(this,e,dp,l,v-1,m);y&&n.push(y)}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Oy(t,e,n,r,i,s){const o=t.geometry.attributes.position;if(a_.fromBufferAttribute(o,i),l_.fromBufferAttribute(o,s),n.distanceSqToSegment(a_,l_,R1,BD)>r)return;R1.applyMatrix4(t.matrixWorld);const l=e.ray.origin.distanceTo(R1);if(!(l<e.near||l>e.far))return{distance:l,point:BD.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:t}}const zD=new j,VD=new j;class na extends lc{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)zD.fromBufferAttribute(n,i),VD.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+zD.distanceTo(VD);e.setAttribute("lineDistance",new bt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class MV extends lc{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class TC extends ci{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const jD=new zt,UE=new Qu,Fy=new oi,Uy=new j;class EV extends vn{constructor(e=new tn,n=new TC){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Fy.copy(r.boundingSphere),Fy.applyMatrix4(i),Fy.radius+=s,e.ray.intersectsSphere(Fy)===!1)return;jD.copy(i).invert(),UE.copy(e.ray).applyMatrix4(jD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,h=r.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=p,y=m;v<y;v++){const x=c.getX(v);Uy.fromBufferAttribute(h,x),HD(Uy,x,l,i,e,n,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=p,y=m;v<y;v++)Uy.fromBufferAttribute(h,v),HD(Uy,v,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function HD(t,e,n,r,i,s,o){const a=UE.distanceSqToPoint(t);if(a<n){const l=new j;UE.closestPointToPoint(t,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class hae extends ir{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:fr,this.magFilter=s!==void 0?s:fr,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class pae extends ir{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=jr,this.minFilter=jr,this.generateMipmaps=!1,this.needsUpdate=!0}}class _w extends ir{constructor(e,n,r,i,s,o,a,l,c,u,h,p){super(null,o,a,l,c,u,i,s,h,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class mae extends _w{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Ns,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class gae extends _w{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,Ga),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class vae extends ir{constructor(e,n,r,i,s,o,a,l,c){super(e,n,r,i,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class go{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],p=r[i+1]-u,m=(o-u)/p;return(i+m)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new Ae:new j);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new j,i=[],s=[],o=[],a=new j,l=new zt;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new j)}s[0]=new j,o[0]=new j;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),h=Math.abs(i[0].y),p=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),h<=c&&(c=h,r.set(0,1,0)),p<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(rr(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(n===!0){let m=Math.acos(rr(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ww extends go{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n=new Ae){const r=n,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*h+this.aX,c=p*h+m*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class TV extends ww{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function AC(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+h)+(l-a)/h;p*=u,m*=u,i(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const By=new j,P1=new AC,N1=new AC,I1=new AC;class AV extends go{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new j){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(By.subVectors(i[0],i[1]).add(i[0]),c=By);const h=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(By.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=By),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(h),m),y=Math.pow(h.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(u),m);y<1e-4&&(y=1),v<1e-4&&(v=y),x<1e-4&&(x=y),P1.initNonuniformCatmullRom(c.x,h.x,p.x,u.x,v,y,x),N1.initNonuniformCatmullRom(c.y,h.y,p.y,u.y,v,y,x),I1.initNonuniformCatmullRom(c.z,h.z,p.z,u.z,v,y,x)}else this.curveType==="catmullrom"&&(P1.initCatmullRom(c.x,h.x,p.x,u.x,this.tension),N1.initCatmullRom(c.y,h.y,p.y,u.y,this.tension),I1.initCatmullRom(c.z,h.z,p.z,u.z,this.tension));return r.set(P1.calc(l),N1.calc(l),I1.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function WD(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function yae(t,e){const n=1-t;return n*n*e}function xae(t,e){return 2*(1-t)*t*e}function _ae(t,e){return t*t*e}function tm(t,e,n,r){return yae(t,e)+xae(t,n)+_ae(t,r)}function wae(t,e){const n=1-t;return n*n*n*e}function Sae(t,e){const n=1-t;return 3*n*n*t*e}function bae(t,e){return 3*(1-t)*t*t*e}function Mae(t,e){return t*t*t*e}function nm(t,e,n,r,i){return wae(t,e)+Sae(t,n)+bae(t,r)+Mae(t,i)}class CC extends go{constructor(e=new Ae,n=new Ae,r=new Ae,i=new Ae){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ae){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(nm(e,i.x,s.x,o.x,a.x),nm(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CV extends go{constructor(e=new j,n=new j,r=new j,i=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new j){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(nm(e,i.x,s.x,o.x,a.x),nm(e,i.y,s.y,o.y,a.y),nm(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class RC extends go{constructor(e=new Ae,n=new Ae){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ae){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Ae){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RV extends go{constructor(e=new j,n=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new j){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new j){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class PC extends go{constructor(e=new Ae,n=new Ae,r=new Ae){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ae){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(tm(e,i.x,s.x,o.x),tm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NC extends go{constructor(e=new j,n=new j,r=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new j){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(tm(e,i.x,s.x,o.x),tm(e,i.y,s.y,o.y),tm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IC extends go{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new Ae){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(WD(a,l.x,c.x,u.x,h.x),WD(a,l.y,c.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ae().fromArray(i))}return this}}var c_=Object.freeze({__proto__:null,ArcCurve:TV,CatmullRomCurve3:AV,CubicBezierCurve:CC,CubicBezierCurve3:CV,EllipseCurve:ww,LineCurve:RC,LineCurve3:RV,QuadraticBezierCurve:PC,QuadraticBezierCurve3:NC,SplineCurve:IC});class PV extends go{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const r=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new c_[r](n,e))}return this}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(n.push(u),r=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new c_[i.type]().fromJSON(i))}return this}}class tg extends PV{constructor(e){super(),this.type="Path",this.currentPoint=new Ae,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new RC(this.currentPoint.clone(),new Ae(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new PC(this.currentPoint.clone(),new Ae(e,n),new Ae(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new CC(this.currentPoint.clone(),new Ae(e,n),new Ae(r,i),new Ae(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new IC(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,n+u,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const c=new ww(e,n,r,i,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Ig extends tn{constructor(e=[new Ae(0,-.5),new Ae(.5,0),new Ae(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=rr(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/n,h=new j,p=new Ae,m=new j,v=new j,y=new j;let x=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,v.copy(m),m.x+=y.x,m.y+=y.y,m.z+=y.z,m.normalize(),l.push(m.x,m.y,m.z),y.copy(v)}for(let _=0;_<=n;_++){const S=r+_*u*i,E=Math.sin(S),R=Math.cos(S);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*E,h.y=e[I].y,h.z=e[I].x*R,o.push(h.x,h.y,h.z),p.x=_/n,p.y=I/(e.length-1),a.push(p.x,p.y);const C=l[3*I+0]*E,D=l[3*I+1],L=l[3*I+0]*R;c.push(C,D,L)}}for(let _=0;_<n;_++)for(let S=0;S<e.length-1;S++){const E=S+_*e.length,R=E,I=E+e.length,C=E+e.length+1,D=E+1;s.push(R,I,D),s.push(C,D,I)}this.setIndex(s),this.setAttribute("position",new bt(o,3)),this.setAttribute("uv",new bt(a,2)),this.setAttribute("normal",new bt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ig(e.points,e.segments,e.phiStart,e.phiLength)}}class Sw extends Ig{constructor(e=1,n=1,r=4,i=8){const s=new tg;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new Sw(e.radius,e.length,e.capSegments,e.radialSegments)}}class bw extends tn{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],c=new j,u=new Ae;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=n;h++,p+=3){const m=r+h/n*i;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,l.push(u.x,u.y)}for(let h=1;h<=n;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new bt(o,3)),this.setAttribute("normal",new bt(a,3)),this.setAttribute("uv",new bt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class yh extends tn{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],h=[],p=[],m=[];let v=0;const y=[],x=r/2;let g=0;_(),o===!1&&(e>0&&S(!0),n>0&&S(!1)),this.setIndex(u),this.setAttribute("position",new bt(h,3)),this.setAttribute("normal",new bt(p,3)),this.setAttribute("uv",new bt(m,2));function _(){const E=new j,R=new j;let I=0;const C=(n-e)/r;for(let D=0;D<=s;D++){const L=[],P=D/s,F=P*(n-e)+e;for(let z=0;z<=i;z++){const H=z/i,q=H*l+a,se=Math.sin(q),K=Math.cos(q);R.x=F*se,R.y=-P*r+x,R.z=F*K,h.push(R.x,R.y,R.z),E.set(se,C,K).normalize(),p.push(E.x,E.y,E.z),m.push(H,1-P),L.push(v++)}y.push(L)}for(let D=0;D<i;D++)for(let L=0;L<s;L++){const P=y[L][D],F=y[L+1][D],z=y[L+1][D+1],H=y[L][D+1];(e>0||L!==0)&&(u.push(P,F,H),I+=3),(n>0||L!==s-1)&&(u.push(F,z,H),I+=3)}c.addGroup(g,I,0),g+=I}function S(E){const R=v,I=new Ae,C=new j;let D=0;const L=E===!0?e:n,P=E===!0?1:-1;for(let z=1;z<=i;z++)h.push(0,x*P,0),p.push(0,P,0),m.push(.5,.5),v++;const F=v;for(let z=0;z<=i;z++){const q=z/i*l+a,se=Math.cos(q),K=Math.sin(q);C.x=L*K,C.y=x*P,C.z=L*se,h.push(C.x,C.y,C.z),p.push(0,P,0),I.x=se*.5+.5,I.y=K*.5*P+.5,m.push(I.x,I.y),v++}for(let z=0;z<i;z++){const H=R+z,q=F+z;E===!0?u.push(q,q+1,H):u.push(q+1,q,H),D+=3}c.addGroup(g,D,E===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Mw extends yh{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Mw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yc extends tn{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),c(r),u(),this.setAttribute("position",new bt(s,3)),this.setAttribute("normal",new bt(s.slice(),3)),this.setAttribute("uv",new bt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const S=new j,E=new j,R=new j;for(let I=0;I<n.length;I+=3)m(n[I+0],S),m(n[I+1],E),m(n[I+2],R),l(S,E,R,_)}function l(_,S,E,R){const I=R+1,C=[];for(let D=0;D<=I;D++){C[D]=[];const L=_.clone().lerp(E,D/I),P=S.clone().lerp(E,D/I),F=I-D;for(let z=0;z<=F;z++)z===0&&D===I?C[D][z]=L:C[D][z]=L.clone().lerp(P,z/F)}for(let D=0;D<I;D++)for(let L=0;L<2*(I-D)-1;L++){const P=Math.floor(L/2);L%2===0?(p(C[D][P+1]),p(C[D+1][P]),p(C[D][P])):(p(C[D][P+1]),p(C[D+1][P+1]),p(C[D+1][P]))}}function c(_){const S=new j;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(_),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function u(){const _=new j;for(let S=0;S<s.length;S+=3){_.x=s[S+0],_.y=s[S+1],_.z=s[S+2];const E=x(_)/2/Math.PI+.5,R=g(_)/Math.PI+.5;o.push(E,1-R)}v(),h()}function h(){for(let _=0;_<o.length;_+=6){const S=o[_+0],E=o[_+2],R=o[_+4],I=Math.max(S,E,R),C=Math.min(S,E,R);I>.9&&C<.1&&(S<.2&&(o[_+0]+=1),E<.2&&(o[_+2]+=1),R<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,S){const E=_*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function v(){const _=new j,S=new j,E=new j,R=new j,I=new Ae,C=new Ae,D=new Ae;for(let L=0,P=0;L<s.length;L+=9,P+=6){_.set(s[L+0],s[L+1],s[L+2]),S.set(s[L+3],s[L+4],s[L+5]),E.set(s[L+6],s[L+7],s[L+8]),I.set(o[P+0],o[P+1]),C.set(o[P+2],o[P+3]),D.set(o[P+4],o[P+5]),R.copy(_).add(S).add(E).divideScalar(3);const F=x(R);y(I,P+0,_,F),y(C,P+2,S,F),y(D,P+4,E,F)}}function y(_,S,E,R){R<0&&_.x===1&&(o[S]=_.x-1),E.x===0&&E.z===0&&(o[S]=R/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yc(e.vertices,e.indices,e.radius,e.details)}}class Ew extends yc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Ew(e.radius,e.detail)}}const zy=new j,Vy=new j,L1=new j,jy=new Fi;class NV extends tn{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Su*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],h=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:y,b:x,c:g}=jy;if(y.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),jy.getNormal(L1),h[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,h[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let _=0;_<3;_++){const S=(_+1)%3,E=h[_],R=h[S],I=jy[u[_]],C=jy[u[S]],D=`${E}_${R}`,L=`${R}_${E}`;L in p&&p[L]?(L1.dot(p[L].normal)<=s&&(m.push(I.x,I.y,I.z),m.push(C.x,C.y,C.z)),p[L]=null):D in p||(p[D]={index0:c[_],index1:c[S],normal:L1.clone()})}}for(const v in p)if(p[v]){const{index0:y,index1:x}=p[v];zy.fromBufferAttribute(a,y),Vy.fromBufferAttribute(a,x),m.push(zy.x,zy.y,zy.z),m.push(Vy.x,Vy.y,Vy.z)}this.setAttribute("position",new bt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Mu extends tg{constructor(e){super(e),this.uuid=ss(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new tg().fromJSON(i))}return this}}const Eae={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=IV(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,p,m;if(r&&(s=Pae(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let v=n;v<i;v+=n)h=t[v],p=t[v+1],h<a&&(a=h),p<l&&(l=p),h>c&&(c=h),p>u&&(u=p);m=Math.max(c-a,u-l),m=m!==0?32767/m:0}return ng(s,o,n,a,l,m,0),o}};function IV(t,e,n,r,i){let s,o;if(i===Vae(t,e,n,r)>0)for(s=e;s<n;s+=r)o=GD(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=GD(s,t[s],t[s+1],o);return o&&Tw(o,o.next)&&(ig(o),o=o.next),o}function Vu(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(Tw(n,n.next)||$n(n.prev,n,n.next)===0)){if(ig(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function ng(t,e,n,r,i,s,o){if(!t)return;!o&&s&&kae(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Aae(t,r,i,s):Tae(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),ig(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Cae(Vu(t),e,n),ng(t,e,n,r,i,s,2)):o===2&&Rae(t,e,n,r,i,s):ng(Vu(t),e,n,r,i,s,1);break}}}function Tae(t){const e=t.prev,n=t,r=t.next;if($n(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=r.next;for(;v!==e;){if(v.x>=u&&v.x<=p&&v.y>=h&&v.y<=m&&hf(i,a,s,l,o,c,v.x,v.y)&&$n(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Aae(t,e,n,r){const i=t.prev,s=t,o=t.next;if($n(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,h=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,v=u<h?u<p?u:p:h<p?h:p,y=a>l?a>c?a:c:l>c?l:c,x=u>h?u>p?u:p:h>p?h:p,g=BE(m,v,e,n,r),_=BE(y,x,e,n,r);let S=t.prevZ,E=t.nextZ;for(;S&&S.z>=g&&E&&E.z<=_;){if(S.x>=m&&S.x<=y&&S.y>=v&&S.y<=x&&S!==i&&S!==o&&hf(a,u,l,h,c,p,S.x,S.y)&&$n(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=m&&E.x<=y&&E.y>=v&&E.y<=x&&E!==i&&E!==o&&hf(a,u,l,h,c,p,E.x,E.y)&&$n(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=y&&S.y>=v&&S.y<=x&&S!==i&&S!==o&&hf(a,u,l,h,c,p,S.x,S.y)&&$n(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=_;){if(E.x>=m&&E.x<=y&&E.y>=v&&E.y<=x&&E!==i&&E!==o&&hf(a,u,l,h,c,p,E.x,E.y)&&$n(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Cae(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!Tw(i,s)&&LV(i,r,r.next,s)&&rg(i,s)&&rg(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),ig(r),ig(r.next),r=t=s),r=r.next}while(r!==t);return Vu(r)}function Rae(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Uae(o,a)){let l=DV(o,a);o=Vu(o,o.next),l=Vu(l,l.next),ng(o,e,n,r,i,s,0),ng(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Pae(t,e,n,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=IV(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Fae(c));for(i.sort(Nae),s=0;s<i.length;s++)n=Iae(i[s],n);return n}function Nae(t,e){return t.x-e.x}function Iae(t,e){const n=Lae(t,e);if(!n)return e;const r=DV(n,t);return Vu(r,r.next),Vu(n,n.next)}function Lae(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,c=i.y;let u=1/0,h;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&hf(o<c?s:r,o,l,c,o<c?r:s,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(s-n.x),rg(n,t)&&(h<u||h===u&&(n.x>i.x||n.x===i.x&&Dae(i,n)))&&(i=n,u=h)),n=n.next;while(n!==a);return i}function Dae(t,e){return $n(t.prev,t,e.prev)<0&&$n(e.next,t,t.next)<0}function kae(t,e,n,r){let i=t;do i.z===0&&(i.z=BE(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Oae(i)}function Oae(t){let e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function BE(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Fae(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function hf(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Uae(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Bae(t,e)&&(rg(t,e)&&rg(e,t)&&zae(t,e)&&($n(t.prev,t,e.prev)||$n(t,e.prev,e))||Tw(t,e)&&$n(t.prev,t,t.next)>0&&$n(e.prev,e,e.next)>0)}function $n(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Tw(t,e){return t.x===e.x&&t.y===e.y}function LV(t,e,n,r){const i=Wy($n(t,e,n)),s=Wy($n(t,e,r)),o=Wy($n(n,r,t)),a=Wy($n(n,r,e));return!!(i!==s&&o!==a||i===0&&Hy(t,n,e)||s===0&&Hy(t,r,e)||o===0&&Hy(n,t,r)||a===0&&Hy(n,e,r))}function Hy(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Wy(t){return t>0?1:t<0?-1:0}function Bae(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&LV(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function rg(t,e){return $n(t.prev,t,t.next)<0?$n(t,e,t.next)>=0&&$n(t,t.prev,e)>=0:$n(t,e,t.prev)<0||$n(t,t.next,e)<0}function zae(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function DV(t,e){const n=new zE(t.i,t.x,t.y),r=new zE(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function GD(t,e,n,r){const i=new zE(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ig(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function zE(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vae(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class Yo{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Yo.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];XD(e),$D(r,e);let o=e.length;n.forEach(XD);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,$D(r,n[l]);const a=Eae.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function XD(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function $D(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Aw extends tn{constructor(e=new Mu([new Ae(.5,.5),new Ae(-.5,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new bt(i,3)),this.setAttribute("uv",new bt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1,h=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,m=n.bevelThickness!==void 0?n.bevelThickness:.2,v=n.bevelSize!==void 0?n.bevelSize:m-.1,y=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,_=n.UVGenerator!==void 0?n.UVGenerator:jae;let S,E=!1,R,I,C,D;g&&(S=g.getSpacedPoints(u),E=!0,p=!1,R=g.computeFrenetFrames(u,!1),I=new j,C=new j,D=new j),p||(x=0,m=0,v=0,y=0);const L=a.extractPoints(c);let P=L.shape;const F=L.holes;if(!Yo.isClockWise(P)){P=P.reverse();for(let fe=0,Me=F.length;fe<Me;fe++){const X=F[fe];Yo.isClockWise(X)&&(F[fe]=X.reverse())}}const H=Yo.triangulateShape(P,F),q=P;for(let fe=0,Me=F.length;fe<Me;fe++){const X=F[fe];P=P.concat(X)}function se(fe,Me,X){return Me||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().addScaledVector(Me,X)}const K=P.length,ne=H.length;function O(fe,Me,X){let ot,Pe,Ge;const Be=fe.x-Me.x,_t=fe.y-Me.y,Ze=X.x-fe.x,V=X.y-fe.y,N=Be*Be+_t*_t,B=Be*V-_t*Ze;if(Math.abs(B)>Number.EPSILON){const $=Math.sqrt(N),ae=Math.sqrt(Ze*Ze+V*V),te=Me.x-_t/$,pe=Me.y+Be/$,me=X.x-V/ae,Ne=X.y+Ze/ae,xt=((me-te)*V-(Ne-pe)*Ze)/(Be*V-_t*Ze);ot=te+Be*xt-fe.x,Pe=pe+_t*xt-fe.y;const Ce=ot*ot+Pe*Pe;if(Ce<=2)return new Ae(ot,Pe);Ge=Math.sqrt(Ce/2)}else{let $=!1;Be>Number.EPSILON?Ze>Number.EPSILON&&($=!0):Be<-Number.EPSILON?Ze<-Number.EPSILON&&($=!0):Math.sign(_t)===Math.sign(V)&&($=!0),$?(ot=-_t,Pe=Be,Ge=Math.sqrt(N)):(ot=Be,Pe=_t,Ge=Math.sqrt(N/2))}return new Ae(ot/Ge,Pe/Ge)}const W=[];for(let fe=0,Me=q.length,X=Me-1,ot=fe+1;fe<Me;fe++,X++,ot++)X===Me&&(X=0),ot===Me&&(ot=0),W[fe]=O(q[fe],q[X],q[ot]);const Y=[];let re,we=W.concat();for(let fe=0,Me=F.length;fe<Me;fe++){const X=F[fe];re=[];for(let ot=0,Pe=X.length,Ge=Pe-1,Be=ot+1;ot<Pe;ot++,Ge++,Be++)Ge===Pe&&(Ge=0),Be===Pe&&(Be=0),re[ot]=O(X[ot],X[Ge],X[Be]);Y.push(re),we=we.concat(re)}for(let fe=0;fe<x;fe++){const Me=fe/x,X=m*Math.cos(Me*Math.PI/2),ot=v*Math.sin(Me*Math.PI/2)+y;for(let Pe=0,Ge=q.length;Pe<Ge;Pe++){const Be=se(q[Pe],W[Pe],ot);he(Be.x,Be.y,-X)}for(let Pe=0,Ge=F.length;Pe<Ge;Pe++){const Be=F[Pe];re=Y[Pe];for(let _t=0,Ze=Be.length;_t<Ze;_t++){const V=se(Be[_t],re[_t],ot);he(V.x,V.y,-X)}}}const Ue=v+y;for(let fe=0;fe<K;fe++){const Me=p?se(P[fe],we[fe],Ue):P[fe];E?(C.copy(R.normals[0]).multiplyScalar(Me.x),I.copy(R.binormals[0]).multiplyScalar(Me.y),D.copy(S[0]).add(C).add(I),he(D.x,D.y,D.z)):he(Me.x,Me.y,0)}for(let fe=1;fe<=u;fe++)for(let Me=0;Me<K;Me++){const X=p?se(P[Me],we[Me],Ue):P[Me];E?(C.copy(R.normals[fe]).multiplyScalar(X.x),I.copy(R.binormals[fe]).multiplyScalar(X.y),D.copy(S[fe]).add(C).add(I),he(D.x,D.y,D.z)):he(X.x,X.y,h/u*fe)}for(let fe=x-1;fe>=0;fe--){const Me=fe/x,X=m*Math.cos(Me*Math.PI/2),ot=v*Math.sin(Me*Math.PI/2)+y;for(let Pe=0,Ge=q.length;Pe<Ge;Pe++){const Be=se(q[Pe],W[Pe],ot);he(Be.x,Be.y,h+X)}for(let Pe=0,Ge=F.length;Pe<Ge;Pe++){const Be=F[Pe];re=Y[Pe];for(let _t=0,Ze=Be.length;_t<Ze;_t++){const V=se(Be[_t],re[_t],ot);E?he(V.x,V.y+S[u-1].y,S[u-1].x+X):he(V.x,V.y,h+X)}}}de(),Se();function de(){const fe=i.length/3;if(p){let Me=0,X=K*Me;for(let ot=0;ot<ne;ot++){const Pe=H[ot];ze(Pe[2]+X,Pe[1]+X,Pe[0]+X)}Me=u+x*2,X=K*Me;for(let ot=0;ot<ne;ot++){const Pe=H[ot];ze(Pe[0]+X,Pe[1]+X,Pe[2]+X)}}else{for(let Me=0;Me<ne;Me++){const X=H[Me];ze(X[2],X[1],X[0])}for(let Me=0;Me<ne;Me++){const X=H[Me];ze(X[0]+K*u,X[1]+K*u,X[2]+K*u)}}r.addGroup(fe,i.length/3-fe,0)}function Se(){const fe=i.length/3;let Me=0;Ie(q,Me),Me+=q.length;for(let X=0,ot=F.length;X<ot;X++){const Pe=F[X];Ie(Pe,Me),Me+=Pe.length}r.addGroup(fe,i.length/3-fe,1)}function Ie(fe,Me){let X=fe.length;for(;--X>=0;){const ot=X;let Pe=X-1;Pe<0&&(Pe=fe.length-1);for(let Ge=0,Be=u+x*2;Ge<Be;Ge++){const _t=K*Ge,Ze=K*(Ge+1),V=Me+ot+_t,N=Me+Pe+_t,B=Me+Pe+Ze,$=Me+ot+Ze;rt(V,N,B,$)}}}function he(fe,Me,X){l.push(fe),l.push(Me),l.push(X)}function ze(fe,Me,X){je(fe),je(Me),je(X);const ot=i.length/3,Pe=_.generateTopUV(r,i,ot-3,ot-2,ot-1);We(Pe[0]),We(Pe[1]),We(Pe[2])}function rt(fe,Me,X,ot){je(fe),je(Me),je(ot),je(Me),je(X),je(ot);const Pe=i.length/3,Ge=_.generateSideWallUV(r,i,Pe-6,Pe-3,Pe-2,Pe-1);We(Ge[0]),We(Ge[1]),We(Ge[3]),We(Ge[1]),We(Ge[2]),We(Ge[3])}function je(fe){i.push(l[fe*3+0]),i.push(l[fe*3+1]),i.push(l[fe*3+2])}function We(fe){s.push(fe.x),s.push(fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return Hae(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new c_[i.type]().fromJSON(i)),new Aw(r,e.options)}}const jae={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],c=e[i*3],u=e[i*3+1];return[new Ae(s,o),new Ae(a,l),new Ae(c,u)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[r*3],u=e[r*3+1],h=e[r*3+2],p=e[i*3],m=e[i*3+1],v=e[i*3+2],y=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ae(o,1-l),new Ae(c,1-h),new Ae(p,1-v),new Ae(y,1-g)]:[new Ae(a,1-l),new Ae(u,1-h),new Ae(m,1-v),new Ae(x,1-g)]}};function Hae(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Cw extends yc{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Cw(e.radius,e.detail)}}class Lg extends yc{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Lg(e.radius,e.detail)}}class Rw extends tn{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],c=[],u=[];let h=e;const p=(n-e)/i,m=new j,v=new Ae;for(let y=0;y<=i;y++){for(let x=0;x<=r;x++){const g=s+x/r*o;m.x=h*Math.cos(g),m.y=h*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/n+1)/2,v.y=(m.y/n+1)/2,u.push(v.x,v.y)}h+=p}for(let y=0;y<i;y++){const x=y*(r+1);for(let g=0;g<r;g++){const _=g+x,S=_,E=_+r+1,R=_+r+2,I=_+1;a.push(S,E,I),a.push(E,R,I)}}this.setIndex(a),this.setAttribute("position",new bt(l,3)),this.setAttribute("normal",new bt(c,3)),this.setAttribute("uv",new bt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Pw extends tn{constructor(e=new Mu([new Ae(0,.5),new Ae(-.5,-.5),new Ae(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new bt(i,3)),this.setAttribute("normal",new bt(s,3)),this.setAttribute("uv",new bt(o,2));function c(u){const h=i.length/3,p=u.extractPoints(n);let m=p.shape;const v=p.holes;Yo.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=v.length;x<g;x++){const _=v[x];Yo.isClockWise(_)===!0&&(v[x]=_.reverse())}const y=Yo.triangulateShape(m,v);for(let x=0,g=v.length;x<g;x++){const _=v[x];m=m.concat(_)}for(let x=0,g=m.length;x<g;x++){const _=m[x];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,g=y.length;x<g;x++){const _=y[x],S=_[0]+h,E=_[1]+h,R=_[2]+h;r.push(S,E,R),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Wae(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new Pw(r,e.curveSegments)}}function Wae(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Dg extends tn{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new j,p=new j,m=[],v=[],y=[],x=[];for(let g=0;g<=r;g++){const _=[],S=g/r;let E=0;g===0&&o===0?E=.5/n:g===r&&l===Math.PI&&(E=-.5/n);for(let R=0;R<=n;R++){const I=R/n;h.x=-e*Math.cos(i+I*s)*Math.sin(o+S*a),h.y=e*Math.cos(o+S*a),h.z=e*Math.sin(i+I*s)*Math.sin(o+S*a),v.push(h.x,h.y,h.z),p.copy(h).normalize(),y.push(p.x,p.y,p.z),x.push(I+E,1-S),_.push(c++)}u.push(_)}for(let g=0;g<r;g++)for(let _=0;_<n;_++){const S=u[g][_+1],E=u[g][_],R=u[g+1][_],I=u[g+1][_+1];(g!==0||o>0)&&m.push(S,E,I),(g!==r-1||l<Math.PI)&&m.push(E,R,I)}this.setIndex(m),this.setAttribute("position",new bt(v,3)),this.setAttribute("normal",new bt(y,3)),this.setAttribute("uv",new bt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nw extends yc{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Nw(e.radius,e.detail)}}class Iw extends tn{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],c=[],u=new j,h=new j,p=new j;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const y=v/i*s,x=m/r*Math.PI*2;h.x=(e+n*Math.cos(x))*Math.cos(y),h.y=(e+n*Math.cos(x))*Math.sin(y),h.z=n*Math.sin(x),a.push(h.x,h.y,h.z),u.x=e*Math.cos(y),u.y=e*Math.sin(y),p.subVectors(h,u).normalize(),l.push(p.x,p.y,p.z),c.push(v/i),c.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const y=(i+1)*m+v-1,x=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,_=(i+1)*m+v;o.push(y,x,_),o.push(x,g,_)}this.setIndex(o),this.setAttribute("position",new bt(a,3)),this.setAttribute("normal",new bt(l,3)),this.setAttribute("uv",new bt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Iw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Lw extends tn{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],c=[],u=[],h=new j,p=new j,m=new j,v=new j,y=new j,x=new j,g=new j;for(let S=0;S<=r;++S){const E=S/r*s*Math.PI*2;_(E,s,o,e,m),_(E+.01,s,o,e,v),x.subVectors(v,m),g.addVectors(v,m),y.crossVectors(x,g),g.crossVectors(y,x),y.normalize(),g.normalize();for(let R=0;R<=i;++R){const I=R/i*Math.PI*2,C=-n*Math.cos(I),D=n*Math.sin(I);h.x=m.x+(C*g.x+D*y.x),h.y=m.y+(C*g.y+D*y.y),h.z=m.z+(C*g.z+D*y.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),c.push(p.x,p.y,p.z),u.push(S/r),u.push(R/i)}}for(let S=1;S<=r;S++)for(let E=1;E<=i;E++){const R=(i+1)*(S-1)+(E-1),I=(i+1)*S+(E-1),C=(i+1)*S+E,D=(i+1)*(S-1)+E;a.push(R,I,D),a.push(I,C,D)}this.setIndex(a),this.setAttribute("position",new bt(l,3)),this.setAttribute("normal",new bt(c,3)),this.setAttribute("uv",new bt(u,2));function _(S,E,R,I,C){const D=Math.cos(S),L=Math.sin(S),P=R/E*S,F=Math.cos(P);C.x=I*(2+F)*.5*D,C.y=I*(2+F)*L*.5,C.z=I*Math.sin(P)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Dw extends tn{constructor(e=new NC(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new j,l=new j,c=new Ae;let u=new j;const h=[],p=[],m=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new bt(h,3)),this.setAttribute("normal",new bt(p,3)),this.setAttribute("uv",new bt(m,2));function y(){for(let S=0;S<n;S++)x(S);x(s===!1?n:0),_(),g()}function x(S){u=e.getPointAt(S/n,u);const E=o.normals[S],R=o.binormals[S];for(let I=0;I<=i;I++){const C=I/i*Math.PI*2,D=Math.sin(C),L=-Math.cos(C);l.x=L*E.x+D*R.x,l.y=L*E.y+D*R.y,l.z=L*E.z+D*R.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=n;S++)for(let E=1;E<=i;E++){const R=(i+1)*(S-1)+(E-1),I=(i+1)*S+(E-1),C=(i+1)*S+E,D=(i+1)*(S-1)+E;v.push(R,I,D),v.push(I,C,D)}}function _(){for(let S=0;S<=n;S++)for(let E=0;E<=i;E++)c.x=S/n,c.y=E/i,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Dw(new c_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class kV extends tn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new j,s=new j;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const h=l[c],p=h.start,m=h.count;for(let v=p,y=p+m;v<y;v+=3)for(let x=0;x<3;x++){const g=a.getX(v+x),_=a.getX(v+(x+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),YD(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,h=3*a+(c+1)%3;i.fromBufferAttribute(o,u),s.fromBufferAttribute(o,h),YD(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new bt(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function YD(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var qD=Object.freeze({__proto__:null,BoxGeometry:Ju,CapsuleGeometry:Sw,CircleGeometry:bw,ConeGeometry:Mw,CylinderGeometry:yh,DodecahedronGeometry:Ew,EdgesGeometry:NV,ExtrudeGeometry:Aw,IcosahedronGeometry:Cw,LatheGeometry:Ig,OctahedronGeometry:Lg,PlaneGeometry:gh,PolyhedronGeometry:yc,RingGeometry:Rw,ShapeGeometry:Pw,SphereGeometry:Dg,TetrahedronGeometry:Nw,TorusGeometry:Iw,TorusKnotGeometry:Lw,TubeGeometry:Dw,WireframeGeometry:kV});class OV extends ci{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new ut(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class FV extends mo{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class LC extends ci{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UV extends LC{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ae(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return rr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ut(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class BV extends ci{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new ut(16777215),this.specular=new ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zV extends ci{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class VV extends ci{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class jV extends ci{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ls,this.combine=Tg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HV extends ci{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ae(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WV extends Ci{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function uu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function GV(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XV(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function VE(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function DC(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function Gae(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],p=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*i;if(!(v<n||v>=r)){h.push(c.times[m]);for(let y=0;y<u;++y)p.push(c.values[m*u+y])}}h.length!==0&&(c.times=uu(h,c.times.constructor),c.values=uu(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Xae(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let y;if(s<=a.times[0]){const g=u,_=h-u;y=a.values.slice(g,_)}else if(s>=a.times[v]){const g=v*h+u,_=g+h-u;y=a.values.slice(g,_)}else{const g=a.createInterpolant(),_=u,S=h-u;g.evaluate(s),y=g.resultBuffer.slice(_,S)}l==="quaternion"&&new si().fromArray(y).normalize().conjugate().toArray(y);const x=c.times.length;for(let g=0;g<x;++g){const _=g*m+p;if(l==="quaternion")si.multiplyQuaternionsFlat(c.values,_,y,0,c.values,_);else{const S=m-p*2;for(let E=0;E<S;++E)c.values[_+E]-=y[E]}}}return t.blendMode=pC,t}const $ae={convertArray:uu,isTypedArray:GV,getKeyframeOrder:XV,sortedArray:VE,flattenJSON:DC,subclip:Gae,makeClipAdditive:Xae};class kg{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $V extends kg{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:au,endingEnd:au}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case lu:s=e,a=2*n-r;break;case Km:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case lu:o=e,l=2*r-n;break;case Km:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const c=(r-n)*.5,u=this.valueSize;this._weightPrev=c/(n-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(r-n)/(i-n),y=v*v,x=y*v,g=-p*x+2*p*y-p*v,_=(1+p)*x+(-1.5-2*p)*y+(-.5+p)*v+1,S=(-1-m)*x+(1.5+m)*y+.5*v,E=m*x-m*y;for(let R=0;R!==a;++R)s[R]=g*o[u+R]+_*o[c+R]+S*o[l+R]+E*o[h+R];return s}}class kC extends kg{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-n)/(i-n),h=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*h+o[l+p]*u;return s}}class YV extends kg{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class vo{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=uu(n,this.TimeBufferType),this.values=uu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:uu(e.times,Array),values:uu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new YV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $V(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case Zm:n=this.InterpolantFactoryMethodDiscrete;break;case o_:n=this.InterpolantFactoryMethodLinear;break;case b0:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zm;case this.InterpolantFactoryMethodLinear:return o_;case this.InterpolantFactoryMethodSmooth:return b0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=r.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&GV(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===b0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(i)l=!0;else{const h=a*r,p=h-r,m=h+r;for(let v=0;v!==r;++v){const y=n[h+v];if(y!==n[p+v]||y!==n[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,p=o*r;for(let m=0;m!==r;++m)n[p+m]=n[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)n[l+c]=n[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=n.slice(0,o*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}vo.prototype.TimeBufferType=Float32Array;vo.prototype.ValueBufferType=Float32Array;vo.prototype.DefaultInterpolation=o_;class ed extends vo{constructor(e,n,r){super(e,n,r)}}ed.prototype.ValueTypeName="bool";ed.prototype.ValueBufferType=Array;ed.prototype.DefaultInterpolation=Zm;ed.prototype.InterpolantFactoryMethodLinear=void 0;ed.prototype.InterpolantFactoryMethodSmooth=void 0;class OC extends vo{}OC.prototype.ValueTypeName="color";class sg extends vo{}sg.prototype.ValueTypeName="number";class qV extends kg{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let c=e*a;for(let u=c+a;c!==u;c+=4)si.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Og extends vo{InterpolantFactoryMethodLinear(e){return new qV(this.times,this.values,this.getValueSize(),e)}}Og.prototype.ValueTypeName="quaternion";Og.prototype.InterpolantFactoryMethodSmooth=void 0;class td extends vo{constructor(e,n,r){super(e,n,r)}}td.prototype.ValueTypeName="string";td.prototype.ValueBufferType=Array;td.prototype.DefaultInterpolation=Zm;td.prototype.InterpolantFactoryMethodLinear=void 0;td.prototype.InterpolantFactoryMethodSmooth=void 0;class og extends vo{}og.prototype.ValueTypeName="vector";class ag{constructor(e="",n=-1,r=[],i=fw){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ss(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(qae(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(vo.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=XV(l);l=VE(l,1,u),c=VE(c,1,u),!i&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new sg(".morphTargetInfluences["+n[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let p=i[h];p||(i[h]=p=[]),p.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,p,m,v,y){if(m.length!==0){const x=[],g=[];DC(m,x,g,v),x.length!==0&&y.push(new h(p,x,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let y=0;y<p[v].morphTargets.length;y++)m[p[v].morphTargets[y]]=-1;for(const y in m){const x=[],g=[];for(let _=0;_!==p[v].morphTargets.length;++_){const S=p[v];x.push(S.time),g.push(S.morphTarget===y?1:0)}i.push(new sg(".morphTargetInfluence["+y+"]",x,g))}l=m.length*o}else{const m=".bones["+n[h].name+"]";r(og,m+".position",p,"pos",i),r(Og,m+".quaternion",p,"rot",i),r(og,m+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Yae(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sg;case"vector":case"vector2":case"vector3":case"vector4":return og;case"color":return OC;case"quaternion":return Og;case"bool":case"boolean":return ed;case"string":return td}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function qae(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Yae(t.type);if(t.times===void 0){const n=[],r=[];DC(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const Ra={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class FC{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],v=c[h+1];if(m.global&&(m.lastIndex=0),m.test(u))return v}return null}}}const ZV=new FC;class ji{constructor(e){this.manager=e!==void 0?e:ZV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ji.DEFAULT_MATERIAL_NAME="__DEFAULT";const va={};class Zae extends Error{constructor(e,n){super(e),this.response=n}}class $a extends ji{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ra.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(va[e]!==void 0){va[e].push({onLoad:n,onProgress:r,onError:i});return}va[e]=[],va[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=va[e],h=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,v=m!==0;let y=0;const x=new ReadableStream({start(g){_();function _(){h.read().then(({done:S,value:E})=>{if(S)g.close();else{y+=E.byteLength;const R=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:m});for(let I=0,C=u.length;I<C;I++){const D=u[I];D.onProgress&&D.onProgress(R)}g.enqueue(E),_()}},S=>{g.error(S)})}}});return new Response(x)}else throw new Zae(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{Ra.add(e,c);const u=va[e];delete va[e];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=va[e];if(u===void 0)throw this.manager.itemError(e),c;delete va[e];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Kae extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new $a(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=ag.parse(e[r]);n.push(i)}return n}}class Qae extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new _w,l=new $a(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(h){l.load(e[h],function(p){const m=s.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=fr),a.image=o,a.format=m.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)u(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let y=0;y<p.mipmapCount;y++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+y]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=fr),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class lg extends ji{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ra.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=eg("img");function l(){u(),Ra.add(e,this),n&&n(this),s.manager.itemEnd(e)}function c(h){u(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Jae extends ji{constructor(e){super(e)}load(e,n,r,i){const s=new Pg;s.colorSpace=ki;const o=new lg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class ele extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new $o,a=new $a(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(i!==void 0)i(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Ns,o.wrapT=c.wrapT!==void 0?c.wrapT:Ns,o.magFilter=c.magFilter!==void 0?c.magFilter:fr,o.minFilter=c.minFilter!==void 0?c.minFilter:fr,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Uo),c.mipmapCount===1&&(o.minFilter=fr),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,n&&n(o,c)},r,i),o}}class tle extends ji{constructor(e){super(e)}load(e,n,r,i){const s=new ir,o=new lg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class xc extends vn{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ut(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}class KV extends xc{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ut(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const D1=new zt,ZD=new j,KD=new j;class UC{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ae(512,512),this.map=null,this.mapPass=null,this.matrix=new zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ng,this._frameExtents=new Ae(1,1),this._viewportCount=1,this._viewports=[new mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;ZD.setFromMatrixPosition(e.matrixWorld),n.position.copy(ZD),KD.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(KD),n.updateMatrixWorld(),D1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(D1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(D1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nle extends UC{constructor(){super(new dr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=Jf*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QV extends xc{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new nle}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const QD=new zt,fp=new j,k1=new j;class rle extends UC{constructor(){super(new dr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ae(4,2),this._viewportCount=6,this._viewports=[new mn(2,1,1,1),new mn(0,1,1,1),new mn(3,1,1,1),new mn(1,1,1,1),new mn(3,0,1,1),new mn(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),fp.setFromMatrixPosition(e.matrixWorld),r.position.copy(fp),k1.copy(r.position),k1.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(k1),r.updateMatrixWorld(),i.makeTranslation(-fp.x,-fp.y,-fp.z),QD.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QD)}}class JV extends xc{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new rle}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ile extends UC{constructor(){super(new Yl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class e5 extends xc{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.shadow=new ile}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class t5 extends xc{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class n5 extends xc{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class r5{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class i5 extends xc{constructor(e=new r5,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class kw extends ji{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new $a(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ut().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new ut().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ae().fromArray(o.value);break;case"v3":i.uniforms[s].value=new j().fromArray(o.value);break;case"v4":i.uniforms[s].value=new mn().fromArray(o.value);break;case"m3":i.uniforms[s].value=new $t().fromArray(o.value);break;case"m4":i.uniforms[s].value=new zt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ae().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ae().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return kw.createMaterialFromType(e)}static createMaterialFromType(e){const n={ShadowMaterial:OV,SpriteMaterial:MC,RawShaderMaterial:FV,ShaderMaterial:mo,PointsMaterial:TC,MeshPhysicalMaterial:UV,MeshStandardMaterial:LC,MeshPhongMaterial:BV,MeshToonMaterial:zV,MeshNormalMaterial:VV,MeshLambertMaterial:jV,MeshDepthMaterial:wC,MeshDistanceMaterial:SC,MeshBasicMaterial:vc,MeshMatcapMaterial:HV,LineDashedMaterial:WV,LineBasicMaterial:Ci,Material:ci};return new n[e]}}class jE{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class s5 extends tn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class o5 extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new $a(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(m,v){if(n[v]!==void 0)return n[v];const x=m.interleavedBuffers[v],g=s(m,x.buffer),_=uf(x.type,g),S=new yw(_,x.stride);return S.uuid=x.uuid,n[v]=S,S}function s(m,v){if(r[v]!==void 0)return r[v];const x=m.arrayBuffers[v],g=new Uint32Array(x).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new s5:new tn,a=e.data.index;if(a!==void 0){const m=uf(a.type,a.array);o.setIndex(new Rn(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let y;if(v.isInterleavedBufferAttribute){const x=i(e.data,v.data);y=new zu(x,v.itemSize,v.offset,v.normalized)}else{const x=uf(v.type,v.array),g=v.isInstancedBufferAttribute?th:Rn;y=new g(x,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),o.setAttribute(m,y)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],y=[];for(let x=0,g=v.length;x<g;x++){const _=v[x];let S;if(_.isInterleavedBufferAttribute){const E=i(e.data,_.data);S=new zu(E,_.itemSize,_.offset,_.normalized)}else{const E=uf(_.type,_.array);S=new Rn(E,_.itemSize,_.normalized)}_.name!==void 0&&(S.name=_.name),y.push(S)}o.morphAttributes[m]=y}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,v=h.length;m!==v;++m){const y=h[m];o.addGroup(y.start,y.count,y.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new j;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new oi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class sle extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?jE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new $a(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?jE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new $a(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,r),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),n!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&n(c)}return c}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Mu().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new xw().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new o5;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in qD?a=qD[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new kw;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=ag.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:r.resourcePath+c;return o(u)}else return l.data?{data:uf(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new FC(n);s=new lg(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const h=e[c],p=h.url;if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new $o(g.data,g.width,g.height)))}i[h.uuid]=new cu(m)}else{const m=a(h.url);i[h.uuid]=new cu(m)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:uf(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new lg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let h=0,p=c.length;h<p;h++){const m=c[h],v=await s(m);v!==null&&(v instanceof HTMLImageElement?u.push(v):u.push(new $o(v.data,v.width,v.height)))}r[l.uuid]=new cu(u)}else{const u=await s(l.url);r[l.uuid]=new cu(u)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],c=l.data;let u;Array.isArray(c)?(u=new Pg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new $o:u=new ir,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=r(a.mapping,ole)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=r(a.wrap[0],JD),u.wrapT=r(a.wrap[1],JD)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=r(a.minFilter,ek)),a.magFilter!==void 0&&(u.magFilter=r(a.magFilter,ek)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),i[a.uuid]=u}return i}parseObject(e,n,r,i,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,y=p.length;v<y;v++){const x=p[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(r[x])}return m}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function c(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let u,h;switch(e.type){case"Scene":o=new bC,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ut(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new vw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new gw(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new dr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Yl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new t5(e.color,e.intensity);break;case"DirectionalLight":o=new e5(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new JV(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new n5(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new QV(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new KV(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new i5().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),h=l(e.material),o=new wV(u,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),h=l(e.material),o=new xr(u,h);break;case"InstancedMesh":u=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new SV(u,h,p),o.instanceMatrix=new th(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new th(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":u=a(e.geometry),h=l(e.material),o=new bV(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,h),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(y=>{const x=new Mi;x.min.fromArray(y.boxMin),x.max.fromArray(y.boxMax);const g=new oi;return g.radius=y.sphereRadius,g.center.fromArray(y.sphereCenter),{boxInitialized:y.boxInitialized,box:x,sphereInitialized:y.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new _V;break;case"Line":o=new lc(a(e.geometry),l(e.material));break;case"LineLoop":o=new MV(a(e.geometry),l(e.material));break;case"LineSegments":o=new na(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new EV(a(e.geometry),l(e.material));break;case"Sprite":o=new xV(l(e.material));break;case"Group":o=new ff;break;case"Bone":o=new EC;break;default:o=new vn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],n,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],y=o.getObjectByProperty("uuid",v.object);y!==void 0&&o.addLevel(y,v.distance,v.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}bindLightTargets(e){e.traverse(function(n){if(n.isDirectionalLight||n.isSpotLight){const r=n.target,i=e.getObjectByProperty("uuid",r);i!==void 0?n.target=i:n.target=new vn}})}}const ole={UVMapping:sw,CubeReflectionMapping:Ga,CubeRefractionMapping:ac,EquirectangularReflectionMapping:Xm,EquirectangularRefractionMapping:$m,CubeUVReflectionMapping:mh},JD={RepeatWrapping:Ym,ClampToEdgeWrapping:Ns,MirroredRepeatWrapping:qm},ek={NearestFilter:jr,NearestMipmapNearestFilter:iC,NearestMipmapLinearFilter:cf,LinearFilter:fr,LinearMipmapNearestFilter:Yp,LinearMipmapLinearFilter:Uo};class ale extends ji{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ra.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{n&&n(c),s.manager.itemEnd(e)}).catch(c=>{i&&i(c)});return}return setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ra.add(e,c),n&&n(c),s.manager.itemEnd(e),c}).catch(function(c){i&&i(c),Ra.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ra.add(e,l),s.manager.itemStart(e)}}let Gy;class BC{static getContext(){return Gy===void 0&&(Gy=new(window.AudioContext||window.webkitAudioContext)),Gy}static setContext(e){Gy=e}}class lle extends ji{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new $a(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);BC.getContext().decodeAudioData(c,function(h){n(h)}).catch(a)}catch(c){a(c)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}const tk=new zt,nk=new zt,Uc=new zt;class cle{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new dr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new dr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Uc.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(Su*n.fov*.5)/n.zoom;let a,l;nk.elements[12]=-i,tk.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Uc.elements[0]=2*n.near/(l-a),Uc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Uc),a=-o*n.aspect-s,l=o*n.aspect-s,Uc.elements[0]=2*n.near/(l-a),Uc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Uc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(nk),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(tk)}}class zC{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rk(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=rk();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function rk(){return performance.now()}const Bc=new j,ik=new si,ule=new j,zc=new j;class dle extends vn{constructor(){super(),this.type="AudioListener",this.context=BC.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zC}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bc,ik,ule),zc.set(0,0,-1).applyQuaternion(ik),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Bc.x,i),n.positionY.linearRampToValueAtTime(Bc.y,i),n.positionZ.linearRampToValueAtTime(Bc.z,i),n.forwardX.linearRampToValueAtTime(zc.x,i),n.forwardY.linearRampToValueAtTime(zc.y,i),n.forwardZ.linearRampToValueAtTime(zc.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Bc.x,Bc.y,Bc.z),n.setOrientation(zc.x,zc.y,zc.z,r.x,r.y,r.z)}}class a5 extends vn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Vc=new j,sk=new si,fle=new j,jc=new j;class hle extends a5{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Vc,sk,fle),jc.set(0,0,1).applyQuaternion(sk);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(Vc.x,r),n.positionY.linearRampToValueAtTime(Vc.y,r),n.positionZ.linearRampToValueAtTime(Vc.z,r),n.orientationX.linearRampToValueAtTime(jc.x,r),n.orientationY.linearRampToValueAtTime(jc.y,r),n.orientationZ.linearRampToValueAtTime(jc.z,r)}else n.setPosition(Vc.x,Vc.y,Vc.z),n.setOrientation(jc.x,jc.y,jc.z)}}class ple{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class l5{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,c=n+n;l!==c;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){si.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;si.multiplyQuaternionsFlat(e,o,e,n,e,r),si.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const VC="\\[\\]\\.:\\/",mle=new RegExp("["+VC+"]","g"),jC="[^"+VC+"]",gle="[^"+VC.replace("\\.","")+"]",vle=/((?:WC+[\/:])*)/.source.replace("WC",jC),yle=/(WCOD+)?/.source.replace("WCOD",gle),xle=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",jC),_le=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",jC),wle=new RegExp("^"+vle+yle+xle+_le+"$"),Sle=["material","materials","bones","map"];class ble{constructor(e,n,r){const i=r||pn.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class pn{constructor(e,n,r){this.path=n,this.parsedPath=r||pn.parseTrackName(n),this.node=pn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new pn.Composite(e,n,r):new pn(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mle,"")}static parseTrackName(e){const n=wle.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);Sle.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=pn.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let c=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[i];if(o===void 0){const c=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}pn.Composite=ble;pn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};pn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};pn.prototype.GetterByBindingType=[pn.prototype._getValue_direct,pn.prototype._getValue_array,pn.prototype._getValue_arrayElement,pn.prototype._getValue_toArray];pn.prototype.SetterByBindingTypeAndVersioning=[[pn.prototype._setValue_direct,pn.prototype._setValue_direct_setNeedsUpdate,pn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_array,pn.prototype._setValue_array_setNeedsUpdate,pn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_arrayElement,pn.prototype._setValue_arrayElement_setNeedsUpdate,pn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pn.prototype._setValue_fromArray,pn.prototype._setValue_fromArray_setNeedsUpdate,pn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Mle{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ss(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const p=arguments[u],m=p.uuid;let v=n[m];if(v===void 0){v=l++,n[m]=v,e.push(p);for(let y=0,x=o;y!==x;++y)s[y].push(new pn(p,r[y],i[y]))}else if(v<c){a=e[v];const y=--c,x=e[y];n[x.uuid]=v,e[v]=x,n[m]=y,e[y]=p;for(let g=0,_=o;g!==_;++g){const S=s[g],E=S[y];let R=S[v];S[v]=E,R===void 0&&(R=new pn(p,r[g],i[g])),S[y]=R}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=n[c];if(u!==void 0&&u>=s){const h=s++,p=e[h];n[p.uuid]=u,e[u]=p,n[c]=h,e[h]=l;for(let m=0,v=i;m!==v;++m){const y=r[m],x=y[h],g=y[u];y[u]=x,y[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,h=n[u];if(h!==void 0)if(delete n[u],h<s){const p=--s,m=e[p],v=--o,y=e[v];n[m.uuid]=h,e[h]=m,n[y.uuid]=p,e[p]=y,e.pop();for(let x=0,g=i;x!==g;++x){const _=r[x],S=_[p],E=_[v];_[h]=S,_[p]=E,_.pop()}}else{const p=--o,m=e[p];p>0&&(n[m.uuid]=h),e[h]=m,e.pop();for(let v=0,y=i;v!==y;++v){const x=r[v];x[h]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,h=new Array(c);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(h);for(let p=u,m=l.length;p!==m;++p){const v=l[p];h[p]=new pn(v,e,n)}return h}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];n[c]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class c5{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:au,endingEnd:au};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=H4,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case pC:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case fw:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===W4;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===j4){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=lu,i.endingEnd=lu):(e?i.endingStart=this.zeroSlopeAtStart?lu:au:i.endingStart=Km,n?i.endingEnd=this.zeroSlopeAtEnd?lu:au:i.endingEnd=Km)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const Ele=new Float32Array(1);class Tle extends ta{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const p=i[h],m=p.name;let v=u[m];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const y=n&&n._propertyBindings[h].binding.parsedPath;v=new l5(pn.create(r,m,y),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],c=e._cacheIndex;l._cacheIndex=c,n[c]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new kC(new Float32Array(2),new Float32Array(2),1,Ele),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?ag.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(r===void 0&&(o!==null?r=o.blendMode:r=fw),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new c5(this,o,n,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?ag.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)n[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=n[n.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,n[u]=h,n.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class HC{constructor(e){this.value=e}clone(){return new HC(this.value.clone===void 0?this.value:this.value.clone())}}let Ale=0;class Cle extends ta{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Ale++}),this.name="",this.usage=Qm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++){const s=Array.isArray(n[r])?n[r]:[n[r]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Rle extends yw{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class Ple{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ok=new zt;class u5{constructor(e,n,r=0,i=1/0){this.ray=new Qu(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new bu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return ok.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ok),this}intersectObject(e,n=!0,r=[]){return HE(e,this,r,n),r.sort(ak),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)HE(e[i],this,r,n);return r.sort(ak),r}}function ak(t,e){return t.distance-e.distance}function HE(t,e,n,r){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,n)===!1&&(i=!1),i===!0&&r===!0){const s=t.children;for(let o=0,a=s.length;o<a;o++)HE(s[o],e,n,!0)}}class WE{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(rr(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Nle{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}class WC{constructor(e,n,r,i){WC.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,n,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,n=0){for(let r=0;r<4;r++)this.elements[r]=e[r+n];return this}set(e,n,r,i){const s=this.elements;return s[0]=e,s[2]=n,s[1]=r,s[3]=i,this}}const lk=new Ae;class Ile{constructor(e=new Ae(1/0,1/0),n=new Ae(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=lk.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lk).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ck=new j,Xy=new j;class Lle{constructor(e=new j,n=new j){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){ck.subVectors(e,this.start),Xy.subVectors(this.end,this.start);const r=Xy.dot(Xy);let s=Xy.dot(ck)/r;return n&&(s=rr(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const uk=new j;class Dle extends vn{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new tn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;i.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}r.setAttribute("position",new bt(i,3));const s=new Ci({fog:!1,toneMapped:!1});this.cone=new na(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),uk.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(uk),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xl=new j,$y=new zt,O1=new zt;class kle extends na{constructor(e){const n=d5(e),r=new tn,i=[],s=[],o=new ut(0,0,1),a=new ut(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new bt(i,3)),r.setAttribute("color",new bt(s,3));const l=new Ci({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");O1.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&($y.multiplyMatrices(O1,a.matrixWorld),xl.setFromMatrixPosition($y),i.setXYZ(o,xl.x,xl.y,xl.z),$y.multiplyMatrices(O1,a.parent.matrixWorld),xl.setFromMatrixPosition($y),i.setXYZ(o+1,xl.x,xl.y,xl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function d5(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,d5(t.children[n]));return e}class Ole extends xr{constructor(e,n,r){const i=new Dg(n,4,2),s=new vc({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Fle=new j,dk=new ut,fk=new ut;class Ule extends vn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Lg(n);i.rotateY(Math.PI*.5),this.material=new vc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Rn(o,3)),this.add(new xr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");dk.copy(this.light.color),fk.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?dk:fk;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Fle.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ble extends na{constructor(e=10,n=10,r=4473924,i=8947848){r=new ut(r),i=new ut(i);const s=n/2,o=e/n,a=e/2,l=[],c=[];for(let p=0,m=0,v=-a;p<=n;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const y=p===s?r:i;y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3,y.toArray(c,m),m+=3}const u=new tn;u.setAttribute("position",new bt(l,3)),u.setAttribute("color",new bt(c,3));const h=new Ci({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class zle extends na{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new ut(s),o=new ut(o);const a=[],l=[];if(n>1)for(let h=0;h<n;h++){const p=h/n*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const y=h&1?s:o;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let h=0;h<r;h++){const p=h&1?s:o,m=e-e/r*h;for(let v=0;v<i;v++){let y=v/i*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),y=(v+1)/i*(Math.PI*2),x=Math.sin(y)*m,g=Math.cos(y)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const c=new tn;c.setAttribute("position",new bt(a,3)),c.setAttribute("color",new bt(l,3));const u=new Ci({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const hk=new j,Yy=new j,pk=new j;class Vle extends vn{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new tn;i.setAttribute("position",new bt([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Ci({fog:!1,toneMapped:!1});this.lightPlane=new lc(i,s),this.add(this.lightPlane),i=new tn,i.setAttribute("position",new bt([0,0,0,0,0,1],3)),this.targetLine=new lc(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),hk.setFromMatrixPosition(this.light.matrixWorld),Yy.setFromMatrixPosition(this.light.target.matrixWorld),pk.subVectors(Yy,hk),this.lightPlane.lookAt(Yy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Yy),this.targetLine.scale.z=pk.length()}}const qy=new j,Jn=new Rg;class jle extends na{constructor(e){const n=new tn,r=new Ci({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,y){l(v),l(y)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}n.setAttribute("position",new bt(i,3)),n.setAttribute("color",new bt(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ut(16755200),u=new ut(16711680),h=new ut(43775),p=new ut(16777215),m=new ut(3355443);this.setColors(c,u,h,p,m)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Jn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ar("c",n,e,Jn,0,0,-1),ar("t",n,e,Jn,0,0,1),ar("n1",n,e,Jn,-r,-i,-1),ar("n2",n,e,Jn,r,-i,-1),ar("n3",n,e,Jn,-r,i,-1),ar("n4",n,e,Jn,r,i,-1),ar("f1",n,e,Jn,-r,-i,1),ar("f2",n,e,Jn,r,-i,1),ar("f3",n,e,Jn,-r,i,1),ar("f4",n,e,Jn,r,i,1),ar("u1",n,e,Jn,r*.7,i*1.1,-1),ar("u2",n,e,Jn,-r*.7,i*1.1,-1),ar("u3",n,e,Jn,0,i*2,-1),ar("cf1",n,e,Jn,-r,0,1),ar("cf2",n,e,Jn,r,0,1),ar("cf3",n,e,Jn,0,-i,1),ar("cf4",n,e,Jn,0,i,1),ar("cn1",n,e,Jn,-r,0,-1),ar("cn2",n,e,Jn,r,0,-1),ar("cn3",n,e,Jn,0,-i,-1),ar("cn4",n,e,Jn,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ar(t,e,n,r,i,s,o){qy.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],qy.x,qy.y,qy.z)}}const Zy=new Mi;class Hle extends na{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new tn;s.setIndex(new Rn(r,1)),s.setAttribute("position",new Rn(i,3)),super(s,new Ci({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Zy.setFromObject(this.object),Zy.isEmpty())return;const n=Zy.min,r=Zy.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wle extends na{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new tn;s.setIndex(new Rn(r,1)),s.setAttribute("position",new bt(i,3)),super(s,new Ci({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gle extends lc{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new tn;o.setAttribute("position",new bt(s,3)),o.computeBoundingSphere(),super(o,new Ci({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new tn;l.setAttribute("position",new bt(a,3)),l.computeBoundingSphere(),this.add(new xr(l,new vc({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const mk=new j;let Ky,F1;class Xle extends vn{constructor(e=new j(0,0,1),n=new j(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Ky===void 0&&(Ky=new tn,Ky.setAttribute("position",new bt([0,0,0,0,1,0],3)),F1=new yh(0,.5,1,5,1),F1.translate(0,-.5,0)),this.position.copy(n),this.line=new lc(Ky,new Ci({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xr(F1,new vc({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{mk.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(mk,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class $le extends na{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new tn;i.setAttribute("position",new bt(n,3)),i.setAttribute("color",new bt(r,3));const s=new Ci({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new ut,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yle{constructor(){this.type="ShapePath",this.color=new ut,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new tg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const _=[];for(let S=0,E=g.length;S<E;S++){const R=g[S],I=new Mu;I.curves=R.curves,_.push(I)}return _}function r(g,_){const S=_.length;let E=!1;for(let R=S-1,I=0;I<S;R=I++){let C=_[R],D=_[I],L=D.x-C.x,P=D.y-C.y;if(Math.abs(P)>Number.EPSILON){if(P<0&&(C=_[I],L=-L,D=_[R],P=-P),g.y<C.y||g.y>D.y)continue;if(g.y===C.y){if(g.x===C.x)return!0}else{const F=P*(g.x-C.x)-L*(g.y-C.y);if(F===0)return!0;if(F<0)continue;E=!E}}else{if(g.y!==C.y)continue;if(D.x<=g.x&&g.x<=C.x||C.x<=g.x&&g.x<=D.x)return!0}}return E}const i=Yo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Mu,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const h=[],p=[];let m=[],v=0,y;p[v]=void 0,m[v]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],y=a.getPoints(),o=i(y),o=e?!o:o,o?(!u&&p[v]&&v++,p[v]={s:new Mu,p:y},p[v].s.curves=a.curves,u&&v++,m[v]=[]):m[v].push({h:a,p:y[0]});if(!p[0])return n(s);if(p.length>1){let g=!1,_=0;for(let S=0,E=p.length;S<E;S++)h[S]=[];for(let S=0,E=p.length;S<E;S++){const R=m[S];for(let I=0;I<R.length;I++){const C=R[I];let D=!0;for(let L=0;L<p.length;L++)r(C.p,p[L].p)&&(S!==L&&_++,D?(D=!1,h[L].push(C)):g=!0);D&&h[S].push(C)}}_>0&&g===!1&&(m=h)}let x;for(let g=0,_=p.length;g<_;g++){l=p[g].s,c.push(l),x=m[g];for(let S=0,E=x.length;S<E;S++)l.holes.push(x[S].h)}return c}}class qle extends ta{constructor(e,n=null){super(),this.object=e,this.domElement=n,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class Zle extends ks{constructor(e=1,n=1,r=1,i={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...i,count:r}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rw}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rw);const Kle=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:rC,AddEquation:Pl,AddOperation:D4,AdditiveAnimationBlendMode:pC,AdditiveBlending:RE,AgXToneMapping:B4,AlphaFormat:lC,AlwaysCompare:eV,AlwaysDepth:Cx,AlwaysStencilFunc:LE,AmbientLight:t5,AnimationAction:c5,AnimationClip:ag,AnimationLoader:Kae,AnimationMixer:Tle,AnimationObjectGroup:Mle,AnimationUtils:$ae,ArcCurve:TV,ArrayCamera:gV,ArrowHelper:Xle,AttachedBindMode:IE,Audio:a5,AudioAnalyser:ple,AudioContext:BC,AudioListener:dle,AudioLoader:lle,AxesHelper:$le,BackSide:bi,BasicDepthPacking:G4,BasicShadowMap:p4,BatchedMesh:bV,Bone:EC,BooleanKeyframeTrack:ed,Box2:Ile,Box3:Mi,Box3Helper:Wle,BoxGeometry:Ju,BoxHelper:Hle,BufferAttribute:Rn,BufferGeometry:tn,BufferGeometryLoader:o5,ByteType:sC,Cache:Ra,Camera:Rg,CameraHelper:jle,CanvasTexture:vae,CapsuleGeometry:Sw,CatmullRomCurve3:AV,CineonToneMapping:F4,CircleGeometry:bw,ClampToEdgeWrapping:Ns,Clock:zC,Color:ut,ColorKeyframeTrack:OC,ColorManagement:fn,CompressedArrayTexture:mae,CompressedCubeTexture:gae,CompressedTexture:_w,CompressedTextureLoader:Qae,ConeGeometry:Mw,ConstantAlphaFactor:N4,ConstantColorFactor:R4,Controls:qle,CubeCamera:lV,CubeReflectionMapping:Ga,CubeRefractionMapping:ac,CubeTexture:Pg,CubeTextureLoader:Jae,CubeUVReflectionMapping:mh,CubicBezierCurve:CC,CubicBezierCurve3:CV,CubicInterpolant:$V,CullFaceBack:CE,CullFaceFront:h4,CullFaceFrontBack:Gee,CullFaceNone:f4,Curve:go,CurvePath:PV,CustomBlending:m4,CustomToneMapping:U4,CylinderGeometry:yh,Cylindrical:Nle,Data3DTexture:vC,DataArrayTexture:hw,DataTexture:$o,DataTextureLoader:ele,DataUtils:sne,DecrementStencilOp:ste,DecrementWrapStencilOp:ate,DefaultLoadingManager:ZV,DepthFormat:wu,DepthStencilFormat:Bu,DepthTexture:pw,DetachedBindMode:V4,DirectionalLight:e5,DirectionalLightHelper:Vle,DiscreteInterpolant:YV,DodecahedronGeometry:Ew,DoubleSide:Oo,DstAlphaFactor:M4,DstColorFactor:T4,DynamicCopyUsage:Ste,DynamicDrawUsage:gte,DynamicReadUsage:xte,EdgesGeometry:NV,EllipseCurve:ww,EqualCompare:Z4,EqualDepth:Px,EqualStencilFunc:dte,EquirectangularReflectionMapping:Xm,EquirectangularRefractionMapping:$m,Euler:ls,EventDispatcher:ta,ExtrudeGeometry:Aw,FileLoader:$a,Float16BufferAttribute:dne,Float32BufferAttribute:bt,FloatType:wi,Fog:vw,FogExp2:gw,FramebufferTexture:pae,FrontSide:Wa,Frustum:Ng,GLBufferAttribute:Ple,GLSL1:Mte,GLSL3:DE,GreaterCompare:K4,GreaterDepth:Ix,GreaterEqualCompare:J4,GreaterEqualDepth:Nx,GreaterEqualStencilFunc:mte,GreaterStencilFunc:hte,GridHelper:Ble,Group:ff,HalfFloatType:Zu,HemisphereLight:KV,HemisphereLightHelper:Ule,IcosahedronGeometry:Cw,ImageBitmapLoader:ale,ImageLoader:lg,ImageUtils:rV,IncrementStencilOp:ite,IncrementWrapStencilOp:ote,InstancedBufferAttribute:th,InstancedBufferGeometry:s5,InstancedInterleavedBuffer:Rle,InstancedMesh:SV,Int16BufferAttribute:cne,Int32BufferAttribute:une,Int8BufferAttribute:one,IntType:ow,InterleavedBuffer:yw,InterleavedBufferAttribute:zu,Interpolant:kg,InterpolateDiscrete:Zm,InterpolateLinear:o_,InterpolateSmooth:b0,InvertStencilOp:lte,KeepStencilOp:qc,KeyframeTrack:vo,LOD:_V,LatheGeometry:Ig,Layers:bu,LessCompare:q4,LessDepth:Rx,LessEqualCompare:mC,LessEqualDepth:Fu,LessEqualStencilFunc:fte,LessStencilFunc:ute,Light:xc,LightProbe:i5,Line:lc,Line3:Lle,LineBasicMaterial:Ci,LineCurve:RC,LineCurve3:RV,LineDashedMaterial:WV,LineLoop:MV,LineSegments:na,LinearFilter:fr,LinearInterpolant:kC,LinearMipMapLinearFilter:qee,LinearMipMapNearestFilter:Yee,LinearMipmapLinearFilter:Uo,LinearMipmapNearestFilter:Yp,LinearSRGBColorSpace:Ku,LinearToneMapping:k4,LinearTransfer:Cg,Loader:ji,LoaderUtils:jE,LoadingManager:FC,LoopOnce:j4,LoopPingPong:W4,LoopRepeat:H4,LuminanceAlphaFormat:dC,LuminanceFormat:uC,MOUSE:$c,Material:ci,MaterialLoader:kw,MathUtils:Vte,Matrix2:WC,Matrix3:$t,Matrix4:zt,MaxEquation:x4,Mesh:xr,MeshBasicMaterial:vc,MeshDepthMaterial:wC,MeshDistanceMaterial:SC,MeshLambertMaterial:jV,MeshMatcapMaterial:HV,MeshNormalMaterial:VV,MeshPhongMaterial:BV,MeshPhysicalMaterial:UV,MeshStandardMaterial:LC,MeshToonMaterial:zV,MinEquation:y4,MirroredRepeatWrapping:qm,MixOperation:L4,MultiplyBlending:NE,MultiplyOperation:Tg,NearestFilter:jr,NearestMipMapLinearFilter:$ee,NearestMipMapNearestFilter:Xee,NearestMipmapLinearFilter:cf,NearestMipmapNearestFilter:iC,NeutralToneMapping:z4,NeverCompare:Y4,NeverDepth:Ax,NeverStencilFunc:cte,NoBlending:Da,NoColorSpace:Ea,NoToneMapping:Xo,NormalAnimationBlendMode:fw,NormalBlending:_u,NotEqualCompare:Q4,NotEqualDepth:Lx,NotEqualStencilFunc:pte,NumberKeyframeTrack:sg,Object3D:vn,ObjectLoader:sle,ObjectSpaceNormalMap:$4,OctahedronGeometry:Lg,OneFactor:w4,OneMinusConstantAlphaFactor:I4,OneMinusConstantColorFactor:P4,OneMinusDstAlphaFactor:E4,OneMinusDstColorFactor:A4,OneMinusSrcAlphaFactor:Tx,OneMinusSrcColorFactor:b4,OrthographicCamera:Yl,PCFShadowMap:iw,PCFSoftShadowMap:$p,PMREMGenerator:kE,Path:tg,PerspectiveCamera:dr,Plane:ba,PlaneGeometry:gh,PlaneHelper:Gle,PointLight:JV,PointLightHelper:Ole,Points:EV,PointsMaterial:TC,PolarGridHelper:zle,PolyhedronGeometry:yc,PositionalAudio:hle,PropertyBinding:pn,PropertyMixer:l5,QuadraticBezierCurve:PC,QuadraticBezierCurve3:NC,Quaternion:si,QuaternionKeyframeTrack:Og,QuaternionLinearInterpolant:qV,RED_GREEN_RGTC2_Format:i_,RED_RGTC1_Format:hC,REVISION:rw,RGBADepthPacking:X4,RGBAFormat:ii,RGBAIntegerFormat:dw,RGBA_ASTC_10x10_Format:Qx,RGBA_ASTC_10x5_Format:qx,RGBA_ASTC_10x6_Format:Zx,RGBA_ASTC_10x8_Format:Kx,RGBA_ASTC_12x10_Format:Jx,RGBA_ASTC_12x12_Format:e_,RGBA_ASTC_4x4_Format:Vx,RGBA_ASTC_5x4_Format:jx,RGBA_ASTC_5x5_Format:Hx,RGBA_ASTC_6x5_Format:Wx,RGBA_ASTC_6x6_Format:Gx,RGBA_ASTC_8x5_Format:Xx,RGBA_ASTC_8x6_Format:$x,RGBA_ASTC_8x8_Format:Yx,RGBA_BPTC_Format:Jp,RGBA_ETC2_EAC_Format:zx,RGBA_PVRTC_2BPPV1_Format:Fx,RGBA_PVRTC_4BPPV1_Format:Ox,RGBA_S3TC_DXT1_Format:Zp,RGBA_S3TC_DXT3_Format:Kp,RGBA_S3TC_DXT5_Format:Qp,RGBDepthPacking:ete,RGBFormat:cC,RGBIntegerFormat:Zee,RGB_BPTC_SIGNED_Format:t_,RGB_BPTC_UNSIGNED_Format:n_,RGB_ETC1_Format:Ux,RGB_ETC2_Format:Bx,RGB_PVRTC_2BPPV1_Format:kx,RGB_PVRTC_4BPPV1_Format:Dx,RGB_S3TC_DXT1_Format:qp,RGDepthPacking:tte,RGFormat:fC,RGIntegerFormat:uw,RawShaderMaterial:FV,Ray:Qu,Raycaster:u5,RectAreaLight:n5,RedFormat:cw,RedIntegerFormat:Ag,ReinhardToneMapping:O4,RenderTarget:iV,RepeatWrapping:Ym,ReplaceStencilOp:rte,ReverseSubtractEquation:v4,RingGeometry:Rw,SIGNED_RED_GREEN_RGTC2_Format:s_,SIGNED_RED_RGTC1_Format:r_,SRGBColorSpace:ki,SRGBTransfer:Mn,Scene:bC,ShaderChunk:Jt,ShaderLib:no,ShaderMaterial:mo,ShadowMaterial:OV,Shape:Mu,ShapeGeometry:Pw,ShapePath:Yle,ShapeUtils:Yo,ShortType:oC,Skeleton:xw,SkeletonHelper:kle,SkinnedMesh:wV,Source:cu,Sphere:oi,SphereGeometry:Dg,Spherical:WE,SphericalHarmonics3:r5,SplineCurve:IC,SpotLight:QV,SpotLightHelper:Dle,Sprite:xV,SpriteMaterial:MC,SrcAlphaFactor:Ex,SrcAlphaSaturateFactor:C4,SrcColorFactor:S4,StaticCopyUsage:wte,StaticDrawUsage:Qm,StaticReadUsage:yte,StereoCamera:cle,StreamCopyUsage:bte,StreamDrawUsage:vte,StreamReadUsage:_te,StringKeyframeTrack:td,SubtractEquation:g4,SubtractiveBlending:PE,TOUCH:Yc,TangentSpaceNormalMap:gc,TetrahedronGeometry:Nw,Texture:ir,TextureLoader:tle,TextureUtils:Yoe,TorusGeometry:Iw,TorusKnotGeometry:Lw,Triangle:Fi,TriangleFanDrawMode:Jee,TriangleStripDrawMode:Qee,TrianglesDrawMode:Kee,TubeGeometry:Dw,UVMapping:sw,Uint16BufferAttribute:yC,Uint32BufferAttribute:xC,Uint8BufferAttribute:ane,Uint8ClampedBufferAttribute:lne,Uniform:HC,UniformsGroup:Cle,UniformsLib:Ke,UniformsUtils:aV,UnsignedByteType:po,UnsignedInt248Type:Uu,UnsignedInt5999Type:aC,UnsignedIntType:Xa,UnsignedShort4444Type:aw,UnsignedShort5551Type:lw,UnsignedShortType:Qf,VSMShadowMap:qs,Vector2:Ae,Vector3:j,Vector4:mn,VectorKeyframeTrack:og,VideoTexture:hae,WebGL3DRenderTarget:qte,WebGLArrayRenderTarget:Yte,WebGLCoordinateSystem:Bo,WebGLCubeRenderTarget:cV,WebGLMultipleRenderTargets:Zle,WebGLRenderTarget:ks,WebGLRenderer:vV,WebGLUtils:mV,WebGPUCoordinateSystem:Jm,WireframeGeometry:kV,WrapAroundEnding:Km,ZeroCurvatureEnding:au,ZeroFactor:_4,ZeroSlopeEnding:lu,ZeroStencilOp:nte,createCanvasElement:nV},Symbol.toStringTag,{value:"Module"}));var f5={exports:{}},nd={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */nd.ConcurrentRoot=1;nd.ContinuousEventPriority=4;nd.DefaultEventPriority=16;nd.DiscreteEventPriority=1;nd.IdleEventPriority=536870912;nd.LegacyRoot=0;f5.exports=nd;var pf=f5.exports;function Qle(t){let e;const n=new Set,r=(c,u)=>{const h=typeof c=="function"?c(e):c;if(h!==e){const p=e;e=u?h:Object.assign({},e,h),n.forEach(m=>m(e,p))}},i=()=>e,s=(c,u=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=u(e);function m(){const v=u(e);if(!h(p,v)){const y=p;c(p=v,y)}}return n.add(m),()=>n.delete(m)},l={setState:r,getState:i,subscribe:(c,u,h)=>u||h?s(c,u,h):(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return e=t(r,i,l),l}const Jle=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),gk=Jle?T.useEffect:T.useLayoutEffect;function ece(t){const e=typeof t=="function"?Qle(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=T.useReducer(x=>x+1,0),o=e.getState(),a=T.useRef(o),l=T.useRef(r),c=T.useRef(i),u=T.useRef(!1),h=T.useRef();h.current===void 0&&(h.current=r(o));let p,m=!1;(a.current!==o||l.current!==r||c.current!==i||u.current)&&(p=r(o),m=!i(h.current,p)),gk(()=>{m&&(h.current=p),a.current=o,l.current=r,c.current=i,u.current=!1});const v=T.useRef(o);gk(()=>{const x=()=>{try{const _=e.getState(),S=l.current(_);c.current(h.current,S)||(a.current=_,h.current=S,s())}catch{u.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const y=m?p:h.current;return T.useDebugValue(y),y};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var h5={exports:{}},U1={exports:{}},B1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk;function tce(){return vk||(vk=1,function(t){function e(O,W){var Y=O.length;O.push(W);e:for(;0<Y;){var re=Y-1>>>1,we=O[re];if(0<i(we,W))O[re]=W,O[Y]=we,Y=re;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],Y=O.pop();if(Y!==W){O[0]=Y;e:for(var re=0,we=O.length,Ue=we>>>1;re<Ue;){var de=2*(re+1)-1,Se=O[de],Ie=de+1,he=O[Ie];if(0>i(Se,Y))Ie<we&&0>i(he,Se)?(O[re]=he,O[Ie]=Y,re=Ie):(O[re]=Se,O[de]=Y,re=de);else if(Ie<we&&0>i(he,Y))O[re]=he,O[Ie]=Y,re=Ie;else break e}}return W}function i(O,W){var Y=O.sortIndex-W.sortIndex;return Y!==0?Y:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=O)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(O){if(y=!1,S(O),!v)if(n(l)!==null)v=!0,K(R);else{var W=n(c);W!==null&&ne(E,W.startTime-O)}}function R(O,W){v=!1,y&&(y=!1,g(D),D=-1),m=!0;var Y=p;try{for(S(W),h=n(l);h!==null&&(!(h.expirationTime>W)||O&&!F());){var re=h.callback;if(typeof re=="function"){h.callback=null,p=h.priorityLevel;var we=re(h.expirationTime<=W);W=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&r(l),S(W)}else r(l);h=n(l)}if(h!==null)var Ue=!0;else{var de=n(c);de!==null&&ne(E,de.startTime-W),Ue=!1}return Ue}finally{h=null,p=Y,m=!1}}var I=!1,C=null,D=-1,L=5,P=-1;function F(){return!(t.unstable_now()-P<L)}function z(){if(C!==null){var O=t.unstable_now();P=O;var W=!0;try{W=C(!0,O)}finally{W?H():(I=!1,C=null)}}else I=!1}var H;if(typeof _=="function")H=function(){_(z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,se=q.port2;q.port1.onmessage=z,H=function(){se.postMessage(null)}}else H=function(){x(z,0)};function K(O){C=O,I||(I=!0,H())}function ne(O,W){D=x(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,K(R))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var Y=p;p=W;try{return O()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=p;p=O;try{return W()}finally{p=Y}},t.unstable_scheduleCallback=function(O,W,Y){var re=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,O){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Y+we,O={id:u++,callback:W,priorityLevel:O,startTime:Y,expirationTime:we,sortIndex:-1},Y>re?(O.sortIndex=Y,e(c,O),n(l)===null&&O===n(c)&&(y?(g(D),D=-1):y=!0,ne(E,Y-re))):(O.sortIndex=we,e(l,O),v||m||(v=!0,K(R))),O},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(O){var W=p;return function(){var Y=p;p=W;try{return O.apply(this,arguments)}finally{p=Y}}}}(B1)),B1}var yk;function nce(){return yk||(yk=1,U1.exports=tce()),U1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rce=function(e){var n={},r=T,i=nce(),s=Object.assign;function o(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)f+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),R=Symbol.iterator;function I(d){return d===null||typeof d!="object"?null:(d=R&&d[R]||d["@@iterator"],typeof d=="function"?d:null)}function C(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case u:return"Fragment";case c:return"Portal";case p:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case v:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case y:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case _:return f=d.displayName||null,f!==null?f:C(d.type)||"Memo";case S:f=d._payload,d=d._init;try{return C(d(f))}catch{}}return null}function D(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(f);case 8:return f===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function L(d){var f=d,w=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,f.flags&4098&&(w=f.return),d=f.return;while(d)}return f.tag===3?w:null}function P(d){if(L(d)!==d)throw Error(o(188))}function F(d){var f=d.alternate;if(!f){if(f=L(d),f===null)throw Error(o(188));return f!==d?null:d}for(var w=d,M=f;;){var A=w.return;if(A===null)break;var k=A.alternate;if(k===null){if(M=A.return,M!==null){w=M;continue}break}if(A.child===k.child){for(k=A.child;k;){if(k===w)return P(A),d;if(k===M)return P(A),f;k=k.sibling}throw Error(o(188))}if(w.return!==M.return)w=A,M=k;else{for(var G=!1,ie=A.child;ie;){if(ie===w){G=!0,w=A,M=k;break}if(ie===M){G=!0,M=A,w=k;break}ie=ie.sibling}if(!G){for(ie=k.child;ie;){if(ie===w){G=!0,w=k,M=A;break}if(ie===M){G=!0,M=k,w=A;break}ie=ie.sibling}if(!G)throw Error(o(189))}}if(w.alternate!==M)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?d:f}function z(d){return d=F(d),d!==null?H(d):null}function H(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=H(d);if(f!==null)return f;d=d.sibling}return null}function q(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var f=q(d);if(f!==null)return f}d=d.sibling}return null}var se=Array.isArray,K=e.getPublicInstance,ne=e.getRootHostContext,O=e.getChildHostContext,W=e.prepareForCommit,Y=e.resetAfterCommit,re=e.createInstance,we=e.appendInitialChild,Ue=e.finalizeInitialChildren,de=e.prepareUpdate,Se=e.shouldSetTextContent,Ie=e.createTextInstance,he=e.scheduleTimeout,ze=e.cancelTimeout,rt=e.noTimeout,je=e.isPrimaryRenderer,We=e.supportsMutation,fe=e.supportsPersistence,Me=e.supportsHydration,X=e.getInstanceFromNode,ot=e.preparePortalMount,Pe=e.getCurrentEventPriority,Ge=e.detachDeletedInstance,Be=e.supportsMicrotasks,_t=e.scheduleMicrotask,Ze=e.supportsTestSelectors,V=e.findFiberRoot,N=e.getBoundingRect,B=e.getTextContent,$=e.isHiddenSubtree,ae=e.matchAccessibilityRole,te=e.setFocusIfFocusable,pe=e.setupIntersectionObserver,me=e.appendChild,Ne=e.appendChildToContainer,xt=e.commitTextUpdate,Ce=e.commitMount,at=e.commitUpdate,vt=e.insertBefore,Rt=e.insertInContainerBefore,et=e.removeChild,J=e.removeChildFromContainer,Ee=e.resetTextContent,Xe=e.hideInstance,Z=e.hideTextInstance,ke=e.unhideInstance,xe=e.unhideTextInstance,Te=e.clearContainer,tt=e.cloneInstance,qe=e.createContainerChildSet,Nt=e.appendChildToContainerChildSet,cn=e.finalizeContainerChildren,Sn=e.replaceContainerChildren,Wt=e.cloneHiddenInstance,Zn=e.cloneHiddenTextInstance,Tr=e.canHydrateInstance,Q=e.canHydrateTextInstance,ce=e.canHydrateSuspenseInstance,ge=e.isSuspenseInstancePending,Le=e.isSuspenseInstanceFallback,$e=e.registerSuspenseInstanceRetry,wt=e.getNextHydratableSibling,Lt=e.getFirstHydratableChild,ht=e.getFirstHydratableChildWithinContainer,pt=e.getFirstHydratableChildWithinSuspenseInstance,lt=e.hydrateInstance,St=e.hydrateTextInstance,Ht=e.hydrateSuspenseInstance,ln=e.getNextHydratableInstanceAfterSuspenseInstance,Kn=e.commitHydratedContainer,U=e.commitHydratedSuspenseInstance,ee=e.clearSuspenseBoundary,ue=e.clearSuspenseBoundaryFromContainer,ye=e.shouldDeleteUnhydratedTailInstances,oe=e.didNotMatchHydratedContainerTextInstance,De=e.didNotMatchHydratedTextInstance,He;function dt(d){if(He===void 0)try{throw Error()}catch(w){var f=w.stack.trim().match(/\n( *(at )?)/);He=f&&f[1]||""}return`
`+He+d}var ft=!1;function It(d,f){if(!d||ft)return"";ft=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Ve){var M=Ve}Reflect.construct(d,[],f)}else{try{f.call()}catch(Ve){M=Ve}d.call(f.prototype)}else{try{throw Error()}catch(Ve){M=Ve}d()}}catch(Ve){if(Ve&&M&&typeof Ve.stack=="string"){for(var A=Ve.stack.split(`
`),k=M.stack.split(`
`),G=A.length-1,ie=k.length-1;1<=G&&0<=ie&&A[G]!==k[ie];)ie--;for(;1<=G&&0<=ie;G--,ie--)if(A[G]!==k[ie]){if(G!==1||ie!==1)do if(G--,ie--,0>ie||A[G]!==k[ie]){var be=`
`+A[G].replace(" at new "," at ");return d.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",d.displayName)),be}while(1<=G&&0<=ie);break}}}finally{ft=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?dt(d):""}var Ut=Object.prototype.hasOwnProperty,mt=[],it=-1;function Tt(d){return{current:d}}function At(d){0>it||(d.current=mt[it],mt[it]=null,it--)}function Vt(d,f){it++,mt[it]=d.current,d.current=f}var Mt={},Ye=Tt(Mt),Nn=Tt(!1),nn=Mt;function Ar(d,f){var w=d.type.contextTypes;if(!w)return Mt;var M=d.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===f)return M.__reactInternalMemoizedMaskedChildContext;var A={},k;for(k in w)A[k]=f[k];return M&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=A),A}function sr(d){return d=d.childContextTypes,d!=null}function Cr(){At(Nn),At(Ye)}function el(d,f,w){if(Ye.current!==Mt)throw Error(o(168));Vt(Ye,f),Vt(Nn,w)}function An(d,f,w){var M=d.stateNode;if(f=f.childContextTypes,typeof M.getChildContext!="function")return w;M=M.getChildContext();for(var A in M)if(!(A in f))throw Error(o(108,D(d)||"Unknown",A));return s({},w,M)}function ui(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Mt,nn=Ye.current,Vt(Ye,d),Vt(Nn,Nn.current),!0}function tl(d,f,w){var M=d.stateNode;if(!M)throw Error(o(169));w?(d=An(d,f,nn),M.__reactInternalMemoizedMergedChildContext=d,At(Nn),At(Ye),Vt(Ye,d)):At(Nn),Vt(Nn,w)}var Bn=Math.clz32?Math.clz32:Bg,xo=Math.log,_o=Math.LN2;function Bg(d){return d>>>=0,d===0?32:31-(xo(d)/_o|0)|0}var zg=64,Vg=4194304;function _h(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function jg(d,f){var w=d.pendingLanes;if(w===0)return 0;var M=0,A=d.suspendedLanes,k=d.pingedLanes,G=w&268435455;if(G!==0){var ie=G&~A;ie!==0?M=_h(ie):(k&=G,k!==0&&(M=_h(k)))}else G=w&~A,G!==0?M=_h(G):k!==0&&(M=_h(k));if(M===0)return 0;if(f!==0&&f!==M&&!(f&A)&&(A=M&-M,k=f&-f,A>=k||A===16&&(k&4194240)!==0))return f;if(M&4&&(M|=w&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=M;0<f;)w=31-Bn(f),A=1<<w,M|=d[w],f&=~A;return M}function Jj(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eH(d,f){for(var w=d.suspendedLanes,M=d.pingedLanes,A=d.expirationTimes,k=d.pendingLanes;0<k;){var G=31-Bn(k),ie=1<<G,be=A[G];be===-1?(!(ie&w)||ie&M)&&(A[G]=Jj(ie,f)):be<=f&&(d.expiredLanes|=ie),k&=~ie}}function jw(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Hw(d){for(var f=[],w=0;31>w;w++)f.push(d);return f}function wh(d,f,w){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-Bn(f),d[f]=w}function tH(d,f){var w=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var M=d.eventTimes;for(d=d.expirationTimes;0<w;){var A=31-Bn(w),k=1<<A;f[A]=0,M[A]=-1,d[A]=-1,w&=~k}}function Ww(d,f){var w=d.entangledLanes|=f;for(d=d.entanglements;w;){var M=31-Bn(w),A=1<<M;A&f|d[M]&f&&(d[M]|=f),w&=~A}}var yn=0;function mR(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var Gw=i.unstable_scheduleCallback,gR=i.unstable_cancelCallback,nH=i.unstable_shouldYield,rH=i.unstable_requestPaint,Rr=i.unstable_now,Xw=i.unstable_ImmediatePriority,iH=i.unstable_UserBlockingPriority,$w=i.unstable_NormalPriority,sH=i.unstable_IdlePriority,Hg=null,wo=null;function oH(d){if(wo&&typeof wo.onCommitFiberRoot=="function")try{wo.onCommitFiberRoot(Hg,d,void 0,(d.current.flags&128)===128)}catch{}}function aH(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var So=typeof Object.is=="function"?Object.is:aH,ia=null,Wg=!1,Yw=!1;function vR(d){ia===null?ia=[d]:ia.push(d)}function lH(d){Wg=!0,vR(d)}function bo(){if(!Yw&&ia!==null){Yw=!0;var d=0,f=yn;try{var w=ia;for(yn=1;d<w.length;d++){var M=w[d];do M=M(!0);while(M!==null)}ia=null,Wg=!1}catch(A){throw ia!==null&&(ia=ia.slice(d+1)),Gw(Xw,bo),A}finally{yn=f,Yw=!1}}return null}var cH=a.ReactCurrentBatchConfig;function Gg(d,f){if(So(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var w=Object.keys(d),M=Object.keys(f);if(w.length!==M.length)return!1;for(M=0;M<w.length;M++){var A=w[M];if(!Ut.call(f,A)||!So(d[A],f[A]))return!1}return!0}function uH(d){switch(d.tag){case 5:return dt(d.type);case 16:return dt("Lazy");case 13:return dt("Suspense");case 19:return dt("SuspenseList");case 0:case 2:case 15:return d=It(d.type,!1),d;case 11:return d=It(d.type.render,!1),d;case 1:return d=It(d.type,!0),d;default:return""}}function Bs(d,f){if(d&&d.defaultProps){f=s({},f),d=d.defaultProps;for(var w in d)f[w]===void 0&&(f[w]=d[w]);return f}return f}var Xg=Tt(null),$g=null,rd=null,qw=null;function Zw(){qw=rd=$g=null}function yR(d,f,w){je?(Vt(Xg,f._currentValue),f._currentValue=w):(Vt(Xg,f._currentValue2),f._currentValue2=w)}function Kw(d){var f=Xg.current;At(Xg),je?d._currentValue=f:d._currentValue2=f}function Qw(d,f,w){for(;d!==null;){var M=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,M!==null&&(M.childLanes|=f)):M!==null&&(M.childLanes&f)!==f&&(M.childLanes|=f),d===w)break;d=d.return}}function id(d,f){$g=d,qw=rd=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&f&&(Gi=!0),d.firstContext=null)}function ds(d){var f=je?d._currentValue:d._currentValue2;if(qw!==d)if(d={context:d,memoizedValue:f,next:null},rd===null){if($g===null)throw Error(o(308));rd=d,$g.dependencies={lanes:0,firstContext:d}}else rd=rd.next=d;return f}var Mo=null,nl=!1;function Jw(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xR(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function sa(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function rl(d,f){var w=d.updateQueue;w!==null&&(w=w.shared,pr!==null&&d.mode&1&&!(an&2)?(d=w.interleaved,d===null?(f.next=f,Mo===null?Mo=[w]:Mo.push(w)):(f.next=d.next,d.next=f),w.interleaved=f):(d=w.pending,d===null?f.next=f:(f.next=d.next,d.next=f),w.pending=f))}function Yg(d,f,w){if(f=f.updateQueue,f!==null&&(f=f.shared,(w&4194240)!==0)){var M=f.lanes;M&=d.pendingLanes,w|=M,f.lanes=w,Ww(d,w)}}function _R(d,f){var w=d.updateQueue,M=d.alternate;if(M!==null&&(M=M.updateQueue,w===M)){var A=null,k=null;if(w=w.firstBaseUpdate,w!==null){do{var G={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};k===null?A=k=G:k=k.next=G,w=w.next}while(w!==null);k===null?A=k=f:k=k.next=f}else A=k=f;w={baseState:M.baseState,firstBaseUpdate:A,lastBaseUpdate:k,shared:M.shared,effects:M.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=f:d.next=f,w.lastBaseUpdate=f}function qg(d,f,w,M){var A=d.updateQueue;nl=!1;var k=A.firstBaseUpdate,G=A.lastBaseUpdate,ie=A.shared.pending;if(ie!==null){A.shared.pending=null;var be=ie,Ve=be.next;be.next=null,G===null?k=Ve:G.next=Ve,G=be;var yt=d.alternate;yt!==null&&(yt=yt.updateQueue,ie=yt.lastBaseUpdate,ie!==G&&(ie===null?yt.firstBaseUpdate=Ve:ie.next=Ve,yt.lastBaseUpdate=be))}if(k!==null){var Gt=A.baseState;G=0,yt=Ve=be=null,ie=k;do{var Dt=ie.lane,In=ie.eventTime;if((M&Dt)===Dt){yt!==null&&(yt=yt.next={eventTime:In,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var Pt=d,$r=ie;switch(Dt=f,In=w,$r.tag){case 1:if(Pt=$r.payload,typeof Pt=="function"){Gt=Pt.call(In,Gt,Dt);break e}Gt=Pt;break e;case 3:Pt.flags=Pt.flags&-65537|128;case 0:if(Pt=$r.payload,Dt=typeof Pt=="function"?Pt.call(In,Gt,Dt):Pt,Dt==null)break e;Gt=s({},Gt,Dt);break e;case 2:nl=!0}}ie.callback!==null&&ie.lane!==0&&(d.flags|=64,Dt=A.effects,Dt===null?A.effects=[ie]:Dt.push(ie))}else In={eventTime:In,lane:Dt,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},yt===null?(Ve=yt=In,be=Gt):yt=yt.next=In,G|=Dt;if(ie=ie.next,ie===null){if(ie=A.shared.pending,ie===null)break;Dt=ie,ie=Dt.next,Dt.next=null,A.lastBaseUpdate=Dt,A.shared.pending=null}}while(!0);if(yt===null&&(be=Gt),A.baseState=be,A.firstBaseUpdate=Ve,A.lastBaseUpdate=yt,f=A.shared.interleaved,f!==null){A=f;do G|=A.lane,A=A.next;while(A!==f)}else k===null&&(A.shared.lanes=0);hd|=G,d.lanes=G,d.memoizedState=Gt}}function wR(d,f,w){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var M=d[f],A=M.callback;if(A!==null){if(M.callback=null,M=w,typeof A!="function")throw Error(o(191,A));A.call(M)}}}var SR=new r.Component().refs;function eS(d,f,w,M){f=d.memoizedState,w=w(M,f),w=w==null?f:s({},f,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var Zg={isMounted:function(d){return(d=d._reactInternals)?L(d)===d:!1},enqueueSetState:function(d,f,w){d=d._reactInternals;var M=fi(),A=ol(d),k=sa(M,A);k.payload=f,w!=null&&(k.callback=w),rl(d,k),f=gs(d,A,M),f!==null&&Yg(f,d,A)},enqueueReplaceState:function(d,f,w){d=d._reactInternals;var M=fi(),A=ol(d),k=sa(M,A);k.tag=1,k.payload=f,w!=null&&(k.callback=w),rl(d,k),f=gs(d,A,M),f!==null&&Yg(f,d,A)},enqueueForceUpdate:function(d,f){d=d._reactInternals;var w=fi(),M=ol(d),A=sa(w,M);A.tag=2,f!=null&&(A.callback=f),rl(d,A),f=gs(d,M,w),f!==null&&Yg(f,d,M)}};function bR(d,f,w,M,A,k,G){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(M,k,G):f.prototype&&f.prototype.isPureReactComponent?!Gg(w,M)||!Gg(A,k):!0}function MR(d,f,w){var M=!1,A=Mt,k=f.contextType;return typeof k=="object"&&k!==null?k=ds(k):(A=sr(f)?nn:Ye.current,M=f.contextTypes,k=(M=M!=null)?Ar(d,A):Mt),f=new f(w,k),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Zg,d.stateNode=f,f._reactInternals=d,M&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=A,d.__reactInternalMemoizedMaskedChildContext=k),f}function ER(d,f,w,M){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(w,M),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(w,M),f.state!==d&&Zg.enqueueReplaceState(f,f.state,null)}function tS(d,f,w,M){var A=d.stateNode;A.props=w,A.state=d.memoizedState,A.refs=SR,Jw(d);var k=f.contextType;typeof k=="object"&&k!==null?A.context=ds(k):(k=sr(f)?nn:Ye.current,A.context=Ar(d,k)),A.state=d.memoizedState,k=f.getDerivedStateFromProps,typeof k=="function"&&(eS(d,f,k,w),A.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(f=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),f!==A.state&&Zg.enqueueReplaceState(A,A.state,null),qg(d,w,A,M),A.state=d.memoizedState),typeof A.componentDidMount=="function"&&(d.flags|=4194308)}var sd=[],od=0,Kg=null,Qg=0,fs=[],hs=0,_c=null,oa=1,aa="";function wc(d,f){sd[od++]=Qg,sd[od++]=Kg,Kg=d,Qg=f}function TR(d,f,w){fs[hs++]=oa,fs[hs++]=aa,fs[hs++]=_c,_c=d;var M=oa;d=aa;var A=32-Bn(M)-1;M&=~(1<<A),w+=1;var k=32-Bn(f)+A;if(30<k){var G=A-A%5;k=(M&(1<<G)-1).toString(32),M>>=G,A-=G,oa=1<<32-Bn(f)+A|w<<A|M,aa=k+d}else oa=1<<k|w<<A|M,aa=d}function nS(d){d.return!==null&&(wc(d,1),TR(d,1,0))}function rS(d){for(;d===Kg;)Kg=sd[--od],sd[od]=null,Qg=sd[--od],sd[od]=null;for(;d===_c;)_c=fs[--hs],fs[hs]=null,aa=fs[--hs],fs[hs]=null,oa=fs[--hs],fs[hs]=null}var Hi=null,Wi=null,zn=!1,Sh=!1,zs=null;function AR(d,f){var w=vs(5,null,null,0);w.elementType="DELETED",w.stateNode=f,w.return=d,f=d.deletions,f===null?(d.deletions=[w],d.flags|=16):f.push(w)}function CR(d,f){switch(d.tag){case 5:return f=Tr(f,d.type,d.pendingProps),f!==null?(d.stateNode=f,Hi=d,Wi=Lt(f),!0):!1;case 6:return f=Q(f,d.pendingProps),f!==null?(d.stateNode=f,Hi=d,Wi=null,!0):!1;case 13:if(f=ce(f),f!==null){var w=_c!==null?{id:oa,overflow:aa}:null;return d.memoizedState={dehydrated:f,treeContext:w,retryLane:1073741824},w=vs(18,null,null,0),w.stateNode=f,w.return=d,d.child=w,Hi=d,Wi=null,!0}return!1;default:return!1}}function iS(d){return(d.mode&1)!==0&&(d.flags&128)===0}function sS(d){if(zn){var f=Wi;if(f){var w=f;if(!CR(d,f)){if(iS(d))throw Error(o(418));f=wt(w);var M=Hi;f&&CR(d,f)?AR(M,w):(d.flags=d.flags&-4097|2,zn=!1,Hi=d)}}else{if(iS(d))throw Error(o(418));d.flags=d.flags&-4097|2,zn=!1,Hi=d}}}function RR(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Hi=d}function bh(d){if(!Me||d!==Hi)return!1;if(!zn)return RR(d),zn=!0,!1;if(d.tag!==3&&(d.tag!==5||ye(d.type)&&!Se(d.type,d.memoizedProps))){var f=Wi;if(f){if(iS(d)){for(d=Wi;d;)d=wt(d);throw Error(o(418))}for(;f;)AR(d,f),f=wt(f)}}if(RR(d),d.tag===13){if(!Me)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Wi=ln(d)}else Wi=Hi?wt(d.stateNode):null;return!0}function ad(){Me&&(Wi=Hi=null,Sh=zn=!1)}function oS(d){zs===null?zs=[d]:zs.push(d)}function Mh(d,f,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var M=w.stateNode}if(!M)throw Error(o(147,d));var A=M,k=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===k?f.ref:(f=function(G){var ie=A.refs;ie===SR&&(ie=A.refs={}),G===null?delete ie[k]:ie[k]=G},f._stringRef=k,f)}if(typeof d!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,d))}return d}function Jg(d,f){throw d=Object.prototype.toString.call(f),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function PR(d){var f=d._init;return f(d._payload)}function NR(d){function f(ve,le){if(d){var _e=ve.deletions;_e===null?(ve.deletions=[le],ve.flags|=16):_e.push(le)}}function w(ve,le){if(!d)return null;for(;le!==null;)f(ve,le),le=le.sibling;return null}function M(ve,le){for(ve=new Map;le!==null;)le.key!==null?ve.set(le.key,le):ve.set(le.index,le),le=le.sibling;return ve}function A(ve,le){return ve=ll(ve,le),ve.index=0,ve.sibling=null,ve}function k(ve,le,_e){return ve.index=_e,d?(_e=ve.alternate,_e!==null?(_e=_e.index,_e<le?(ve.flags|=2,le):_e):(ve.flags|=2,le)):(ve.flags|=1048576,le)}function G(ve){return d&&ve.alternate===null&&(ve.flags|=2),ve}function ie(ve,le,_e,st){return le===null||le.tag!==6?(le=HS(_e,ve.mode,st),le.return=ve,le):(le=A(le,_e),le.return=ve,le)}function be(ve,le,_e,st){var Ct=_e.type;return Ct===u?yt(ve,le,_e.props.children,st,_e.key):le!==null&&(le.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===S&&PR(Ct)===le.type)?(st=A(le,_e.props),st.ref=Mh(ve,le,_e),st.return=ve,st):(st=Pv(_e.type,_e.key,_e.props,null,ve.mode,st),st.ref=Mh(ve,le,_e),st.return=ve,st)}function Ve(ve,le,_e,st){return le===null||le.tag!==4||le.stateNode.containerInfo!==_e.containerInfo||le.stateNode.implementation!==_e.implementation?(le=WS(_e,ve.mode,st),le.return=ve,le):(le=A(le,_e.children||[]),le.return=ve,le)}function yt(ve,le,_e,st,Ct){return le===null||le.tag!==7?(le=Cc(_e,ve.mode,st,Ct),le.return=ve,le):(le=A(le,_e),le.return=ve,le)}function Gt(ve,le,_e){if(typeof le=="string"&&le!==""||typeof le=="number")return le=HS(""+le,ve.mode,_e),le.return=ve,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case l:return _e=Pv(le.type,le.key,le.props,null,ve.mode,_e),_e.ref=Mh(ve,null,le),_e.return=ve,_e;case c:return le=WS(le,ve.mode,_e),le.return=ve,le;case S:var st=le._init;return Gt(ve,st(le._payload),_e)}if(se(le)||I(le))return le=Cc(le,ve.mode,_e,null),le.return=ve,le;Jg(ve,le)}return null}function Dt(ve,le,_e,st){var Ct=le!==null?le.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return Ct!==null?null:ie(ve,le,""+_e,st);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case l:return _e.key===Ct?be(ve,le,_e,st):null;case c:return _e.key===Ct?Ve(ve,le,_e,st):null;case S:return Ct=_e._init,Dt(ve,le,Ct(_e._payload),st)}if(se(_e)||I(_e))return Ct!==null?null:yt(ve,le,_e,st,null);Jg(ve,_e)}return null}function In(ve,le,_e,st,Ct){if(typeof st=="string"&&st!==""||typeof st=="number")return ve=ve.get(_e)||null,ie(le,ve,""+st,Ct);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case l:return ve=ve.get(st.key===null?_e:st.key)||null,be(le,ve,st,Ct);case c:return ve=ve.get(st.key===null?_e:st.key)||null,Ve(le,ve,st,Ct);case S:var rn=st._init;return In(ve,le,_e,rn(st._payload),Ct)}if(se(st)||I(st))return ve=ve.get(_e)||null,yt(le,ve,st,Ct,null);Jg(le,st)}return null}function Pt(ve,le,_e,st){for(var Ct=null,rn=null,Xt=le,xn=le=0,Nr=null;Xt!==null&&xn<_e.length;xn++){Xt.index>xn?(Nr=Xt,Xt=null):Nr=Xt.sibling;var _n=Dt(ve,Xt,_e[xn],st);if(_n===null){Xt===null&&(Xt=Nr);break}d&&Xt&&_n.alternate===null&&f(ve,Xt),le=k(_n,le,xn),rn===null?Ct=_n:rn.sibling=_n,rn=_n,Xt=Nr}if(xn===_e.length)return w(ve,Xt),zn&&wc(ve,xn),Ct;if(Xt===null){for(;xn<_e.length;xn++)Xt=Gt(ve,_e[xn],st),Xt!==null&&(le=k(Xt,le,xn),rn===null?Ct=Xt:rn.sibling=Xt,rn=Xt);return zn&&wc(ve,xn),Ct}for(Xt=M(ve,Xt);xn<_e.length;xn++)Nr=In(Xt,ve,xn,_e[xn],st),Nr!==null&&(d&&Nr.alternate!==null&&Xt.delete(Nr.key===null?xn:Nr.key),le=k(Nr,le,xn),rn===null?Ct=Nr:rn.sibling=Nr,rn=Nr);return d&&Xt.forEach(function(cl){return f(ve,cl)}),zn&&wc(ve,xn),Ct}function $r(ve,le,_e,st){var Ct=I(_e);if(typeof Ct!="function")throw Error(o(150));if(_e=Ct.call(_e),_e==null)throw Error(o(151));for(var rn=Ct=null,Xt=le,xn=le=0,Nr=null,_n=_e.next();Xt!==null&&!_n.done;xn++,_n=_e.next()){Xt.index>xn?(Nr=Xt,Xt=null):Nr=Xt.sibling;var cl=Dt(ve,Xt,_n.value,st);if(cl===null){Xt===null&&(Xt=Nr);break}d&&Xt&&cl.alternate===null&&f(ve,Xt),le=k(cl,le,xn),rn===null?Ct=cl:rn.sibling=cl,rn=cl,Xt=Nr}if(_n.done)return w(ve,Xt),zn&&wc(ve,xn),Ct;if(Xt===null){for(;!_n.done;xn++,_n=_e.next())_n=Gt(ve,_n.value,st),_n!==null&&(le=k(_n,le,xn),rn===null?Ct=_n:rn.sibling=_n,rn=_n);return zn&&wc(ve,xn),Ct}for(Xt=M(ve,Xt);!_n.done;xn++,_n=_e.next())_n=In(Xt,ve,xn,_n.value,st),_n!==null&&(d&&_n.alternate!==null&&Xt.delete(_n.key===null?xn:_n.key),le=k(_n,le,xn),rn===null?Ct=_n:rn.sibling=_n,rn=_n);return d&&Xt.forEach(function(zH){return f(ve,zH)}),zn&&wc(ve,xn),Ct}function ys(ve,le,_e,st){if(typeof _e=="object"&&_e!==null&&_e.type===u&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case l:e:{for(var Ct=_e.key,rn=le;rn!==null;){if(rn.key===Ct){if(Ct=_e.type,Ct===u){if(rn.tag===7){w(ve,rn.sibling),le=A(rn,_e.props.children),le.return=ve,ve=le;break e}}else if(rn.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===S&&PR(Ct)===rn.type){w(ve,rn.sibling),le=A(rn,_e.props),le.ref=Mh(ve,rn,_e),le.return=ve,ve=le;break e}w(ve,rn);break}else f(ve,rn);rn=rn.sibling}_e.type===u?(le=Cc(_e.props.children,ve.mode,st,_e.key),le.return=ve,ve=le):(st=Pv(_e.type,_e.key,_e.props,null,ve.mode,st),st.ref=Mh(ve,le,_e),st.return=ve,ve=st)}return G(ve);case c:e:{for(rn=_e.key;le!==null;){if(le.key===rn)if(le.tag===4&&le.stateNode.containerInfo===_e.containerInfo&&le.stateNode.implementation===_e.implementation){w(ve,le.sibling),le=A(le,_e.children||[]),le.return=ve,ve=le;break e}else{w(ve,le);break}else f(ve,le);le=le.sibling}le=WS(_e,ve.mode,st),le.return=ve,ve=le}return G(ve);case S:return rn=_e._init,ys(ve,le,rn(_e._payload),st)}if(se(_e))return Pt(ve,le,_e,st);if(I(_e))return $r(ve,le,_e,st);Jg(ve,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,le!==null&&le.tag===6?(w(ve,le.sibling),le=A(le,_e),le.return=ve,ve=le):(w(ve,le),le=HS(_e,ve.mode,st),le.return=ve,ve=le),G(ve)):w(ve,le)}return ys}var ld=NR(!0),IR=NR(!1),Eh={},ps=Tt(Eh),Th=Tt(Eh),cd=Tt(Eh);function Eo(d){if(d===Eh)throw Error(o(174));return d}function aS(d,f){Vt(cd,f),Vt(Th,d),Vt(ps,Eh),d=ne(f),At(ps),Vt(ps,d)}function ud(){At(ps),At(Th),At(cd)}function LR(d){var f=Eo(cd.current),w=Eo(ps.current);f=O(w,d.type,f),w!==f&&(Vt(Th,d),Vt(ps,f))}function lS(d){Th.current===d&&(At(ps),At(Th))}var Hn=Tt(0);function ev(d){for(var f=d;f!==null;){if(f.tag===13){var w=f.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||ge(w)||Le(w)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var cS=[];function uS(){for(var d=0;d<cS.length;d++){var f=cS[d];je?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}cS.length=0}var tv=a.ReactCurrentDispatcher,ms=a.ReactCurrentBatchConfig,dd=0,Qn=null,Wr=null,Pr=null,nv=!1,Ah=!1,Ch=0,dH=0;function Gr(){throw Error(o(321))}function dS(d,f){if(f===null)return!1;for(var w=0;w<f.length&&w<d.length;w++)if(!So(d[w],f[w]))return!1;return!0}function fS(d,f,w,M,A,k){if(dd=k,Qn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,tv.current=d===null||d.memoizedState===null?mH:gH,d=w(M,A),Ah){k=0;do{if(Ah=!1,Ch=0,25<=k)throw Error(o(301));k+=1,Pr=Wr=null,f.updateQueue=null,tv.current=vH,d=w(M,A)}while(Ah)}if(tv.current=av,f=Wr!==null&&Wr.next!==null,dd=0,Pr=Wr=Qn=null,nv=!1,f)throw Error(o(300));return d}function hS(){var d=Ch!==0;return Ch=0,d}function la(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?Qn.memoizedState=Pr=d:Pr=Pr.next=d,Pr}function To(){if(Wr===null){var d=Qn.alternate;d=d!==null?d.memoizedState:null}else d=Wr.next;var f=Pr===null?Qn.memoizedState:Pr.next;if(f!==null)Pr=f,Wr=d;else{if(d===null)throw Error(o(310));Wr=d,d={memoizedState:Wr.memoizedState,baseState:Wr.baseState,baseQueue:Wr.baseQueue,queue:Wr.queue,next:null},Pr===null?Qn.memoizedState=Pr=d:Pr=Pr.next=d}return Pr}function Sc(d,f){return typeof f=="function"?f(d):f}function rv(d){var f=To(),w=f.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var M=Wr,A=M.baseQueue,k=w.pending;if(k!==null){if(A!==null){var G=A.next;A.next=k.next,k.next=G}M.baseQueue=A=k,w.pending=null}if(A!==null){k=A.next,M=M.baseState;var ie=G=null,be=null,Ve=k;do{var yt=Ve.lane;if((dd&yt)===yt)be!==null&&(be=be.next={lane:0,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null}),M=Ve.hasEagerState?Ve.eagerState:d(M,Ve.action);else{var Gt={lane:yt,action:Ve.action,hasEagerState:Ve.hasEagerState,eagerState:Ve.eagerState,next:null};be===null?(ie=be=Gt,G=M):be=be.next=Gt,Qn.lanes|=yt,hd|=yt}Ve=Ve.next}while(Ve!==null&&Ve!==k);be===null?G=M:be.next=ie,So(M,f.memoizedState)||(Gi=!0),f.memoizedState=M,f.baseState=G,f.baseQueue=be,w.lastRenderedState=M}if(d=w.interleaved,d!==null){A=d;do k=A.lane,Qn.lanes|=k,hd|=k,A=A.next;while(A!==d)}else A===null&&(w.lanes=0);return[f.memoizedState,w.dispatch]}function iv(d){var f=To(),w=f.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var M=w.dispatch,A=w.pending,k=f.memoizedState;if(A!==null){w.pending=null;var G=A=A.next;do k=d(k,G.action),G=G.next;while(G!==A);So(k,f.memoizedState)||(Gi=!0),f.memoizedState=k,f.baseQueue===null&&(f.baseState=k),w.lastRenderedState=k}return[k,M]}function DR(){}function kR(d,f){var w=Qn,M=To(),A=f(),k=!So(M.memoizedState,A);if(k&&(M.memoizedState=A,Gi=!0),M=M.queue,Ph(UR.bind(null,w,M,d),[d]),M.getSnapshot!==f||k||Pr!==null&&Pr.memoizedState.tag&1){if(w.flags|=2048,Rh(9,FR.bind(null,w,M,A,f),void 0,null),pr===null)throw Error(o(349));dd&30||OR(w,f,A)}return A}function OR(d,f,w){d.flags|=16384,d={getSnapshot:f,value:w},f=Qn.updateQueue,f===null?(f={lastEffect:null,stores:null},Qn.updateQueue=f,f.stores=[d]):(w=f.stores,w===null?f.stores=[d]:w.push(d))}function FR(d,f,w,M){f.value=w,f.getSnapshot=M,BR(f)&&gs(d,1,-1)}function UR(d,f,w){return w(function(){BR(f)&&gs(d,1,-1)})}function BR(d){var f=d.getSnapshot;d=d.value;try{var w=f();return!So(d,w)}catch{return!0}}function pS(d){var f=la();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sc,lastRenderedState:d},f.queue=d,d=d.dispatch=pH.bind(null,Qn,d),[f.memoizedState,d]}function Rh(d,f,w,M){return d={tag:d,create:f,destroy:w,deps:M,next:null},f=Qn.updateQueue,f===null?(f={lastEffect:null,stores:null},Qn.updateQueue=f,f.lastEffect=d.next=d):(w=f.lastEffect,w===null?f.lastEffect=d.next=d:(M=w.next,w.next=d,d.next=M,f.lastEffect=d)),d}function zR(){return To().memoizedState}function sv(d,f,w,M){var A=la();Qn.flags|=d,A.memoizedState=Rh(1|f,w,void 0,M===void 0?null:M)}function ov(d,f,w,M){var A=To();M=M===void 0?null:M;var k=void 0;if(Wr!==null){var G=Wr.memoizedState;if(k=G.destroy,M!==null&&dS(M,G.deps)){A.memoizedState=Rh(f,w,k,M);return}}Qn.flags|=d,A.memoizedState=Rh(1|f,w,k,M)}function mS(d,f){return sv(8390656,8,d,f)}function Ph(d,f){return ov(2048,8,d,f)}function VR(d,f){return ov(4,2,d,f)}function jR(d,f){return ov(4,4,d,f)}function HR(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function WR(d,f,w){return w=w!=null?w.concat([d]):null,ov(4,4,HR.bind(null,f,d),w)}function gS(){}function GR(d,f){var w=To();f=f===void 0?null:f;var M=w.memoizedState;return M!==null&&f!==null&&dS(f,M[1])?M[0]:(w.memoizedState=[d,f],d)}function XR(d,f){var w=To();f=f===void 0?null:f;var M=w.memoizedState;return M!==null&&f!==null&&dS(f,M[1])?M[0]:(d=d(),w.memoizedState=[d,f],d)}function fH(d,f){var w=yn;yn=w!==0&&4>w?w:4,d(!0);var M=ms.transition;ms.transition={};try{d(!1),f()}finally{yn=w,ms.transition=M}}function $R(){return To().memoizedState}function hH(d,f,w){var M=ol(d);w={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null},YR(d)?qR(f,w):(ZR(d,f,w),w=fi(),d=gs(d,M,w),d!==null&&KR(d,f,M))}function pH(d,f,w){var M=ol(d),A={lane:M,action:w,hasEagerState:!1,eagerState:null,next:null};if(YR(d))qR(f,A);else{ZR(d,f,A);var k=d.alternate;if(d.lanes===0&&(k===null||k.lanes===0)&&(k=f.lastRenderedReducer,k!==null))try{var G=f.lastRenderedState,ie=k(G,w);if(A.hasEagerState=!0,A.eagerState=ie,So(ie,G))return}catch{}finally{}w=fi(),d=gs(d,M,w),d!==null&&KR(d,f,M)}}function YR(d){var f=d.alternate;return d===Qn||f!==null&&f===Qn}function qR(d,f){Ah=nv=!0;var w=d.pending;w===null?f.next=f:(f.next=w.next,w.next=f),d.pending=f}function ZR(d,f,w){pr!==null&&d.mode&1&&!(an&2)?(d=f.interleaved,d===null?(w.next=w,Mo===null?Mo=[f]:Mo.push(f)):(w.next=d.next,d.next=w),f.interleaved=w):(d=f.pending,d===null?w.next=w:(w.next=d.next,d.next=w),f.pending=w)}function KR(d,f,w){if(w&4194240){var M=f.lanes;M&=d.pendingLanes,w|=M,f.lanes=w,Ww(d,w)}}var av={readContext:ds,useCallback:Gr,useContext:Gr,useEffect:Gr,useImperativeHandle:Gr,useInsertionEffect:Gr,useLayoutEffect:Gr,useMemo:Gr,useReducer:Gr,useRef:Gr,useState:Gr,useDebugValue:Gr,useDeferredValue:Gr,useTransition:Gr,useMutableSource:Gr,useSyncExternalStore:Gr,useId:Gr,unstable_isNewReconciler:!1},mH={readContext:ds,useCallback:function(d,f){return la().memoizedState=[d,f===void 0?null:f],d},useContext:ds,useEffect:mS,useImperativeHandle:function(d,f,w){return w=w!=null?w.concat([d]):null,sv(4194308,4,HR.bind(null,f,d),w)},useLayoutEffect:function(d,f){return sv(4194308,4,d,f)},useInsertionEffect:function(d,f){return sv(4,2,d,f)},useMemo:function(d,f){var w=la();return f=f===void 0?null:f,d=d(),w.memoizedState=[d,f],d},useReducer:function(d,f,w){var M=la();return f=w!==void 0?w(f):f,M.memoizedState=M.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},M.queue=d,d=d.dispatch=hH.bind(null,Qn,d),[M.memoizedState,d]},useRef:function(d){var f=la();return d={current:d},f.memoizedState=d},useState:pS,useDebugValue:gS,useDeferredValue:function(d){var f=pS(d),w=f[0],M=f[1];return mS(function(){var A=ms.transition;ms.transition={};try{M(d)}finally{ms.transition=A}},[d]),w},useTransition:function(){var d=pS(!1),f=d[0];return d=fH.bind(null,d[1]),la().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,w){var M=Qn,A=la();if(zn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=f(),pr===null)throw Error(o(349));dd&30||OR(M,f,w)}A.memoizedState=w;var k={value:w,getSnapshot:f};return A.queue=k,mS(UR.bind(null,M,k,d),[d]),M.flags|=2048,Rh(9,FR.bind(null,M,k,w,f),void 0,null),w},useId:function(){var d=la(),f=pr.identifierPrefix;if(zn){var w=aa,M=oa;w=(M&~(1<<32-Bn(M)-1)).toString(32)+w,f=":"+f+"R"+w,w=Ch++,0<w&&(f+="H"+w.toString(32)),f+=":"}else w=dH++,f=":"+f+"r"+w.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},gH={readContext:ds,useCallback:GR,useContext:ds,useEffect:Ph,useImperativeHandle:WR,useInsertionEffect:VR,useLayoutEffect:jR,useMemo:XR,useReducer:rv,useRef:zR,useState:function(){return rv(Sc)},useDebugValue:gS,useDeferredValue:function(d){var f=rv(Sc),w=f[0],M=f[1];return Ph(function(){var A=ms.transition;ms.transition={};try{M(d)}finally{ms.transition=A}},[d]),w},useTransition:function(){var d=rv(Sc)[0],f=To().memoizedState;return[d,f]},useMutableSource:DR,useSyncExternalStore:kR,useId:$R,unstable_isNewReconciler:!1},vH={readContext:ds,useCallback:GR,useContext:ds,useEffect:Ph,useImperativeHandle:WR,useInsertionEffect:VR,useLayoutEffect:jR,useMemo:XR,useReducer:iv,useRef:zR,useState:function(){return iv(Sc)},useDebugValue:gS,useDeferredValue:function(d){var f=iv(Sc),w=f[0],M=f[1];return Ph(function(){var A=ms.transition;ms.transition={};try{M(d)}finally{ms.transition=A}},[d]),w},useTransition:function(){var d=iv(Sc)[0],f=To().memoizedState;return[d,f]},useMutableSource:DR,useSyncExternalStore:kR,useId:$R,unstable_isNewReconciler:!1};function vS(d,f){try{var w="",M=f;do w+=uH(M),M=M.return;while(M);var A=w}catch(k){A=`
Error generating stack: `+k.message+`
`+k.stack}return{value:d,source:f,stack:A}}function yS(d,f){try{console.error(f.value)}catch(w){setTimeout(function(){throw w})}}var yH=typeof WeakMap=="function"?WeakMap:Map;function QR(d,f,w){w=sa(-1,w),w.tag=3,w.payload={element:null};var M=f.value;return w.callback=function(){bv||(bv=!0,OS=M),yS(d,f)},w}function JR(d,f,w){w=sa(-1,w),w.tag=3;var M=d.type.getDerivedStateFromError;if(typeof M=="function"){var A=f.value;w.payload=function(){return M(A)},w.callback=function(){yS(d,f)}}var k=d.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(w.callback=function(){yS(d,f),typeof M!="function"&&(il===null?il=new Set([this]):il.add(this));var G=f.stack;this.componentDidCatch(f.value,{componentStack:G!==null?G:""})}),w}function eP(d,f,w){var M=d.pingCache;if(M===null){M=d.pingCache=new yH;var A=new Set;M.set(f,A)}else A=M.get(f),A===void 0&&(A=new Set,M.set(f,A));A.has(w)||(A.add(w),d=IH.bind(null,d,f,w),f.then(d,d))}function tP(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function nP(d,f,w,M,A){return d.mode&1?(d.flags|=65536,d.lanes=A,d):(d===f?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(f=sa(-1,1),f.tag=2,rl(w,f))),w.lanes|=1),d)}function Ao(d){d.flags|=4}function rP(d,f){if(d!==null&&d.child===f.child)return!0;if(f.flags&16)return!1;for(d=f.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var Nh,Ih,lv,cv;if(We)Nh=function(d,f){for(var w=f.child;w!==null;){if(w.tag===5||w.tag===6)we(d,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===f)break;for(;w.sibling===null;){if(w.return===null||w.return===f)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Ih=function(){},lv=function(d,f,w,M,A){if(d=d.memoizedProps,d!==M){var k=f.stateNode,G=Eo(ps.current);w=de(k,w,d,M,A,G),(f.updateQueue=w)&&Ao(f)}},cv=function(d,f,w,M){w!==M&&Ao(f)};else if(fe){Nh=function(d,f,w,M){for(var A=f.child;A!==null;){if(A.tag===5){var k=A.stateNode;w&&M&&(k=Wt(k,A.type,A.memoizedProps,A)),we(d,k)}else if(A.tag===6)k=A.stateNode,w&&M&&(k=Zn(k,A.memoizedProps,A)),we(d,k);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)k=A.child,k!==null&&(k.return=A),Nh(d,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var iP=function(d,f,w,M){for(var A=f.child;A!==null;){if(A.tag===5){var k=A.stateNode;w&&M&&(k=Wt(k,A.type,A.memoizedProps,A)),Nt(d,k)}else if(A.tag===6)k=A.stateNode,w&&M&&(k=Zn(k,A.memoizedProps,A)),Nt(d,k);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)k=A.child,k!==null&&(k.return=A),iP(d,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};Ih=function(d,f){var w=f.stateNode;if(!rP(d,f)){d=w.containerInfo;var M=qe(d);iP(M,f,!1,!1),w.pendingChildren=M,Ao(f),cn(d,M)}},lv=function(d,f,w,M,A){var k=d.stateNode,G=d.memoizedProps;if((d=rP(d,f))&&G===M)f.stateNode=k;else{var ie=f.stateNode,be=Eo(ps.current),Ve=null;G!==M&&(Ve=de(ie,w,G,M,A,be)),d&&Ve===null?f.stateNode=k:(k=tt(k,Ve,w,G,M,f,d,ie),Ue(k,w,M,A,be)&&Ao(f),f.stateNode=k,d?Ao(f):Nh(k,f,!1,!1))}},cv=function(d,f,w,M){w!==M?(d=Eo(cd.current),w=Eo(ps.current),f.stateNode=Ie(M,d,w,f),Ao(f)):f.stateNode=d.stateNode}}else Ih=function(){},lv=function(){},cv=function(){};function Lh(d,f){if(!zn)switch(d.tailMode){case"hidden":f=d.tail;for(var w=null;f!==null;)f.alternate!==null&&(w=f),f=f.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var M=null;w!==null;)w.alternate!==null&&(M=w),w=w.sibling;M===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:M.sibling=null}}function Xr(d){var f=d.alternate!==null&&d.alternate.child===d.child,w=0,M=0;if(f)for(var A=d.child;A!==null;)w|=A.lanes|A.childLanes,M|=A.subtreeFlags&14680064,M|=A.flags&14680064,A.return=d,A=A.sibling;else for(A=d.child;A!==null;)w|=A.lanes|A.childLanes,M|=A.subtreeFlags,M|=A.flags,A.return=d,A=A.sibling;return d.subtreeFlags|=M,d.childLanes=w,f}function xH(d,f,w){var M=f.pendingProps;switch(rS(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(f),null;case 1:return sr(f.type)&&Cr(),Xr(f),null;case 3:return M=f.stateNode,ud(),At(Nn),At(Ye),uS(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(d===null||d.child===null)&&(bh(f)?Ao(f):d===null||d.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,zs!==null&&(BS(zs),zs=null))),Ih(d,f),Xr(f),null;case 5:lS(f),w=Eo(cd.current);var A=f.type;if(d!==null&&f.stateNode!=null)lv(d,f,A,M,w),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!M){if(f.stateNode===null)throw Error(o(166));return Xr(f),null}if(d=Eo(ps.current),bh(f)){if(!Me)throw Error(o(175));d=lt(f.stateNode,f.type,f.memoizedProps,w,d,f,!Sh),f.updateQueue=d,d!==null&&Ao(f)}else{var k=re(A,M,w,d,f);Nh(k,f,!1,!1),f.stateNode=k,Ue(k,A,M,w,d)&&Ao(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return Xr(f),null;case 6:if(d&&f.stateNode!=null)cv(d,f,d.memoizedProps,M);else{if(typeof M!="string"&&f.stateNode===null)throw Error(o(166));if(d=Eo(cd.current),w=Eo(ps.current),bh(f)){if(!Me)throw Error(o(176));if(d=f.stateNode,M=f.memoizedProps,(w=St(d,M,f,!Sh))&&(A=Hi,A!==null))switch(k=(A.mode&1)!==0,A.tag){case 3:oe(A.stateNode.containerInfo,d,M,k);break;case 5:De(A.type,A.memoizedProps,A.stateNode,d,M,k)}w&&Ao(f)}else f.stateNode=Ie(M,d,w,f)}return Xr(f),null;case 13:if(At(Hn),M=f.memoizedState,zn&&Wi!==null&&f.mode&1&&!(f.flags&128)){for(d=Wi;d;)d=wt(d);return ad(),f.flags|=98560,f}if(M!==null&&M.dehydrated!==null){if(M=bh(f),d===null){if(!M)throw Error(o(318));if(!Me)throw Error(o(344));if(d=f.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Ht(d,f)}else ad(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return Xr(f),null}return zs!==null&&(BS(zs),zs=null),f.flags&128?(f.lanes=w,f):(M=M!==null,w=!1,d===null?bh(f):w=d.memoizedState!==null,M&&!w&&(f.child.flags|=8192,f.mode&1&&(d===null||Hn.current&1?_r===0&&(_r=3):VS())),f.updateQueue!==null&&(f.flags|=4),Xr(f),null);case 4:return ud(),Ih(d,f),d===null&&ot(f.stateNode.containerInfo),Xr(f),null;case 10:return Kw(f.type._context),Xr(f),null;case 17:return sr(f.type)&&Cr(),Xr(f),null;case 19:if(At(Hn),A=f.memoizedState,A===null)return Xr(f),null;if(M=(f.flags&128)!==0,k=A.rendering,k===null)if(M)Lh(A,!1);else{if(_r!==0||d!==null&&d.flags&128)for(d=f.child;d!==null;){if(k=ev(d),k!==null){for(f.flags|=128,Lh(A,!1),d=k.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),f.subtreeFlags=0,d=w,M=f.child;M!==null;)w=M,A=d,w.flags&=14680066,k=w.alternate,k===null?(w.childLanes=0,w.lanes=A,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=k.childLanes,w.lanes=k.lanes,w.child=k.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=k.memoizedProps,w.memoizedState=k.memoizedState,w.updateQueue=k.updateQueue,w.type=k.type,A=k.dependencies,w.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),M=M.sibling;return Vt(Hn,Hn.current&1|2),f.child}d=d.sibling}A.tail!==null&&Rr()>kS&&(f.flags|=128,M=!0,Lh(A,!1),f.lanes=4194304)}else{if(!M)if(d=ev(k),d!==null){if(f.flags|=128,M=!0,d=d.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),Lh(A,!0),A.tail===null&&A.tailMode==="hidden"&&!k.alternate&&!zn)return Xr(f),null}else 2*Rr()-A.renderingStartTime>kS&&w!==1073741824&&(f.flags|=128,M=!0,Lh(A,!1),f.lanes=4194304);A.isBackwards?(k.sibling=f.child,f.child=k):(d=A.last,d!==null?d.sibling=k:f.child=k,A.last=k)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=Rr(),f.sibling=null,d=Hn.current,Vt(Hn,M?d&1|2:d&1),f):(Xr(f),null);case 22:case 23:return zS(),M=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==M&&(f.flags|=8192),M&&f.mode&1?Xi&1073741824&&(Xr(f),We&&f.subtreeFlags&6&&(f.flags|=8192)):Xr(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var _H=a.ReactCurrentOwner,Gi=!1;function di(d,f,w,M){f.child=d===null?IR(f,null,w,M):ld(f,d.child,w,M)}function sP(d,f,w,M,A){w=w.render;var k=f.ref;return id(f,A),M=fS(d,f,w,M,k,A),w=hS(),d!==null&&!Gi?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~A,ca(d,f,A)):(zn&&w&&nS(f),f.flags|=1,di(d,f,M,A),f.child)}function oP(d,f,w,M,A){if(d===null){var k=w.type;return typeof k=="function"&&!jS(k)&&k.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(f.tag=15,f.type=k,aP(d,f,k,M,A)):(d=Pv(w.type,null,M,f,f.mode,A),d.ref=f.ref,d.return=f,f.child=d)}if(k=d.child,!(d.lanes&A)){var G=k.memoizedProps;if(w=w.compare,w=w!==null?w:Gg,w(G,M)&&d.ref===f.ref)return ca(d,f,A)}return f.flags|=1,d=ll(k,M),d.ref=f.ref,d.return=f,f.child=d}function aP(d,f,w,M,A){if(d!==null&&Gg(d.memoizedProps,M)&&d.ref===f.ref)if(Gi=!1,(d.lanes&A)!==0)d.flags&131072&&(Gi=!0);else return f.lanes=d.lanes,ca(d,f,A);return xS(d,f,w,M,A)}function lP(d,f,w){var M=f.pendingProps,A=M.children,k=d!==null?d.memoizedState:null;if(M.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},Vt(fd,Xi),Xi|=w;else if(w&1073741824)f.memoizedState={baseLanes:0,cachePool:null},M=k!==null?k.baseLanes:w,Vt(fd,Xi),Xi|=M;else return d=k!==null?k.baseLanes|w:w,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null},f.updateQueue=null,Vt(fd,Xi),Xi|=d,null;else k!==null?(M=k.baseLanes|w,f.memoizedState=null):M=w,Vt(fd,Xi),Xi|=M;return di(d,f,A,w),f.child}function cP(d,f){var w=f.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(f.flags|=512,f.flags|=2097152)}function xS(d,f,w,M,A){var k=sr(w)?nn:Ye.current;return k=Ar(f,k),id(f,A),w=fS(d,f,w,M,k,A),M=hS(),d!==null&&!Gi?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~A,ca(d,f,A)):(zn&&M&&nS(f),f.flags|=1,di(d,f,w,A),f.child)}function uP(d,f,w,M,A){if(sr(w)){var k=!0;ui(f)}else k=!1;if(id(f,A),f.stateNode===null)d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),MR(f,w,M),tS(f,w,M,A),M=!0;else if(d===null){var G=f.stateNode,ie=f.memoizedProps;G.props=ie;var be=G.context,Ve=w.contextType;typeof Ve=="object"&&Ve!==null?Ve=ds(Ve):(Ve=sr(w)?nn:Ye.current,Ve=Ar(f,Ve));var yt=w.getDerivedStateFromProps,Gt=typeof yt=="function"||typeof G.getSnapshotBeforeUpdate=="function";Gt||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ie!==M||be!==Ve)&&ER(f,G,M,Ve),nl=!1;var Dt=f.memoizedState;G.state=Dt,qg(f,M,G,A),be=f.memoizedState,ie!==M||Dt!==be||Nn.current||nl?(typeof yt=="function"&&(eS(f,w,yt,M),be=f.memoizedState),(ie=nl||bR(f,w,ie,M,Dt,be,Ve))?(Gt||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(f.flags|=4194308)):(typeof G.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=M,f.memoizedState=be),G.props=M,G.state=be,G.context=Ve,M=ie):(typeof G.componentDidMount=="function"&&(f.flags|=4194308),M=!1)}else{G=f.stateNode,xR(d,f),ie=f.memoizedProps,Ve=f.type===f.elementType?ie:Bs(f.type,ie),G.props=Ve,Gt=f.pendingProps,Dt=G.context,be=w.contextType,typeof be=="object"&&be!==null?be=ds(be):(be=sr(w)?nn:Ye.current,be=Ar(f,be));var In=w.getDerivedStateFromProps;(yt=typeof In=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(ie!==Gt||Dt!==be)&&ER(f,G,M,be),nl=!1,Dt=f.memoizedState,G.state=Dt,qg(f,M,G,A);var Pt=f.memoizedState;ie!==Gt||Dt!==Pt||Nn.current||nl?(typeof In=="function"&&(eS(f,w,In,M),Pt=f.memoizedState),(Ve=nl||bR(f,w,Ve,M,Dt,Pt,be)||!1)?(yt||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(M,Pt,be),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(M,Pt,be)),typeof G.componentDidUpdate=="function"&&(f.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof G.componentDidUpdate!="function"||ie===d.memoizedProps&&Dt===d.memoizedState||(f.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ie===d.memoizedProps&&Dt===d.memoizedState||(f.flags|=1024),f.memoizedProps=M,f.memoizedState=Pt),G.props=M,G.state=Pt,G.context=be,M=Ve):(typeof G.componentDidUpdate!="function"||ie===d.memoizedProps&&Dt===d.memoizedState||(f.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||ie===d.memoizedProps&&Dt===d.memoizedState||(f.flags|=1024),M=!1)}return _S(d,f,w,M,k,A)}function _S(d,f,w,M,A,k){cP(d,f);var G=(f.flags&128)!==0;if(!M&&!G)return A&&tl(f,w,!1),ca(d,f,k);M=f.stateNode,_H.current=f;var ie=G&&typeof w.getDerivedStateFromError!="function"?null:M.render();return f.flags|=1,d!==null&&G?(f.child=ld(f,d.child,null,k),f.child=ld(f,null,ie,k)):di(d,f,ie,k),f.memoizedState=M.state,A&&tl(f,w,!0),f.child}function dP(d){var f=d.stateNode;f.pendingContext?el(d,f.pendingContext,f.pendingContext!==f.context):f.context&&el(d,f.context,!1),aS(d,f.containerInfo)}function fP(d,f,w,M,A){return ad(),oS(A),f.flags|=256,di(d,f,w,M),f.child}var uv={dehydrated:null,treeContext:null,retryLane:0};function dv(d){return{baseLanes:d,cachePool:null}}function hP(d,f,w){var M=f.pendingProps,A=Hn.current,k=!1,G=(f.flags&128)!==0,ie;if((ie=G)||(ie=d!==null&&d.memoizedState===null?!1:(A&2)!==0),ie?(k=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(A|=1),Vt(Hn,A&1),d===null)return sS(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(f.mode&1?Le(d)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(A=M.children,d=M.fallback,k?(M=f.mode,k=f.child,A={mode:"hidden",children:A},!(M&1)&&k!==null?(k.childLanes=0,k.pendingProps=A):k=Nv(A,M,0,null),d=Cc(d,M,w,null),k.return=f,d.return=f,k.sibling=d,f.child=k,f.child.memoizedState=dv(w),f.memoizedState=uv,d):wS(f,A));if(A=d.memoizedState,A!==null){if(ie=A.dehydrated,ie!==null){if(G)return f.flags&256?(f.flags&=-257,fv(d,f,w,Error(o(422)))):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(k=M.fallback,A=f.mode,M=Nv({mode:"visible",children:M.children},A,0,null),k=Cc(k,A,w,null),k.flags|=2,M.return=f,k.return=f,M.sibling=k,f.child=M,f.mode&1&&ld(f,d.child,null,w),f.child.memoizedState=dv(w),f.memoizedState=uv,k);if(!(f.mode&1))f=fv(d,f,w,null);else if(Le(ie))f=fv(d,f,w,Error(o(419)));else if(M=(w&d.childLanes)!==0,Gi||M){if(M=pr,M!==null){switch(w&-w){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}M=k&(M.suspendedLanes|w)?0:k,M!==0&&M!==A.retryLane&&(A.retryLane=M,gs(d,M,-1))}VS(),f=fv(d,f,w,Error(o(421)))}else ge(ie)?(f.flags|=128,f.child=d.child,f=LH.bind(null,d),$e(ie,f),f=null):(w=A.treeContext,Me&&(Wi=pt(ie),Hi=f,zn=!0,zs=null,Sh=!1,w!==null&&(fs[hs++]=oa,fs[hs++]=aa,fs[hs++]=_c,oa=w.id,aa=w.overflow,_c=f)),f=wS(f,f.pendingProps.children),f.flags|=4096);return f}return k?(M=mP(d,f,M.children,M.fallback,w),k=f.child,A=d.child.memoizedState,k.memoizedState=A===null?dv(w):{baseLanes:A.baseLanes|w,cachePool:null},k.childLanes=d.childLanes&~w,f.memoizedState=uv,M):(w=pP(d,f,M.children,w),f.memoizedState=null,w)}return k?(M=mP(d,f,M.children,M.fallback,w),k=f.child,A=d.child.memoizedState,k.memoizedState=A===null?dv(w):{baseLanes:A.baseLanes|w,cachePool:null},k.childLanes=d.childLanes&~w,f.memoizedState=uv,M):(w=pP(d,f,M.children,w),f.memoizedState=null,w)}function wS(d,f){return f=Nv({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function pP(d,f,w,M){var A=d.child;return d=A.sibling,w=ll(A,{mode:"visible",children:w}),!(f.mode&1)&&(w.lanes=M),w.return=f,w.sibling=null,d!==null&&(M=f.deletions,M===null?(f.deletions=[d],f.flags|=16):M.push(d)),f.child=w}function mP(d,f,w,M,A){var k=f.mode;d=d.child;var G=d.sibling,ie={mode:"hidden",children:w};return!(k&1)&&f.child!==d?(w=f.child,w.childLanes=0,w.pendingProps=ie,f.deletions=null):(w=ll(d,ie),w.subtreeFlags=d.subtreeFlags&14680064),G!==null?M=ll(G,M):(M=Cc(M,k,A,null),M.flags|=2),M.return=f,w.return=f,w.sibling=M,f.child=w,M}function fv(d,f,w,M){return M!==null&&oS(M),ld(f,d.child,null,w),d=wS(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function gP(d,f,w){d.lanes|=f;var M=d.alternate;M!==null&&(M.lanes|=f),Qw(d.return,f,w)}function SS(d,f,w,M,A){var k=d.memoizedState;k===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:M,tail:w,tailMode:A}:(k.isBackwards=f,k.rendering=null,k.renderingStartTime=0,k.last=M,k.tail=w,k.tailMode=A)}function vP(d,f,w){var M=f.pendingProps,A=M.revealOrder,k=M.tail;if(di(d,f,M.children,w),M=Hn.current,M&2)M=M&1|2,f.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&gP(d,w,f);else if(d.tag===19)gP(d,w,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}M&=1}if(Vt(Hn,M),!(f.mode&1))f.memoizedState=null;else switch(A){case"forwards":for(w=f.child,A=null;w!==null;)d=w.alternate,d!==null&&ev(d)===null&&(A=w),w=w.sibling;w=A,w===null?(A=f.child,f.child=null):(A=w.sibling,w.sibling=null),SS(f,!1,A,w,k);break;case"backwards":for(w=null,A=f.child,f.child=null;A!==null;){if(d=A.alternate,d!==null&&ev(d)===null){f.child=A;break}d=A.sibling,A.sibling=w,w=A,A=d}SS(f,!0,w,null,k);break;case"together":SS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ca(d,f,w){if(d!==null&&(f.dependencies=d.dependencies),hd|=f.lanes,!(w&f.childLanes))return null;if(d!==null&&f.child!==d.child)throw Error(o(153));if(f.child!==null){for(d=f.child,w=ll(d,d.pendingProps),f.child=w,w.return=f;d.sibling!==null;)d=d.sibling,w=w.sibling=ll(d,d.pendingProps),w.return=f;w.sibling=null}return f.child}function wH(d,f,w){switch(f.tag){case 3:dP(f),ad();break;case 5:LR(f);break;case 1:sr(f.type)&&ui(f);break;case 4:aS(f,f.stateNode.containerInfo);break;case 10:yR(f,f.type._context,f.memoizedProps.value);break;case 13:var M=f.memoizedState;if(M!==null)return M.dehydrated!==null?(Vt(Hn,Hn.current&1),f.flags|=128,null):w&f.child.childLanes?hP(d,f,w):(Vt(Hn,Hn.current&1),d=ca(d,f,w),d!==null?d.sibling:null);Vt(Hn,Hn.current&1);break;case 19:if(M=(w&f.childLanes)!==0,d.flags&128){if(M)return vP(d,f,w);f.flags|=128}var A=f.memoizedState;if(A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Vt(Hn,Hn.current),M)break;return null;case 22:case 23:return f.lanes=0,lP(d,f,w)}return ca(d,f,w)}function SH(d,f){switch(rS(f),f.tag){case 1:return sr(f.type)&&Cr(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return ud(),At(Nn),At(Ye),uS(),d=f.flags,d&65536&&!(d&128)?(f.flags=d&-65537|128,f):null;case 5:return lS(f),null;case 13:if(At(Hn),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(o(340));ad()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return At(Hn),null;case 4:return ud(),null;case 10:return Kw(f.type._context),null;case 22:case 23:return zS(),null;case 24:return null;default:return null}}var hv=!1,bc=!1,bH=typeof WeakSet=="function"?WeakSet:Set,nt=null;function pv(d,f){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(M){Ni(d,f,M)}else w.current=null}function bS(d,f,w){try{w()}catch(M){Ni(d,f,M)}}var yP=!1;function MH(d,f){for(W(d.containerInfo),nt=f;nt!==null;)if(d=nt,f=d.child,(d.subtreeFlags&1028)!==0&&f!==null)f.return=d,nt=f;else for(;nt!==null;){d=nt;try{var w=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var M=w.memoizedProps,A=w.memoizedState,k=d.stateNode,G=k.getSnapshotBeforeUpdate(d.elementType===d.type?M:Bs(d.type,M),A);k.__reactInternalSnapshotBeforeUpdate=G}break;case 3:We&&Te(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ie){Ni(d,d.return,ie)}if(f=d.sibling,f!==null){f.return=d.return,nt=f;break}nt=d.return}return w=yP,yP=!1,w}function Mc(d,f,w){var M=f.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var A=M=M.next;do{if((A.tag&d)===d){var k=A.destroy;A.destroy=void 0,k!==void 0&&bS(f,w,k)}A=A.next}while(A!==M)}}function Dh(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var w=f=f.next;do{if((w.tag&d)===d){var M=w.create;w.destroy=M()}w=w.next}while(w!==f)}}function MS(d){var f=d.ref;if(f!==null){var w=d.stateNode;switch(d.tag){case 5:d=K(w);break;default:d=w}typeof f=="function"?f(d):f.current=d}}function xP(d,f,w){if(wo&&typeof wo.onCommitFiberUnmount=="function")try{wo.onCommitFiberUnmount(Hg,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(d=f.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var M=d=d.next;do{var A=M,k=A.destroy;A=A.tag,k!==void 0&&(A&2||A&4)&&bS(f,w,k),M=M.next}while(M!==d)}break;case 1:if(pv(f,w),d=f.stateNode,typeof d.componentWillUnmount=="function")try{d.props=f.memoizedProps,d.state=f.memoizedState,d.componentWillUnmount()}catch(G){Ni(f,w,G)}break;case 5:pv(f,w);break;case 4:We?EP(d,f,w):fe&&fe&&(f=f.stateNode.containerInfo,w=qe(f),Sn(f,w))}}function _P(d,f,w){for(var M=f;;)if(xP(d,M,w),M.child===null||We&&M.tag===4){if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function wP(d){var f=d.alternate;f!==null&&(d.alternate=null,wP(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&Ge(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function SP(d){return d.tag===5||d.tag===3||d.tag===4}function bP(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||SP(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function MP(d){if(We){e:{for(var f=d.return;f!==null;){if(SP(f))break e;f=f.return}throw Error(o(160))}var w=f;switch(w.tag){case 5:f=w.stateNode,w.flags&32&&(Ee(f),w.flags&=-33),w=bP(d),TS(d,w,f);break;case 3:case 4:f=w.stateNode.containerInfo,w=bP(d),ES(d,w,f);break;default:throw Error(o(161))}}}function ES(d,f,w){var M=d.tag;if(M===5||M===6)d=d.stateNode,f?Rt(w,d,f):Ne(w,d);else if(M!==4&&(d=d.child,d!==null))for(ES(d,f,w),d=d.sibling;d!==null;)ES(d,f,w),d=d.sibling}function TS(d,f,w){var M=d.tag;if(M===5||M===6)d=d.stateNode,f?vt(w,d,f):me(w,d);else if(M!==4&&(d=d.child,d!==null))for(TS(d,f,w),d=d.sibling;d!==null;)TS(d,f,w),d=d.sibling}function EP(d,f,w){for(var M=f,A=!1,k,G;;){if(!A){A=M.return;e:for(;;){if(A===null)throw Error(o(160));switch(k=A.stateNode,A.tag){case 5:G=!1;break e;case 3:k=k.containerInfo,G=!0;break e;case 4:k=k.containerInfo,G=!0;break e}A=A.return}A=!0}if(M.tag===5||M.tag===6)_P(d,M,w),G?J(k,M.stateNode):et(k,M.stateNode);else if(M.tag===18)G?ue(k,M.stateNode):ee(k,M.stateNode);else if(M.tag===4){if(M.child!==null){k=M.stateNode.containerInfo,G=!0,M.child.return=M,M=M.child;continue}}else if(xP(d,M,w),M.child!==null){M.child.return=M,M=M.child;continue}if(M===f)break;for(;M.sibling===null;){if(M.return===null||M.return===f)return;M=M.return,M.tag===4&&(A=!1)}M.sibling.return=M.return,M=M.sibling}}function AS(d,f){if(We){switch(f.tag){case 0:case 11:case 14:case 15:Mc(3,f,f.return),Dh(3,f),Mc(5,f,f.return);return;case 1:return;case 5:var w=f.stateNode;if(w!=null){var M=f.memoizedProps;d=d!==null?d.memoizedProps:M;var A=f.type,k=f.updateQueue;f.updateQueue=null,k!==null&&at(w,k,A,d,M,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));w=f.memoizedProps,xt(f.stateNode,d!==null?d.memoizedProps:w,w);return;case 3:Me&&d!==null&&d.memoizedState.isDehydrated&&Kn(f.stateNode.containerInfo);return;case 12:return;case 13:mv(f);return;case 19:mv(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:Mc(3,f,f.return),Dh(3,f),Mc(5,f,f.return);return;case 12:return;case 13:mv(f);return;case 19:mv(f);return;case 3:Me&&d!==null&&d.memoizedState.isDehydrated&&Kn(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(fe){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Sn(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function mv(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new bH),f.forEach(function(M){var A=DH.bind(null,d,M);w.has(M)||(w.add(M),M.then(A,A))})}}function EH(d,f){for(nt=f;nt!==null;){f=nt;var w=f.deletions;if(w!==null)for(var M=0;M<w.length;M++){var A=w[M];try{var k=d;We?EP(k,A,f):_P(k,A,f);var G=A.alternate;G!==null&&(G.return=null),A.return=null}catch(Ct){Ni(A,f,Ct)}}if(w=f.child,f.subtreeFlags&12854&&w!==null)w.return=f,nt=w;else for(;nt!==null;){f=nt;try{var ie=f.flags;if(ie&32&&We&&Ee(f.stateNode),ie&512){var be=f.alternate;if(be!==null){var Ve=be.ref;Ve!==null&&(typeof Ve=="function"?Ve(null):Ve.current=null)}}if(ie&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var yt=f.alternate;(yt===null||yt.memoizedState===null)&&(DS=Rr())}break;case 22:var Gt=f.memoizedState!==null,Dt=f.alternate,In=Dt!==null&&Dt.memoizedState!==null;if(w=f,We){e:if(M=w,A=Gt,k=null,We)for(var Pt=M;;){if(Pt.tag===5){if(k===null){k=Pt;var $r=Pt.stateNode;A?Xe($r):ke(Pt.stateNode,Pt.memoizedProps)}}else if(Pt.tag===6){if(k===null){var ys=Pt.stateNode;A?Z(ys):xe(ys,Pt.memoizedProps)}}else if((Pt.tag!==22&&Pt.tag!==23||Pt.memoizedState===null||Pt===M)&&Pt.child!==null){Pt.child.return=Pt,Pt=Pt.child;continue}if(Pt===M)break;for(;Pt.sibling===null;){if(Pt.return===null||Pt.return===M)break e;k===Pt&&(k=null),Pt=Pt.return}k===Pt&&(k=null),Pt.sibling.return=Pt.return,Pt=Pt.sibling}}if(Gt&&!In&&w.mode&1){nt=w;for(var ve=w.child;ve!==null;){for(w=nt=ve;nt!==null;){M=nt;var le=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Mc(4,M,M.return);break;case 1:pv(M,M.return);var _e=M.stateNode;if(typeof _e.componentWillUnmount=="function"){var st=M.return;try{_e.props=M.memoizedProps,_e.state=M.memoizedState,_e.componentWillUnmount()}catch(Ct){Ni(M,st,Ct)}}break;case 5:pv(M,M.return);break;case 22:if(M.memoizedState!==null){CP(w);continue}}le!==null?(le.return=M,nt=le):CP(w)}ve=ve.sibling}}}switch(ie&4102){case 2:MP(f),f.flags&=-3;break;case 6:MP(f),f.flags&=-3,AS(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,AS(f.alternate,f);break;case 4:AS(f.alternate,f)}}catch(Ct){Ni(f,f.return,Ct)}if(w=f.sibling,w!==null){w.return=f.return,nt=w;break}nt=f.return}}}function TH(d,f,w){nt=d,TP(d)}function TP(d,f,w){for(var M=(d.mode&1)!==0;nt!==null;){var A=nt,k=A.child;if(A.tag===22&&M){var G=A.memoizedState!==null||hv;if(!G){var ie=A.alternate,be=ie!==null&&ie.memoizedState!==null||bc;ie=hv;var Ve=bc;if(hv=G,(bc=be)&&!Ve)for(nt=A;nt!==null;)G=nt,be=G.child,G.tag===22&&G.memoizedState!==null?RP(A):be!==null?(be.return=G,nt=be):RP(A);for(;k!==null;)nt=k,TP(k),k=k.sibling;nt=A,hv=ie,bc=Ve}AP(d)}else A.subtreeFlags&8772&&k!==null?(k.return=A,nt=k):AP(d)}}function AP(d){for(;nt!==null;){var f=nt;if(f.flags&8772){var w=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:bc||Dh(5,f);break;case 1:var M=f.stateNode;if(f.flags&4&&!bc)if(w===null)M.componentDidMount();else{var A=f.elementType===f.type?w.memoizedProps:Bs(f.type,w.memoizedProps);M.componentDidUpdate(A,w.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var k=f.updateQueue;k!==null&&wR(f,k,M);break;case 3:var G=f.updateQueue;if(G!==null){if(w=null,f.child!==null)switch(f.child.tag){case 5:w=K(f.child.stateNode);break;case 1:w=f.child.stateNode}wR(f,G,w)}break;case 5:var ie=f.stateNode;w===null&&f.flags&4&&Ce(ie,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Me&&f.memoizedState===null){var be=f.alternate;if(be!==null){var Ve=be.memoizedState;if(Ve!==null){var yt=Ve.dehydrated;yt!==null&&U(yt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}bc||f.flags&512&&MS(f)}catch(Gt){Ni(f,f.return,Gt)}}if(f===d){nt=null;break}if(w=f.sibling,w!==null){w.return=f.return,nt=w;break}nt=f.return}}function CP(d){for(;nt!==null;){var f=nt;if(f===d){nt=null;break}var w=f.sibling;if(w!==null){w.return=f.return,nt=w;break}nt=f.return}}function RP(d){for(;nt!==null;){var f=nt;try{switch(f.tag){case 0:case 11:case 15:var w=f.return;try{Dh(4,f)}catch(be){Ni(f,w,be)}break;case 1:var M=f.stateNode;if(typeof M.componentDidMount=="function"){var A=f.return;try{M.componentDidMount()}catch(be){Ni(f,A,be)}}var k=f.return;try{MS(f)}catch(be){Ni(f,k,be)}break;case 5:var G=f.return;try{MS(f)}catch(be){Ni(f,G,be)}}}catch(be){Ni(f,f.return,be)}if(f===d){nt=null;break}var ie=f.sibling;if(ie!==null){ie.return=f.return,nt=ie;break}nt=f.return}}var gv=0,vv=1,yv=2,xv=3,_v=4;if(typeof Symbol=="function"&&Symbol.for){var kh=Symbol.for;gv=kh("selector.component"),vv=kh("selector.has_pseudo_class"),yv=kh("selector.role"),xv=kh("selector.test_id"),_v=kh("selector.text")}function CS(d){var f=X(d);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(d=V(d),d===null)throw Error(o(362));return d.stateNode.current}function RS(d,f){switch(f.$$typeof){case gv:if(d.type===f.value)return!0;break;case vv:e:{f=f.value,d=[d,0];for(var w=0;w<d.length;){var M=d[w++],A=d[w++],k=f[A];if(M.tag!==5||!$(M)){for(;k!=null&&RS(M,k);)A++,k=f[A];if(A===f.length){f=!0;break e}else for(M=M.child;M!==null;)d.push(M,A),M=M.sibling}}f=!1}return f;case yv:if(d.tag===5&&ae(d.stateNode,f.value))return!0;break;case _v:if((d.tag===5||d.tag===6)&&(d=B(d),d!==null&&0<=d.indexOf(f.value)))return!0;break;case xv:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function PS(d){switch(d.$$typeof){case gv:return"<"+(C(d.value)||"Unknown")+">";case vv:return":has("+(PS(d)||"")+")";case yv:return'[role="'+d.value+'"]';case _v:return'"'+d.value+'"';case xv:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function PP(d,f){var w=[];d=[d,0];for(var M=0;M<d.length;){var A=d[M++],k=d[M++],G=f[k];if(A.tag!==5||!$(A)){for(;G!=null&&RS(A,G);)k++,G=f[k];if(k===f.length)w.push(A);else for(A=A.child;A!==null;)d.push(A,k),A=A.sibling}}return w}function NS(d,f){if(!Ze)throw Error(o(363));d=CS(d),d=PP(d,f),f=[],d=Array.from(d);for(var w=0;w<d.length;){var M=d[w++];if(M.tag===5)$(M)||f.push(M.stateNode);else for(M=M.child;M!==null;)d.push(M),M=M.sibling}return f}var AH=Math.ceil,wv=a.ReactCurrentDispatcher,IS=a.ReactCurrentOwner,or=a.ReactCurrentBatchConfig,an=0,pr=null,mr=null,Fr=0,Xi=0,fd=Tt(0),_r=0,Oh=null,hd=0,Sv=0,LS=0,Fh=null,Ri=null,DS=0,kS=1/0;function pd(){kS=Rr()+500}var bv=!1,OS=null,il=null,Mv=!1,sl=null,Ev=0,Uh=0,FS=null,Tv=-1,Av=0;function fi(){return an&6?Rr():Tv!==-1?Tv:Tv=Rr()}function ol(d){return d.mode&1?an&2&&Fr!==0?Fr&-Fr:cH.transition!==null?(Av===0&&(d=zg,zg<<=1,!(zg&4194240)&&(zg=64),Av=d),Av):(d=yn,d!==0?d:Pe()):1}function gs(d,f,w){if(50<Uh)throw Uh=0,FS=null,Error(o(185));var M=Cv(d,f);return M===null?null:(wh(M,f,w),(!(an&2)||M!==pr)&&(M===pr&&(!(an&2)&&(Sv|=f),_r===4&&al(M,Fr)),Pi(M,w),f===1&&an===0&&!(d.mode&1)&&(pd(),Wg&&bo())),M)}function Cv(d,f){d.lanes|=f;var w=d.alternate;for(w!==null&&(w.lanes|=f),w=d,d=d.return;d!==null;)d.childLanes|=f,w=d.alternate,w!==null&&(w.childLanes|=f),w=d,d=d.return;return w.tag===3?w.stateNode:null}function Pi(d,f){var w=d.callbackNode;eH(d,f);var M=jg(d,d===pr?Fr:0);if(M===0)w!==null&&gR(w),d.callbackNode=null,d.callbackPriority=0;else if(f=M&-M,d.callbackPriority!==f){if(w!=null&&gR(w),f===1)d.tag===0?lH(IP.bind(null,d)):vR(IP.bind(null,d)),Be?_t(function(){an===0&&bo()}):Gw(Xw,bo),w=null;else{switch(mR(M)){case 1:w=Xw;break;case 4:w=iH;break;case 16:w=$w;break;case 536870912:w=sH;break;default:w=$w}w=VP(w,NP.bind(null,d))}d.callbackPriority=f,d.callbackNode=w}}function NP(d,f){if(Tv=-1,Av=0,an&6)throw Error(o(327));var w=d.callbackNode;if(Ac()&&d.callbackNode!==w)return null;var M=jg(d,d===pr?Fr:0);if(M===0)return null;if(M&30||M&d.expiredLanes||f)f=Rv(d,M);else{f=M;var A=an;an|=2;var k=kP();(pr!==d||Fr!==f)&&(pd(),Ec(d,f));do try{PH();break}catch(ie){DP(d,ie)}while(!0);Zw(),wv.current=k,an=A,mr!==null?f=0:(pr=null,Fr=0,f=_r)}if(f!==0){if(f===2&&(A=jw(d),A!==0&&(M=A,f=US(d,A))),f===1)throw w=Oh,Ec(d,0),al(d,M),Pi(d,Rr()),w;if(f===6)al(d,M);else{if(A=d.current.alternate,!(M&30)&&!CH(A)&&(f=Rv(d,M),f===2&&(k=jw(d),k!==0&&(M=k,f=US(d,k))),f===1))throw w=Oh,Ec(d,0),al(d,M),Pi(d,Rr()),w;switch(d.finishedWork=A,d.finishedLanes=M,f){case 0:case 1:throw Error(o(345));case 2:Tc(d,Ri);break;case 3:if(al(d,M),(M&130023424)===M&&(f=DS+500-Rr(),10<f)){if(jg(d,0)!==0)break;if(A=d.suspendedLanes,(A&M)!==M){fi(),d.pingedLanes|=d.suspendedLanes&A;break}d.timeoutHandle=he(Tc.bind(null,d,Ri),f);break}Tc(d,Ri);break;case 4:if(al(d,M),(M&4194240)===M)break;for(f=d.eventTimes,A=-1;0<M;){var G=31-Bn(M);k=1<<G,G=f[G],G>A&&(A=G),M&=~k}if(M=A,M=Rr()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*AH(M/1960))-M,10<M){d.timeoutHandle=he(Tc.bind(null,d,Ri),M);break}Tc(d,Ri);break;case 5:Tc(d,Ri);break;default:throw Error(o(329))}}}return Pi(d,Rr()),d.callbackNode===w?NP.bind(null,d):null}function US(d,f){var w=Fh;return d.current.memoizedState.isDehydrated&&(Ec(d,f).flags|=256),d=Rv(d,f),d!==2&&(f=Ri,Ri=w,f!==null&&BS(f)),d}function BS(d){Ri===null?Ri=d:Ri.push.apply(Ri,d)}function CH(d){for(var f=d;;){if(f.flags&16384){var w=f.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var M=0;M<w.length;M++){var A=w[M],k=A.getSnapshot;A=A.value;try{if(!So(k(),A))return!1}catch{return!1}}}if(w=f.child,f.subtreeFlags&16384&&w!==null)w.return=f,f=w;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function al(d,f){for(f&=~LS,f&=~Sv,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var w=31-Bn(f),M=1<<w;d[w]=-1,f&=~M}}function IP(d){if(an&6)throw Error(o(327));Ac();var f=jg(d,0);if(!(f&1))return Pi(d,Rr()),null;var w=Rv(d,f);if(d.tag!==0&&w===2){var M=jw(d);M!==0&&(f=M,w=US(d,M))}if(w===1)throw w=Oh,Ec(d,0),al(d,f),Pi(d,Rr()),w;if(w===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,Tc(d,Ri),Pi(d,Rr()),null}function LP(d){sl!==null&&sl.tag===0&&!(an&6)&&Ac();var f=an;an|=1;var w=or.transition,M=yn;try{if(or.transition=null,yn=1,d)return d()}finally{yn=M,or.transition=w,an=f,!(an&6)&&bo()}}function zS(){Xi=fd.current,At(fd)}function Ec(d,f){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==rt&&(d.timeoutHandle=rt,ze(w)),mr!==null)for(w=mr.return;w!==null;){var M=w;switch(rS(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Cr();break;case 3:ud(),At(Nn),At(Ye),uS();break;case 5:lS(M);break;case 4:ud();break;case 13:At(Hn);break;case 19:At(Hn);break;case 10:Kw(M.type._context);break;case 22:case 23:zS()}w=w.return}if(pr=d,mr=d=ll(d.current,null),Fr=Xi=f,_r=0,Oh=null,LS=Sv=hd=0,Ri=Fh=null,Mo!==null){for(f=0;f<Mo.length;f++)if(w=Mo[f],M=w.interleaved,M!==null){w.interleaved=null;var A=M.next,k=w.pending;if(k!==null){var G=k.next;k.next=A,M.next=G}w.pending=M}Mo=null}return d}function DP(d,f){do{var w=mr;try{if(Zw(),tv.current=av,nv){for(var M=Qn.memoizedState;M!==null;){var A=M.queue;A!==null&&(A.pending=null),M=M.next}nv=!1}if(dd=0,Pr=Wr=Qn=null,Ah=!1,Ch=0,IS.current=null,w===null||w.return===null){_r=1,Oh=f,mr=null;break}e:{var k=d,G=w.return,ie=w,be=f;if(f=Fr,ie.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var Ve=be,yt=ie,Gt=yt.tag;if(!(yt.mode&1)&&(Gt===0||Gt===11||Gt===15)){var Dt=yt.alternate;Dt?(yt.updateQueue=Dt.updateQueue,yt.memoizedState=Dt.memoizedState,yt.lanes=Dt.lanes):(yt.updateQueue=null,yt.memoizedState=null)}var In=tP(G);if(In!==null){In.flags&=-257,nP(In,G,ie,k,f),In.mode&1&&eP(k,Ve,f),f=In,be=Ve;var Pt=f.updateQueue;if(Pt===null){var $r=new Set;$r.add(be),f.updateQueue=$r}else Pt.add(be);break e}else{if(!(f&1)){eP(k,Ve,f),VS();break e}be=Error(o(426))}}else if(zn&&ie.mode&1){var ys=tP(G);if(ys!==null){!(ys.flags&65536)&&(ys.flags|=256),nP(ys,G,ie,k,f),oS(be);break e}}k=be,_r!==4&&(_r=2),Fh===null?Fh=[k]:Fh.push(k),be=vS(be,ie),ie=G;do{switch(ie.tag){case 3:ie.flags|=65536,f&=-f,ie.lanes|=f;var ve=QR(ie,be,f);_R(ie,ve);break e;case 1:k=be;var le=ie.type,_e=ie.stateNode;if(!(ie.flags&128)&&(typeof le.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(il===null||!il.has(_e)))){ie.flags|=65536,f&=-f,ie.lanes|=f;var st=JR(ie,k,f);_R(ie,st);break e}}ie=ie.return}while(ie!==null)}FP(w)}catch(Ct){f=Ct,mr===w&&w!==null&&(mr=w=w.return);continue}break}while(!0)}function kP(){var d=wv.current;return wv.current=av,d===null?av:d}function VS(){(_r===0||_r===3||_r===2)&&(_r=4),pr===null||!(hd&268435455)&&!(Sv&268435455)||al(pr,Fr)}function Rv(d,f){var w=an;an|=2;var M=kP();pr===d&&Fr===f||Ec(d,f);do try{RH();break}catch(A){DP(d,A)}while(!0);if(Zw(),an=w,wv.current=M,mr!==null)throw Error(o(261));return pr=null,Fr=0,_r}function RH(){for(;mr!==null;)OP(mr)}function PH(){for(;mr!==null&&!nH();)OP(mr)}function OP(d){var f=zP(d.alternate,d,Xi);d.memoizedProps=d.pendingProps,f===null?FP(d):mr=f,IS.current=null}function FP(d){var f=d;do{var w=f.alternate;if(d=f.return,f.flags&32768){if(w=SH(w,f),w!==null){w.flags&=32767,mr=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{_r=6,mr=null;return}}else if(w=xH(w,f,Xi),w!==null){mr=w;return}if(f=f.sibling,f!==null){mr=f;return}mr=f=d}while(f!==null);_r===0&&(_r=5)}function Tc(d,f){var w=yn,M=or.transition;try{or.transition=null,yn=1,NH(d,f,w)}finally{or.transition=M,yn=w}return null}function NH(d,f,w){do Ac();while(sl!==null);if(an&6)throw Error(o(327));var M=d.finishedWork,A=d.finishedLanes;if(M===null)return null;if(d.finishedWork=null,d.finishedLanes=0,M===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var k=M.lanes|M.childLanes;if(tH(d,k),d===pr&&(mr=pr=null,Fr=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||Mv||(Mv=!0,VP($w,function(){return Ac(),null})),k=(M.flags&15990)!==0,M.subtreeFlags&15990||k){k=or.transition,or.transition=null;var G=yn;yn=1;var ie=an;an|=4,IS.current=null,MH(d,M),EH(d,M),Y(d.containerInfo),d.current=M,TH(M),rH(),an=ie,yn=G,or.transition=k}else d.current=M;if(Mv&&(Mv=!1,sl=d,Ev=A),k=d.pendingLanes,k===0&&(il=null),oH(M.stateNode),Pi(d,Rr()),f!==null)for(w=d.onRecoverableError,M=0;M<f.length;M++)w(f[M]);if(bv)throw bv=!1,d=OS,OS=null,d;return Ev&1&&d.tag!==0&&Ac(),k=d.pendingLanes,k&1?d===FS?Uh++:(Uh=0,FS=d):Uh=0,bo(),null}function Ac(){if(sl!==null){var d=mR(Ev),f=or.transition,w=yn;try{if(or.transition=null,yn=16>d?16:d,sl===null)var M=!1;else{if(d=sl,sl=null,Ev=0,an&6)throw Error(o(331));var A=an;for(an|=4,nt=d.current;nt!==null;){var k=nt,G=k.child;if(nt.flags&16){var ie=k.deletions;if(ie!==null){for(var be=0;be<ie.length;be++){var Ve=ie[be];for(nt=Ve;nt!==null;){var yt=nt;switch(yt.tag){case 0:case 11:case 15:Mc(8,yt,k)}var Gt=yt.child;if(Gt!==null)Gt.return=yt,nt=Gt;else for(;nt!==null;){yt=nt;var Dt=yt.sibling,In=yt.return;if(wP(yt),yt===Ve){nt=null;break}if(Dt!==null){Dt.return=In,nt=Dt;break}nt=In}}}var Pt=k.alternate;if(Pt!==null){var $r=Pt.child;if($r!==null){Pt.child=null;do{var ys=$r.sibling;$r.sibling=null,$r=ys}while($r!==null)}}nt=k}}if(k.subtreeFlags&2064&&G!==null)G.return=k,nt=G;else e:for(;nt!==null;){if(k=nt,k.flags&2048)switch(k.tag){case 0:case 11:case 15:Mc(9,k,k.return)}var ve=k.sibling;if(ve!==null){ve.return=k.return,nt=ve;break e}nt=k.return}}var le=d.current;for(nt=le;nt!==null;){G=nt;var _e=G.child;if(G.subtreeFlags&2064&&_e!==null)_e.return=G,nt=_e;else e:for(G=le;nt!==null;){if(ie=nt,ie.flags&2048)try{switch(ie.tag){case 0:case 11:case 15:Dh(9,ie)}}catch(Ct){Ni(ie,ie.return,Ct)}if(ie===G){nt=null;break e}var st=ie.sibling;if(st!==null){st.return=ie.return,nt=st;break e}nt=ie.return}}if(an=A,bo(),wo&&typeof wo.onPostCommitFiberRoot=="function")try{wo.onPostCommitFiberRoot(Hg,d)}catch{}M=!0}return M}finally{yn=w,or.transition=f}}return!1}function UP(d,f,w){f=vS(w,f),f=QR(d,f,1),rl(d,f),f=fi(),d=Cv(d,1),d!==null&&(wh(d,1,f),Pi(d,f))}function Ni(d,f,w){if(d.tag===3)UP(d,d,w);else for(;f!==null;){if(f.tag===3){UP(f,d,w);break}else if(f.tag===1){var M=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(il===null||!il.has(M))){d=vS(w,d),d=JR(f,d,1),rl(f,d),d=fi(),f=Cv(f,1),f!==null&&(wh(f,1,d),Pi(f,d));break}}f=f.return}}function IH(d,f,w){var M=d.pingCache;M!==null&&M.delete(f),f=fi(),d.pingedLanes|=d.suspendedLanes&w,pr===d&&(Fr&w)===w&&(_r===4||_r===3&&(Fr&130023424)===Fr&&500>Rr()-DS?Ec(d,0):LS|=w),Pi(d,f)}function BP(d,f){f===0&&(d.mode&1?(f=Vg,Vg<<=1,!(Vg&130023424)&&(Vg=4194304)):f=1);var w=fi();d=Cv(d,f),d!==null&&(wh(d,f,w),Pi(d,w))}function LH(d){var f=d.memoizedState,w=0;f!==null&&(w=f.retryLane),BP(d,w)}function DH(d,f){var w=0;switch(d.tag){case 13:var M=d.stateNode,A=d.memoizedState;A!==null&&(w=A.retryLane);break;case 19:M=d.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(f),BP(d,w)}var zP;zP=function(d,f,w){if(d!==null)if(d.memoizedProps!==f.pendingProps||Nn.current)Gi=!0;else{if(!(d.lanes&w)&&!(f.flags&128))return Gi=!1,wH(d,f,w);Gi=!!(d.flags&131072)}else Gi=!1,zn&&f.flags&1048576&&TR(f,Qg,f.index);switch(f.lanes=0,f.tag){case 2:var M=f.type;d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps;var A=Ar(f,Ye.current);id(f,w),A=fS(null,f,M,d,A,w);var k=hS();return f.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,sr(M)?(k=!0,ui(f)):k=!1,f.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Jw(f),A.updater=Zg,f.stateNode=A,A._reactInternals=f,tS(f,M,d,w),f=_S(null,f,M,!0,k,w)):(f.tag=0,zn&&k&&nS(f),di(null,f,A,w),f=f.child),f;case 16:M=f.elementType;e:{switch(d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps,A=M._init,M=A(M._payload),f.type=M,A=f.tag=OH(M),d=Bs(M,d),A){case 0:f=xS(null,f,M,d,w);break e;case 1:f=uP(null,f,M,d,w);break e;case 11:f=sP(null,f,M,d,w);break e;case 14:f=oP(null,f,M,Bs(M.type,d),w);break e}throw Error(o(306,M,""))}return f;case 0:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:Bs(M,A),xS(d,f,M,A,w);case 1:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:Bs(M,A),uP(d,f,M,A,w);case 3:e:{if(dP(f),d===null)throw Error(o(387));M=f.pendingProps,k=f.memoizedState,A=k.element,xR(d,f),qg(f,M,null,w);var G=f.memoizedState;if(M=G.element,Me&&k.isDehydrated)if(k={element:M,isDehydrated:!1,cache:G.cache,transitions:G.transitions},f.updateQueue.baseState=k,f.memoizedState=k,f.flags&256){A=Error(o(423)),f=fP(d,f,M,w,A);break e}else if(M!==A){A=Error(o(424)),f=fP(d,f,M,w,A);break e}else for(Me&&(Wi=ht(f.stateNode.containerInfo),Hi=f,zn=!0,zs=null,Sh=!1),w=IR(f,null,M,w),f.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(ad(),M===A){f=ca(d,f,w);break e}di(d,f,M,w)}f=f.child}return f;case 5:return LR(f),d===null&&sS(f),M=f.type,A=f.pendingProps,k=d!==null?d.memoizedProps:null,G=A.children,Se(M,A)?G=null:k!==null&&Se(M,k)&&(f.flags|=32),cP(d,f),di(d,f,G,w),f.child;case 6:return d===null&&sS(f),null;case 13:return hP(d,f,w);case 4:return aS(f,f.stateNode.containerInfo),M=f.pendingProps,d===null?f.child=ld(f,null,M,w):di(d,f,M,w),f.child;case 11:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:Bs(M,A),sP(d,f,M,A,w);case 7:return di(d,f,f.pendingProps,w),f.child;case 8:return di(d,f,f.pendingProps.children,w),f.child;case 12:return di(d,f,f.pendingProps.children,w),f.child;case 10:e:{if(M=f.type._context,A=f.pendingProps,k=f.memoizedProps,G=A.value,yR(f,M,G),k!==null)if(So(k.value,G)){if(k.children===A.children&&!Nn.current){f=ca(d,f,w);break e}}else for(k=f.child,k!==null&&(k.return=f);k!==null;){var ie=k.dependencies;if(ie!==null){G=k.child;for(var be=ie.firstContext;be!==null;){if(be.context===M){if(k.tag===1){be=sa(-1,w&-w),be.tag=2;var Ve=k.updateQueue;if(Ve!==null){Ve=Ve.shared;var yt=Ve.pending;yt===null?be.next=be:(be.next=yt.next,yt.next=be),Ve.pending=be}}k.lanes|=w,be=k.alternate,be!==null&&(be.lanes|=w),Qw(k.return,w,f),ie.lanes|=w;break}be=be.next}}else if(k.tag===10)G=k.type===f.type?null:k.child;else if(k.tag===18){if(G=k.return,G===null)throw Error(o(341));G.lanes|=w,ie=G.alternate,ie!==null&&(ie.lanes|=w),Qw(G,w,f),G=k.sibling}else G=k.child;if(G!==null)G.return=k;else for(G=k;G!==null;){if(G===f){G=null;break}if(k=G.sibling,k!==null){k.return=G.return,G=k;break}G=G.return}k=G}di(d,f,A.children,w),f=f.child}return f;case 9:return A=f.type,M=f.pendingProps.children,id(f,w),A=ds(A),M=M(A),f.flags|=1,di(d,f,M,w),f.child;case 14:return M=f.type,A=Bs(M,f.pendingProps),A=Bs(M.type,A),oP(d,f,M,A,w);case 15:return aP(d,f,f.type,f.pendingProps,w);case 17:return M=f.type,A=f.pendingProps,A=f.elementType===M?A:Bs(M,A),d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,sr(M)?(d=!0,ui(f)):d=!1,id(f,w),MR(f,M,A),tS(f,M,A,w),_S(null,f,M,!0,d,w);case 19:return vP(d,f,w);case 22:return lP(d,f,w)}throw Error(o(156,f.tag))};function VP(d,f){return Gw(d,f)}function kH(d,f,w,M){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(d,f,w,M){return new kH(d,f,w,M)}function jS(d){return d=d.prototype,!(!d||!d.isReactComponent)}function OH(d){if(typeof d=="function")return jS(d)?1:0;if(d!=null){if(d=d.$$typeof,d===y)return 11;if(d===_)return 14}return 2}function ll(d,f){var w=d.alternate;return w===null?(w=vs(d.tag,f,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=f,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,f=d.dependencies,w.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function Pv(d,f,w,M,A,k){var G=2;if(M=d,typeof d=="function")jS(d)&&(G=1);else if(typeof d=="string")G=5;else e:switch(d){case u:return Cc(w.children,A,k,f);case h:G=8,A|=8;break;case p:return d=vs(12,w,f,A|2),d.elementType=p,d.lanes=k,d;case x:return d=vs(13,w,f,A),d.elementType=x,d.lanes=k,d;case g:return d=vs(19,w,f,A),d.elementType=g,d.lanes=k,d;case E:return Nv(w,A,k,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:G=10;break e;case v:G=9;break e;case y:G=11;break e;case _:G=14;break e;case S:G=16,M=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return f=vs(G,w,f,A),f.elementType=d,f.type=M,f.lanes=k,f}function Cc(d,f,w,M){return d=vs(7,d,M,f),d.lanes=w,d}function Nv(d,f,w,M){return d=vs(22,d,M,f),d.elementType=E,d.lanes=w,d.stateNode={},d}function HS(d,f,w){return d=vs(6,d,null,f),d.lanes=w,d}function WS(d,f,w){return f=vs(4,d.children!==null?d.children:[],d.key,f),f.lanes=w,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function FH(d,f,w,M,A){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hw(0),this.expirationTimes=Hw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hw(0),this.identifierPrefix=M,this.onRecoverableError=A,Me&&(this.mutableSourceEagerHydrationData=null)}function jP(d,f,w,M,A,k,G,ie,be){return d=new FH(d,f,w,ie,be),f===1?(f=1,k===!0&&(f|=8)):f=0,k=vs(3,null,null,f),d.current=k,k.stateNode=d,k.memoizedState={element:M,isDehydrated:w,cache:null,transitions:null},Jw(k),d}function HP(d){if(!d)return Mt;d=d._reactInternals;e:{if(L(d)!==d||d.tag!==1)throw Error(o(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(sr(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(d.tag===1){var w=d.type;if(sr(w))return An(d,w,f)}return f}function WP(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=z(f),d===null?null:d.stateNode}function GP(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<f?w:f}}function GS(d,f){GP(d,f),(d=d.alternate)&&GP(d,f)}function UH(d){return d=z(d),d===null?null:d.stateNode}function BH(){return null}return n.attemptContinuousHydration=function(d){if(d.tag===13){var f=fi();gs(d,134217728,f),GS(d,134217728)}},n.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var f=fi(),w=ol(d);gs(d,w,f),GS(d,w)}},n.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var w=_h(f.pendingLanes);w!==0&&(Ww(f,w|1),Pi(f,Rr()),!(an&6)&&(pd(),bo()))}break;case 13:var M=fi();LP(function(){return gs(d,1,M)}),GS(d,1)}},n.batchedUpdates=function(d,f){var w=an;an|=1;try{return d(f)}finally{an=w,an===0&&(pd(),Wg&&bo())}},n.createComponentSelector=function(d){return{$$typeof:gv,value:d}},n.createContainer=function(d,f,w,M,A,k,G){return jP(d,f,!1,null,w,M,A,k,G)},n.createHasPseudoClassSelector=function(d){return{$$typeof:vv,value:d}},n.createHydrationContainer=function(d,f,w,M,A,k,G,ie,be){return d=jP(w,M,!0,d,A,k,G,ie,be),d.context=HP(null),w=d.current,M=fi(),A=ol(w),k=sa(M,A),k.callback=f??null,rl(w,k),d.current.lanes=A,wh(d,A,M),Pi(d,M),d},n.createPortal=function(d,f,w){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:M==null?null:""+M,children:d,containerInfo:f,implementation:w}},n.createRoleSelector=function(d){return{$$typeof:yv,value:d}},n.createTestNameSelector=function(d){return{$$typeof:xv,value:d}},n.createTextSelector=function(d){return{$$typeof:_v,value:d}},n.deferredUpdates=function(d){var f=yn,w=or.transition;try{return or.transition=null,yn=16,d()}finally{yn=f,or.transition=w}},n.discreteUpdates=function(d,f,w,M,A){var k=yn,G=or.transition;try{return or.transition=null,yn=1,d(f,w,M,A)}finally{yn=k,or.transition=G,an===0&&pd()}},n.findAllNodes=NS,n.findBoundingRects=function(d,f){if(!Ze)throw Error(o(363));f=NS(d,f),d=[];for(var w=0;w<f.length;w++)d.push(N(f[w]));for(f=d.length-1;0<f;f--){w=d[f];for(var M=w.x,A=M+w.width,k=w.y,G=k+w.height,ie=f-1;0<=ie;ie--)if(f!==ie){var be=d[ie],Ve=be.x,yt=Ve+be.width,Gt=be.y,Dt=Gt+be.height;if(M>=Ve&&k>=Gt&&A<=yt&&G<=Dt){d.splice(f,1);break}else if(M!==Ve||w.width!==be.width||Dt<k||Gt>G){if(!(k!==Gt||w.height!==be.height||yt<M||Ve>A)){Ve>M&&(be.width+=Ve-M,be.x=M),yt<A&&(be.width=A-Ve),d.splice(f,1);break}}else{Gt>k&&(be.height+=Gt-k,be.y=k),Dt<G&&(be.height=G-Gt),d.splice(f,1);break}}}return d},n.findHostInstance=WP,n.findHostInstanceWithNoPortals=function(d){return d=F(d),d=d!==null?q(d):null,d===null?null:d.stateNode},n.findHostInstanceWithWarning=function(d){return WP(d)},n.flushControlled=function(d){var f=an;an|=1;var w=or.transition,M=yn;try{or.transition=null,yn=1,d()}finally{yn=M,or.transition=w,an=f,an===0&&(pd(),bo())}},n.flushPassiveEffects=Ac,n.flushSync=LP,n.focusWithin=function(d,f){if(!Ze)throw Error(o(363));for(d=CS(d),f=PP(d,f),f=Array.from(f),d=0;d<f.length;){var w=f[d++];if(!$(w)){if(w.tag===5&&te(w.stateNode))return!0;for(w=w.child;w!==null;)f.push(w),w=w.sibling}}return!1},n.getCurrentUpdatePriority=function(){return yn},n.getFindAllNodesFailureDescription=function(d,f){if(!Ze)throw Error(o(363));var w=0,M=[];d=[CS(d),0];for(var A=0;A<d.length;){var k=d[A++],G=d[A++],ie=f[G];if((k.tag!==5||!$(k))&&(RS(k,ie)&&(M.push(PS(ie)),G++,G>w&&(w=G)),G<f.length))for(k=k.child;k!==null;)d.push(k,G),k=k.sibling}if(w<f.length){for(d=[];w<f.length;w++)d.push(PS(f[w]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},n.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return K(d.child.stateNode);default:return d.child.stateNode}},n.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:UH,findFiberByHostInstance:d.findFiberByHostInstance||BH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)d=!0;else{try{Hg=f.inject(d),wo=f}catch{}d=!!f.checkDCE}}return d},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(d,f,w,M){if(!Ze)throw Error(o(363));d=NS(d,f);var A=pe(d,w,M).disconnect;return{disconnect:function(){A()}}},n.registerMutableSourceForHydration=function(d,f){var w=f._getVersion;w=w(f._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[f,w]:d.mutableSourceEagerHydrationData.push(f,w)},n.runWithPriority=function(d,f){var w=yn;try{return yn=d,f()}finally{yn=w}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(d,f,w,M){var A=f.current,k=fi(),G=ol(A);return w=HP(w),f.context===null?f.context=w:f.pendingContext=w,f=sa(k,G),f.payload={element:d},M=M===void 0?null:M,M!==null&&(f.callback=M),rl(A,f),d=gs(A,G,k),d!==null&&Yg(d,A,G),G},n};h5.exports=rce;var ice=h5.exports;const sce=YE(ice);var p5={exports:{}},m5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,W){var Y=O.length;O.push(W);e:for(;0<Y;){var re=Y-1>>>1,we=O[re];if(0<i(we,W))O[re]=W,O[Y]=we,Y=re;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var W=O[0],Y=O.pop();if(Y!==W){O[0]=Y;e:for(var re=0,we=O.length,Ue=we>>>1;re<Ue;){var de=2*(re+1)-1,Se=O[de],Ie=de+1,he=O[Ie];if(0>i(Se,Y))Ie<we&&0>i(he,Se)?(O[re]=he,O[Ie]=Y,re=Ie):(O[re]=Se,O[de]=Y,re=de);else if(Ie<we&&0>i(he,Y))O[re]=he,O[Ie]=Y,re=Ie;else break e}}return W}function i(O,W){var Y=O.sortIndex-W.sortIndex;return Y!==0?Y:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=O)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function E(O){if(y=!1,S(O),!v)if(n(l)!==null)v=!0,K(R);else{var W=n(c);W!==null&&ne(E,W.startTime-O)}}function R(O,W){v=!1,y&&(y=!1,g(D),D=-1),m=!0;var Y=p;try{for(S(W),h=n(l);h!==null&&(!(h.expirationTime>W)||O&&!F());){var re=h.callback;if(typeof re=="function"){h.callback=null,p=h.priorityLevel;var we=re(h.expirationTime<=W);W=t.unstable_now(),typeof we=="function"?h.callback=we:h===n(l)&&r(l),S(W)}else r(l);h=n(l)}if(h!==null)var Ue=!0;else{var de=n(c);de!==null&&ne(E,de.startTime-W),Ue=!1}return Ue}finally{h=null,p=Y,m=!1}}var I=!1,C=null,D=-1,L=5,P=-1;function F(){return!(t.unstable_now()-P<L)}function z(){if(C!==null){var O=t.unstable_now();P=O;var W=!0;try{W=C(!0,O)}finally{W?H():(I=!1,C=null)}}else I=!1}var H;if(typeof _=="function")H=function(){_(z)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,se=q.port2;q.port1.onmessage=z,H=function(){se.postMessage(null)}}else H=function(){x(z,0)};function K(O){C=O,I||(I=!0,H())}function ne(O,W){D=x(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,K(R))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var Y=p;p=W;try{return O()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=p;p=O;try{return W()}finally{p=Y}},t.unstable_scheduleCallback=function(O,W,Y){var re=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,O){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Y+we,O={id:u++,callback:W,priorityLevel:O,startTime:Y,expirationTime:we,sortIndex:-1},Y>re?(O.sortIndex=Y,e(c,O),n(l)===null&&O===n(c)&&(y?(g(D),D=-1):y=!0,ne(E,Y-re))):(O.sortIndex=we,e(l,O),v||m||(v=!0,K(R))),O},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(O){var W=p;return function(){var Y=p;p=W;try{return O.apply(this,arguments)}finally{p=Y}}}})(m5);p5.exports=m5;var xk=p5.exports;const GC={},oce=t=>void Object.assign(GC,t);function ace(t,e){function n(u,{args:h=[],attach:p,...m},v){let y=`${u[0].toUpperCase()}${u.slice(1)}`,x;if(u==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=jd(g,{type:u,root:v,attach:p,primitive:!0})}else{const g=GC[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=jd(new g(...h),{type:u,root:v,attach:p,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x.isBufferGeometry?x.__r3f.attach="geometry":x.isMaterial&&(x.__r3f.attach="material")),y!=="inject"&&j1(x,m),x}function r(u,h){let p=!1;if(h){var m,v;(m=h.__r3f)!=null&&m.attach?V1(u,h,h.__r3f.attach):h.isObject3D&&u.isObject3D&&(u.add(h),p=!0),p||(v=u.__r3f)==null||v.objects.push(h),h.__r3f||jd(h,{}),h.__r3f.parent=u,XE(h),Hd(h)}}function i(u,h,p){let m=!1;if(h){var v,y;if((v=h.__r3f)!=null&&v.attach)V1(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){h.parent=u,h.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:h});const x=u.children.filter(_=>_!==h),g=x.indexOf(p);u.children=[...x.slice(0,g),h,...x.slice(g)],m=!0}m||(y=u.__r3f)==null||y.objects.push(h),h.__r3f||jd(h,{}),h.__r3f.parent=u,XE(h),Hd(h)}}function s(u,h,p=!1){u&&[...u].forEach(m=>o(h,m,p))}function o(u,h,p){if(h){var m,v,y;if(h.__r3f&&(h.__r3f.parent=null),(m=u.__r3f)!=null&&m.objects&&(u.__r3f.objects=u.__r3f.objects.filter(E=>E!==h)),(v=h.__r3f)!=null&&v.attach)Mk(u,h,h.__r3f.attach);else if(h.isObject3D&&u.isObject3D){var x;u.remove(h),(x=h.__r3f)!=null&&x.root&&mce(E0(h),h)}const _=(y=h.__r3f)==null?void 0:y.primitive,S=!_&&(p===void 0?h.dispose!==null:p);if(!_){var g;s((g=h.__r3f)==null?void 0:g.objects,h,S),s(h.children,h,S)}if(delete h.__r3f,S&&h.dispose&&h.type!=="Scene"){const E=()=>{try{h.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?xk.unstable_scheduleCallback(xk.unstable_IdlePriority,E):E()}Hd(u)}}function a(u,h,p,m){var v;const y=(v=u.__r3f)==null?void 0:v.parent;if(!y)return;const x=n(h,p,u.__r3f.root);if(u.children){for(const g of u.children)g.__r3f&&r(x,g);u.children=u.children.filter(g=>!g.__r3f)}u.__r3f.objects.forEach(g=>r(x,g)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(y,u),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(y,x),x.raycast&&x.__r3f.eventCount&&E0(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>{};return{reconciler:sce({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,h)=>{if(!h)return;const p=u.getState().scene;p.__r3f&&(p.__r3f.root=u,r(p,h))},removeChildFromContainer:(u,h)=>{h&&o(u.getState().scene,h)},insertInContainerBefore:(u,h,p)=>{if(!h||!p)return;const m=u.getState().scene;m.__r3f&&i(m,h,p)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var h;return!!((h=u==null?void 0:u.__r3f)!=null?h:{}).handlers},prepareUpdate(u,h,p,m){var v;if(((v=u==null?void 0:u.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==u)return[!0];{const{args:x=[],children:g,..._}=m,{args:S=[],children:E,...R}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((C,D)=>C!==S[D]))return[!0];const I=S5(u,_,R,!0);return I.changes.length?[!1,I]:null}},commitUpdate(u,[h,p],m,v,y,x){h?a(u,m,y,x):j1(u,p)},commitMount(u,h,p,m){var v;const y=(v=u.__r3f)!=null?v:{};u.raycast&&y.handlers&&y.eventCount&&E0(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>jd(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var h;const{attach:p,parent:m}=(h=u.__r3f)!=null?h:{};p&&m&&Mk(m,u,p),u.isObject3D&&(u.visible=!1),Hd(u)},unhideInstance(u,h){var p;const{attach:m,parent:v}=(p=u.__r3f)!=null?p:{};m&&v&&V1(v,u,m),(u.isObject3D&&h.visible==null||h.visible)&&(u.visible=!0),Hd(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():pf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&On.fun(performance.now)?performance.now:On.fun(Date.now)?Date.now:()=>0,scheduleTimeout:On.fun(setTimeout)?setTimeout:void 0,cancelTimeout:On.fun(clearTimeout)?clearTimeout:void 0}),applyProps:j1}}var _k,wk;const z1=t=>"colorSpace"in t||"outputColorSpace"in t,g5=()=>{var t;return(t=GC.ColorManagement)!=null?t:null},v5=t=>t&&t.isOrthographicCamera,lce=t=>t&&t.hasOwnProperty("current"),Fg=typeof window<"u"&&((_k=window.document)!=null&&_k.createElement||((wk=window.navigator)==null?void 0:wk.product)==="ReactNative")?T.useLayoutEffect:T.useEffect;function y5(t){const e=T.useRef(t);return Fg(()=>void(e.current=t),[t]),e}function cce({set:t}){return Fg(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class x5 extends T.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}x5.getDerivedStateFromError=()=>({error:!0});const _5="__default",Sk=new Map,uce=t=>t&&!!t.memoized&&!!t.changes;function w5(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const hp=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()};function E0(t){let e=t.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const On={obj:t=>t===Object(t)&&!On.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(On.str(t)||On.num(t)||On.boo(t))return t===e;const s=On.obj(t);if(s&&r==="reference")return t===e;const o=On.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!On.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(On.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function dce(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function jd(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function GE(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const bk=/-\d+$/;function V1(t,e,n){if(On.str(n)){if(bk.test(n)){const s=n.replace(bk,""),{target:o,key:a}=GE(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=GE(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function Mk(t,e,n){var r,i;if(On.str(n)){const{target:s,key:o}=GE(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function S5(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},c=!1){const u=t.__r3f,h=Object.entries(i),p=[];if(c){const v=Object.keys(l);for(let y=0;y<v.length;y++)i.hasOwnProperty(v[y])||h.unshift([v[y],_5+"remove"])}h.forEach(([v,y])=>{var x;if((x=t.__r3f)!=null&&x.primitive&&v==="object"||On.equ(y,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return p.push([v,y,!0,[]]);let g=[];v.includes("-")&&(g=v.split("-")),p.push([v,y,!1,g]);for(const _ in i){const S=i[_];_.startsWith(`${v}-`)&&p.push([_,S,!1,_.split("-")])}});const m={...i};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(m.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(m.attach=u.memoizedProps.attach),{memoized:m,changes:p}}const fce=typeof process<"u"&&!1;function j1(t,e){var n;const r=t.__r3f,i=r==null?void 0:r.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=uce(e)?e:S5(t,e),l=r==null?void 0:r.eventCount;t.__r3f&&(t.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,v,y,x]=a[p];if(z1(t)){const E="srgb",R="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?E:R):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?E:R)}let g=t,_=g[m];if(x.length&&(_=x.reduce((S,E)=>S[E],t),!(_&&_.set))){const[S,...E]=x.reverse();g=E.reverse().reduce((R,I)=>R[I],t),m=S}if(v===_5+"remove")if(g.constructor){let S=Sk.get(g.constructor);S||(S=new g.constructor,Sk.set(g.constructor,S)),v=S[m]}else v=0;if(y&&r)v?r.handlers[m]=v:delete r.handlers[m],r.eventCount=Object.keys(r.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof bu)){if(Array.isArray(v))_.fromArray?_.fromArray(v):_.set(...v);else if(_.copy&&v&&v.constructor&&(fce?_.constructor.name===v.constructor.name:_.constructor===v.constructor))_.copy(v);else if(v!==void 0){var c;const S=(c=_)==null?void 0:c.isColor;!S&&_.setScalar?_.setScalar(v):_ instanceof bu&&v instanceof bu?_.mask=v.mask:_.set(v),!g5()&&s&&!s.linear&&S&&_.convertSRGBToLinear()}}else{var u;if(g[m]=v,(u=g[m])!=null&&u.isTexture&&g[m].format===ii&&g[m].type===po&&s){const S=g[m];z1(S)&&z1(s.gl)?S.colorSpace=s.gl.outputColorSpace:S.encoding=s.gl.outputEncoding}}Hd(t)}if(r&&r.parent&&t.raycast&&l!==r.eventCount){const p=E0(t).getState().internal,m=p.interaction.indexOf(t);m>-1&&p.interaction.splice(m,1),r.eventCount&&p.interaction.push(t)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(n=t.__r3f)!=null&&n.parent&&XE(t),t}function Hd(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function XE(t){t.onUpdate==null||t.onUpdate(t)}function hce(t,e){t.manual||(v5(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Qy(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function pce(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return pf.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return pf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return pf.ContinuousEventPriority;default:return pf.DefaultEventPriority}}function b5(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function mce(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{b5(n.capturedMap,e,r,i)})}function gce(t){function e(l){const{internal:c}=t.getState(),u=l.offsetX-c.initialClick[0],h=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+h*h))}function n(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var h;return(h=c.__r3f)==null?void 0:h.handlers["onPointer"+u]}))}function r(l,c){const u=t.getState(),h=new Set,p=[],m=c?c(u.internal.interaction):u.internal.interaction;for(let g=0;g<m.length;g++){const _=hp(m[g]);_&&(_.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function v(g){const _=hp(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var S;_.events.compute==null||_.events.compute(l,_,(S=_.previousRoot)==null?void 0:S.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let y=m.flatMap(v).sort((g,_)=>{const S=hp(g.object),E=hp(_.object);return!S||!E?g.distance-_.distance:E.events.priority-S.events.priority||g.distance-_.distance}).filter(g=>{const _=Qy(g);return h.has(_)?!1:(h.add(_),!0)});u.events.filter&&(y=u.events.filter(y,u));for(const g of y){let _=g.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let g of u.internal.capturedMap.get(l.pointerId).values())h.has(Qy(g.intersection))||p.push(g.intersection);return p}function i(l,c,u,h){const p=t.getState();if(l.length){const m={stopped:!1};for(const v of l){const y=hp(v.object)||p,{raycaster:x,pointer:g,camera:_,internal:S}=y,E=new j(g.x,g.y,0).unproject(_),R=P=>{var F,z;return(F=(z=S.capturedMap.get(P))==null?void 0:z.has(v.eventObject))!=null?F:!1},I=P=>{const F={intersection:v,target:c.target};S.capturedMap.has(P)?S.capturedMap.get(P).set(v.eventObject,F):S.capturedMap.set(P,new Map([[v.eventObject,F]])),c.target.setPointerCapture(P)},C=P=>{const F=S.capturedMap.get(P);F&&b5(S.capturedMap,v.eventObject,F,P)};let D={};for(let P in c){let F=c[P];typeof F!="function"&&(D[P]=F)}let L={...v,...D,pointer:g,intersections:l,stopped:m.stopped,delta:u,unprojectedPoint:E,ray:x.ray,camera:_,stopPropagation(){const P="pointerId"in c&&S.capturedMap.get(c.pointerId);if((!P||P.has(v.eventObject))&&(L.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(F=>F.eventObject===v.eventObject))){const F=l.slice(0,l.indexOf(v));s([...F,v])}},target:{hasPointerCapture:R,setPointerCapture:I,releasePointerCapture:C},currentTarget:{hasPointerCapture:R,setPointerCapture:I,releasePointerCapture:C},nativeEvent:c};if(h(L),m.stopped===!0)break}}return l}function s(l){const{internal:c}=t.getState();for(const u of c.hovered.values())if(!l.length||!l.find(h=>h.object===u.object&&h.index===u.index&&h.instanceId===u.instanceId)){const p=u.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(Qy(u)),p!=null&&p.eventCount){const v={...u,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,c){for(let u=0;u<c.length;u++){const h=c[u].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=t.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:h,internal:p}=t.getState();p.lastEvent.current=u;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(u,m?n:void 0),g=v?e(u):0;l==="onPointerDown"&&(p.initialClick=[u.offsetX,u.offsetY],p.initialHits=x.map(S=>S.eventObject)),v&&!x.length&&g<=2&&(o(u,p.interaction),h&&h(u)),m&&s(x);function _(S){const E=S.eventObject,R=E.__r3f,I=R==null?void 0:R.handlers;if(R!=null&&R.eventCount)if(m){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const C=Qy(S),D=p.hovered.get(C);D?D.stopped&&S.stopPropagation():(p.hovered.set(C,S),I.onPointerOver==null||I.onPointerOver(S),I.onPointerEnter==null||I.onPointerEnter(S))}I.onPointerMove==null||I.onPointerMove(S)}else{const C=I[l];C?(!v||p.initialHits.includes(E))&&(o(u,p.interaction.filter(D=>!p.initialHits.includes(D))),C(S)):v&&p.initialHits.includes(E)&&o(u,p.interaction.filter(D=>!p.initialHits.includes(D)))}}i(x,u,g,_)}}return{handlePointer:a}}const M5=t=>!!(t!=null&&t.render),E5=T.createContext(null),vce=(t,e)=>{const n=ece((a,l)=>{const c=new j,u=new j,h=new j;function p(g=l().camera,_=u,S=l().size){const{width:E,height:R,top:I,left:C}=S,D=E/R;_.isVector3?h.copy(_):h.set(..._);const L=g.getWorldPosition(c).distanceTo(h);if(v5(g))return{width:E/g.zoom,height:R/g.zoom,top:I,left:C,factor:1,distance:L,aspect:D};{const P=g.fov*Math.PI/180,F=2*Math.tan(P/2)*L,z=F*(E/R);return{width:z,height:F,top:I,left:C,factor:E/z,distance:L,aspect:D}}}let m;const v=g=>a(_=>({performance:{..._.performance,current:g}})),y=new Ae;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new zC,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,S,E,R)=>{const I=l().camera,C={width:g,height:_,top:E||0,left:R||0,updateStyle:S};a(D=>({size:C,viewport:{...D.viewport,...p(I,u,C)}}))},setDpr:g=>a(_=>{const S=w5(g);return{viewport:{..._.viewport,dpr:S,initialDpr:_.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:T.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,S)=>{const E=l().internal;return E.priority=E.priority+(_>0?1:0),E.subscribers.push({ref:g,priority:_,store:S}),E.subscribers=E.subscribers.sort((R,I)=>R.priority-I.priority),()=>{const R=l().internal;R!=null&&R.subscribers&&(R.priority=R.priority-(_>0?1:0),R.subscribers=R.subscribers.filter(I=>I.ref!==g))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:h}=n.getState();if(l.width!==i.width||l.height!==i.height||c.dpr!==s){var p;i=l,s=c.dpr,hce(a,l),u.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let Jy,yce=new Set,xce=new Set,_ce=new Set;function H1(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function pp(t,e){switch(t){case"before":return H1(yce,e);case"after":return H1(xce,e);case"tail":return H1(_ce,e)}}let W1,G1;function X1(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),W1=e.internal.subscribers,Jy=0;Jy<W1.length;Jy++)G1=W1[Jy],G1.ref.current(G1.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function wce(t){let e=!1,n=!1,r,i,s;function o(c){i=requestAnimationFrame(o),e=!0,r=0,pp("before",c),n=!0;for(const h of t.values()){var u;s=h.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(r+=X1(c,s))}if(n=!1,pp("after",c),r===0)return pp("tail",c),e=!1,cancelAnimationFrame(i)}function a(c,u=1){var h;if(!c)return t.forEach(p=>a(p.store.getState(),u));(h=c.gl.xr)!=null&&h.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):n?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,h,p){if(u&&pp("before",c),h)X1(c,h,p);else for(const m of t.values())X1(c,m.store.getState());u&&pp("after",c)}return{loop:o,invalidate:a,advance:l}}function T5(){const t=T.useContext(E5);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Zi(t=n=>n,e){return T5()(t,e)}function XC(t,e=0){const n=T5(),r=n.getState().internal.subscribe,i=y5(t);return Fg(()=>r(i,e,n),[e,r,n]),null}const nh=new Map,{invalidate:Ek,advance:Tk}=wce(nh),{reconciler:u_,applyProps:Bd}=ace(nh,pce),zd={objects:"shallow",strict:!1},Sce=(t,e)=>{const n=typeof t=="function"?t(e):t;return M5(n)?n:new vV({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function bce(t,e){const n=typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement;if(e){const{width:r,height:i,top:s,left:o,updateStyle:a=n}=e;return{width:r,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:r,height:i,top:s,left:o}=t.parentElement.getBoundingClientRect();return{width:r,height:i,top:s,left:o,updateStyle:n}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0,updateStyle:n};return{width:0,height:0,top:0,left:0}}function Mce(t){const e=nh.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||vce(Ek,Tk),o=n||u_.createContainer(s,pf.ConcurrentRoot,null,!1,null,"",i,null);e||nh.set(t,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:h,size:p,scene:m,events:v,onCreated:y,shadows:x=!1,linear:g=!1,flat:_=!1,legacy:S=!1,orthographic:E=!1,frameloop:R="always",dpr:I=[1,2],performance:C,raycaster:D,camera:L,onPointerMissed:P}=u,F=s.getState(),z=F.gl;F.gl||F.set({gl:z=Sce(h,t)});let H=F.raycaster;H||F.set({raycaster:H=new u5});const{params:q,...se}=D||{};if(On.equ(se,H,zd)||Bd(H,{...se}),On.equ(q,H.params,zd)||Bd(H,{params:{...H.params,...q}}),!F.camera||F.camera===c&&!On.equ(c,L,zd)){c=L;const Y=L instanceof Rg,re=Y?L:E?new Yl(0,0,0,0,.1,1e3):new dr(75,0,.1,1e3);Y||(re.position.z=5,L&&(Bd(re,L),("aspect"in L||"left"in L||"right"in L||"bottom"in L||"top"in L)&&(re.manual=!0,re.updateProjectionMatrix())),!F.camera&&!(L!=null&&L.rotation)&&re.lookAt(0,0,0)),F.set({camera:re}),H.camera=re}if(!F.scene){let Y;m!=null&&m.isScene?Y=m:(Y=new bC,m&&Bd(Y,m)),F.set({scene:jd(Y)})}if(!F.xr){var K;const Y=(Ue,de)=>{const Se=s.getState();Se.frameloop!=="never"&&Tk(Ue,!0,Se,de)},re=()=>{const Ue=s.getState();Ue.gl.xr.enabled=Ue.gl.xr.isPresenting,Ue.gl.xr.setAnimationLoop(Ue.gl.xr.isPresenting?Y:null),Ue.gl.xr.isPresenting||Ek(Ue)},we={connect(){const Ue=s.getState().gl;Ue.xr.addEventListener("sessionstart",re),Ue.xr.addEventListener("sessionend",re)},disconnect(){const Ue=s.getState().gl;Ue.xr.removeEventListener("sessionstart",re),Ue.xr.removeEventListener("sessionend",re)}};typeof((K=z.xr)==null?void 0:K.addEventListener)=="function"&&we.connect(),F.set({xr:we})}if(z.shadowMap){const Y=z.shadowMap.enabled,re=z.shadowMap.type;if(z.shadowMap.enabled=!!x,On.boo(x))z.shadowMap.type=$p;else if(On.str(x)){var ne;const we={basic:p4,percentage:iw,soft:$p,variance:qs};z.shadowMap.type=(ne=we[x])!=null?ne:$p}else On.obj(x)&&Object.assign(z.shadowMap,x);(Y!==z.shadowMap.enabled||re!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const O=g5();O&&("enabled"in O?O.enabled=!S:"legacyMode"in O&&(O.legacyMode=S)),l||Bd(z,{outputEncoding:g?3e3:3001,toneMapping:_?Xo:rC}),F.legacy!==S&&F.set(()=>({legacy:S})),F.linear!==g&&F.set(()=>({linear:g})),F.flat!==_&&F.set(()=>({flat:_})),h&&!On.fun(h)&&!M5(h)&&!On.equ(h,z,zd)&&Bd(z,h),v&&!F.events.handlers&&F.set({events:v(s)});const W=bce(t,p);return On.equ(W,F.size,zd)||F.setSize(W.width,W.height,W.updateStyle,W.top,W.left),I&&F.viewport.dpr!==w5(I)&&F.setDpr(I),F.frameloop!==R&&F.setFrameloop(R),F.onPointerMissed||F.set({onPointerMissed:P}),C&&!On.equ(C,F.performance,zd)&&F.set(Y=>({performance:{...Y.performance,...C}})),a=y,l=!0,this},render(u){return l||this.configure(),u_.updateContainer(b.jsx(Ece,{store:s,children:u,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){A5(t)}}}function Ece({store:t,children:e,onCreated:n,rootElement:r}){return Fg(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),b.jsx(E5.Provider,{value:t,children:e})}function A5(t,e){const n=nh.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),u_.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),dce(i),nh.delete(t)}catch{}},500)})}}u_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:T.version});const $1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Tce(t){const{handlePointer:e}=gce(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys($1).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,c]=$1[o];n.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=$1[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}function Ak(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function Ace({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=T.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=T.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,c=t?typeof t=="number"?t:t.resize:null,u=T.useRef(!1);T.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[h,p,m]=T.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:_,top:S,width:E,height:R,bottom:I,right:C,x:D,y:L}=a.current.element.getBoundingClientRect(),P={left:_,top:S,width:E,height:R,bottom:I,right:C,x:D,y:L};a.current.element instanceof HTMLElement&&r&&(P.height=a.current.element.offsetHeight,P.width=a.current.element.offsetWidth),Object.freeze(P),u.current&&!Nce(a.current.lastBounds,P)&&o(a.current.lastBounds=P)};return[g,c?Ak(g,c):g,l?Ak(g,l):g]},[o,r,l,c]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function y(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=C5(g),y())};return Rce(m,!!e),Cce(p),T.useEffect(()=>{v(),y()},[e,m,p]),T.useEffect(()=>v,[]),[x,s,h]}function Cce(t){T.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function Rce(t,e){T.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function C5(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...C5(t.parentElement)]}const Pce=["x","y","top","bottom","left","right","width","height"],Nce=(t,e)=>Pce.every(n=>t[n]===e[n]);var Ice=Object.defineProperty,Lce=Object.defineProperties,Dce=Object.getOwnPropertyDescriptors,Ck=Object.getOwnPropertySymbols,kce=Object.prototype.hasOwnProperty,Oce=Object.prototype.propertyIsEnumerable,Rk=(t,e,n)=>e in t?Ice(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pk=(t,e)=>{for(var n in e||(e={}))kce.call(e,n)&&Rk(t,n,e[n]);if(Ck)for(var n of Ck(e))Oce.call(e,n)&&Rk(t,n,e[n]);return t},Fce=(t,e)=>Lce(t,Dce(e)),Nk,Ik;typeof window<"u"&&((Nk=window.document)!=null&&Nk.createElement||((Ik=window.navigator)==null?void 0:Ik.product)==="ReactNative")?T.useLayoutEffect:T.useEffect;function R5(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=t.child;for(;r;){const i=R5(r,e,n);if(i)return i;r=r.sibling}}function P5(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const Lk=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=Lk;return}return Lk.apply(this,arguments)};const $C=P5(T.createContext(null));class N5 extends T.Component{render(){return T.createElement($C.Provider,{value:this._reactInternals},this.props.children)}}function Uce(){const t=T.useContext($C);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=T.useId();return T.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=R5(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function Bce(){const t=Uce(),[e]=T.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==$C&&!e.has(i)&&e.set(i,T.useContext(P5(i)))}n=n.return}return e}function zce(){const t=Bce();return T.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>T.createElement(e,null,T.createElement(n.Provider,Fce(Pk({},r),{value:t.get(n)}))),e=>T.createElement(N5,Pk({},e))),[t])}const Vce=T.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=Tce,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:x,raycaster:g,camera:_,scene:S,onPointerMissed:E,onCreated:R,...I},C){T.useMemo(()=>oce(Kle),[]);const D=zce(),[L,P]=Ace({scroll:!0,debounce:{scroll:50,resize:0},...r}),F=T.useRef(null),z=T.useRef(null);T.useImperativeHandle(C,()=>F.current);const H=y5(E),[q,se]=T.useState(!1),[K,ne]=T.useState(!1);if(q)throw q;if(K)throw K;const O=T.useRef(null);Fg(()=>{const Y=F.current;P.width>0&&P.height>0&&Y&&(O.current||(O.current=Mce(Y)),O.current.configure({gl:s,events:o,shadows:c,linear:u,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:y,performance:x,raycaster:g,camera:_,scene:S,size:P,onPointerMissed:(...re)=>H.current==null?void 0:H.current(...re),onCreated:re=>{re.events.connect==null||re.events.connect(a?lce(a)?a.current:a:z.current),l&&re.setEvents({compute:(we,Ue)=>{const de=we[l+"X"],Se=we[l+"Y"];Ue.pointer.set(de/Ue.size.width*2-1,-(Se/Ue.size.height)*2+1),Ue.raycaster.setFromCamera(Ue.pointer,Ue.camera)}}),R==null||R(re)}}),O.current.render(b.jsx(D,{children:b.jsx(x5,{set:ne,children:b.jsx(T.Suspense,{fallback:b.jsx(cce,{set:se}),children:e??null})})})))}),T.useEffect(()=>{const Y=F.current;if(Y)return()=>A5(Y)},[]);const W=a?"none":"auto";return b.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...i},...I,children:b.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:b.jsx("canvas",{ref:F,style:{display:"block"},children:n})})})}),jce=T.forwardRef(function(e,n){return b.jsx(N5,{children:b.jsx(Vce,{...e,ref:n})})});function d_(){return d_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d_.apply(null,arguments)}const I5=T.createContext(null);function Hce({map:t,children:e,onChange:n,domElement:r}){const i=t.map(l=>l.name+l.keys).join("-"),s=T.useMemo(()=>nw(tC(()=>t.reduce((l,c)=>({...l,[c.name]:!1}),{}))),[i]),o=T.useMemo(()=>[s.subscribe,s.getState,s],[i]),a=s.setState;return T.useEffect(()=>{const c=t.map(({name:m,keys:v,up:y})=>({keys:v,up:y,fn:x=>{a({[m]:x}),n&&n(m,x,o[1]())}})).reduce((m,{keys:v,fn:y,up:x=!0})=>(v.forEach(g=>m[g]={fn:y,pressed:!1,up:x}),m),{}),u=({key:m,code:v})=>{const y=c[m]||c[v];if(!y)return;const{fn:x,pressed:g,up:_}=y;y.pressed=!0,(_||!g)&&x(!0)},h=({key:m,code:v})=>{const y=c[m]||c[v];if(!y)return;const{fn:x,up:g}=y;y.pressed=!1,g&&x(!1)},p=r||window;return p.addEventListener("keydown",u,{passive:!0}),p.addEventListener("keyup",h,{passive:!0}),()=>{p.removeEventListener("keydown",u),p.removeEventListener("keyup",h)}},[r,i]),T.createElement(I5.Provider,{value:o,children:e})}function Wce(t){const[e,n,r]=T.useContext(I5);return[e,n]}var Gce=Object.defineProperty,Xce=(t,e,n)=>e in t?Gce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$ce=(t,e,n)=>(Xce(t,e+"",n),n);class Yce{constructor(){$ce(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var qce=Object.defineProperty,Zce=(t,e,n)=>e in t?qce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kt=(t,e,n)=>(Zce(t,typeof e!="symbol"?e+"":e,n),n);const e0=new Qu,Dk=new ba,Kce=Math.cos(70*(Math.PI/180)),kk=(t,e)=>(t%e+e)%e;let Qce=class extends Yce{constructor(e,n){super(),kt(this,"object"),kt(this,"domElement"),kt(this,"enabled",!0),kt(this,"target",new j),kt(this,"minDistance",0),kt(this,"maxDistance",1/0),kt(this,"minZoom",0),kt(this,"maxZoom",1/0),kt(this,"minPolarAngle",0),kt(this,"maxPolarAngle",Math.PI),kt(this,"minAzimuthAngle",-1/0),kt(this,"maxAzimuthAngle",1/0),kt(this,"enableDamping",!1),kt(this,"dampingFactor",.05),kt(this,"enableZoom",!0),kt(this,"zoomSpeed",1),kt(this,"enableRotate",!0),kt(this,"rotateSpeed",1),kt(this,"enablePan",!0),kt(this,"panSpeed",1),kt(this,"screenSpacePanning",!0),kt(this,"keyPanSpeed",7),kt(this,"zoomToCursor",!1),kt(this,"autoRotate",!1),kt(this,"autoRotateSpeed",2),kt(this,"reverseOrbit",!1),kt(this,"reverseHorizontalOrbit",!1),kt(this,"reverseVerticalOrbit",!1),kt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),kt(this,"mouseButtons",{LEFT:$c.ROTATE,MIDDLE:$c.DOLLY,RIGHT:$c.PAN}),kt(this,"touches",{ONE:Yc.ROTATE,TWO:Yc.DOLLY_PAN}),kt(this,"target0"),kt(this,"position0"),kt(this,"zoom0"),kt(this,"_domElementKeyEvents",null),kt(this,"getPolarAngle"),kt(this,"getAzimuthalAngle"),kt(this,"setPolarAngle"),kt(this,"setAzimuthalAngle"),kt(this,"getDistance"),kt(this,"getZoomScale"),kt(this,"listenToKeyEvents"),kt(this,"stopListenToKeyEvents"),kt(this,"saveState"),kt(this,"reset"),kt(this,"update"),kt(this,"connect"),kt(this,"dispose"),kt(this,"dollyIn"),kt(this,"dollyOut"),kt(this,"getScale"),kt(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=J=>{let Ee=kk(J,2*Math.PI),Xe=u.phi;Xe<0&&(Xe+=2*Math.PI),Ee<0&&(Ee+=2*Math.PI);let Z=Math.abs(Ee-Xe);2*Math.PI-Z<Z&&(Ee<Xe?Ee+=2*Math.PI:Xe+=2*Math.PI),h.phi=Ee-Xe,r.update()},this.setAzimuthalAngle=J=>{let Ee=kk(J,2*Math.PI),Xe=u.theta;Xe<0&&(Xe+=2*Math.PI),Ee<0&&(Ee+=2*Math.PI);let Z=Math.abs(Ee-Xe);2*Math.PI-Z<Z&&(Ee<Xe?Ee+=2*Math.PI:Xe+=2*Math.PI),h.theta=Ee-Xe,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",me),this._domElementKeyEvents=J},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",me),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const J=new j,Ee=new j(0,1,0),Xe=new si().setFromUnitVectors(e.up,Ee),Z=Xe.clone().invert(),ke=new j,xe=new si,Te=2*Math.PI;return function(){const qe=r.object.position;Xe.setFromUnitVectors(e.up,Ee),Z.copy(Xe).invert(),J.copy(qe).sub(r.target),J.applyQuaternion(Xe),u.setFromVector3(J),r.autoRotate&&l===a.NONE&&q(z()),r.enableDamping?(u.theta+=h.theta*r.dampingFactor,u.phi+=h.phi*r.dampingFactor):(u.theta+=h.theta,u.phi+=h.phi);let Nt=r.minAzimuthAngle,cn=r.maxAzimuthAngle;isFinite(Nt)&&isFinite(cn)&&(Nt<-Math.PI?Nt+=Te:Nt>Math.PI&&(Nt-=Te),cn<-Math.PI?cn+=Te:cn>Math.PI&&(cn-=Te),Nt<=cn?u.theta=Math.max(Nt,Math.min(cn,u.theta)):u.theta=u.theta>(Nt+cn)/2?Math.max(Nt,u.theta):Math.min(cn,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&L||r.object.isOrthographicCamera?u.radius=Ue(u.radius):u.radius=Ue(u.radius*p),J.setFromSpherical(u),J.applyQuaternion(Z),qe.copy(r.target).add(J),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let Sn=!1;if(r.zoomToCursor&&L){let Wt=null;if(r.object instanceof dr&&r.object.isPerspectiveCamera){const Zn=J.length();Wt=Ue(Zn*p);const Tr=Zn-Wt;r.object.position.addScaledVector(C,Tr),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Zn=new j(D.x,D.y,0);Zn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),Sn=!0;const Tr=new j(D.x,D.y,0);Tr.unproject(r.object),r.object.position.sub(Tr).add(Zn),r.object.updateMatrixWorld(),Wt=J.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Wt!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Wt).add(r.object.position):(e0.origin.copy(r.object.position),e0.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(e0.direction))<Kce?e.lookAt(r.target):(Dk.setFromNormalAndCoplanarPoint(r.object.up,r.target),e0.intersectPlane(Dk,r.target))))}else r.object instanceof Yl&&r.object.isOrthographicCamera&&(Sn=p!==1,Sn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix()));return p=1,L=!1,Sn||ke.distanceToSquared(r.object.position)>c||8*(1-xe.dot(r.object.quaternion))>c?(r.dispatchEvent(i),ke.copy(r.object.position),xe.copy(r.object.quaternion),Sn=!1,!0):!1}})(),this.connect=J=>{r.domElement=J,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ce),r.domElement.addEventListener("pointerdown",N),r.domElement.addEventListener("pointercancel",$),r.domElement.addEventListener("wheel",pe)},this.dispose=()=>{var J,Ee,Xe,Z,ke,xe;r.domElement&&(r.domElement.style.touchAction="auto"),(J=r.domElement)==null||J.removeEventListener("contextmenu",Ce),(Ee=r.domElement)==null||Ee.removeEventListener("pointerdown",N),(Xe=r.domElement)==null||Xe.removeEventListener("pointercancel",$),(Z=r.domElement)==null||Z.removeEventListener("wheel",pe),(ke=r.domElement)==null||ke.ownerDocument.removeEventListener("pointermove",B),(xe=r.domElement)==null||xe.ownerDocument.removeEventListener("pointerup",$),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",me)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,u=new WE,h=new WE;let p=1;const m=new j,v=new Ae,y=new Ae,x=new Ae,g=new Ae,_=new Ae,S=new Ae,E=new Ae,R=new Ae,I=new Ae,C=new j,D=new Ae;let L=!1;const P=[],F={};function z(){return 2*Math.PI/60/60*r.autoRotateSpeed}function H(){return Math.pow(.95,r.zoomSpeed)}function q(J){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=J:h.theta-=J}function se(J){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=J:h.phi-=J}const K=(()=>{const J=new j;return function(Xe,Z){J.setFromMatrixColumn(Z,0),J.multiplyScalar(-Xe),m.add(J)}})(),ne=(()=>{const J=new j;return function(Xe,Z){r.screenSpacePanning===!0?J.setFromMatrixColumn(Z,1):(J.setFromMatrixColumn(Z,0),J.crossVectors(r.object.up,J)),J.multiplyScalar(Xe),m.add(J)}})(),O=(()=>{const J=new j;return function(Xe,Z){const ke=r.domElement;if(ke&&r.object instanceof dr&&r.object.isPerspectiveCamera){const xe=r.object.position;J.copy(xe).sub(r.target);let Te=J.length();Te*=Math.tan(r.object.fov/2*Math.PI/180),K(2*Xe*Te/ke.clientHeight,r.object.matrix),ne(2*Z*Te/ke.clientHeight,r.object.matrix)}else ke&&r.object instanceof Yl&&r.object.isOrthographicCamera?(K(Xe*(r.object.right-r.object.left)/r.object.zoom/ke.clientWidth,r.object.matrix),ne(Z*(r.object.top-r.object.bottom)/r.object.zoom/ke.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function W(J){r.object instanceof dr&&r.object.isPerspectiveCamera||r.object instanceof Yl&&r.object.isOrthographicCamera?p=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Y(J){W(p/J)}function re(J){W(p*J)}function we(J){if(!r.zoomToCursor||!r.domElement)return;L=!0;const Ee=r.domElement.getBoundingClientRect(),Xe=J.clientX-Ee.left,Z=J.clientY-Ee.top,ke=Ee.width,xe=Ee.height;D.x=Xe/ke*2-1,D.y=-(Z/xe)*2+1,C.set(D.x,D.y,1).unproject(r.object).sub(r.object.position).normalize()}function Ue(J){return Math.max(r.minDistance,Math.min(r.maxDistance,J))}function de(J){v.set(J.clientX,J.clientY)}function Se(J){we(J),E.set(J.clientX,J.clientY)}function Ie(J){g.set(J.clientX,J.clientY)}function he(J){y.set(J.clientX,J.clientY),x.subVectors(y,v).multiplyScalar(r.rotateSpeed);const Ee=r.domElement;Ee&&(q(2*Math.PI*x.x/Ee.clientHeight),se(2*Math.PI*x.y/Ee.clientHeight)),v.copy(y),r.update()}function ze(J){R.set(J.clientX,J.clientY),I.subVectors(R,E),I.y>0?Y(H()):I.y<0&&re(H()),E.copy(R),r.update()}function rt(J){_.set(J.clientX,J.clientY),S.subVectors(_,g).multiplyScalar(r.panSpeed),O(S.x,S.y),g.copy(_),r.update()}function je(J){we(J),J.deltaY<0?re(H()):J.deltaY>0&&Y(H()),r.update()}function We(J){let Ee=!1;switch(J.code){case r.keys.UP:O(0,r.keyPanSpeed),Ee=!0;break;case r.keys.BOTTOM:O(0,-r.keyPanSpeed),Ee=!0;break;case r.keys.LEFT:O(r.keyPanSpeed,0),Ee=!0;break;case r.keys.RIGHT:O(-r.keyPanSpeed,0),Ee=!0;break}Ee&&(J.preventDefault(),r.update())}function fe(){if(P.length==1)v.set(P[0].pageX,P[0].pageY);else{const J=.5*(P[0].pageX+P[1].pageX),Ee=.5*(P[0].pageY+P[1].pageY);v.set(J,Ee)}}function Me(){if(P.length==1)g.set(P[0].pageX,P[0].pageY);else{const J=.5*(P[0].pageX+P[1].pageX),Ee=.5*(P[0].pageY+P[1].pageY);g.set(J,Ee)}}function X(){const J=P[0].pageX-P[1].pageX,Ee=P[0].pageY-P[1].pageY,Xe=Math.sqrt(J*J+Ee*Ee);E.set(0,Xe)}function ot(){r.enableZoom&&X(),r.enablePan&&Me()}function Pe(){r.enableZoom&&X(),r.enableRotate&&fe()}function Ge(J){if(P.length==1)y.set(J.pageX,J.pageY);else{const Xe=et(J),Z=.5*(J.pageX+Xe.x),ke=.5*(J.pageY+Xe.y);y.set(Z,ke)}x.subVectors(y,v).multiplyScalar(r.rotateSpeed);const Ee=r.domElement;Ee&&(q(2*Math.PI*x.x/Ee.clientHeight),se(2*Math.PI*x.y/Ee.clientHeight)),v.copy(y)}function Be(J){if(P.length==1)_.set(J.pageX,J.pageY);else{const Ee=et(J),Xe=.5*(J.pageX+Ee.x),Z=.5*(J.pageY+Ee.y);_.set(Xe,Z)}S.subVectors(_,g).multiplyScalar(r.panSpeed),O(S.x,S.y),g.copy(_)}function _t(J){const Ee=et(J),Xe=J.pageX-Ee.x,Z=J.pageY-Ee.y,ke=Math.sqrt(Xe*Xe+Z*Z);R.set(0,ke),I.set(0,Math.pow(R.y/E.y,r.zoomSpeed)),Y(I.y),E.copy(R)}function Ze(J){r.enableZoom&&_t(J),r.enablePan&&Be(J)}function V(J){r.enableZoom&&_t(J),r.enableRotate&&Ge(J)}function N(J){var Ee,Xe;r.enabled!==!1&&(P.length===0&&((Ee=r.domElement)==null||Ee.ownerDocument.addEventListener("pointermove",B),(Xe=r.domElement)==null||Xe.ownerDocument.addEventListener("pointerup",$)),at(J),J.pointerType==="touch"?Ne(J):ae(J))}function B(J){r.enabled!==!1&&(J.pointerType==="touch"?xt(J):te(J))}function $(J){var Ee,Xe,Z;vt(J),P.length===0&&((Ee=r.domElement)==null||Ee.releasePointerCapture(J.pointerId),(Xe=r.domElement)==null||Xe.ownerDocument.removeEventListener("pointermove",B),(Z=r.domElement)==null||Z.ownerDocument.removeEventListener("pointerup",$)),r.dispatchEvent(o),l=a.NONE}function ae(J){let Ee;switch(J.button){case 0:Ee=r.mouseButtons.LEFT;break;case 1:Ee=r.mouseButtons.MIDDLE;break;case 2:Ee=r.mouseButtons.RIGHT;break;default:Ee=-1}switch(Ee){case $c.DOLLY:if(r.enableZoom===!1)return;Se(J),l=a.DOLLY;break;case $c.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(r.enablePan===!1)return;Ie(J),l=a.PAN}else{if(r.enableRotate===!1)return;de(J),l=a.ROTATE}break;case $c.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(r.enableRotate===!1)return;de(J),l=a.ROTATE}else{if(r.enablePan===!1)return;Ie(J),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function te(J){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;he(J);break;case a.DOLLY:if(r.enableZoom===!1)return;ze(J);break;case a.PAN:if(r.enablePan===!1)return;rt(J);break}}function pe(J){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(J.preventDefault(),r.dispatchEvent(s),je(J),r.dispatchEvent(o))}function me(J){r.enabled===!1||r.enablePan===!1||We(J)}function Ne(J){switch(Rt(J),P.length){case 1:switch(r.touches.ONE){case Yc.ROTATE:if(r.enableRotate===!1)return;fe(),l=a.TOUCH_ROTATE;break;case Yc.PAN:if(r.enablePan===!1)return;Me(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Yc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ot(),l=a.TOUCH_DOLLY_PAN;break;case Yc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Pe(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function xt(J){switch(Rt(J),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ge(J),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Be(J),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ze(J),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;V(J),r.update();break;default:l=a.NONE}}function Ce(J){r.enabled!==!1&&J.preventDefault()}function at(J){P.push(J)}function vt(J){delete F[J.pointerId];for(let Ee=0;Ee<P.length;Ee++)if(P[Ee].pointerId==J.pointerId){P.splice(Ee,1);return}}function Rt(J){let Ee=F[J.pointerId];Ee===void 0&&(Ee=new Ae,F[J.pointerId]=Ee),Ee.set(J.pageX,J.pageY)}function et(J){const Ee=J.pointerId===P[0].pointerId?P[1]:P[0];return F[Ee.pointerId]}this.dollyIn=(J=H())=>{re(J),r.update()},this.dollyOut=(J=H())=>{Y(J),r.update()},this.getScale=()=>p,this.setScale=J=>{W(J),r.update()},this.getZoomScale=()=>H(),n!==void 0&&this.connect(n),this.update()}};function Jce(t,e,n){const r=Zi(p=>p.size),i=Zi(p=>p.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:c,...u}=a,h=T.useMemo(()=>{const p=new ks(s,o,{minFilter:fr,magFilter:fr,type:Zu,...u});return c&&(p.depthTexture=new pw(s,o,wi)),p.samples=l,p},[]);return T.useLayoutEffect(()=>{h.setSize(s,o),l&&(h.samples=l)},[l,h,s,o]),T.useEffect(()=>()=>h.dispose(),[]),h}const eue=t=>typeof t=="function",tue=T.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=Zi(({set:x})=>x),l=Zi(({camera:x})=>x),c=Zi(({size:x})=>x),u=T.useRef(null);T.useImperativeHandle(o,()=>u.current,[]);const h=T.useRef(null),p=Jce(e);T.useLayoutEffect(()=>{s.manual||(u.current.aspect=c.width/c.height)},[c,s]),T.useLayoutEffect(()=>{u.current.updateProjectionMatrix()});let m=0,v=null;const y=eue(i);return XC(x=>{y&&(n===1/0||m<n)&&(h.current.visible=!1,x.gl.setRenderTarget(p),v=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,u.current),x.scene.background=v,x.gl.setRenderTarget(null),h.current.visible=!0,m++)}),T.useLayoutEffect(()=>{if(r){const x=l;return a(()=>({camera:u.current})),()=>a(()=>({camera:x}))}},[u,r,a]),T.createElement(T.Fragment,null,T.createElement("perspectiveCamera",d_({ref:u},s),!y&&i),T.createElement("group",{ref:h},y&&i(p.texture)))}),nue=T.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},u)=>{const h=Zi(I=>I.invalidate),p=Zi(I=>I.camera),m=Zi(I=>I.gl),v=Zi(I=>I.events),y=Zi(I=>I.setEvents),x=Zi(I=>I.set),g=Zi(I=>I.get),_=Zi(I=>I.performance),S=e||p,E=r||v.connected||m.domElement,R=T.useMemo(()=>new Qce(S),[S]);return XC(()=>{R.enabled&&R.update()},-1),T.useEffect(()=>(s&&R.connect(s===!0?E:s),R.connect(E),()=>void R.dispose()),[s,E,n,R,h]),T.useEffect(()=>{const I=L=>{h(),n&&_.regress(),o&&o(L)},C=L=>{a&&a(L)},D=L=>{l&&l(L)};return R.addEventListener("change",I),R.addEventListener("start",C),R.addEventListener("end",D),()=>{R.removeEventListener("start",C),R.removeEventListener("end",D),R.removeEventListener("change",I)}},[o,a,l,R,h,y]),T.useEffect(()=>{if(t){const I=g().controls;return x({controls:R}),()=>x({controls:I})}},[t,R]),T.createElement("primitive",d_({ref:u,object:R,enableDamping:i},c))});function rue({animal:t}){const e=T.useRef(null),[n,r]=T.useState({x:0,y:.5,z:0}),[,i]=Wce();XC((o,a)=>{if(!e.current)return;const{forward:l,back:c,left:u,right:h,jump:p}=i(),m=5*a;let v=!1;l&&(r(y=>({...y,z:y.z-m})),v=!0),c&&(r(y=>({...y,z:y.z+m})),v=!0),u&&(r(y=>({...y,x:y.x-m})),v=!0),h&&(r(y=>({...y,x:y.x+m})),v=!0),p&&n.y<=.5&&r(y=>({...y,y:2})),n.y>.5&&r(y=>({...y,y:Math.max(.5,y.y-.1)})),e.current.position.set(n.x,n.y,n.z),v&&console.log(`Position: x=${n.x.toFixed(2)}, y=${n.y.toFixed(2)}, z=${n.z.toFixed(2)}`)});const s=()=>{switch(t.toLowerCase()){case"rabbit":return"#A89F91";case"fox":return"#D2691E";case"bear":return"#8B4513";case"owl":return"#D2B48C";case"lion":return"#DAA520";case"elephant":return"#A9A9A9";case"turtle":return"#228B22";case"penguin":return"#000000";default:return"#4169E1"}};return b.jsxs("mesh",{ref:e,position:[n.x,n.y,n.z],children:[b.jsx("boxGeometry",{args:[1,1,1]}),b.jsx("meshStandardMaterial",{color:s()})]})}function iue(){return b.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,0,0],children:[b.jsx("planeGeometry",{args:[20,20]}),b.jsx("meshStandardMaterial",{color:"#7CFC00"})]})}function sue({animal:t}){return b.jsxs(b.Fragment,{children:[b.jsx("ambientLight",{intensity:.5}),b.jsx("directionalLight",{position:[10,10,5],intensity:1}),b.jsx(iue,{}),b.jsx(rue,{animal:t}),b.jsx(nue,{}),b.jsx(tue,{makeDefault:!0,position:[0,5,10]})]})}function L5({animal:t="default"}){const e=[{name:"forward",keys:["ArrowUp","KeyW"]},{name:"back",keys:["ArrowDown","KeyS"]},{name:"left",keys:["ArrowLeft","KeyA"]},{name:"right",keys:["ArrowRight","KeyD"]},{name:"jump",keys:["Space"]}];return b.jsx("div",{className:"w-full h-[400px] bg-black rounded-lg overflow-hidden",children:b.jsx(Hce,{map:e,children:b.jsx(jce,{children:b.jsx(sue,{animal:t})})})})}function oue(t,e=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:p,children:m,...v}=h,y=(p==null?void 0:p[t][l])||a,x=T.useMemo(()=>v,Object.values(v));return b.jsx(y.Provider,{value:x,children:m})}function u(h,p){const m=(p==null?void 0:p[t][l])||a,v=T.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,aue(i,...e)]}function aue(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Y1="rovingFocusGroup.onEntryFocus",lue={bubbles:!1,cancelable:!0},Ow="RovingFocusGroup",[$E,D5,cue]=vU(Ow),[uue,k5]=oue(Ow,[cue]),[due,fue]=uue(Ow),O5=T.forwardRef((t,e)=>b.jsx($E.Provider,{scope:t.__scopeRovingFocusGroup,children:b.jsx($E.Slot,{scope:t.__scopeRovingFocusGroup,children:b.jsx(hue,{...t,ref:e})})}));O5.displayName=Ow;var hue=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,p=T.useRef(null),m=Pn(e,p),v=j_(s),[y=null,x]=zm({prop:o,defaultProp:a,onChange:l}),[g,_]=T.useState(!1),S=Dr(c),E=D5(n),R=T.useRef(!1),[I,C]=T.useState(0);return T.useEffect(()=>{const D=p.current;if(D)return D.addEventListener(Y1,S),()=>D.removeEventListener(Y1,S)},[S]),b.jsx(due,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:y,onItemFocus:T.useCallback(D=>x(D),[x]),onItemShiftTab:T.useCallback(()=>_(!0),[]),onFocusableItemAdd:T.useCallback(()=>C(D=>D+1),[]),onFocusableItemRemove:T.useCallback(()=>C(D=>D-1),[]),children:b.jsx(Kt.div,{tabIndex:g||I===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:en(t.onMouseDown,()=>{R.current=!0}),onFocus:en(t.onFocus,D=>{const L=!R.current;if(D.target===D.currentTarget&&L&&!g){const P=new CustomEvent(Y1,lue);if(D.currentTarget.dispatchEvent(P),!P.defaultPrevented){const F=E().filter(K=>K.focusable),z=F.find(K=>K.active),H=F.find(K=>K.id===y),se=[z,H,...F].filter(Boolean).map(K=>K.ref.current);B5(se,u)}}R.current=!1}),onBlur:en(t.onBlur,()=>_(!1))})})}),F5="RovingFocusGroupItem",U5=T.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=$l(),l=s||a,c=fue(F5,n),u=c.currentTabStopId===l,h=D5(n),{onFocusableItemAdd:p,onFocusableItemRemove:m}=c;return T.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),b.jsx($E.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:b.jsx(Kt.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:en(t.onMouseDown,v=>{r?c.onItemFocus(l):v.preventDefault()}),onFocus:en(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:en(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){c.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=gue(v,c.orientation,c.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let g=h().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")g.reverse();else if(y==="prev"||y==="next"){y==="prev"&&g.reverse();const _=g.indexOf(v.currentTarget);g=c.loop?vue(g,_+1):g.slice(_+1)}setTimeout(()=>B5(g))}})})})});U5.displayName=F5;var pue={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mue(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function gue(t,e,n){const r=mue(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return pue[r]}function B5(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function vue(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var yue=O5,xue=U5;function _ue(t,e){return T.useReducer((n,r)=>e[n][r]??n,t)}var Ka=t=>{const{present:e,children:n}=t,r=wue(e),i=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),s=Pn(r.ref,Sue(i));return typeof n=="function"||r.isPresent?T.cloneElement(i,{ref:s}):null};Ka.displayName="Presence";function wue(t){const[e,n]=T.useState(),r=T.useRef({}),i=T.useRef(t),s=T.useRef("none"),o=t?"mounted":"unmounted",[a,l]=_ue(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=t0(r.current);s.current=a==="mounted"?c:"none"},[a]),Or(()=>{const c=r.current,u=i.current;if(u!==t){const p=s.current,m=t0(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Or(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=m=>{const y=t0(r.current).includes(m.animationName);if(m.target===e&&y&&(l("ANIMATION_END"),!i.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},p=m=>{m.target===e&&(s.current=t0(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:T.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function t0(t){return(t==null?void 0:t.animationName)||"none"}function Sue(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var YC="Tabs",[bue,qde]=xg(YC,[k5]),z5=k5(),[Mue,qC]=bue(YC),V5=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=j_(a),[h,p]=zm({prop:r,onChange:i,defaultProp:s});return b.jsx(Mue,{scope:n,baseId:$l(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:l,children:b.jsx(Kt.div,{dir:u,"data-orientation":o,...c,ref:e})})});V5.displayName=YC;var j5="TabsList",H5=T.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=qC(j5,n),o=z5(n);return b.jsx(yue,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:b.jsx(Kt.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});H5.displayName=j5;var W5="TabsTrigger",G5=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=qC(W5,n),a=z5(n),l=Y5(o.baseId,r),c=q5(o.baseId,r),u=r===o.value;return b.jsx(xue,{asChild:!0,...a,focusable:!i,active:u,children:b.jsx(Kt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...s,ref:e,onMouseDown:en(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:en(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:en(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});G5.displayName=W5;var X5="TabsContent",$5=T.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,a=qC(X5,n),l=Y5(a.baseId,r),c=q5(a.baseId,r),u=r===a.value,h=T.useRef(u);return T.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),b.jsx(Ka,{present:i||u,children:({present:p})=>b.jsx(Kt.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&s})})});$5.displayName=X5;function Y5(t,e){return`${t}-trigger-${e}`}function q5(t,e){return`${t}-content-${e}`}var Eue=V5,Z5=H5,K5=G5,Q5=$5;const Fw=Eue,Ug=T.forwardRef(({className:t,...e},n)=>b.jsx(Z5,{ref:n,className:jt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Ug.displayName=Z5.displayName;const Ya=T.forwardRef(({className:t,...e},n)=>b.jsx(K5,{ref:n,className:jt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));Ya.displayName=K5.displayName;const qa=T.forwardRef(({className:t,...e},n)=>b.jsx(Q5,{ref:n,className:jt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));qa.displayName=Q5.displayName;const ZC=nw()(tC(t=>({phase:"ready",currentAnimal:"default",isAnimalAnimating:!1,progressAnimation:"none",start:()=>{t(e=>e.phase==="ready"?{phase:"playing"}:{})},restart:()=>{t(()=>({phase:"ready"}))},end:()=>{t(e=>e.phase==="playing"?{phase:"ended"}:{})},setCurrentAnimal:e=>{t({currentAnimal:e})},animateAnimal:e=>{t({progressAnimation:e,isAnimalAnimating:e!=="none"}),e!=="none"&&setTimeout(()=>{t({progressAnimation:"none",isAnimalAnimating:!1})},e==="celebrate"?3e3:1e3)},celebrate:()=>{t({phase:"celebrating"}),setTimeout(()=>{t({phase:"playing"})},3e3)}}))),Os=T.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:jt("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Os.displayName="Card";const Qa=T.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:jt("flex flex-col space-y-1.5 p-6",t),...e}));Qa.displayName="CardHeader";const Ja=T.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:jt("font-semibold leading-none tracking-tight",t),...e}));Ja.displayName="CardTitle";const xh=T.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:jt("text-sm text-muted-foreground",t),...e}));xh.displayName="CardDescription";const Fs=T.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:jt("p-6 pt-0",t),...e}));Fs.displayName="CardContent";const KC=T.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:jt("flex items-center p-6 pt-0",t),...e}));KC.displayName="CardFooter";function Tue({animal:t,childName:e,theme:n}){const[r,i]=T.useState(!1),{phase:s,start:o,restart:a,setCurrentAnimal:l}=ZC(),c=()=>{l(t.toLowerCase()),i(!0),o()},u=()=>{switch(n.toLowerCase()){case"kindness":return`Help ${t} collect hearts by moving around the field. Use arrow keys to move and space to jump.`;case"courage":return`Guide ${t} through the field, facing challenges along the way. Use arrow keys to move and space to jump.`;case"friendship":return`${t} is looking for friends! Move around to explore. Use arrow keys to move and space to jump.`;case"adventure":return`Take ${t} on an exciting adventure! Move with arrow keys and space to jump.`;default:return`Control ${t} in this magical world! Use arrow keys to move and space to jump.`}};return b.jsxs(Os,{className:"w-full mb-8",children:[b.jsxs(Qa,{children:[b.jsx(Ja,{className:"text-2xl",children:"Interactive Story Adventure"}),b.jsxs(xh,{children:["Join ",t," in a magical 3D world inspired by your story!"]})]}),b.jsx(Fs,{children:b.jsxs(Fw,{defaultValue:"instructions",className:"w-full",children:[b.jsxs(Ug,{className:"mb-4",children:[b.jsx(Ya,{value:"instructions",children:"Instructions"}),b.jsx(Ya,{value:"game",disabled:!r,children:"Game"})]}),b.jsxs(qa,{value:"instructions",className:"space-y-4",children:[b.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[b.jsx("h3",{className:"text-lg font-bold mb-2",children:"How to Play:"}),b.jsx("p",{className:"mb-4",children:u()}),b.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[b.jsxs("li",{children:["Arrow keys or WASD: Move ",t]}),b.jsx("li",{children:"Space: Jump"}),b.jsx("li",{children:"Mouse: Look around"})]}),b.jsxs("p",{className:"text-sm text-muted-foreground",children:["Enter the world where your story takes place and explore with ",t,"!"]})]}),b.jsx("div",{className:"flex justify-center",children:b.jsx(Cn,{size:"lg",className:"mt-2",onClick:c,children:r?"Continue Playing":"Start Adventure"})})]}),b.jsxs(qa,{value:"game",children:[b.jsx(L5,{animal:t.toLowerCase()}),b.jsxs("div",{className:"mt-4 flex justify-between",children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx(Cn,{variant:"outline",onClick:()=>a(),children:"Restart"}),b.jsx(Cn,{variant:"secondary",onClick:()=>i(!1),children:"Back to Instructions"})]}),b.jsx(Cn,{variant:"default",onClick:()=>{window.open(`/game?animal=${encodeURIComponent(t)}&childName=${encodeURIComponent(e)}&theme=${encodeURIComponent(n)}`,"_blank")},children:"Open Fullscreen Game"})]})]})]})})]})}const Aue=({story:t,onNewStory:e})=>{const[n,r]=T.useState(!1),[i,s]=T.useState(!1),o=T.useRef(null),{incrementStoriesRead:a}=nC();T.useEffect(()=>{a(t.title)},[t.title,a]);const l=()=>{r(!0),setTimeout(()=>{window.print(),r(!1)},100)},c=()=>{s(h=>!h)},u=t.content.split(`
`).filter(h=>h.trim()!=="");return b.jsxs("div",{id:"story-display",children:[b.jsxs(Yu,{className:"mb-8 relative overflow-hidden",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-primary",children:t.title}),b.jsx("div",{className:"no-print",children:b.jsx(Qo,{animal:t.animal,className:"w-20 h-20 md:w-24 md:h-24 animal-float"})})]}),b.jsx("div",{ref:o,className:"story-text prose prose-lg max-w-none",children:u.map((h,p)=>b.jsx(Rs.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*p},className:"mb-4",children:h},p))}),b.jsxs("div",{className:"flex flex-wrap gap-4 mt-8 justify-between no-print",children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx(Cn,{variant:"outline",size:"lg",onClick:e,children:"Create New Story"}),b.jsx(Cn,{variant:"secondary",size:"lg",onClick:c,children:i?"Hide Interactive Game":"Play Interactive Game"})]}),b.jsx(Cn,{variant:"default",size:"lg",onClick:l,disabled:n,children:n?"Preparing...":"Print Story"})]})]}),i&&b.jsx("div",{className:"no-print",children:b.jsx(Tue,{animal:t.animal,childName:t.childName,theme:t.theme})}),n&&b.jsx(fZ,{story:t})]})},QC=()=>{const[t,e]=T.useState([]);return T.useEffect(()=>{(()=>{const r=[];for(let i=0;i<8;i++){const s=`${Math.random()*100}%`,o=`${Math.random()*100}%`,a=`${50+Math.random()*100}px`,l=.3+Math.random()*.5,c=30+Math.random()*40,u=Math.random()>.5?"forwards":"backwards";r.push({id:i,top:s,left:o,size:a,opacity:l,animation:`float ${c}s linear infinite ${u}`})}e(r)})()},[]),b.jsxs("div",{className:"fixed inset-0 dream-bg overflow-hidden z-0",children:[t.map(n=>b.jsx("div",{className:"cloud",style:{top:n.top,left:n.left,width:n.size,height:n.size,opacity:n.opacity,animation:n.animation}},n.id)),b.jsx("div",{className:"absolute inset-0","aria-hidden":"true",children:Array.from({length:40}).map((n,r)=>b.jsx("div",{className:"absolute rounded-full bg-white",style:{width:`${Math.random()*3+1}px`,height:`${Math.random()*3+1}px`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:Math.random()*.5+.2,animation:`twinkle ${Math.random()*3+2}s ease-in-out infinite`}},r))}),b.jsx("style",{children:`
        @keyframes twinkle {
          0%, 100% { opacity: 0.2; }
          50% { opacity: 0.7; }
        }
        
        @keyframes float {
          from { transform: translateX(-100px); }
          to { transform: translateX(calc(100vw + 100px)); }
        }
      `})]})};function Cue(t,e=[]){let n=[];function r(s,o){const a=T.createContext(o),l=n.length;n=[...n,o];function c(h){const{scope:p,children:m,...v}=h,y=(p==null?void 0:p[t][l])||a,x=T.useMemo(()=>v,Object.values(v));return b.jsx(y.Provider,{value:x,children:m})}function u(h,p){const m=(p==null?void 0:p[t][l])||a,v=T.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>T.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return T.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Rue(i,...e)]}function Rue(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var JC="Progress",eR=100,[Pue,Zde]=Cue(JC),[Nue,Iue]=Pue(JC),J5=T.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:s=Lue,...o}=t;(i||i===0)&&!Ok(i)&&console.error(Due(`${i}`,"Progress"));const a=Ok(i)?i:eR;r!==null&&!Fk(r,a)&&console.error(kue(`${r}`,"Progress"));const l=Fk(r,a)?r:null,c=f_(l)?s(l,a):void 0;return b.jsx(Nue,{scope:n,value:l,max:a,children:b.jsx(Kt.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":f_(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":nj(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});J5.displayName=JC;var ej="ProgressIndicator",tj=T.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=Iue(ej,n);return b.jsx(Kt.div,{"data-state":nj(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});tj.displayName=ej;function Lue(t,e){return`${Math.round(t/e*100)}%`}function nj(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function f_(t){return typeof t=="number"}function Ok(t){return f_(t)&&!isNaN(t)&&t>0}function Fk(t,e){return f_(t)&&!isNaN(t)&&t<=e&&t>=0}function Due(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${eR}\`.`}function kue(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${eR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var rj=J5,Oue=tj;const Uw=T.forwardRef(({className:t,value:e,...n},r)=>b.jsx(rj,{ref:r,className:jt("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:b.jsx(Oue,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Uw.displayName=rj.displayName;const Fue=z_("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Bw({className:t,variant:e,...n}){return b.jsx("div",{className:jt(Fue({variant:e}),t),...n})}const Uue=({animal:t="default",onMilestoneReached:e})=>{const{storiesRead:n}=nC(),{animateAnimal:r,progressAnimation:i,isAnimalAnimating:s,celebrate:o}=ZC(),[a,l]=T.useState([{id:1,storiesRequired:1,title:"Aventurero Novato",description:"Completaste tu primera historia!",completed:!1},{id:2,storiesRequired:5,title:"Explorador de Cuentos",description:"Ests descubriendo mundos mgicos",completed:!1},{id:3,storiesRequired:10,title:"Viajero de Sueos",description:"Has visitado muchos reinos encantados",completed:!1},{id:4,storiesRequired:20,title:"Guardin de Historias",description:"Eres un verdadero amante de las aventuras",completed:!1},{id:5,storiesRequired:50,title:"Maestro de Fantasa",description:"Has dominado el arte de la lectura!",completed:!1}]),[c,u]=T.useState(!1),[h,p]=T.useState(null),m=i==="jump"||i==="celebrate",v=i==="spin"||i==="celebrate",y=a.findIndex(I=>n<I.storiesRequired),x=y>0?a[y-1]:null,g=y!==-1?a[y]:a[a.length-1],_=x?x.storiesRequired:0,S=g.storiesRequired-_,E=n-_,R=Math.min(100,Math.floor(E/S*100));return T.useEffect(()=>{const I=a.map(D=>({...D,completed:n>=D.storiesRequired})),C=I.find(D=>D.storiesRequired===n&&!D.completed);C&&(p(C),r("celebrate"),u(!0),setTimeout(()=>u(!1),3e3),o(),e&&e(C.id)),l(I)},[n,e,r,o]),b.jsxs("div",{className:"relative bg-gradient-to-b from-purple-50 to-blue-50 p-6 rounded-xl shadow-md border border-purple-100",children:[b.jsx("h3",{className:"text-xl font-bold text-center text-primary mb-4",children:"Tu progreso de lectura"}),b.jsx("div",{className:"flex justify-center mb-4",children:b.jsxs(Rs.div,{animate:{y:m?[-20,0]:0,rotate:v?[0,360]:0,scale:m||v?[1,1.2,1]:1},transition:{duration:v?1.5:.5,type:"spring",stiffness:200},className:"relative",children:[b.jsx("div",{className:"w-24 h-24",children:b.jsx(Qo,{animal:t})}),b.jsx(x0,{children:!m&&!v&&b.jsx(Rs.div,{initial:{opacity:0,scale:.5,y:-30},animate:{opacity:1,scale:1,y:-50},exit:{opacity:0,scale:.5,y:-30},className:"absolute -top-2 right-0 bg-white p-2 rounded-lg shadow-sm border border-gray-200 w-40 z-10",style:{clipPath:"polygon(0% 0%, 100% 0%, 100% 75%, 75% 75%, 60% 100%, 55% 75%, 0% 75%)"},children:b.jsx("p",{className:"text-xs font-medium text-gray-600",children:g.completed?"Has alcanzado todos los hitos!":`Prximo hito: ${g.title} (${E}/${S})`})})})]})}),b.jsxs("div",{className:"mb-4",children:[b.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[b.jsxs("span",{children:[n," historias"]}),b.jsxs("span",{children:[g.storiesRequired," historias"]})]}),b.jsx(Uw,{value:R,className:"h-2"})]}),b.jsx("div",{className:"space-y-2",children:a.map(I=>b.jsxs(Rs.div,{initial:{opacity:.6,x:-10},animate:{opacity:I.completed?1:.6,x:0,scale:(h==null?void 0:h.id)===I.id?[1,1.05,1]:1},transition:{duration:.3},className:jt("flex items-center gap-2 p-2 rounded-md transition-colors",I.completed?"bg-green-50":"bg-gray-50"),children:[b.jsx("div",{className:jt("w-6 h-6 rounded-full flex items-center justify-center text-xs",I.completed?"bg-green-500 text-white":"bg-gray-300 text-gray-600"),children:I.completed?"":I.id}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:jt("text-sm font-medium",I.completed?"text-green-700":"text-gray-600"),children:I.title}),b.jsx("p",{className:"text-xs text-gray-500",children:I.description})]}),I.completed&&b.jsx(Bw,{variant:"outline",className:"bg-green-50 border-green-200 text-green-700 text-xs",children:"Completado!"})]},I.id))}),b.jsx(x0,{children:c&&b.jsx(Rs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 pointer-events-none z-20",children:Array.from({length:50}).map((I,C)=>b.jsx(Rs.div,{initial:{top:"-10%",left:`${Math.random()*100}%`,scale:Math.random()*.5+.5,rotate:Math.random()*360},animate:{top:"110%",rotate:Math.random()*720,x:Math.random()*100-50},transition:{duration:Math.random()*2+1,ease:"easeOut"},className:"absolute w-2 h-2 rounded-sm",style:{background:`hsl(${Math.random()*360}, 80%, 60%)`}},C))})}),b.jsx(x0,{children:h&&c&&b.jsx(Rs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10 rounded-xl",children:b.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg max-w-[80%] text-center",children:[b.jsx("h4",{className:"text-xl font-bold text-primary mb-2",children:"Felicidades!"}),b.jsxs("p",{className:"text-lg font-medium text-gray-800 mb-1",children:["Has alcanzado el hito: ",h.title]}),b.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description}),b.jsx("div",{className:"w-16 h-16 mx-auto mb-2",children:b.jsx(Qo,{animal:t})})]})})})]})},Bue=({storiesRead:t})=>{const[e,n]=T.useState([{id:1,title:"Aventurero Novato",description:"Has comenzado tu viaje de lectura!",storiesRequired:1,icon:"",completed:!1},{id:2,title:"Explorador de Cuentos",description:"Ests descubriendo el mundo de las historias",storiesRequired:5,icon:"",completed:!1},{id:3,title:"Viajero de Sueos",description:"Has visitado muchos mundos mgicos",storiesRequired:10,icon:"",completed:!1},{id:4,title:"Guardin de Historias",description:"Eres un verdadero amante de los cuentos",storiesRequired:20,icon:"",completed:!1},{id:5,title:"Maestro de Aventuras",description:"Te has convertido en un experto de la lectura!",storiesRequired:50,icon:"",completed:!1}]),[r,i]=T.useState(null),[s,o]=T.useState(0),[a,l]=T.useState(!1),[c,u]=T.useState(null);return T.useEffect(()=>{const h=e.map(v=>({...v,completed:t>=v.storiesRequired}));n(h);const p=h.find(v=>!v.completed);if(i(p||null),p){const v=h.filter(S=>S.completed).pop(),y=v?v.storiesRequired:0,x=p.storiesRequired-y,g=t-y,_=Math.min(100,Math.round(g/x*100));o(_)}else o(100);const m=h.find(v=>v.storiesRequired===t);m&&(u(m),l(!0),setTimeout(()=>{l(!1),u(null)},5e3))},[t]),b.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-xl shadow-sm border border-purple-100",children:[b.jsx("h2",{className:"text-xl font-bold text-primary mb-4",children:"Tu Aventura de Lectura"}),b.jsxs("div",{className:"mb-6",children:[b.jsxs("div",{className:"flex justify-between items-center mb-2",children:[b.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[t," ",t===1?"historia":"historias"," ledas"]}),r&&b.jsxs("span",{className:"text-sm font-medium text-primary",children:["Prximo: ",r.title]})]}),b.jsx(Uw,{value:s,className:"h-3"})]}),b.jsxs("div",{className:"relative py-2",children:[b.jsx("div",{className:"absolute left-6 top-8 bottom-8 w-0.5 bg-primary/20 z-0"}),b.jsx("div",{className:"space-y-6 relative z-10",children:e.map(h=>b.jsxs(Rs.div,{className:`flex items-start gap-4 ${h.completed?"opacity-100":"opacity-60"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:h.completed?1:.6},transition:{duration:.3,delay:h.id*.1},children:[b.jsx("div",{className:`flex-shrink-0 w-12 h-12 flex items-center justify-center rounded-full text-xl ${h.completed?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:h.icon}),b.jsxs("div",{children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("h3",{className:"font-bold",children:h.title}),h.completed&&b.jsx(Bw,{variant:"outline",className:"bg-green-50 text-green-700 text-xs",children:"Completado!"})]}),b.jsx("p",{className:"text-sm text-muted-foreground",children:h.description}),b.jsxs("p",{className:"text-xs mt-1",children:[h.storiesRequired," ",h.storiesRequired===1?"historia":"historias"]})]})]},h.id))})]}),a&&c&&b.jsx(Rs.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),children:b.jsxs(Rs.div,{className:"bg-white rounded-xl p-8 max-w-md text-center",initial:{scale:.5,y:100},animate:{scale:1,y:0},transition:{type:"spring",damping:12},children:[b.jsx("div",{className:"text-6xl mb-4",children:c.icon}),b.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Felicidades!"}),b.jsx("h3",{className:"text-xl font-semibold mb-4",children:c.title}),b.jsx("p",{className:"mb-6",children:c.description}),b.jsx("button",{className:"bg-primary text-white px-6 py-2 rounded-full font-medium",onClick:()=>l(!1),children:"Seguir leyendo!"})]})})]})},zue=()=>{const{storiesRead:t,storyHistory:e,resetProgress:n}=nC(),[r,i]=T.useState("animated"),[s,o]=T.useState("default"),a=c=>{console.log("Milestone reached:",c)},l=()=>t<5?["Rabbit","Bear","Fox","default"]:t<10?["Rabbit","Bear","Fox","Owl","Lion","default"]:t<20?["Rabbit","Bear","Fox","Owl","Lion","Elephant","Penguin","Dolphin","default"]:["Rabbit","Bear","Fox","Owl","Lion","Elephant","Penguin","Dolphin","Dragon","Unicorn","Butterfly","Dinosaur","default"];return b.jsxs("div",{className:"mt-8",children:[b.jsx("h2",{className:"text-2xl font-bold text-primary mb-4 text-center",children:"Tu Progreso de Lectura"}),b.jsxs(Fw,{defaultValue:"animated",value:r,onValueChange:i,className:"w-full",children:[b.jsxs(Ug,{className:"grid grid-cols-2 mb-4",children:[b.jsx(Ya,{value:"animated",children:"Rastreador Animado"}),b.jsx(Ya,{value:"detailed",children:"Detalles de Progreso"})]}),b.jsx(x0,{mode:"wait",children:b.jsxs(Rs.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[b.jsxs(qa,{value:"animated",className:"mt-0",children:[b.jsx(Uue,{animal:s,onMilestoneReached:a}),t>0&&b.jsxs("div",{className:"mt-4 bg-white p-4 rounded-lg border border-gray-100 shadow-sm",children:[b.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Elige tu compaero de lectura:"}),b.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:l().map(c=>b.jsx("button",{onClick:()=>o(c),className:`relative w-12 h-12 p-1 rounded-full transition-all ${s===c?"ring-2 ring-primary bg-primary/10":"hover:bg-gray-100"}`,title:c,children:b.jsx("div",{className:"w-full h-full",children:b.jsx(Qo,{animal:c,className:"w-10 h-10 mx-auto"})})},c))}),b.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t<20?`Lee ms historias para desbloquear ms compaeros! (${t}/20)`:"Has desbloqueado todos los compaeros de lectura!"})]})]}),b.jsxs(qa,{value:"detailed",className:"mt-0",children:[b.jsx(Bue,{storiesRead:t}),t>0&&b.jsxs("div",{className:"mt-4 bg-white p-4 rounded-lg border border-gray-100",children:[b.jsx("h3",{className:"text-lg font-medium text-primary mb-2",children:"Historias ledas:"}),b.jsx("ul",{className:"text-sm text-muted-foreground space-y-1 max-h-60 overflow-y-auto",children:e.map((c,u)=>b.jsxs(Rs.li,{className:"p-2 rounded hover:bg-gray-50",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:u*.05},children:[b.jsx("span",{className:"inline-block w-6 h-6 bg-primary/10 text-primary rounded-full text-xs text-center leading-6 mr-2",children:u+1}),c]},u))})]})]})]},r)})]}),t>0&&b.jsx("div",{className:"mt-4 text-center",children:b.jsx(Cn,{variant:"outline",size:"sm",onClick:n,className:"text-xs",children:"Reiniciar Progreso"})})]})};function Vue(){const[t,e]=T.useState(null),n=i=>{e(i),setTimeout(()=>{const s=document.getElementById("story-display");s&&s.scrollIntoView({behavior:"smooth"})},100)},r=()=>{e(null),window.scrollTo({top:0,behavior:"smooth"})};return b.jsxs("div",{className:"relative min-h-screen",children:[b.jsx(QC,{}),b.jsxs("div",{className:"container mx-auto px-4 py-8 relative z-10",children:[b.jsxs("header",{className:jt("text-center mb-8",t?"pt-4":"pt-12 md:pt-20"),children:[b.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-primary mb-4",children:"Dreamy Tales"}),b.jsx("p",{className:"text-xl md:text-2xl text-secondary",children:"Personalized Animal Bedtime Stories"})]}),b.jsx("main",{className:"max-w-4xl mx-auto",children:t?b.jsx(Aue,{story:t,onNewStory:r}):b.jsxs(b.Fragment,{children:[b.jsx(dZ,{onStoryGenerated:n}),b.jsx("div",{className:"mt-8",children:b.jsx(zue,{})})]})}),b.jsxs("footer",{className:"text-center text-sm text-muted-foreground mt-12 pb-6",children:[b.jsxs("p",{children:[" ",new Date().getFullYear()," Dreamy Tales. Sweet dreams!"]}),b.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[b.jsx(Up,{to:"/game",children:b.jsx(Cn,{variant:"outline",size:"sm",children:"Play 3D Game"})}),b.jsx(Up,{to:"/collaborative",children:b.jsx(Cn,{variant:"outline",size:"sm",children:"Collaborative Stories"})}),b.jsx(Up,{to:"/admin",children:b.jsx(Cn,{variant:"ghost",size:"sm",children:"Admin"})})]})]})]})]})}function jue(){return b.jsx(Vue,{})}const Hue=su.object({username:su.string().min(1,"El nombre de usuario es requerido"),password:su.string().min(1,"La contrasea es requerida")}),Wue=({onLoginSuccess:t})=>{const[e,n]=T.useState(!1),[r,i]=T.useState(null),s=nA({resolver:rA(Hue),defaultValues:{username:"",password:""}}),o=async a=>{n(!0),i(null);try{const l=await tx({url:"/api/admin/login",method:"POST",body:JSON.stringify(a)});l.success?t():i(l.message||"Error al iniciar sesin")}catch(l){i(l.message||"Error al conectar con el servidor")}finally{n(!1)}};return b.jsxs(Yu,{className:"max-w-md mx-auto",children:[b.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"Acceso de Administrador"}),r&&b.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:r}),b.jsx(oA,{...s,children:b.jsxs("form",{onSubmit:s.handleSubmit(o),className:"space-y-4",children:[b.jsx(to,{control:s.control,name:"username",render:({field:a})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Usuario"}),b.jsx(As,{children:b.jsx(Du,{placeholder:"Ingrese su usuario",...a})}),b.jsx(Cs,{})]})}),b.jsx(to,{control:s.control,name:"password",render:({field:a})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Contrasea"}),b.jsx(As,{children:b.jsx(Du,{type:"password",placeholder:"Ingrese su contrasea",...a})}),b.jsx(Cs,{})]})}),b.jsx(Cn,{type:"submit",className:"w-full",disabled:e,children:e?"Iniciando sesin...":"Iniciar sesin"})]})})]})},Gue=({onLogout:t})=>{const[e,n]=T.useState([]),[r,i]=T.useState(!0),[s,o]=T.useState(null);T.useEffect(()=>{(async()=>{try{const c=await tx({url:"/api/admin/users",method:"GET"});c.users&&n(c.users)}catch(c){o("Error al cargar la lista de administradores"),console.error(c)}finally{i(!1)}})()},[]);const a=async()=>{try{await tx({url:"/api/admin/logout",method:"POST"}),t()}catch(l){console.error("Error al cerrar sesin:",l)}};return b.jsxs(Yu,{className:"max-w-4xl mx-auto",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Panel de Administracin"}),b.jsx(Cn,{variant:"outline",onClick:a,children:"Cerrar Sesin"})]}),s&&b.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:s}),b.jsxs("div",{className:"mb-8",children:[b.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Administradores"}),r?b.jsx("p",{children:"Cargando usuarios administradores..."}):b.jsx("ul",{className:"bg-muted p-4 rounded",children:e.length>0?e.map((l,c)=>b.jsx("li",{className:"py-2 border-b last:border-b-0",children:l},c)):b.jsx("p",{children:"No hay administradores registrados."})})]}),b.jsxs("div",{className:"mb-8",children:[b.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Estadsticas"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[b.jsxs("div",{className:"bg-primary/10 p-6 rounded-lg text-center",children:[b.jsx("p",{className:"text-3xl font-bold",children:"0"}),b.jsx("p",{className:"text-sm text-muted-foreground",children:"Historias generadas"})]}),b.jsxs("div",{className:"bg-secondary/10 p-6 rounded-lg text-center",children:[b.jsx("p",{className:"text-3xl font-bold",children:"0"}),b.jsx("p",{className:"text-sm text-muted-foreground",children:"Usuarios activos"})]}),b.jsxs("div",{className:"bg-accent/10 p-6 rounded-lg text-center",children:[b.jsx("p",{className:"text-3xl font-bold",children:"0"}),b.jsx("p",{className:"text-sm text-muted-foreground",children:"Animales populares"})]})]})]}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Configuracin"}),b.jsx("p",{className:"text-muted-foreground mb-4",children:"La configuracin de administrador est actualmente en desarrollo."}),b.jsx(Cn,{disabled:!0,children:"Configuracin Avanzada"})]})]})},Xue=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState(!0);T.useEffect(()=>{(async()=>{try{const a=await tx({url:"/api/admin/check",method:"GET"});e(a.isAuthenticated||!1)}catch(a){console.error("Error al verificar autenticacin:",a),e(!1)}finally{r(!1)}})()},[]);const i=()=>{e(!0)},s=()=>{e(!1)};return n?b.jsx("div",{className:"flex justify-center items-center min-h-[50vh]",children:b.jsx("p",{className:"text-lg",children:"Cargando..."})}):t?b.jsx(Gue,{onLogout:s}):b.jsx(Wue,{onLoginSuccess:i})};function $ue(){return b.jsx("div",{className:"container mx-auto px-4 py-8",children:b.jsx(Xue,{})})}function Yue(){const{state:t}=lh(),[e]=$8(),{start:n,restart:r}=ZC(),[i,s]=T.useState(!0),o=e.get("animal")||(t==null?void 0:t.animal)||"default";e.get("childName")||t!=null&&t.childName,e.get("theme")||t!=null&&t.theme,T.useEffect(()=>{n()},[]);const a=()=>s(!i);return b.jsxs("div",{className:"relative min-h-screen",children:[b.jsx(QC,{}),b.jsxs("div",{className:"container mx-auto px-4 py-8 relative z-10",children:[b.jsxs("header",{className:"text-center mb-8 pt-4",children:[b.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-primary mb-4",children:"Dreamy Tales Adventure"}),b.jsxs("p",{className:"text-xl md:text-2xl text-secondary",children:["Explore the magical world with ",o]})]}),b.jsxs("main",{className:"max-w-4xl mx-auto",children:[i&&b.jsxs(Os,{className:"mb-8",children:[b.jsxs(Qa,{children:[b.jsx(Ja,{children:"How to Play"}),b.jsxs(xh,{children:["Control ",o," in this magical 3D world"]})]}),b.jsxs(Fs,{children:[b.jsxs("ul",{className:"list-disc pl-6 mb-4",children:[b.jsxs("li",{children:["Arrow keys or WASD: Move ",o]}),b.jsx("li",{children:"Space: Jump"}),b.jsx("li",{children:"Mouse: Look around"})]}),b.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Explore the world and have fun!"}),b.jsx(Cn,{onClick:a,children:"Hide Instructions"})]})]}),b.jsxs(Yu,{className:"mb-8",children:[b.jsx(L5,{animal:o}),b.jsxs("div",{className:"flex justify-between mt-6",children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsx(Cn,{variant:"outline",onClick:r,children:"Restart Game"}),!i&&b.jsx(Cn,{variant:"secondary",onClick:a,children:"Show Instructions"})]}),b.jsx(Up,{to:"/",children:b.jsx(Cn,{variant:"default",children:"Back to Stories"})})]})]})]})]})]})}const tR=T.forwardRef(({className:t,...e},n)=>b.jsx("textarea",{className:jt("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));tR.displayName="Textarea";const que=z_("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),h_=T.forwardRef(({className:t,variant:e,...n},r)=>b.jsx("div",{ref:r,role:"alert",className:jt(que({variant:e}),t),...n}));h_.displayName="Alert";const ij=T.forwardRef(({className:t,...e},n)=>b.jsx("h5",{ref:n,className:jt("mb-1 font-medium leading-none tracking-tight",t),...e}));ij.displayName="AlertTitle";const p_=T.forwardRef(({className:t,...e},n)=>b.jsx("div",{ref:n,className:jt("text-sm [&_p]:leading-relaxed",t),...e}));p_.displayName="AlertDescription";var nR="Avatar",[Zue,Kde]=xg(nR),[Kue,sj]=Zue(nR),oj=T.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=T.useState("idle");return b.jsx(Kue,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:b.jsx(Kt.span,{...r,ref:e})})});oj.displayName=nR;var aj="AvatarImage",lj=T.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=sj(aj,n),a=Que(r,s.referrerPolicy),l=Dr(c=>{i(c),o.onImageLoadingStatusChange(c)});return Or(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?b.jsx(Kt.img,{...s,ref:e,src:r}):null});lj.displayName=aj;var cj="AvatarFallback",uj=T.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=sj(cj,n),[o,a]=T.useState(r===void 0);return T.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?b.jsx(Kt.span,{...i,ref:e}):null});uj.displayName=cj;function Que(t,e){const[n,r]=T.useState("idle");return Or(()=>{if(!t){r("error");return}let i=!0;const s=new window.Image,o=a=>()=>{i&&r(a)};return r("loading"),s.onload=o("loaded"),s.onerror=o("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var dj=oj,fj=lj,hj=uj;const rR=T.forwardRef(({className:t,...e},n)=>b.jsx(dj,{ref:n,className:jt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));rR.displayName=dj.displayName;const pj=T.forwardRef(({className:t,...e},n)=>b.jsx(fj,{ref:n,className:jt("aspect-square h-full w-full",t),...e}));pj.displayName=fj.displayName;const iR=T.forwardRef(({className:t,...e},n)=>b.jsx(hj,{ref:n,className:jt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));iR.displayName=hj.displayName;function Jue({collaborators:t}){return b.jsxs(Os,{className:"h-fit",children:[b.jsx(Qa,{className:"pb-3",children:b.jsx(Ja,{className:"text-lg",children:"Collaborators"})}),b.jsx(Fs,{children:b.jsx("div",{className:"space-y-4",children:t.length===0?b.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No collaborators yet"}):b.jsx("ul",{className:"space-y-3",children:t.map(e=>b.jsxs("li",{className:"flex items-center gap-3",children:[b.jsxs(rR,{children:[b.jsx(pj,{src:e.avatar,alt:e.name}),b.jsx(iR,{children:e.name.substring(0,2).toUpperCase()})]}),b.jsx("span",{className:"text-sm font-medium",children:e.name})]},e.id))})})})]})}function ede({segmentsCount:t,totalSegments:e}){const n=t/e*100,r=t>=e;return b.jsxs("div",{className:"space-y-2",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("p",{className:"text-sm font-medium",children:"Story Completion"}),b.jsx(Bw,{variant:r?"default":"outline",className:r?"bg-green-600":"",children:r?"Complete":`${t}/${e} segments`})]}),b.jsx(Uw,{value:n,className:"h-2",indicatorClassName:r?"bg-green-600":void 0}),r&&b.jsx("p",{className:"text-xs text-green-600 font-medium text-center animate-pulse",children:"Story complete! You can now view the full story."})]})}function tde({segments:t,onAddSegment:e,storyLimit:n}){const[r,i]=T.useState(""),[s,o]=T.useState(null),a=t.length>=n,l=()=>{if(!r.trim()){o("Please enter some content for your story segment.");return}if(r.length<10){o("Your story segment should be at least 10 characters long.");return}e(r),i(""),o(null)};return b.jsxs(Os,{className:"h-fit",children:[b.jsx(Qa,{className:"pb-3",children:b.jsx(Ja,{className:"text-lg",children:"Story Segments"})}),b.jsx(Fs,{children:b.jsxs("div",{className:"space-y-6",children:[t.length===0?b.jsx("p",{className:"text-sm text-muted-foreground text-center italic",children:"No segments yet. Be the first to contribute!"}):b.jsx("ul",{className:"space-y-4 mb-6",children:t.map((c,u)=>b.jsxs("li",{className:"border-b pb-4 last:border-0 last:pb-0",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b.jsx(rR,{className:"h-6 w-6",children:b.jsx(iR,{children:c.authorName.substring(0,2).toUpperCase()})}),b.jsx("span",{className:"text-xs font-medium",children:c.authorName}),b.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:new Date(c.timestamp).toLocaleDateString()})]}),b.jsx("p",{className:"text-sm whitespace-pre-wrap",children:c.content})]},c.id))}),a?b.jsx(h_,{children:b.jsx(p_,{children:"This story is complete! The maximum number of segments has been reached."})}):b.jsxs("div",{className:"space-y-4",children:[b.jsx(tR,{value:r,onChange:c=>i(c.target.value),placeholder:"Add your contribution to the story...",className:"min-h-[100px]"}),s&&b.jsx(h_,{variant:"destructive",children:b.jsx(p_,{children:s})}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," of ",n," segments completed"]}),b.jsx(Cn,{onClick:l,children:"Add Segment"})]}),b.jsx(ede,{segmentsCount:t.length,totalSegments:n})]})]})]})})]})}var sR="Dialog",[mj,Qde]=xg(sR),[nde,yo]=mj(sR),gj=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=T.useRef(null),l=T.useRef(null),[c=!1,u]=zm({prop:r,defaultProp:i,onChange:s});return b.jsx(nde,{scope:e,triggerRef:a,contentRef:l,contentId:$l(),titleId:$l(),descriptionId:$l(),open:c,onOpenChange:u,onOpenToggle:T.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};gj.displayName=sR;var vj="DialogTrigger",yj=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(vj,n),s=Pn(e,i.triggerRef);return b.jsx(Kt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":lR(i.open),...r,ref:s,onClick:en(t.onClick,i.onOpenToggle)})});yj.displayName=vj;var oR="DialogPortal",[rde,xj]=mj(oR,{forceMount:void 0}),_j=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=yo(oR,e);return b.jsx(rde,{scope:e,forceMount:n,children:T.Children.map(r,o=>b.jsx(Ka,{present:n||s.open,children:b.jsx(yA,{asChild:!0,container:i,children:o})}))})};_j.displayName=oR;var m_="DialogOverlay",wj=T.forwardRef((t,e)=>{const n=xj(m_,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=yo(m_,t.__scopeDialog);return s.modal?b.jsx(Ka,{present:r||s.open,children:b.jsx(ide,{...i,ref:e})}):null});wj.displayName=m_;var ide=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(m_,n);return b.jsx(xA,{as:tc,allowPinchZoom:!0,shards:[i.contentRef],children:b.jsx(Kt.div,{"data-state":lR(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ju="DialogContent",Sj=T.forwardRef((t,e)=>{const n=xj(ju,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=yo(ju,t.__scopeDialog);return b.jsx(Ka,{present:r||s.open,children:s.modal?b.jsx(sde,{...i,ref:e}):b.jsx(ode,{...i,ref:e})})});Sj.displayName=ju;var sde=T.forwardRef((t,e)=>{const n=yo(ju,t.__scopeDialog),r=T.useRef(null),i=Pn(e,n.contentRef,r);return T.useEffect(()=>{const s=r.current;if(s)return WU(s)},[]),b.jsx(bj,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:en(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:en(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:en(t.onFocusOutside,s=>s.preventDefault())})}),ode=T.forwardRef((t,e)=>{const n=yo(ju,t.__scopeDialog),r=T.useRef(!1),i=T.useRef(!1);return b.jsx(bj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),bj=T.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=yo(ju,n),l=T.useRef(null),c=Pn(e,l);return _U(),b.jsxs(b.Fragment,{children:[b.jsx(lA,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:b.jsx(aA,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":lR(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(ade,{titleId:a.titleId}),b.jsx(cde,{contentRef:l,descriptionId:a.descriptionId})]})]})}),aR="DialogTitle",Mj=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(aR,n);return b.jsx(Kt.h2,{id:i.titleId,...r,ref:e})});Mj.displayName=aR;var Ej="DialogDescription",Tj=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(Ej,n);return b.jsx(Kt.p,{id:i.descriptionId,...r,ref:e})});Tj.displayName=Ej;var Aj="DialogClose",Cj=T.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=yo(Aj,n);return b.jsx(Kt.button,{type:"button",...r,ref:e,onClick:en(t.onClick,()=>i.onOpenChange(!1))})});Cj.displayName=Aj;function lR(t){return t?"open":"closed"}var Rj="DialogTitleWarning",[Jde,Pj]=WX(Rj,{contentName:ju,titleName:aR,docsSlug:"dialog"}),ade=({titleId:t})=>{const e=Pj(Rj),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return T.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},lde="DialogDescriptionWarning",cde=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Pj(lde).contentName}}.`;return T.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},ude=gj,dde=yj,fde=_j,Nj=wj,Ij=Sj,Lj=Mj,Dj=Tj,hde=Cj;const pde=ude,mde=dde,gde=fde,kj=T.forwardRef(({className:t,...e},n)=>b.jsx(Nj,{ref:n,className:jt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));kj.displayName=Nj.displayName;const Oj=T.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(gde,{children:[b.jsx(kj,{}),b.jsxs(Ij,{ref:r,className:jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,b.jsxs(hde,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[b.jsx($q,{className:"h-4 w-4"}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Oj.displayName=Ij.displayName;const Fj=({className:t,...e})=>b.jsx("div",{className:jt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Fj.displayName="DialogHeader";const Uj=T.forwardRef(({className:t,...e},n)=>b.jsx(Lj,{ref:n,className:jt("text-lg font-semibold leading-none tracking-tight",t),...e}));Uj.displayName=Lj.displayName;const vde=T.forwardRef(({className:t,...e},n)=>b.jsx(Dj,{ref:n,className:jt("text-sm text-muted-foreground",t),...e}));vde.displayName=Dj.displayName;function yde(t,e){return T.useReducer((n,r)=>e[n][r]??n,t)}var cR="ScrollArea",[Bj,efe]=xg(cR),[xde,Us]=Bj(cR),zj=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,l]=T.useState(null),[c,u]=T.useState(null),[h,p]=T.useState(null),[m,v]=T.useState(null),[y,x]=T.useState(null),[g,_]=T.useState(0),[S,E]=T.useState(0),[R,I]=T.useState(!1),[C,D]=T.useState(!1),L=Pn(e,F=>l(F)),P=j_(i);return b.jsx(xde,{scope:n,type:r,dir:P,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:h,onContentChange:p,scrollbarX:m,onScrollbarXChange:v,scrollbarXEnabled:R,onScrollbarXEnabledChange:I,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:C,onScrollbarYEnabledChange:D,onCornerWidthChange:_,onCornerHeightChange:E,children:b.jsx(Kt.div,{dir:P,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});zj.displayName=cR;var Vj="ScrollAreaViewport",jj=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,asChild:i,nonce:s,...o}=t,a=Us(Vj,n),l=T.useRef(null),c=Pn(e,l,a.onViewportChange);return b.jsxs(b.Fragment,{children:[b.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:s}),b.jsx(Kt.div,{"data-radix-scroll-area-viewport":"",...o,asChild:i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:Rde({asChild:i,children:r},u=>b.jsx("div",{"data-radix-scroll-area-content":"",ref:a.onContentChange,style:{minWidth:a.scrollbarXEnabled?"fit-content":void 0},children:u}))})]})});jj.displayName=Vj;var ra="ScrollAreaScrollbar",uR=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Us(ra,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return T.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?b.jsx(_de,{...r,ref:e,forceMount:n}):i.type==="scroll"?b.jsx(wde,{...r,ref:e,forceMount:n}):i.type==="auto"?b.jsx(Hj,{...r,ref:e,forceMount:n}):i.type==="always"?b.jsx(dR,{...r,ref:e}):null});uR.displayName=ra;var _de=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Us(ra,t.__scopeScrollArea),[s,o]=T.useState(!1);return T.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),b.jsx(Ka,{present:n||s,children:b.jsx(Hj,{"data-state":s?"visible":"hidden",...r,ref:e})})}),wde=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Us(ra,t.__scopeScrollArea),s=t.orientation==="horizontal",o=Vw(()=>l("SCROLL_END"),100),[a,l]=yde("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),T.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let h=c[u];const p=()=>{const m=c[u];h!==m&&(l("SCROLL"),o()),h=m};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[i.viewport,s,l,o]),b.jsx(Ka,{present:n||a!=="hidden",children:b.jsx(dR,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:en(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:en(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Hj=T.forwardRef((t,e)=>{const n=Us(ra,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=T.useState(!1),a=t.orientation==="horizontal",l=Vw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return rh(n.viewport,l),rh(n.content,l),b.jsx(Ka,{present:r||s,children:b.jsx(dR,{"data-state":s?"visible":"hidden",...i,ref:e})})}),dR=T.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=Us(ra,t.__scopeScrollArea),s=T.useRef(null),o=T.useRef(0),[a,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Yj(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:p=>s.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,m){return Ade(p,o.current,a,m)}return n==="horizontal"?b.jsx(Sde,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollLeft,m=Uk(p,a,i.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollLeft=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollLeft=h(p,i.dir))}}):n==="vertical"?b.jsx(bde,{...u,ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const p=i.viewport.scrollTop,m=Uk(p,a);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{i.viewport&&(i.viewport.scrollTop=p)},onDragScroll:p=>{i.viewport&&(i.viewport.scrollTop=h(p))}}):null}),Sde=T.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Us(ra,t.__scopeScrollArea),[o,a]=T.useState(),l=T.useRef(null),c=Pn(e,l,s.onScrollbarXChange);return T.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),b.jsx(Gj,{"data-orientation":"horizontal",...i,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":zw(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(s.viewport){const p=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(p),Zj(p,h)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:v_(o.paddingLeft),paddingEnd:v_(o.paddingRight)}})}})}),bde=T.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=Us(ra,t.__scopeScrollArea),[o,a]=T.useState(),l=T.useRef(null),c=Pn(e,l,s.onScrollbarYChange);return T.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),b.jsx(Gj,{"data-orientation":"vertical",...i,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":zw(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(s.viewport){const p=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(p),Zj(p,h)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:v_(o.paddingTop),paddingEnd:v_(o.paddingBottom)}})}})}),[Mde,Wj]=Bj(ra),Gj=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:h,...p}=t,m=Us(ra,n),[v,y]=T.useState(null),x=Pn(e,L=>y(L)),g=T.useRef(null),_=T.useRef(""),S=m.viewport,E=r.content-r.viewport,R=Dr(u),I=Dr(l),C=Vw(h,10);function D(L){if(g.current){const P=L.clientX-g.current.left,F=L.clientY-g.current.top;c({x:P,y:F})}}return T.useEffect(()=>{const L=P=>{const F=P.target;(v==null?void 0:v.contains(F))&&R(P,E)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[S,v,E,R]),T.useEffect(I,[r,I]),rh(v,C),rh(m.content,C),b.jsx(Mde,{scope:n,scrollbar:v,hasThumb:i,onThumbChange:Dr(s),onThumbPointerUp:Dr(o),onThumbPositionChange:I,onThumbPointerDown:Dr(a),children:b.jsx(Kt.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:en(t.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),g.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),D(L))}),onPointerMove:en(t.onPointerMove,D),onPointerUp:en(t.onPointerUp,L=>{const P=L.target;P.hasPointerCapture(L.pointerId)&&P.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=_.current,m.viewport&&(m.viewport.style.scrollBehavior=""),g.current=null})})})}),g_="ScrollAreaThumb",Xj=T.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Wj(g_,t.__scopeScrollArea);return b.jsx(Ka,{present:n||i.hasThumb,children:b.jsx(Ede,{ref:e,...r})})}),Ede=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=Us(g_,n),o=Wj(g_,n),{onThumbPositionChange:a}=o,l=Pn(e,h=>o.onThumbChange(h)),c=T.useRef(),u=Vw(()=>{c.current&&(c.current(),c.current=void 0)},100);return T.useEffect(()=>{const h=s.viewport;if(h){const p=()=>{if(u(),!c.current){const m=Cde(h,a);c.current=m,a()}};return a(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[s.viewport,u,a]),b.jsx(Kt.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:en(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),v=h.clientX-m.left,y=h.clientY-m.top;o.onThumbPointerDown({x:v,y})}),onPointerUp:en(t.onPointerUp,o.onThumbPointerUp)})});Xj.displayName=g_;var fR="ScrollAreaCorner",$j=T.forwardRef((t,e)=>{const n=Us(fR,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?b.jsx(Tde,{...t,ref:e}):null});$j.displayName=fR;var Tde=T.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=Us(fR,n),[s,o]=T.useState(0),[a,l]=T.useState(0),c=!!(s&&a);return rh(i.scrollbarX,()=>{var h;const u=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),rh(i.scrollbarY,()=>{var h;const u=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),c?b.jsx(Kt.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function v_(t){return t?parseInt(t,10):0}function Yj(t,e){const n=t/e;return isNaN(n)?0:n}function zw(t){const e=Yj(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Ade(t,e,n,r="ltr"){const i=zw(n),s=i/2,o=e||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return qj([l,c],h)(t)}function Uk(t,e,n="ltr"){const r=zw(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=JM(t,l);return qj([0,o],[0,a])(c)}function qj(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Zj(t,e){return t>0&&t<e}var Cde=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function Vw(t,e){const n=Dr(t),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function rh(t,e){const n=Dr(e);Or(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}function Rde(t,e){const{asChild:n,children:r}=t;if(!n)return typeof e=="function"?e(r):e;const i=T.Children.only(r);return T.cloneElement(i,{children:typeof e=="function"?e(i.props.children):e})}var Kj=zj,Pde=jj,Nde=$j;const hR=T.forwardRef(({className:t,children:e,...n},r)=>b.jsxs(Kj,{ref:r,className:jt("relative overflow-hidden",t),...n,children:[b.jsx(Pde,{className:"h-full w-full rounded-[inherit]",children:e}),b.jsx(Qj,{}),b.jsx(Nde,{})]}));hR.displayName=Kj.displayName;const Qj=T.forwardRef(({className:t,orientation:e="vertical",...n},r)=>b.jsx(uR,{ref:r,orientation:e,className:jt("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:b.jsx(Xj,{className:"relative flex-1 rounded-full bg-border"})}));Qj.displayName=uR.displayName;function Ide({title:t,prompt:e,animal:n,childName:r,theme:i,segments:s,isComplete:o}){const[a,l]=T.useState(!1),c=()=>{let p=e;return s.forEach((m,v)=>{p+=`

`,p+=m.content}),p},u=()=>{const p=window.open("","_blank");if(!p)return;const m=c();p.document.write(`
      <html>
        <head>
          <title>${t}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 40px; }
            h1 { color: #1a1a1a; text-align: center; }
            .story-meta { text-align: center; color: #666; margin-bottom: 30px; }
            .story-content { line-height: 1.8; white-space: pre-wrap; }
            .footer { margin-top: 50px; text-align: center; font-size: 12px; color: #999; }
          </style>
        </head>
        <body>
          <h1>${t}</h1>
          <div class="story-meta">
            <p>Animal: ${n} | Theme: ${i}${r?` | Child: ${r}`:""}</p>
          </div>
          <div class="story-content">${m}</div>
          <div class="footer">Created collaboratively on WhiskerTales</div>
        </body>
      </html>
    `),p.document.close(),p.focus(),p.print()},h=()=>{const p=c(),m=new Blob([`${t}

Animal: ${n} | Theme: ${i}${r?` | Child: ${r}`:""}

${p}

Created collaboratively on WhiskerTales`],{type:"text/plain"}),v=URL.createObjectURL(m),y=document.createElement("a");y.href=v,y.download=`${t.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.txt`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(v)};return b.jsx("div",{className:"mt-6",children:b.jsxs(pde,{open:a,onOpenChange:l,children:[b.jsx(mde,{asChild:!0,children:b.jsx(Cn,{variant:"default",className:"w-full",disabled:!o,children:o?"View Complete Story":"Story Preview (Complete the story first)"})}),b.jsxs(Oj,{className:"max-w-4xl h-[90vh]",children:[b.jsx(Fj,{children:b.jsx(Uj,{className:"text-2xl",children:t})}),b.jsxs("div",{className:"flex flex-col md:flex-row gap-6 h-full",children:[b.jsx("div",{className:"md:w-2/3 h-full flex flex-col",children:b.jsxs(Os,{className:"flex-1",children:[b.jsx(Qa,{className:"pb-2",children:b.jsx(Ja,{className:"text-lg",children:"Story"})}),b.jsx(Fs,{children:b.jsx(hR,{className:"h-[50vh]",children:b.jsxs("div",{className:"space-y-4",children:[b.jsx("div",{className:"italic text-muted-foreground",children:e}),s.map((p,m)=>b.jsx("p",{className:"whitespace-pre-wrap",children:p.content},p.id))]})})}),b.jsxs(KC,{className:"flex gap-2",children:[b.jsxs(Cn,{variant:"outline",size:"sm",onClick:u,children:[b.jsx(Wq,{className:"w-4 h-4 mr-2"}),"Print"]}),b.jsxs(Cn,{variant:"outline",size:"sm",onClick:h,children:[b.jsx(Hq,{className:"w-4 h-4 mr-2"}),"Download"]}),b.jsxs(Cn,{variant:"outline",size:"sm",children:[b.jsx(Xq,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})}),b.jsx("div",{className:"md:w-1/3 text-center",children:b.jsxs("div",{className:"sticky top-4",children:[b.jsx("div",{className:"mb-4",children:b.jsx(Qo,{animal:n,className:"w-48 h-48 mx-auto animal-float"})}),b.jsx(Os,{children:b.jsxs(Fs,{className:"pt-6",children:[b.jsx("h3",{className:"font-medium mb-1",children:"Story Details"}),b.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Theme:"})," ",i]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Animal:"})," ",n]}),r&&b.jsxs("p",{children:[b.jsx("strong",{children:"Child:"})," ",r]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Contributors:"})," ",s.length]})]})]})})]})})]})]})]})})}const pR=nw()(tC((t,e)=>({stories:[],currentStory:null,createStory:n=>{const r=`story-${Date.now()}`,i={...n,id:r,status:"open",segments:[],createdAt:new Date,updatedAt:new Date};return t(s=>({stories:[...s.stories,i],currentStory:i})),r},setCurrentStory:n=>{if(n===null){t({currentStory:null});return}const r=e().stories.find(i=>i.id===n)||null;t({currentStory:r})},addSegment:(n,r)=>{const i={...r,id:`segment-${Date.now()}`,timestamp:new Date};t(s=>({stories:s.stories.map(o=>{var a;if(o.id===n){const l=o.segments.length+1>=o.contributionLimit?"completed":"in-progress",c={...o,segments:[...o.segments,i],updatedAt:new Date,status:l};return((a=s.currentStory)==null?void 0:a.id)===n&&t({currentStory:c}),c}return o})}))},addCollaborator:(n,r)=>{const i=`collaborator-${Date.now()}`,s={...r,id:i};return t(o=>({stories:o.stories.map(a=>{var l;if(a.id===n){if(a.collaborators.some(u=>u.name===s.name))return a;const c={...a,collaborators:[...a.collaborators,s],updatedAt:new Date};return((l=o.currentStory)==null?void 0:l.id)===n&&t({currentStory:c}),c}return a})})),i},completeStory:n=>{t(r=>({stories:r.stories.map(i=>{var s;if(i.id===n){const o={...i,status:"completed",updatedAt:new Date};return((s=r.currentStory)==null?void 0:s.id)===n&&t({currentStory:o}),o}return i})}))}}))),Lde=rU({title:Tl().min(3,{message:"Title must be at least 3 characters."}),prompt:Tl().min(10,{message:"Prompt must be at least 10 characters."}),animal:Tl().min(1,{message:"Please select an animal."}),theme:Tl().min(1,{message:"Please select a theme."}),childName:Tl().optional(),contributionLimit:Tl().min(1,{message:"Please set a contribution limit."})}),Dde=["Rabbit","Fox","Bear","Owl","Elephant","Lion","Turtle","Wolf","Giraffe","Koala","Tiger","Penguin","Squirrel","Hedgehog","Panda","Dolphin","Monkey","Dragon","Unicorn","Butterfly","Octopus","Dinosaur"],kde=["Kindness","Courage","Friendship","Sharing","Patience","Honesty","Perseverance","Teamwork","Curiosity","Respect","Creativity","Gratitude","Adventure","Nature","Dreams","Discovery","Imagination","Empathy","Wisdom","Joy"];function Ode(){const[t,e]=T.useState(null),[n,r]=T.useState("create"),[i,s]=T.useState(!1),{createStory:o,currentStory:a,addSegment:l,addCollaborator:c}=pR(),u=nA({resolver:rA(Lde),defaultValues:{title:"",prompt:"",animal:"",theme:"",childName:"",contributionLimit:"5"}});T.useEffect(()=>{a&&a.collaborators.length===0&&c(a.id,{name:"You",avatar:"/avatars/user.png"})},[a,c]);const h=v=>{e(v),u.setValue("animal",v)},p=v=>{o({title:v.title,prompt:v.prompt,animal:v.animal,theme:v.theme,childName:v.childName||void 0,contributionLimit:parseInt(v.contributionLimit),collaborators:[{id:"1",name:"You",avatar:"/avatars/user.png"}]}),s(!0),r("collaborate"),setTimeout(()=>{s(!1)},5e3),u.reset()},m=v=>{a&&l(a.id,{authorId:"1",authorName:"You",content:v})};return b.jsxs("div",{className:"mb-12",children:[b.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-primary mb-6 text-center",children:"Collaborative Story Creation"}),b.jsxs(Fw,{value:n,onValueChange:r,className:"w-full",children:[b.jsxs(Ug,{className:"grid w-full grid-cols-2 mb-6",children:[b.jsx(Ya,{value:"create",children:"Create Story"}),b.jsx(Ya,{value:"collaborate",disabled:!a,children:"Collaborate"})]}),b.jsx(qa,{value:"create",children:b.jsxs(Yu,{children:[i&&b.jsxs(h_,{className:"mb-6 bg-green-50 border-green-200",children:[b.jsx(ij,{className:"text-green-800",children:"Story Created!"}),b.jsx(p_,{className:"text-green-700",children:"Your collaborative story has been created. Switch to the Collaborate tab to start adding segments."})]}),b.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[b.jsx("div",{className:"md:w-1/3 flex justify-center items-start",children:b.jsx(Qo,{animal:t||"default"})}),b.jsx("div",{className:"md:w-2/3",children:b.jsx(oA,{...u,children:b.jsxs("form",{onSubmit:u.handleSubmit(p),className:"space-y-6",children:[b.jsx(to,{control:u.control,name:"title",render:({field:v})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Story Title"}),b.jsx(As,{children:b.jsx(Du,{placeholder:"Enter a title for your collaborative story",...v})}),b.jsx(Cs,{})]})}),b.jsx(to,{control:u.control,name:"prompt",render:({field:v})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Story Prompt"}),b.jsx(As,{children:b.jsx(tR,{placeholder:"Provide a starting prompt or idea for your collaborative story",...v,className:"min-h-[100px]"})}),b.jsx(Cs,{})]})}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsx(to,{control:u.control,name:"animal",render:({field:v})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Main Animal Character"}),b.jsxs(Vp,{onValueChange:y=>h(y),defaultValue:v.value,children:[b.jsx(As,{children:b.jsx(Ef,{children:b.jsx(jp,{placeholder:"Select an animal"})})}),b.jsx(Tf,{children:Dde.map(y=>b.jsx(Po,{value:y,children:y},y))})]}),b.jsx(Cs,{})]})}),b.jsx(to,{control:u.control,name:"theme",render:({field:v})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Story Theme"}),b.jsxs(Vp,{onValueChange:v.onChange,defaultValue:v.value,children:[b.jsx(As,{children:b.jsx(Ef,{children:b.jsx(jp,{placeholder:"Select a theme"})})}),b.jsx(Tf,{children:kde.map(y=>b.jsx(Po,{value:y,children:y},y))})]}),b.jsx(Cs,{})]})})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsx(to,{control:u.control,name:"childName",render:({field:v})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Child's Name (Optional)"}),b.jsx(As,{children:b.jsx(Du,{placeholder:"Enter a child's name if desired",...v})}),b.jsx(Cs,{})]})}),b.jsx(to,{control:u.control,name:"contributionLimit",render:({field:v})=>b.jsxs(Es,{children:[b.jsx(Ts,{children:"Contribution Limit"}),b.jsxs(Vp,{onValueChange:v.onChange,defaultValue:v.value,children:[b.jsx(As,{children:b.jsx(Ef,{children:b.jsx(jp,{placeholder:"Set a limit"})})}),b.jsxs(Tf,{children:[b.jsx(Po,{value:"3",children:"3 contributions"}),b.jsx(Po,{value:"5",children:"5 contributions"}),b.jsx(Po,{value:"10",children:"10 contributions"}),b.jsx(Po,{value:"15",children:"15 contributions"}),b.jsx(Po,{value:"20",children:"20 contributions"})]})]}),b.jsx(Cs,{})]})})]}),b.jsx(Cn,{type:"submit",className:"w-full",children:"Create Collaborative Story"})]})})})]})]})}),b.jsx(qa,{value:"collaborate",children:a&&b.jsx("div",{className:"space-y-6",children:b.jsxs(Os,{children:[b.jsxs(Qa,{children:[b.jsx(Ja,{children:a.title}),b.jsxs(xh,{children:["Theme: ",a.theme,"  Animal: ",a.animal,a.childName&&`  Child: ${a.childName}`]})]}),b.jsxs(Fs,{children:[b.jsx("h3",{className:"font-semibold mb-2",children:"Story Prompt:"}),b.jsx("p",{className:"text-muted-foreground mb-4",children:a.prompt}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[b.jsxs("div",{className:"md:col-span-2",children:[b.jsx(tde,{segments:a.segments,onAddSegment:m,storyLimit:a.contributionLimit}),b.jsx("div",{className:"mt-6",children:b.jsx(Ide,{title:a.title,prompt:a.prompt,animal:a.animal,childName:a.childName,theme:a.theme,segments:a.segments,isComplete:a.segments.length>=a.contributionLimit})})]}),b.jsxs("div",{children:[b.jsx(Jue,{collaborators:a.collaborators}),b.jsx("div",{className:"mt-6 flex justify-center",children:b.jsx(Qo,{animal:a.animal.toLowerCase(),className:"w-40 h-40 animal-float"})})]})]})]})]})})})]})]})}function Fde(){const{stories:t,setCurrentStory:e}=pR(),[n,r]=T.useState(""),i=t.filter(l=>{const c=n.toLowerCase();return l.title.toLowerCase().includes(c)||l.animal.toLowerCase().includes(c)||l.theme.toLowerCase().includes(c)||l.childName&&l.childName.toLowerCase().includes(c)}),s=l=>{switch(l){case"open":return"bg-blue-500 hover:bg-blue-600";case"in-progress":return"bg-amber-500 hover:bg-amber-600";case"completed":return"bg-green-600 hover:bg-green-700";default:return""}},o=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=l=>{e(l)};return b.jsxs("div",{className:"space-y-6",children:[b.jsxs(Os,{children:[b.jsxs(Qa,{className:"pb-3",children:[b.jsx(Ja,{children:"Browse Collaborative Stories"}),b.jsx(xh,{children:"Find and join existing collaborative stories"})]}),b.jsx(Fs,{children:b.jsxs("div",{className:"relative",children:[b.jsx(Gq,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),b.jsx(Du,{type:"search",placeholder:"Search by title, animal, theme...",className:"pl-8",value:n,onChange:l=>r(l.target.value)})]})})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("h3",{className:"text-lg font-medium",children:n?`Search Results (${i.length})`:"All Stories"}),i.length===0?b.jsx(Os,{className:"border-dashed",children:b.jsxs(Fs,{className:"pt-6 pb-6 text-center",children:[b.jsx(kB,{className:"mx-auto h-12 w-12 text-muted-foreground opacity-50 mb-2"}),b.jsx("p",{className:"text-sm text-muted-foreground",children:n?"No stories found matching your search.":"No collaborative stories have been created yet. Create the first one!"})]})}):b.jsx(hR,{className:"h-[400px]",children:b.jsx("div",{className:"space-y-4 pr-4",children:i.map(l=>b.jsx(Ude,{story:l,onJoin:a,formatDate:o,getStatusColor:s},l.id))})})]})]})}function Ude({story:t,onJoin:e,formatDate:n,getStatusColor:r}){return b.jsx(Os,{className:"overflow-hidden",children:b.jsxs("div",{className:"flex flex-col md:flex-row",children:[b.jsx("div",{className:"md:w-1/4 p-4 flex items-center justify-center bg-muted/30",children:b.jsx(Qo,{animal:t.animal,className:"w-24 h-24"})}),b.jsxs("div",{className:"md:w-3/4 flex flex-col",children:[b.jsx(Qa,{className:"pb-2",children:b.jsxs("div",{className:"flex justify-between items-start",children:[b.jsxs("div",{children:[b.jsx(Ja,{className:"text-lg",children:t.title}),b.jsxs(xh,{children:["Theme: ",t.theme,"  Created: ",n(t.createdAt)]})]}),b.jsx(Bw,{className:`${r(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]})}),b.jsxs(Fs,{className:"pb-2",children:[b.jsx("p",{className:"text-sm line-clamp-2",children:t.prompt}),b.jsxs("div",{className:"flex gap-2 mt-2 text-xs text-muted-foreground",children:[b.jsxs("span",{children:[t.segments.length," of ",t.contributionLimit," segments"]}),b.jsx("span",{children:""}),b.jsxs("span",{children:[t.collaborators.length," collaborators"]})]})]}),b.jsx(KC,{className:"pt-0 flex justify-end",children:b.jsxs(Cn,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>e(t.id),children:["Join Story ",b.jsx(jq,{className:"h-3 w-3"})]})})]})]})})}function Bde(){const[t,e]=T.useState("create"),{currentStory:n}=pR();return sn.useEffect(()=>{n&&t==="join"&&e("create")},[n,t]),b.jsxs("div",{className:"relative min-h-screen",children:[b.jsx(QC,{}),b.jsxs("div",{className:"container mx-auto px-4 py-8 relative z-10",children:[b.jsxs("header",{className:"text-center mb-8 pt-4",children:[b.jsx(Up,{to:"/",className:"mb-2 inline-block",children:b.jsx(Cn,{variant:"ghost",size:"sm",children:" Back to Stories"})}),b.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-primary mb-4",children:"Collaborative Stories"}),b.jsx("p",{className:"text-xl md:text-2xl text-secondary",children:"Create and collaborate on magical bedtime stories together"})]}),b.jsx("main",{className:"max-w-5xl mx-auto",children:b.jsxs(Fw,{defaultValue:"create",value:t,onValueChange:e,className:"mb-8",children:[b.jsxs(Ug,{className:"grid w-full grid-cols-2 mb-6",children:[b.jsx(Ya,{value:"create",children:n?"Continue Story":"Create New Story"}),b.jsx(Ya,{value:"join",children:"Browse Stories"})]}),b.jsx(qa,{value:"create",children:b.jsx(Ode,{})}),b.jsx(qa,{value:"join",children:b.jsx(Fde,{})})]})}),b.jsx("footer",{className:"text-center text-sm text-muted-foreground mt-12 pb-6",children:b.jsxs("p",{children:[" ",new Date().getFullYear()," Dreamy Tales. Sweet dreams!"]})})]})]})}function zde(){return b.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:b.jsx(Os,{className:"w-full max-w-md mx-4",children:b.jsxs(Fs,{className:"pt-6",children:[b.jsxs("div",{className:"flex mb-4 gap-2",children:[b.jsx(kB,{className:"h-8 w-8 text-red-500"}),b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),b.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Vde=I8([{path:"/",element:b.jsx(jue,{}),errorElement:b.jsx(zde,{})},{path:"/admin",element:b.jsx($ue,{})},{path:"/game",element:b.jsx(Yue,{})},{path:"/collaborative",element:b.jsx(Bde,{})}]);lF(document.getElementById("root")).render(b.jsx(y9,{client:_9,children:b.jsx(V8,{router:Vde})}));
